{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template/src//components/SettingsTab.vue?eb65","webpack://tavern_helper_template/src//components/ToolsTab.vue?3d1b","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src//.ts","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src//components/TableTab.vue?39d4","webpack://tavern_helper_template/src//components/MainPanel.vue?b9cf","src://tavern_helper_template/src//utils.ts","webpack://tavern_helper_template/src//components/MainPanel.vue?ed59","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/src//.ts","src://tavern_helper_template/src//settings.ts","webpack://tavern_helper_template/src//components/SummaryTab.vue?83e5","webpack://tavern_helper_template/src//components/TableTab.vue?2cc6","src://tavern_helper_template/external var \"z\"","webpack://tavern_helper_template/src//components/SettingsTab.vue?9850","webpack://tavern_helper_template/src//components/ToolsTab.vue?3a2f","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src//components/SummaryTab.vue?4873","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src//components/SettingsTab.vue","webpack://tavern_helper_template/src//components/SettingsTab.vue?98e0","src://tavern_helper_template/src//components/SummaryTab.vue","webpack://tavern_helper_template/src//components/SummaryTab.vue?b2eb","src://tavern_helper_template/src//components/TableTab.vue","webpack://tavern_helper_template/src//components/TableTab.vue?87a9","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/src//components/ToolsTab.vue","webpack://tavern_helper_template/src//components/ToolsTab.vue?1f04","src://tavern_helper_template/src//components/MainPanel.vue","webpack://tavern_helper_template/src//components/MainPanel.vue?932a","webpack://tavern_helper_template/src//.vue?b486","src://tavern_helper_template/src//.vue","src://tavern_helper_template/src//.ts","src://tavern_helper_template/src//index.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6568ff0b\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tools-tab[data-v-0c833396]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-0c833396]{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;background:linear-gradient(135deg,#2a2a2a 0%,#3a3a3a 100%);border-radius:8px;cursor:pointer;transition:all 0.3s ease;margin-bottom:15px;border:1px solid #3a3a3a}.section-header[data-v-0c833396]:hover{background:linear-gradient(135deg,#3a3a3a 0%,#4a4a4a 100%);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}.tool-content[data-v-0c833396]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:8px;padding:20px;margin-bottom:20px}.tool-instructions[data-v-0c833396]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.form-group[data-v-0c833396]{margin-bottom:15px}.button-group[data-v-0c833396]{display:flex;gap:12px;margin-bottom:20px}.output-section[data-v-0c833396]{margin-top:20px}.output-content[data-v-0c833396]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:6px;padding:15px;color:#e0e0e0;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;max-height:300px;overflow-y:auto}.output-actions[data-v-0c833396]{margin-top:12px;display:flex;gap:12px}.process-button[data-v-0c833396],.clear-button[data-v-0c833396],.generate-button[data-v-0c833396],.copy-button[data-v-0c833396]{position:relative;overflow:hidden;transition:all 0.3s ease}.process-button[data-v-0c833396]:hover:not(:disabled),.clear-button[data-v-0c833396]:hover:not(:disabled),.generate-button[data-v-0c833396]:hover:not(:disabled),.copy-button[data-v-0c833396]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.copy-button[data-v-0c833396]:hover{background:#218838 !important}.tool-instructions[data-v-0c833396]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.process-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.clear-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.generate-button:hover:not(:disabled) .shimmer-effect[data-v-0c833396],.copy-button:hover .shimmer-effect[data-v-0c833396]{left:100%}.process-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4)}.clear-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,0.4)}.generate-button[data-v-0c833396]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(23,162,184,0.4)}.copy-button[data-v-0c833396]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.process-button[data-v-0c833396]:disabled,.clear-button[data-v-0c833396]:disabled,.generate-button[data-v-0c833396]:disabled{opacity:0.6;cursor:not-allowed;transform:none}.process-button[data-v-0c833396]:disabled:hover,.clear-button[data-v-0c833396]:disabled:hover,.generate-button[data-v-0c833396]:disabled:hover{transform:none;box-shadow:none}.output-content[data-v-0c833396]::-webkit-scrollbar{width:6px}.output-content[data-v-0c833396]::-webkit-scrollbar-track{background:#1a1a1a;border-radius:3px}.output-content[data-v-0c833396]::-webkit-scrollbar-thumb{background:#3a3a3a;border-radius:3px}.output-content[data-v-0c833396]::-webkit-scrollbar-thumb:hover{background:#4a4a4a}@media (max-width:768px){.button-group[data-v-0c833396]{flex-direction:column}.output-actions[data-v-0c833396]{flex-direction:column}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/ToolsTab.vue\"],\"names\":[],\"mappings\":\"AA62CA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,iBAAkB,CAClB,0DAA6D,CAC7D,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,kBAAmB,CACnB,wBACF,CAEA,uCACE,0DAA6D,CAC7D,0BAA2B,CAC3B,qCACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAEA,6BACE,kBACF,CAEA,+BACE,YAAa,CACb,QAAS,CACT,kBACF,CAEA,iCACE,eACF,CAEA,iCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,oBAAqB,CACrB,gBAAiB,CACjB,eACF,CAEA,iCACE,eAAgB,CAChB,YAAa,CACb,QACF,CAGA,gIAIE,iBAAkB,CAClB,eAAgB,CAChB,wBACF,CAEA,qMAIE,0BAA2B,CAC3B,qCACF,CAEA,oCACE,6BACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAGA,qQAIE,SACF,CAEA,sDACE,0BAA2B,CAC3B,2CACF,CAEA,oDACE,0BAA2B,CAC3B,2CACF,CAEA,uDACE,0BAA2B,CAC3B,0CACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,6HAGE,WAAY,CACZ,kBAAmB,CACnB,cACF,CAEA,+IAGE,cAAe,CACf,eACF,CAGA,oDACE,SACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,gEACE,kBACF,CAGA,yBACE,+BACE,qBACF,CAEA,iCACE,qBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div class=\\\"section-header\\\" @click=\\\"toggleToolExpanded('antiCliche')\\\">\\n        <h4 style=\\\"margin: 0; color: #fff; font-size: 16px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-broom\\\" style=\\\"margin-right: 8px; color: #ff6b6b\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('antiCliche')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            //9200+\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             /NSFW\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"antiClicheInput\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"process-button\\\"\\n            :disabled=\\\"isProcessingAntiCliche || !antiClicheInput.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleAntiClicheProcess\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isProcessingAntiCliche ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearAntiClicheForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"antiClicheOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ antiClicheOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyAntiClicheResult\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div class=\\\"section-header\\\" @click=\\\"toggleToolExpanded('characterCard')\\\">\\n        <h4 style=\\\"margin: 0; color: #fff; font-size: 16px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-user-plus\\\" style=\\\"margin-right: 8px; color: #17a2b8\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('characterCard')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            AIYAML \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #17a2b8;\\n            \\\"\\n          >\\n             \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             \\\"\\\"AI\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"characterDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingCharacter || !characterDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateCharacterCard\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingCharacter ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearCharacterForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"characterCardOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ characterCardOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyCharacterCard\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  YAML </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"modifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingCharacter || !modifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyCharacterCard\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingCharacter ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { debounce } from 'lodash';\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref, watch } from 'vue';\\nimport { getScriptIdSafe } from '/utils';\\nimport { useSettingsStore } from '../settings';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst toolExpandedState = ref(new Map<string, boolean>());\\nconst antiClicheInput = ref('');\\nconst antiClicheOutput = ref('');\\nconst isProcessingAntiCliche = ref(false);\\nconst characterDescription = ref('');\\nconst characterCardOutput = ref('');\\nconst isGeneratingCharacter = ref(false);\\nconst modifyRequest = ref('');\\nconst isModifyingCharacter = ref(false);\\n\\n// \\nconst isDataLoaded = ref(false);\\n\\n// \\nconst loadToolsData = () => {\\n  try {\\n    isDataLoaded.value = false; // \\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      isDataLoaded.value = true;\\n      return;\\n    }\\n    const savedData = getVariables({ type: 'script', script_id });\\n\\n    console.log(' :', savedData);\\n\\n    // \\n    if (savedData.tools_antiCliche) {\\n      antiClicheInput.value = savedData.tools_antiCliche.input || '';\\n      antiClicheOutput.value = savedData.tools_antiCliche.output || '';\\n      console.log(' :', {\\n        input: antiClicheInput.value.substring(0, 50),\\n        output: antiClicheOutput.value.substring(0, 50),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_characterCard) {\\n      characterDescription.value = savedData.tools_characterCard.description || '';\\n      characterCardOutput.value = savedData.tools_characterCard.output || '';\\n      modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\\n      console.log(' :', {\\n        description: characterDescription.value.substring(0, 50),\\n        output: characterCardOutput.value.substring(0, 50),\\n        modifyRequest: modifyRequest.value.substring(0, 50),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_expandedState) {\\n      toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\\n      console.log(' :', Object.fromEntries(toolExpandedState.value));\\n    }\\n\\n    // \\n    setTimeout(() => {\\n      isDataLoaded.value = true;\\n      console.log(' ');\\n    }, 100);\\n  } catch (error) {\\n    console.error(' :', error);\\n    isDataLoaded.value = true;\\n  }\\n};\\n\\n// \\nconst saveToolsDataImmediate = () => {\\n  // \\n  if (!isDataLoaded.value) {\\n    console.log(' ');\\n    return;\\n  }\\n\\n  try {\\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      return;\\n    }\\n\\n    const dataToSave = {\\n      tools_antiCliche: {\\n        input: antiClicheInput.value,\\n        output: antiClicheOutput.value,\\n      },\\n      tools_characterCard: {\\n        description: characterDescription.value,\\n        output: characterCardOutput.value,\\n        modifyRequest: modifyRequest.value,\\n      },\\n      tools_expandedState: Object.fromEntries(toolExpandedState.value),\\n    };\\n\\n    insertOrAssignVariables(dataToSave, { type: 'script', script_id });\\n    console.log(' :', {\\n      antiCliche_input_length: antiClicheInput.value.length,\\n      antiCliche_output_length: antiClicheOutput.value.length,\\n      character_desc_length: characterDescription.value.length,\\n      character_output_length: characterCardOutput.value.length,\\n    });\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n};\\n\\n// 300ms\\nconst saveToolsData = debounce(saveToolsDataImmediate, 300);\\n\\n// \\nwatch(\\n  [antiClicheInput, antiClicheOutput, characterDescription, characterCardOutput, modifyRequest, toolExpandedState],\\n  () => {\\n    if (isDataLoaded.value) {\\n      console.log(' ...');\\n      saveToolsData();\\n    }\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonMounted(() => {\\n  console.log(' ToolsTab ...');\\n  loadToolsData();\\n});\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log(' ToolsTab ...');\\n  // \\n  saveToolsData.cancel();\\n  saveToolsDataImmediate();\\n});\\n\\n// \\nconst toggleToolExpanded = (toolName: string) => {\\n  console.log('toggleToolExpanded :', toolName);\\n  const current = toolExpandedState.value.get(toolName) || false;\\n  console.log(':', current);\\n  toolExpandedState.value.set(toolName, !current);\\n  console.log(':', !current);\\n};\\n\\n// \\nconst isToolExpanded = (toolName: string) => {\\n  return toolExpandedState.value.get(toolName) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string) => {\\n  console.log(' :', text.length);\\n  console.log(' iframe:', window.parent !== window);\\n\\n  // 1\\n  if (window.parent && window.parent !== window) {\\n    console.log(' ...');\\n    const parentSuccess = tryParentWindowCopy(text);\\n    if (parentSuccess) {\\n      console.log(' ');\\n      window.toastr.success(successMessage);\\n      return;\\n    } else {\\n      console.warn(' ');\\n    }\\n  }\\n\\n  // 2 execCommand \\n  try {\\n    console.log('  execCommand ...');\\n    const success = execCommandCopy(text);\\n    if (success) {\\n      console.log(' execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    } else {\\n      console.warn(' execCommand ');\\n    }\\n  } catch (error) {\\n    console.warn(' execCommand :', error);\\n  }\\n\\n  // 3 Clipboard API\\n  try {\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log('  Clipboard API ...');\\n      await navigator.clipboard.writeText(text);\\n\\n      // \\n      const clipboardContent = await navigator.clipboard.readText();\\n      if (clipboardContent === text) {\\n        console.log(' Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } else {\\n        console.warn(' Clipboard API ');\\n      }\\n    }\\n  } catch (error) {\\n    console.warn(' Clipboard API :', error);\\n  }\\n\\n  // \\n  console.log(' ');\\n  showManualCopyDialog(text);\\n};\\n\\n// \\nconst tryParentWindowCopy = (text: string): boolean => {\\n  try {\\n    if (window.parent && window.parent !== window) {\\n      console.log('   textarea...');\\n\\n      // \\n      const parentDoc = window.parent.document;\\n      const tempTextArea = parentDoc.createElement('textarea');\\n      tempTextArea.value = text;\\n\\n      // \\n      tempTextArea.style.cssText = `\\n        position: fixed !important;\\n        left: -9999px !important;\\n        top: -9999px !important;\\n        width: 1px !important;\\n        height: 1px !important;\\n        opacity: 0 !important;\\n        pointer-events: none !important;\\n      `;\\n      tempTextArea.setAttribute('readonly', '');\\n\\n      parentDoc.body.appendChild(tempTextArea);\\n      console.log('   Textarea');\\n\\n      // \\n      tempTextArea.focus();\\n      tempTextArea.select();\\n      tempTextArea.setSelectionRange(0, text.length);\\n      console.log('   ');\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n      console.log('   execCommand:', success);\\n\\n      // \\n      parentDoc.body.removeChild(tempTextArea);\\n      console.log('   Textarea');\\n\\n      return success;\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n  return false;\\n};\\n\\n// execCommand \\nconst execCommandCopy = (text: string): boolean => {\\n  try {\\n    console.log('   textarea...');\\n\\n    // \\n    const textArea = document.createElement('textarea');\\n    textArea.value = text;\\n\\n    // \\n    textArea.style.cssText = `\\n      position: fixed !important;\\n      left: -9999px !important;\\n      top: -9999px !important;\\n      width: 1px !important;\\n      height: 1px !important;\\n      opacity: 0 !important;\\n      pointer-events: none !important;\\n    `;\\n    textArea.setAttribute('readonly', '');\\n\\n    document.body.appendChild(textArea);\\n    console.log('   Textarea');\\n\\n    // \\n    textArea.focus();\\n    textArea.select();\\n    textArea.setSelectionRange(0, text.length);\\n    console.log('   ');\\n\\n    // \\n    const success = document.execCommand('copy');\\n    console.log('   execCommand:', success);\\n\\n    // \\n    document.body.removeChild(textArea);\\n    console.log('   Textarea');\\n\\n    return success;\\n  } catch (error) {\\n    console.error(' execCommand :', error);\\n    return false;\\n  }\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  try {\\n    console.log(' ');\\n\\n    // \\n    const targetDoc = window.parent && window.parent !== window ? window.parent.document : document;\\n    const targetBody = targetDoc.body;\\n\\n    console.log(' :', targetDoc === window.parent.document ? '' : '');\\n\\n    // \\n    const existingModal = targetDoc.getElementById('manual-copy-modal-tools');\\n    if (existingModal) {\\n      targetBody.removeChild(existingModal);\\n    }\\n\\n    // \\n    const modal = targetDoc.createElement('div');\\n    modal.id = 'manual-copy-modal-tools';\\n    modal.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      background: rgba(0, 0, 0, 0.9);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    const dialog = targetDoc.createElement('div');\\n    dialog.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffa500;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 700px;\\n      width: 90%;\\n      max-height: 80vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);\\n    `;\\n\\n    dialog.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffa500; font-size: 18px; font-weight: 600;\\\">\\n        <i class=\\\"fa-solid fa-copy\\\" style=\\\"margin-right: 8px;\\\"></i>\\n        \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #3a3a3a; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0; color: #e0e0e0; font-size: 14px; line-height: 1.6;\\\">\\n           \\n        </p>\\n        <ol style=\\\"margin: 8px 0 0 20px; padding: 0; color: #ccc; font-size: 13px;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px;\\\">Ctrl+C</kbd> </li>\\n        </ol>\\n      </div>\\n      <textarea\\n        readonly\\n        id=\\\"copyTextarea\\\"\\n        style=\\\"\\n          width: 100%;\\n          height: 300px;\\n          background: #1a1a1a;\\n          border: 2px solid #3a3a3a;\\n          border-radius: 6px;\\n          padding: 12px;\\n          color: #e0e0e0;\\n          font-size: 13px;\\n          font-family: 'Courier New', Consolas, monospace;\\n          resize: vertical;\\n          margin-bottom: 15px;\\n          box-sizing: border-box;\\n        \\\"\\n      >${text}</textarea>\\n      <div style=\\\"display: flex; gap: 12px; justify-content: flex-end;\\\">\\n        <button id=\\\"manualCopyBtn\\\" style=\\\"\\n          padding: 10px 20px;\\n          background: #28a745;\\n          border: none;\\n          border-radius: 6px;\\n          color: white;\\n          font-size: 14px;\\n          font-weight: 600;\\n          cursor: pointer;\\n          transition: background 0.2s;\\n        \\\"></button>\\n        <button id=\\\"closeBtn\\\" style=\\\"\\n          padding: 10px 20px;\\n          background: #6c757d;\\n          border: none;\\n          border-radius: 6px;\\n          color: white;\\n          font-size: 14px;\\n          font-weight: 600;\\n          cursor: pointer;\\n          transition: background 0.2s;\\n        \\\"></button>\\n      </div>\\n    `;\\n\\n    modal.appendChild(dialog);\\n    targetBody.appendChild(modal);\\n    console.log(' DOM');\\n\\n    // \\n    const textarea = dialog.querySelector('#copyTextarea') as HTMLTextAreaElement;\\n    setTimeout(() => {\\n      textarea.focus();\\n      textarea.select();\\n      console.log(' ');\\n    }, 100);\\n\\n    // \\n    const copyBtn = dialog.querySelector('#manualCopyBtn') as HTMLButtonElement;\\n    const closeBtn = dialog.querySelector('#closeBtn') as HTMLButtonElement;\\n\\n    copyBtn.onmouseover = () => (copyBtn.style.background = '#218838');\\n    copyBtn.onmouseout = () => (copyBtn.style.background = '#28a745');\\n    closeBtn.onmouseover = () => (closeBtn.style.background = '#5a6268');\\n    closeBtn.onmouseout = () => (closeBtn.style.background = '#6c757d');\\n\\n    copyBtn.onclick = () => {\\n      try {\\n        console.log(' ...');\\n        textarea.focus();\\n        textarea.select();\\n        const success = targetDoc.execCommand('copy');\\n        console.log(' :', success);\\n\\n        if (success) {\\n          window.toastr.success('');\\n          targetBody.removeChild(modal);\\n        } else {\\n          window.toastr.warning(' Ctrl+C ');\\n        }\\n      } catch (error) {\\n        console.error(' :', error);\\n        window.toastr.warning(' Ctrl+C ');\\n      }\\n    };\\n\\n    closeBtn.onclick = () => {\\n      console.log(' ');\\n      targetBody.removeChild(modal);\\n    };\\n\\n    // \\n    modal.onclick = e => {\\n      if (e.target === modal) {\\n        console.log(' ');\\n        targetBody.removeChild(modal);\\n      }\\n    };\\n\\n    // ESC\\n    const handleEsc = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log(' ESC');\\n        targetBody.removeChild(modal);\\n        targetDoc.removeEventListener('keydown', handleEsc);\\n      }\\n    };\\n    targetDoc.addEventListener('keydown', handleEsc);\\n\\n    window.toastr.info('', '', { timeOut: 3000 });\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handleAntiClicheProcess = async () => {\\n  if (!antiClicheInput.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isProcessingAntiCliche.value = true;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: `\\n\\n## \\n\\n\\n## \\n- \\n- \\n- \\n\\n## \\nxxx/xxx\\n****\\n\\n## \\nxxx/xxx//\\n**\\\"\\\"\\\"\\\"**\\n\\n## \\\"\\\"\\n\\\"\\\"\\n\\n## \\n- \\n- \\\"/\\\"\\n- \\\"\\\"\\n- \\n\\n## \\n- \\n- \\n- \\n\\n## //\\n- \\n- \\n- \\n- user\\n\\n## NSFW\\n- /\\n- \\n- \\n\\n## \\n\\n\\n\\n\\n\\n\\n\\n\\n\\nxxx\\n\\n****\\n1. \\n2. \\n3. \\n4. \\n5. \\n\\n`,\\n          },\\n          {\\n            role: 'user',\\n            content: antiClicheInput.value,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens || 8000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    antiClicheOutput.value = data.choices[0].message.content.trim();\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isProcessingAntiCliche.value = false;\\n  }\\n};\\n\\nconst copyAntiClicheResult = () => {\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(antiClicheOutput.value, '');\\n};\\n\\n// \\nconst handleGenerateCharacterCard = async () => {\\n  if (!characterDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingCharacter.value = true;\\n    window.toastr.info('AI...');\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        max_tokens: settings.value.max_tokens || 16000,\\n        temperature: 0.8,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: `\\n\\n****\\n-  YAML \\n- \\n- AI\\n- AI\\n\\n****\\n\\\\`\\\\`\\\\`yaml\\n:\\n  : \\\"\\\"\\n  : \\n  : \\\"YYYYMM\\\"\\n  : \\\"//\\\"\\n  : \\\"Alpha/Beta/Omega/\\\"\\n  : \\\"////\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    - 1: \\\"\\\"\\n    - 2: \\\"\\\"\\n    - 3: \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"/\\\"\\n  : [\\\"1\\\", \\\"2\\\"]\\n\\n:\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : [\\\"1\\\", \\\"2\\\", \\\"3\\\"]\\n  : \\\"TA\\\"\\n  : \\\"\\\"\\n  : \\\"TA\\\"\\n\\n:\\n  : \\\"{{user}}\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"\\\"\\n  : \\\"TA\\\"\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\\\`\\\\`\\\\`\\n\\n\\n1. \\n2. \\n3. TA\\n4. `,\\n          },\\n          {\\n            role: 'user',\\n            content: characterDescription.value,\\n          },\\n        ],\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    characterCardOutput.value = data.choices[0].message.content.trim();\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingCharacter.value = false;\\n  }\\n};\\n\\nconst clearCharacterForm = () => {\\n  characterDescription.value = '';\\n  characterCardOutput.value = '';\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\nconst copyCharacterCard = () => {\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(characterCardOutput.value, '');\\n};\\n\\n// \\nconst clearAntiClicheForm = () => {\\n  antiClicheInput.value = '';\\n  antiClicheOutput.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleModifyCharacterCard = async () => {\\n  if (!modifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingCharacter.value = true;\\n    window.toastr.info('AI...');\\n\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        max_tokens: settings.value.max_tokens || 16000,\\n        temperature: 0.8,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: ` YAML \\n\\n****\\n1.  YAML \\n2. \\n3. \\n4. \\n5. \\n6. \\n\\n****\\n- ////\\n- \\n- \\n- AI\\n\\n YAML `,\\n          },\\n          {\\n            role: 'user',\\n            content: `\\n\\n${characterCardOutput.value}\\n\\n---\\n\\n\\n${modifyRequest.value}`,\\n          },\\n        ],\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`HTTP error! status: ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    characterCardOutput.value = data.choices[0].message.content.trim();\\n    modifyRequest.value = ''; // \\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingCharacter.value = false;\\n  }\\n};\\n\\n// \\nconst clearModifyRequest = () => {\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n</script>\\n\\n<style scoped>\\n.tools-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 15px 20px;\\n  background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);\\n  border-radius: 8px;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  margin-bottom: 15px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\n.section-header:hover {\\n  background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);\\n  transform: translateY(-1px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n.tool-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 8px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n.form-group {\\n  margin-bottom: 15px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  margin-bottom: 20px;\\n}\\n\\n.output-section {\\n  margin-top: 20px;\\n}\\n\\n.output-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 15px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  line-height: 1.6;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  max-height: 300px;\\n  overflow-y: auto;\\n}\\n\\n.output-actions {\\n  margin-top: 12px;\\n  display: flex;\\n  gap: 12px;\\n}\\n\\n/*  */\\n.process-button,\\n.clear-button,\\n.generate-button,\\n.copy-button {\\n  position: relative;\\n  overflow: hidden;\\n  transition: all 0.3s ease;\\n}\\n\\n.process-button:hover:not(:disabled),\\n.clear-button:hover:not(:disabled),\\n.generate-button:hover:not(:disabled),\\n.copy-button:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\\n}\\n\\n.copy-button:hover {\\n  background: #218838 !important;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n/*  */\\n.process-button:hover:not(:disabled) .shimmer-effect,\\n.clear-button:hover:not(:disabled) .shimmer-effect,\\n.generate-button:hover:not(:disabled) .shimmer-effect,\\n.copy-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.process-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\n}\\n\\n.clear-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\\n}\\n\\n.generate-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.process-button:disabled,\\n.clear-button:disabled,\\n.generate-button:disabled {\\n  opacity: 0.6;\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n.process-button:disabled:hover,\\n.clear-button:disabled:hover,\\n.generate-button:disabled:hover {\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/*  */\\n.output-content::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.output-content::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb {\\n  background: #3a3a3a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb:hover {\\n  background: #4a4a4a;\\n}\\n\\n/*  */\\n@media (max-width: 768px) {\\n  .button-group {\\n    flex-direction: column;\\n  }\\n\\n  .output-actions {\\n    flex-direction: column;\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore), [\"storeToRefs\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.storeToRefs) });","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","module.exports = Vue;","import { useSettingsStore } from './settings';\n\n/**\n * \n */\nexport async function fetchAvailableModels(): Promise<string[]> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const apiUrl = settings.api_endpoint.trim();\n  console.log('URL:', apiUrl);\n\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    if (apiUrl.startsWith('/')) {\n      throw new Error(\n        `API  URL https://api.openai.com/v1/chat/completions${apiUrl}`,\n      );\n    }\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  //  models API \n  const possibleEndpoints = [\n    apiUrl.replace('/chat/completions', '/models'),\n    apiUrl.replace('/v1/chat/completions', '/v1/models'),\n    apiUrl + '/../models', // \n  ];\n\n  console.log(':', possibleEndpoints);\n\n  for (const modelsUrl of possibleEndpoints) {\n    try {\n      console.log(`: ${modelsUrl}`);\n\n      const response = await fetch(modelsUrl, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.api_key}`,\n        },\n      });\n\n      console.log('Response status:', response.status);\n\n      if (!response.ok) {\n        console.log(` ${modelsUrl}  ${response.status}...`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      if (!contentType || !contentType.includes('application/json')) {\n        console.log(` ${modelsUrl}  JSON ...`);\n        continue;\n      }\n\n      const data = await response.json();\n      console.log('API :', data);\n\n      // OpenAI  API \n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((model: any) => model.id || model.name).filter(Boolean);\n        console.log(':', models);\n        return models;\n      }\n\n      //  API \n      if (Array.isArray(data)) {\n        const models = data.map((model: any) => model.id || model.name).filter(Boolean);\n        console.log(':', models);\n        return models;\n      }\n\n      console.log('...');\n    } catch (e) {\n      console.log(` ${modelsUrl} :`, e);\n      continue;\n    }\n  }\n\n  throw new Error(' API  API ');\n}\n\n/**\n * \n * @param start_id \n * @param end_id \n * @returns \n */\nexport async function summarizeMessages(start_id: number, end_id: number): Promise<string> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  URL\n  const apiUrl = settings.api_endpoint.trim();\n  console.log('API URL:', apiUrl);\n\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    //  URL\n    if (apiUrl.startsWith('/')) {\n      throw new Error(\n        `API  URL https://api.openai.com/v1/chat/completions${apiUrl}`,\n      );\n    }\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  // \n  const messages: Array<{ role: string; message: string }> = [];\n  for (let i = start_id; i <= end_id; i++) {\n    const msg = getChatMessages(i);\n    if (msg.length > 0) {\n      messages.push(...msg);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  //  - \n  const summaryPrompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: summaryPrompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature,\n  });\n\n  //  OpenAI  API\n  let response;\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [\n          {\n            role: 'user',\n            content: summaryPrompt,\n          },\n        ],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n      }),\n    });\n  } catch (e) {\n    console.error('fetch :', e);\n    throw new Error(` API: ${(e as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    try {\n      const error = await response.json();\n      errorMessage = error.error?.message || error.message || errorMessage;\n    } catch (e) {\n      //  JSON\n      errorMessage = `API : ${response.status}`;\n    }\n    throw new Error(errorMessage);\n  }\n\n  const data = await response.json();\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n  return data.choices[0].message.content;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"21244321\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4f9c326d\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * \n *  Vue  API\n */\n\n//  script_id\nlet globalScriptId: string | null = null;\n\n//  script_id \nexport function getScriptIdSafe(): string | null {\n  if (!globalScriptId) {\n    try {\n      // \n      if (typeof getScriptId === 'function') {\n        globalScriptId = getScriptId();\n      }\n    } catch (e) {\n      console.warn(' script_id :', e);\n    }\n  }\n  return globalScriptId;\n}\n\n//  script_id\nexport function setGlobalScriptId(id: string) {\n  globalScriptId = id;\n}\n\n//  ID\nexport function getChatIdSafe(): string | null {\n  try {\n    //  getChatId \n    if (typeof (window as any).getChatId === 'function') {\n      return (window as any).getChatId();\n    }\n    //  getChatId \n    if (typeof (window as any).SillyTavern !== 'undefined' && (window as any).SillyTavern.getCurrentChatId) {\n      return (window as any).SillyTavern.getCurrentChatId();\n    }\n  } catch (e) {\n    console.warn(' chat_id :', e);\n  }\n  return null;\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.memory-panel-container[data-v-4ef9901c]{display:flex;flex-direction:column;height:100%;background:#1a1a1a;color:#e0e0e0}.panel-header[data-v-4ef9901c]{padding:15px 20px;background:#2a2a2a;border-bottom:1px solid #3a3a3a;display:flex;justify-content:space-between;align-items:center;border-radius:8px 8px 0 0}.header-left[data-v-4ef9901c]{display:flex;align-items:center;gap:10px}.close-button[data-v-4ef9901c]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.close-button[data-v-4ef9901c]:hover{background:rgba(255,255,255,0.1)}.panel-tabs[data-v-4ef9901c]{display:flex;background:#2a2a2a;border-bottom:1px solid #3a3a3a}.tab-item[data-v-4ef9901c]{flex:1;padding:12px 20px;cursor:pointer;text-align:center;transition:background 0.2s,color 0.2s;display:flex;align-items:center;justify-content:center;gap:8px;border-bottom:2px solid transparent}.tab-item[data-v-4ef9901c]:hover{background:rgba(255,255,255,0.05)}.tab-item.tab-active[data-v-4ef9901c]{background:#1a1a1a;color:#4a9eff;border-bottom-color:#4a9eff}.panel-content[data-v-4ef9901c]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0;min-height:0;scrollbar-width:thin;scrollbar-color:#4a9eff #2a2a2a}.panel-content[data-v-4ef9901c]::-webkit-scrollbar{width:8px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb:hover{background:#5ba8ff}.panel-content[data-v-4ef9901c]{scrollbar-width:thin !important;scrollbar-color:#4a9eff #2a2a2a !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar{width:8px !important;display:block !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-track{background:#2a2a2a !important;border-radius:4px !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb{background:#4a9eff !important;border-radius:4px !important}.panel-content[data-v-4ef9901c]::-webkit-scrollbar-thumb:hover{background:#5ba8ff !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/MainPanel.vue\"],\"names\":[],\"mappings\":\"AAgIA,yCACE,YAAa,CACb,qBAAsB,CACtB,WAAY,CACZ,kBAAmB,CACnB,aACF,CAEA,+BACE,iBAAkB,CAClB,kBAAmB,CACnB,+BAAgC,CAChC,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,yBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,+BACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,qCACE,gCACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,+BACF,CAEA,2BACE,MAAO,CACP,iBAAkB,CAClB,cAAe,CACf,iBAAkB,CAClB,qCAEY,CACZ,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,mCACF,CAEA,iCACE,iCACF,CAEA,sCACE,kBAAmB,CACnB,aAAc,CACd,2BACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,SAAU,CACV,YAAa,CACb,oBAAqB,CACrB,+BACF,CAEA,mDACE,SACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,+DACE,kBACF,CAGA,gCACE,+BAAgC,CAChC,0CACF,CAEA,mDACE,oBAAqB,CACrB,wBACF,CAEA,yDACE,6BAA8B,CAC9B,4BACF,CAEA,yDACE,6BAA8B,CAC9B,4BACF,CAEA,+DACE,6BACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"memory-panel-container\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a; color: #e0e0e0\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"panel-header\\\"\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: #2a2a2a;\\n        border-bottom: 1px solid #3a3a3a;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        border-radius: 8px 8px 0 0;\\n        flex-shrink: 0;\\n      \\\"\\n    >\\n      <div class=\\\"header-left\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span style=\\\"font-size: 24px\\\"></span>\\n        <b>mzrodyu</b>\\n      </div>\\n      <div\\n        class=\\\"close-button\\\"\\n        style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n        @click=\\\"closePanel\\\"\\n      >\\n        <i class=\\\"fa-solid fa-times\\\"></i>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-tabs\\\"\\n      style=\\\"display: flex; background: #2a2a2a; border-bottom: 1px solid #3a3a3a; flex-shrink: 0\\\"\\n    >\\n      <div\\n        v-for=\\\"tab in tabs\\\"\\n        :key=\\\"tab.key\\\"\\n        :class=\\\"{ 'tab-active': activeTab === tab.key }\\\"\\n        class=\\\"tab-item\\\"\\n        :style=\\\"{\\n          flex: '1',\\n          padding: '12px 20px',\\n          cursor: 'pointer',\\n          textAlign: 'center',\\n          transition: 'background 0.2s, color 0.2s',\\n          display: 'flex',\\n          alignItems: 'center',\\n          justifyContent: 'center',\\n          gap: '8px',\\n          borderBottom: '2px solid transparent',\\n          backgroundColor: activeTab === tab.key ? '#1a1a1a' : 'transparent',\\n          color: activeTab === tab.key ? '#4a9eff' : '#e0e0e0',\\n          borderBottomColor: activeTab === tab.key ? '#4a9eff' : 'transparent',\\n        }\\\"\\n        @click=\\\"switchTab(tab.key)\\\"\\n      >\\n        <i :class=\\\"tab.icon\\\"></i>\\n        {{ tab.label }}\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-content\\\"\\n      style=\\\"\\n        flex: 1;\\n        overflow-y: auto;\\n        overflow-x: hidden;\\n        padding: 0;\\n        min-height: 0;\\n        scrollbar-width: thin;\\n        scrollbar-color: #4a9eff #2a2a2a;\\n      \\\"\\n    >\\n      <component :is=\\\"currentComponent\\\" :key=\\\"activeTab\\\" v-bind=\\\"componentProps\\\" />\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, ref } from 'vue';\\nimport SettingsTab from './SettingsTab.vue';\\nimport SummaryTab from './SummaryTab.vue';\\nimport TableTab from './TableTab.vue';\\nimport ToolsTab from './ToolsTab.vue';\\n\\n// \\nconst tabs = [\\n  { key: 'summary', label: '', icon: 'fa-solid fa-list' },\\n  { key: 'table', label: '', icon: 'fa-solid fa-table' },\\n  { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\\n  { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\\n];\\n\\nconst activeTab = ref<'summary' | 'table' | 'settings' | 'tools'>('settings');\\n\\n// \\nconst componentMap = {\\n  summary: SummaryTab,\\n  table: TableTab,\\n  settings: SettingsTab,\\n  tools: ToolsTab,\\n};\\n\\n// \\nconst currentComponent = computed(() => componentMap[activeTab.value]);\\n\\n// \\nconst componentProps = computed(() => ({\\n  activeTab: activeTab.value,\\n}));\\n\\n// \\nconst switchTab = (tabKey: string) => {\\n  console.log(':', tabKey);\\n  activeTab.value = tabKey as any;\\n};\\n\\n// \\nconst closePanel = () => {\\n  $('#memoryManagementPanel').fadeOut(200);\\n};\\n</script>\\n\\n<style scoped>\\n.memory-panel-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.panel-header {\\n  padding: 15px 20px;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-radius: 8px 8px 0 0;\\n}\\n\\n.header-left {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.close-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.close-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.panel-tabs {\\n  display: flex;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.tab-item {\\n  flex: 1;\\n  padding: 12px 20px;\\n  cursor: pointer;\\n  text-align: center;\\n  transition:\\n    background 0.2s,\\n    color 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 8px;\\n  border-bottom: 2px solid transparent;\\n}\\n\\n.tab-item:hover {\\n  background: rgba(255, 255, 255, 0.05);\\n}\\n\\n.tab-item.tab-active {\\n  background: #1a1a1a;\\n  color: #4a9eff;\\n  border-bottom-color: #4a9eff;\\n}\\n\\n.panel-content {\\n  flex: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  padding: 0;\\n  min-height: 0;\\n  scrollbar-width: thin;\\n  scrollbar-color: #4a9eff #2a2a2a;\\n}\\n\\n.panel-content::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ba8ff;\\n}\\n\\n/*  */\\n.panel-content {\\n  scrollbar-width: thin !important;\\n  scrollbar-color: #4a9eff #2a2a2a !important;\\n}\\n\\n.panel-content::-webkit-scrollbar {\\n  width: 8px !important;\\n  display: block !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a !important;\\n  border-radius: 4px !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff !important;\\n  border-radius: 4px !important;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ba8ff !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","$(() => {\n  // \n  setTimeout(() => {\n    let isAdding = false;\n\n    const addNavButton = () => {\n      // \n      if (isAdding) {\n        return;\n      }\n      isAdding = true;\n      try {\n        // \n        const possibleSelectors = [\n          '#top-bar', //  HTML \n          '#top-settings-holder', //  HTML \n          '#topBar',\n          '.topBar',\n          '#navbar',\n          '.navbar',\n          'header',\n          '.header',\n          '#header',\n          '.top_header',\n          '.navigation',\n        ];\n\n        let topBar: JQuery<HTMLElement> = $();\n        let foundSelector = '';\n\n        for (const selector of possibleSelectors) {\n          const found = $(selector);\n          if (found.length > 0) {\n            topBar = found;\n            foundSelector = selector;\n            console.log(`: ${selector}`);\n            break;\n          }\n        }\n\n        if (topBar.length === 0) {\n          console.log('500ms...');\n          setTimeout(addNavButton, 500);\n          return;\n        }\n\n        console.log(`: ${foundSelector}`);\n\n        // \n        const existingButton = $('#memoryNavButton');\n        if (existingButton.length > 0) {\n          console.log('mzrodyu');\n          existingButton.remove();\n        }\n\n        //  -  top-bar top-settings-holder\n        let targetContainer = topBar;\n        if (foundSelector === '#top-bar') {\n          const settingsHolder = $('#top-settings-holder');\n          if (settingsHolder.length > 0) {\n            targetContainer = settingsHolder;\n            console.log(' top-settings-holder ');\n          }\n        }\n\n        //  - \n        const navButton = $(\n          `<div id=\"memoryNavButton\" class=\"interactable\" style=\"\n            padding: 8px;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            color: inherit;\n            border-radius: 4px;\n            transition: background 0.2s;\n            position: relative;\n          \" title=\"mzrodyu\">\n            <span style=\"font-size: 24px\"></span>\n          </div>`,\n        );\n\n        // \n        console.log(':', targetContainer[0]?.id || '');\n        console.log('HTML:', targetContainer[0]?.outerHTML?.substring(0, 300));\n\n        //  targetContainer  top-settings-holder\n        if (targetContainer[0]?.id === 'top-settings-holder') {\n          console.log(' top-settings-holder ');\n          const firstChild = targetContainer.children().first();\n          if (firstChild.length > 0) {\n            navButton.insertBefore(firstChild);\n          } else {\n            targetContainer.prepend(navButton);\n          }\n        } else {\n          // \n          console.log('');\n          targetContainer.prepend(navButton);\n        }\n\n        //  - \n        navButton.on('click', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          console.log('mzrodyu');\n\n          // \n          const panel = $('#memoryManagementPanel');\n          if (panel.length > 0) {\n            if (panel.is(':visible')) {\n              panel.fadeOut(200);\n            } else {\n              panel.fadeIn(200);\n            }\n          } else {\n            toastr.error('');\n          }\n        });\n\n        // \n        navButton\n          .on('mouseenter', function () {\n            $(this).css('background', 'rgba(255, 255, 255, 0.1)');\n          })\n          .on('mouseleave', function () {\n            $(this).css('background', 'transparent');\n          });\n\n        console.log('mzrodyu:', targetContainer[0]?.id || '');\n        console.log(':', navButton[0]?.parentElement?.children?.[0]?.className || '');\n        console.log(':', navButton[0]);\n        console.log(':', $('#memoryManagementPanel').length);\n        isAdding = false;\n      } catch (error) {\n        console.error(':', error);\n        isAdding = false;\n        setTimeout(addNavButton, 500);\n      }\n    };\n\n    // \n    addNavButton();\n\n    // 2\n    setInterval(() => {\n      const button = $('#memoryNavButton');\n      if (button.length === 0 && !isAdding) {\n        console.log('...');\n        addNavButton();\n      }\n    }, 2000);\n\n    // UI\n    if (typeof eventOn === 'function') {\n      try {\n        // \n        eventOn(tavern_events.CHAT_CHANGED, () => {\n          console.log('...');\n          setTimeout(() => {\n            const button = $('#memoryNavButton');\n            if (button.length === 0 && !isAdding) {\n              console.log('...');\n              addNavButton();\n            }\n          }, 500);\n        });\n      } catch (e) {\n        console.log(':', e);\n      }\n    }\n  }, 300);\n});\n","import { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { ref, watch } from 'vue';\nimport { getChatIdSafe, getScriptIdSafe } from './utils';\n\n//  zod\nlet z: any;\ntry {\n  z = require('zod');\n} catch (e) {\n  console.warn('zod ');\n  // \n  z = {\n    object: (obj: any) => ({\n      parse: (data: any) => data,\n      default: (def: any) => ({ parse: (data: any) => data || def }),\n    }),\n    string: () => ({ default: (def: string) => ({ parse: (data: any) => data || def }) }),\n    number: () => ({ default: (def: number) => ({ parse: (data: any) => data || def }) }),\n    boolean: () => ({ default: (def: boolean) => ({ parse: (data: any) => data || def }) }),\n    array: (schema: any) => ({\n      default: (def: any[]) => ({ parse: (data: any) => (Array.isArray(data) ? data : def) }),\n    }),\n    prefault: (def: any) => ({ parse: (data: any) => data || def }),\n  };\n}\n\nconst Settings = z\n  .object({\n    api_endpoint: z.string().default('https://api.openai.com/v1/chat/completions'),\n    api_key: z.string().default(''),\n    model: z.string().default('gpt-4o-mini'),\n    max_tokens: z.number().default(4000),\n    temperature: z.number().default(0.7),\n    auto_summarize_enabled: z.boolean().default(false),\n    summarize_interval: z.number().default(50), // \n    start_message_id: z.number().default(0), // \n    end_message_id: z.number().default(0), // \n    table_start_message_id: z.number().default(0), // \n    table_end_message_id: z.number().default(0), // \n    summary_history: z\n      .array(\n        z.object({\n          start_id: z.number(),\n          end_id: z.number(),\n          content: z.string(),\n        }),\n      )\n      .default([]),\n  })\n  .prefault({});\n\nexport const useSettingsStore = defineStore('settings', () => {\n  // \n  const getScriptIdSafely = () => getScriptIdSafe();\n\n  // \n  const initSettings = () => {\n    const script_id = getScriptIdSafely();\n\n    if (!script_id) {\n      console.warn('script_id  null');\n      return ref(Settings.parse({}));\n    }\n\n    try {\n      return ref(Settings.parse(getVariables({ type: 'script', script_id })));\n    } catch (e) {\n      console.warn(':', e);\n      return ref(Settings.parse({}));\n    }\n  };\n\n  const settings = initSettings();\n\n  // \n  setTimeout(() => {\n    const script_id = getScriptIdSafely();\n    if (script_id) {\n      try {\n        const realVariables = getVariables({ type: 'script', script_id });\n        if (realVariables && Object.keys(realVariables).length > 0) {\n          settings.value = Settings.parse(realVariables);\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n    }\n  }, 200);\n\n  // \n  let saveTimeout: number | null = null;\n  const debouncedSave = (new_settings: any) => {\n    if (saveTimeout) {\n      clearTimeout(saveTimeout);\n    }\n    saveTimeout = setTimeout(() => {\n      const script_id = getScriptIdSafely();\n      if (!script_id) {\n        console.warn('script_id  null');\n        return;\n      }\n      try {\n        console.log(' :', new_settings);\n        insertOrAssignVariables(klona(new_settings), { type: 'script', script_id });\n\n        // \n        setTimeout(() => {\n          try {\n            const saved = getVariables({ type: 'script', script_id });\n            console.log(' :', saved);\n          } catch (e) {\n            console.error(' :', e);\n          }\n        }, 100);\n      } catch (e) {\n        console.error(' :', e);\n        window.toastr?.error(': ' + (e as Error).message);\n      }\n    }, 500); // 500ms \n  };\n\n  watch(settings, debouncedSave, { immediate: false, deep: true });\n\n  // \n  const saveSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      window.toastr?.error('script_id ');\n      return false;\n    }\n    try {\n      console.log(' :', settings.value);\n      insertOrAssignVariables(klona(settings.value), { type: 'script', script_id });\n      window.toastr?.success('');\n      return true;\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n      return false;\n    }\n  };\n\n  // \n  const reloadSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return false;\n    }\n    try {\n      const realVariables = getVariables({ type: 'script', script_id });\n      if (realVariables && Object.keys(realVariables).length > 0) {\n        settings.value = Settings.parse(realVariables);\n        console.log(' :', settings.value);\n        window.toastr?.success('');\n        return true;\n      }\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n    return false;\n  };\n\n  return {\n    settings,\n    saveSettings,\n    reloadSettings,\n  };\n});\n\n//  Store - \nexport const useSummaryHistoryStore = defineStore('summaryHistory', () => {\n  const addSummary = (start_id: number, end_id: number, content: string) => {\n    try {\n      //  ID\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        console.error(' ID');\n        window.toastr.error('');\n        return;\n      }\n\n      console.log(':', chat_id);\n\n      // \n      let chatHistory: Array<{ start_id: number; end_id: number; content: string }> = [];\n      try {\n        const chatData = getVariables({ type: 'chat' });\n        if (chatData && chatData.summary_history) {\n          chatHistory = Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n\n      // \n      chatHistory.unshift({\n        start_id,\n        end_id,\n        content,\n      });\n\n      //  50 \n      if (chatHistory.length > 50) {\n        chatHistory = chatHistory.slice(0, 50);\n      }\n\n      // \n      insertOrAssignVariables({ summary_history: chatHistory }, { type: 'chat' });\n\n      console.log(':', chat_id);\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n    }\n  };\n\n  const getSummaryHistory = (): Array<{ start_id: number; end_id: number; content: string }> => {\n    try {\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        return [];\n      }\n\n      const chatData = getVariables({ type: 'chat' });\n      if (chatData && chatData.summary_history) {\n        return Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n      }\n      return [];\n    } catch (e) {\n      console.warn(':', e);\n      return [];\n    }\n  };\n\n  return {\n    addSummary,\n    getSummaryHistory,\n  };\n});\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"71e28e20\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-tab[data-v-0416f1c6]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-0416f1c6]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-0416f1c6]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.count-badge[data-v-0416f1c6]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-0416f1c6]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-0416f1c6]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-0416f1c6]{margin:10px 0;font-size:14px}.empty-state small[data-v-0416f1c6]{color:#666;font-size:12px}.history-list[data-v-0416f1c6]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-0416f1c6]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-0416f1c6]:hover{border-color:#4a4a4a}.history-header[data-v-0416f1c6]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-0416f1c6]:hover{background:#2a2a2a}.history-info[data-v-0416f1c6]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-0416f1c6]{color:#4a9eff;font-weight:bold}.history-range[data-v-0416f1c6]{color:#888;font-size:12px}.expand-icon[data-v-0416f1c6]{color:#888;font-size:12px}.history-content[data-v-0416f1c6]{padding:15px;background:#2a2a2a}.history-actions[data-v-0416f1c6]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-0416f1c6]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-0416f1c6]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-0416f1c6]:hover{background:#ff4444;border-color:#ff4444;color:white}.table-display[data-v-0416f1c6]{margin-top:15px;overflow-x:auto;max-height:400px;overflow-y:auto;border-radius:6px;background:#1a1a1a}.table-display table[data-v-0416f1c6]{width:100%;font-size:12px;border-collapse:collapse}.table-display th[data-v-0416f1c6],.table-display td[data-v-0416f1c6]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;padding:8px;border:1px solid #444}.table-display th[data-v-0416f1c6]{background:#2a2a2a;font-weight:bold;color:#fff}.table-display td[data-v-0416f1c6]{color:#e0e0e0}.copy-button:hover .shimmer-effect[data-v-0416f1c6],.delete-button:hover .shimmer-effect[data-v-0416f1c6]{left:100%}.copy-button[data-v-0416f1c6]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.delete-button[data-v-0416f1c6]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(255,107,107,0.4)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/TableTab.vue\"],\"names\":[],\"mappings\":\"AAomBA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,sCACE,UAAW,CACX,cAAe,CACf,wBACF,CAEA,sEAEE,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CAChB,WAAY,CACZ,qBACF,CAEA,mCACE,kBAAmB,CACnB,gBAAiB,CACjB,UACF,CAEA,mCACE,aACF,CAGA,0GAEE,SACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,sCACE,0BAA2B,CAC3B,2CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"table-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <span\\n        v-if=\\\"table_history.length > 0\\\"\\n        class=\\\"count-badge\\\"\\n        style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >{{ table_history.length }} </span\\n      >\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"table_history && table_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in table_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleTableExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{\\n            isTableExpanded(index) ? '' : ''\\n          }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isTableExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"\\n              display: flex;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n              flex-wrap: wrap;\\n            \\\"\\n          >\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyTable(item)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"delete-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"deleteTable(index)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n          </div>\\n          <div class=\\\"table-display\\\" style=\\\"overflow-x: auto; border-radius: 6px; border: 1px solid #3a3a3a\\\">\\n            <table style=\\\"width: 100%; border-collapse: collapse; background: #1a1a1a\\\">\\n              <thead style=\\\"background: #2a2a2a\\\">\\n                <tr>\\n                  <th\\n                    v-for=\\\"(header, idx) in item.headers\\\"\\n                    :key=\\\"idx\\\"\\n                    style=\\\"\\n                      padding: 12px 16px;\\n                      text-align: left;\\n                      font-weight: bold;\\n                      color: #fff;\\n                      border-bottom: 2px solid #3a3a3a;\\n                      border-right: 1px solid #3a3a3a;\\n                    \\\"\\n                  >\\n                    {{ header }}\\n                  </th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr v-for=\\\"(row, rowIdx) in item.data\\\" :key=\\\"rowIdx\\\" style=\\\"border-bottom: 1px solid #3a3a3a\\\">\\n                  <td\\n                    v-for=\\\"(cell, cellIdx) in row\\\"\\n                    :key=\\\"cellIdx\\\"\\n                    style=\\\"padding: 10px 16px; color: #e0e0e0; border-right: 1px solid #3a3a3a\\\"\\n                  >\\n                    {{ cell }}\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-table\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { getChatIdSafe } from '../utils';\\n\\n// \\nconst table_history = ref<Array<{ start_id: number; end_id: number; headers: string[]; data: string[][] }>>([]);\\nconst tableExpandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshTableHistory = () => {\\n  try {\\n    const chat_id = getChatIdSafe();\\n    if (!chat_id) {\\n      console.warn('ID');\\n      table_history.value = [];\\n      return;\\n    }\\n\\n    const chat_vars = getVariables({ type: 'chat' });\\n    console.log(':', chat_vars);\\n    console.log(':', chat_vars.table_history);\\n\\n    table_history.value = chat_vars.table_history || [];\\n    console.log(':', table_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    table_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleTableExpanded = (index: number) => {\\n  const current = tableExpandedState.value.get(index) || false;\\n  tableExpandedState.value.set(index, !current);\\n};\\n\\nconst isTableExpanded = (index: number) => {\\n  return tableExpandedState.value.get(index) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copyTable = (tableItem: { headers: string[]; data: string[][] }) => {\\n  try {\\n    // TSV\\n    const tsv = [tableItem.headers.join('\\\\t'), ...tableItem.data.map(row => row.join('\\\\t'))].join('\\\\n');\\n    copyToClipboard(tsv, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('');\\n  }\\n};\\n\\n// \\nconst deleteTable = (index: number) => {\\n  if (confirm('')) {\\n    table_history.value.splice(index, 1);\\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\n// \\nrefreshTableHistory();\\n</script>\\n\\n<style scoped>\\n.table-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.table-display {\\n  margin-top: 15px;\\n  overflow-x: auto;\\n  max-height: 400px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  background: #1a1a1a;\\n}\\n\\n.table-display table {\\n  width: 100%;\\n  font-size: 12px;\\n  border-collapse: collapse;\\n}\\n\\n.table-display th,\\n.table-display td {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-width: 200px;\\n  padding: 8px;\\n  border: 1px solid #444;\\n}\\n\\n.table-display th {\\n  background: #2a2a2a;\\n  font-weight: bold;\\n  color: #fff;\\n}\\n\\n.table-display td {\\n  color: #e0e0e0;\\n}\\n\\n/*  */\\n.copy-button:hover .shimmer-effect,\\n.delete-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.delete-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","if(typeof z === 'undefined') { var e = new Error(\"Cannot find module 'z'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }\n\nmodule.exports = z;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.settings-tab{height:100%;overflow-y:auto;padding:25px !important;background:#1a1a1a !important;border:2px solid red !important}.config-section{padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.config-section:last-child{border-bottom:none;margin-bottom:0}.config-section h3{margin:0 0 20px 0 !important;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.form-group{margin-bottom:18px !important}.form-group label{display:block;margin-bottom:6px;color:#ccc;font-size:13px}.checkbox-label{display:flex;align-items:center;gap:8px}.flex-label{display:flex;justify-content:space-between;align-items:center}.form-group input[type='text'],.form-group input[type='password'],.form-group input[type='number'],.form-group select{width:100%;padding:10px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;color:#e0e0e0;font-size:13px;transition:border-color 0.2s}.form-group input:focus,.form-group select:focus{outline:none;border-color:#4a9eff}.model-controls{display:flex;flex-direction:column;gap:10px}.button-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:5px}.action-button{flex:1;min-width:120px;padding:12px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.action-button:hover{background:#4a4a4a;border-color:#5a5a5a}.test-button{background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.test-button:hover{background:#4a4a4a;border-color:#5a5a5a}.fetch-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.fetch-button:hover{background:#5aaeff;border-color:#6abeff}.summarize-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.summarize-button:hover{background:#5aaeff;border-color:#6abeff}.create-button{background:#51cf66;color:white;border:1px solid #40c057}.create-button:hover{background:#40c057;border-color:#37b24d}.table-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.table-button:hover{background:#5aaeff;border-color:#6abeff}.hide-button{background:#ff6b6b;color:white;border:1px solid #ff5252}.hide-button:hover{background:#ff5252;border-color:#ff4444}.unhide-button{background:#51cf66;color:white;border:1px solid #40c057}.unhide-button:hover{background:#40c057;border-color:#37b24d}.refresh-button{background:#ffd43b;color:#333;border:1px solid #ffcc02}.refresh-button:hover{background:#ffcc02;border-color:#ffb700}.action-button:disabled{opacity:0.5;cursor:not-allowed}.model-select{margin-top:8px}.hidden-messages-section{margin-top:20px}.hidden-messages-list{max-height:300px;overflow-y:auto;border-radius:6px;border:1px solid #3a3a3a;background:#1a1a1a}.hidden-message-item{padding:10px 12px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #2a2a2a;transition:background 0.2s}.hidden-message-item:last-child{border-bottom:none}.hidden-message-item:hover{background:#2a2a2a}.message-info{display:flex;align-items:center;gap:10px;flex:1}.message-id{font-weight:bold;color:#4a9eff;font-size:13px;min-width:50px}.message-role{font-size:12px;padding:2px 8px;border-radius:4px;white-space:nowrap}.message-role.role-user{background:#3a5a3a;color:#90ee90}.message-role.role-assistant{background:#3a3a5a;color:#90a0ee}.message-role.role-system{background:#5a5a3a;color:#eea090}.message-preview{flex:1;color:#888;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.show-button{background:#4a9eff !important;color:white !important;padding:6px 12px;border:1px solid #5aaeff !important;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s;min-width:60px;text-align:center}.show-button:hover{background:#5aaeff !important;border-color:#6abeff !important}.mini-button{background:#666;color:white;border:1px solid #777;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s}.mini-button:hover{background:#777;border-color:#888}.empty-state{margin-top:20px;padding:20px;background:#2a2a2a;border-radius:6px;text-align:center;color:#888;border:1px solid #3a3a3a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/SettingsTab.vue\"],\"names\":[],\"mappings\":\"AA2xDA,cACE,WAAY,CACZ,eAAgB,CAChB,uBAAwB,CACxB,6BAA8B,CAC9B,+BACF,CAEA,gBACE,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,2BACE,kBAAmB,CACnB,eACF,CAEA,mBACE,4BAA6B,CAC7B,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,6BACF,CAEA,kBACE,aAAc,CACd,iBAAkB,CAClB,UAAW,CACX,cACF,CAEA,gBACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,sHAIE,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,4BACF,CAEA,iDAEE,YAAa,CACb,oBACF,CAEA,gBACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,cACE,YAAa,CACb,QAAS,CACT,cAAe,CACf,cACF,CAEA,eACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cAAe,CACf,mBAAoB,CACpB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,kBACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,wBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,gBACE,kBAAmB,CACnB,UAAW,CACX,wBACF,CAEA,sBACE,kBAAmB,CACnB,oBACF,CAEA,wBACE,WAAY,CACZ,kBACF,CAEA,cACE,cACF,CAEA,yBACE,eACF,CAEA,sBACE,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,wBAAyB,CACzB,kBACF,CAEA,qBACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,+BAAgC,CAChC,0BACF,CAEA,gCACE,kBACF,CAEA,2BACE,kBACF,CAEA,cACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,YACE,gBAAiB,CACjB,aAAc,CACd,cAAe,CACf,cACF,CAEA,cACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,wBACE,kBAAmB,CACnB,aACF,CAEA,6BACE,kBAAmB,CACnB,aACF,CAEA,0BACE,kBAAmB,CACnB,aACF,CAEA,iBACE,MAAO,CACP,UAAW,CACX,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,aACE,6BAA8B,CAC9B,sBAAuB,CACvB,gBAAiB,CACjB,mCAAoC,CACpC,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBAAoB,CACpB,cAAe,CACf,iBACF,CAEA,mBACE,6BAA8B,CAC9B,+BACF,CAEA,aACE,eAAgB,CAChB,WAAY,CACZ,qBAAsB,CACtB,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBACF,CAEA,mBACE,eAAgB,CAChB,iBACF,CAEA,aACE,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"settings-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!-- API  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         API \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API </label>\\n        <input\\n          v-model=\\\"settings.api_endpoint\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"https://your-api.com/v1/chat/completions\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API Key</label>\\n        <input\\n          v-model=\\\"settings.api_key\\\"\\n          type=\\\"password\\\"\\n          placeholder=\\\"sk-...\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\">\\n        <div class=\\\"model-controls\\\" style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n            <button\\n              class=\\\"test-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #4a4a4a;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: #3a3a3a;\\n                color: #e0e0e0;\\n              \\\"\\n              @click=\\\"handleTestButton\\\"\\n            >\\n              ()\\n            </button>\\n            <button\\n              :disabled=\\\"loading_models\\\"\\n              class=\\\"fetch-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                min-width: 120px;\\n                padding: 12px 16px;\\n                border: 1px solid #5aaeff;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-weight: 500;\\n                font-size: 13px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                background: #4a9eff;\\n                color: white;\\n              \\\"\\n              @click=\\\"handle_fetch_models\\\"\\n            >\\n              {{ loading_models ? '...' : '' }}\\n            </button>\\n          </div>\\n        </div>\\n        <input\\n          v-if=\\\"available_models.length === 0\\\"\\n          v-model=\\\"settings.model\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"gpt-4o-mini\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <select\\n          v-else\\n          v-model=\\\"settings.model\\\"\\n          class=\\\"model-select\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        >\\n          <option v-for=\\\"model in available_models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n        </select>\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          > Token 4000</label\\n        >\\n        <input\\n          v-model.number=\\\"settings.max_tokens\\\"\\n          type=\\\"number\\\"\\n          min=\\\"100\\\"\\n          max=\\\"16000\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"> (0-2)</label>\\n        <input\\n          v-model.number=\\\"settings.temperature\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          max=\\\"2\\\"\\n          step=\\\"0.1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label\\n          class=\\\"checkbox-label\\\"\\n          style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px\\\"\\n        >\\n          <input v-model=\\\"settings.auto_summarize_enabled\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px\\\" />\\n          \\n        </label>\\n      </div>\\n      <div v-if=\\\"settings.auto_summarize_enabled\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.summarize_interval\\\"\\n          type=\\\"number\\\"\\n          min=\\\"1\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n        <div style=\\\"margin-top: 10px; display: flex; gap: 10px\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleSaveSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleReloadSettings\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 12px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n            onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n            @click=\\\"handleResetAutoSummaryStart\\\"\\n          >\\n             \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button test-button\\\"\\n          :disabled=\\\"is_summarizing\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #4a4a4a;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #3a3a3a;\\n            color: #e0e0e0;\\n          \\\"\\n          @click=\\\"handle_test_connection\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plug\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_summarizing || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #4a9eff;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_summarize\\\"\\n        >\\n          <i v-if=\\\"!is_summarizing\\\" class=\\\"fa-solid fa-magic\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_summarizing ? '...' : '' }}\\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_start_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <input\\n          v-model.number=\\\"settings.table_end_message_id\\\"\\n          type=\\\"number\\\"\\n          min=\\\"0\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 8px; margin-bottom: 8px\\\">\\n          <select\\n            v-model=\\\"selectedTemplate\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n            @change=\\\"loadTemplate\\\"\\n          >\\n            <option value=\\\"\\\">...</option>\\n            <option v-for=\\\"(template, index) in headerTemplates\\\" :key=\\\"index\\\" :value=\\\"index\\\">\\n              {{ template.name }}\\n            </option>\\n          </select>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #4a9eff;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"showAddTemplateDialog\\\"\\n          >\\n            <i class=\\\"fa-solid fa-plus\\\"></i> \\n          </button>\\n        </div>\\n        <div v-if=\\\"selectedTemplate !== ''\\\" style=\\\"display: flex; gap: 8px\\\">\\n          <input\\n            v-model=\\\"currentTemplate.name\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 1;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <input\\n            v-model=\\\"currentTemplate.headers\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              flex: 2;\\n              padding: 8px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n            \\\"\\n          />\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #28a745;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"saveTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-save\\\"></i> \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 12px;\\n              background: #dc3545;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              cursor: pointer;\\n              font-size: 12px;\\n              white-space: nowrap;\\n            \\\"\\n            @click=\\\"deleteTemplate\\\"\\n          >\\n            <i class=\\\"fa-solid fa-trash\\\"></i> \\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n        <div style=\\\"display: flex; gap: 12px; align-items: center\\\">\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_summarizing ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n            <div\\n              :style=\\\"{\\n                width: '8px',\\n                height: '8px',\\n                borderRadius: '50%',\\n                backgroundColor: is_generating_table ? '#ff6b6b' : '#4caf50',\\n                transition: 'background-color 0.3s',\\n              }\\\"\\n            ></div>\\n            <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n          </div>\\n          <div v-if=\\\"is_summarizing || is_generating_table\\\" style=\\\"margin-left: auto\\\">\\n            <button\\n              style=\\\"\\n                padding: 4px 8px;\\n                background: #dc3545;\\n                border: none;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 11px;\\n              \\\"\\n              @click=\\\"stopGeneration\\\"\\n            >\\n              <i class=\\\"fa-solid fa-stop\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button summarize-button\\\"\\n          :disabled=\\\"is_generating_table || !settings.api_key\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #5aaeff;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #4a9eff;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_generate_table\\\"\\n        >\\n          <i v-if=\\\"!is_generating_table\\\" class=\\\"fa-solid fa-robot\\\"></i>\\n          <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n          {{ is_generating_table ? 'AI...' : 'AI' }}\\n        </button>\\n        <button\\n          class=\\\"action-button create-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #51cf66;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_create_table\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0 0 20px 0 !important;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n        <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n          >1-10 5</label\\n        >\\n        <input\\n          v-model=\\\"hide_range\\\"\\n          type=\\\"text\\\"\\n          placeholder=\\\"1-10\\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 10px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            transition: border-color 0.2s;\\n          \\\"\\n        />\\n      </div>\\n      <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ff5252;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ff6b6b;\\n            color: white;\\n          \\\"\\n          @click=\\\"handle_hide_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye-slash\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #40c057;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #51cf66;\\n            color: white;\\n          \\\"\\n          :disabled=\\\"!hide_range.trim()\\\"\\n          @click=\\\"handle_show_messages\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eye\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"action-button\\\"\\n          style=\\\"\\n            flex: 1;\\n            min-width: 120px;\\n            padding: 12px 16px;\\n            border: 1px solid #ffcc02;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-weight: 500;\\n            font-size: 13px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            gap: 6px;\\n            background: #ffd43b;\\n            color: #333;\\n          \\\"\\n          @click=\\\"() => handle_refresh_hidden(true)\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n      </div>\\n\\n      <!--  -->\\n      <div v-if=\\\"hidden_messages.length > 0\\\" class=\\\"hidden-messages-section\\\">\\n        <div class=\\\"form-group\\\">\\n          <label class=\\\"flex-label\\\">\\n            <span> ({{ hidden_messages.length }} )</span>\\n            <button class=\\\"mini-button\\\" @click=\\\"hidden_display_expanded = !hidden_display_expanded\\\">\\n              {{ hidden_display_expanded ? '' : '' }}\\n            </button>\\n          </label>\\n        </div>\\n        <div v-if=\\\"hidden_display_expanded\\\" class=\\\"hidden-messages-list\\\">\\n          <div v-for=\\\"msg in hidden_messages\\\" :key=\\\"msg.message_id\\\" class=\\\"hidden-message-item\\\">\\n            <div class=\\\"message-info\\\">\\n              <span class=\\\"message-id\\\">#{{ msg.message_id }}</span>\\n              <span class=\\\"message-role\\\" :class=\\\"'role-' + msg.role\\\">\\n                {{ msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '' }}\\n                {{ msg.name }}\\n              </span>\\n              <span class=\\\"message-preview\\\">\\n                {{ msg.message.substring(0, 50) }}{{ msg.message.length > 50 ? '...' : '' }}\\n              </span>\\n            </div>\\n            <button class=\\\"show-button\\\" @click=\\\"() => handle_unhide_single(msg.message_id)\\\"></button>\\n          </div>\\n        </div>\\n      </div>\\n      <div v-else class=\\\"empty-state\\\"></div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref } from 'vue';\\nimport { useSettingsStore } from '../settings';\\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// API\\n// setChatMessages \\n\\n// \\nconst parseMessageRange = (range: string): number[] => {\\n  if (!range.trim()) return [];\\n\\n  const messageIds: number[] = [];\\n  const parts = range.split(',');\\n\\n  for (const part of parts) {\\n    const trimmed = part.trim();\\n    if (!trimmed) continue;\\n\\n    if (trimmed.includes('-')) {\\n      //  \\\"1-10\\\"\\n      const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\\n      if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\\n        for (let i = start; i <= end; i++) {\\n          messageIds.push(i);\\n        }\\n      }\\n    } else {\\n      //  \\\"5\\\"  \\\"0\\\"\\n      const id = parseInt(trimmed);\\n      if (!isNaN(id) && id >= 0) {\\n        messageIds.push(id);\\n      }\\n    }\\n  }\\n\\n  return messageIds;\\n};\\n\\n// \\nconst available_models = ref<string[]>([]);\\nconst loading_models = ref(false);\\nconst hide_range = ref<string>('');\\nconst hidden_messages = ref<Array<{ message_id: number; name: string; role: string; message: string }>>([]);\\nconst hidden_display_expanded = ref(false);\\n\\n// \\nconst is_summarizing = ref(false);\\nconst is_generating_table = ref(false);\\n\\n// \\nconst headerTemplates = ref<Array<{ name: string; headers: string }>>([]);\\nconst selectedTemplate = ref<string>('');\\nconst currentTemplate = ref<{ name: string; headers: string }>({ name: '', headers: '' });\\n\\n// \\nconst loadGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    is_summarizing.value = scriptVars.is_summarizing || false;\\n    is_generating_table.value = scriptVars.is_generating_table || false;\\n    console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\\n  } catch (error) {\\n    console.error(':', error);\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n  }\\n};\\n\\nconst saveGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(\\n      {\\n        is_summarizing: is_summarizing.value,\\n        is_generating_table: is_generating_table.value,\\n      },\\n      { type: 'script', script_id: scriptId },\\n    );\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst stopGeneration = () => {\\n  if (is_summarizing.value || is_generating_table.value) {\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n    window.toastr.info('');\\n  }\\n};\\n\\n// \\nconst loadHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    //  header_templates  nullundefined\\n    let templates = scriptVars.header_templates;\\n    //  nullundefined  []\\n    if (!Array.isArray(templates)) {\\n      templates = [];\\n    }\\n    headerTemplates.value = templates;\\n    console.log(':', headerTemplates.value.length, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    headerTemplates.value = [];\\n  }\\n};\\n\\nconst saveHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables({ header_templates: headerTemplates.value }, { type: 'script', script_id: scriptId });\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst loadTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      currentTemplate.value = { ...headerTemplates.value[index] };\\n    }\\n  }\\n};\\n\\nconst showAddTemplateDialog = () => {\\n  const name = window.prompt('');\\n  if (name && name.trim()) {\\n    const headers = window.prompt('');\\n    if (headers && headers.trim()) {\\n      headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\\n      saveHeaderTemplates();\\n      selectedTemplate.value = (headerTemplates.value.length - 1).toString();\\n      loadTemplate();\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\nconst saveTemplate = () => {\\n  if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      headerTemplates.value[index] = { ...currentTemplate.value };\\n      saveHeaderTemplates();\\n      window.toastr.success('');\\n    }\\n  } else {\\n    window.toastr.warning('');\\n  }\\n};\\n\\nconst deleteTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    if (confirm('')) {\\n      const index = parseInt(selectedTemplate.value);\\n      if (index >= 0 && index < headerTemplates.value.length) {\\n        headerTemplates.value.splice(index, 1);\\n        saveHeaderTemplates();\\n        selectedTemplate.value = '';\\n        currentTemplate.value = { name: '', headers: '' };\\n        window.toastr.success('');\\n      }\\n    }\\n  }\\n};\\n\\n// \\nconst loadHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n\\n    const saved = getVariables({ type: 'script', script_id: scriptId });\\n    console.log(':', saved);\\n    console.log(' hidden_messages :', saved?.hidden_messages);\\n\\n    if (saved && saved.hidden_messages) {\\n      hidden_messages.value = saved.hidden_messages;\\n      console.log(':', hidden_messages.value.length, '');\\n    } else {\\n      console.log('...');\\n      // \\n      const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\\n      for (const field of possibleFields) {\\n        if (saved && saved[field]) {\\n          console.log(` ${field}:`, saved[field]);\\n          hidden_messages.value = saved[field];\\n          break;\\n        }\\n      }\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nconst saveHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n    console.log(':', hidden_messages.value);\\n\\n    const dataToSave = {\\n      hidden_messages: hidden_messages.value,\\n    };\\n    console.log(':', dataToSave);\\n\\n    insertOrAssignVariables(dataToSave, { type: 'script', script_id: scriptId });\\n    console.log(':', hidden_messages.value.length, '');\\n\\n    // \\n    setTimeout(() => {\\n      const saved = getVariables({ type: 'script', script_id: scriptId });\\n      console.log(':', saved);\\n      console.log(' hidden_messages :', saved?.hidden_messages);\\n    }, 100);\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nonMounted(() => {\\n  console.log('SettingsTab ');\\n  loadHiddenMessages();\\n  loadHeaderTemplates();\\n  loadGenerationStatus();\\n});\\n\\n// \\nconst handleTestButton = () => {\\n  console.log(' - Vue');\\n  window.toastr.success('Vue');\\n};\\n\\n// \\nconst handleSaveSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.saveSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleReloadSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.reloadSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleResetAutoSummaryStart = () => {\\n  console.log(' ...');\\n  try {\\n    // \\n    if (typeof (window as any).resetAutoSummaryStart === 'function') {\\n      (window as any).resetAutoSummaryStart();\\n    } else {\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handle_fetch_models = async () => {\\n  if (loading_models.value) return;\\n\\n  try {\\n    loading_models.value = true;\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const { fetchAvailableModels } = await import('../');\\n    const models = await fetchAvailableModels();\\n\\n    console.log(':', models);\\n\\n    if (models.length > 0) {\\n      // \\n      available_models.value = models;\\n      window.toastr.success(` ${models.length} `);\\n\\n      // \\n      if (!settings.value.model && models[0]) {\\n        settings.value.model = models[0];\\n      }\\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    loading_models.value = false;\\n  }\\n};\\n\\nconst handle_test_connection = async () => {\\n  try {\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        messages: [{ role: 'user', content: 'test' }],\\n        max_tokens: 1,\\n      }),\\n    });\\n\\n    if (response.ok) {\\n      window.toastr.success('');\\n    } else {\\n      window.toastr.error('' + response.status);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_summarize = async () => {\\n  try {\\n    if (is_summarizing.value) return;\\n\\n    console.log('...');\\n    is_summarizing.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const { summarizeMessages } = await import('../');\\n    const summary = await summarizeMessages(0, chatMessages.length);\\n\\n    console.log(':', summary);\\n\\n    // \\n    const scriptId = getScriptIdSafe();\\n    if (scriptId) {\\n      insertOrAssignVariables({ last_summary: summary }, { type: 'script', script_id: scriptId });\\n    }\\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_summarizing.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_generate_table = async () => {\\n  try {\\n    if (is_generating_table.value) return;\\n\\n    console.log('...');\\n    is_generating_table.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let headersInput: string | null = null;\\n\\n    if (currentTemplate.value.headers.trim()) {\\n      // \\n      const useTemplate = confirm(\\n        `\\\"${currentTemplate.value.name}\\\"\\\\n${currentTemplate.value.headers}`,\\n      );\\n      if (useTemplate) {\\n        headersInput = currentTemplate.value.headers;\\n      }\\n    }\\n\\n    if (!headersInput) {\\n      // \\n      headersInput = window.prompt(',,,');\\n    }\\n\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\\n      console.log(':', messageRange);\\n      chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // AI\\n    const messagesText = chatMessages\\n      .map(msg => {\\n        const role = msg.role === 'user' ? '' : 'AI';\\n        return `${role}: ${msg.message}`;\\n      })\\n      .join('\\\\n\\\\n');\\n\\n    const aiPrompt = `${headers.join(', ')}\\n\\n\\n${messagesText}\\n\\n****\\n1. \\n2. ${headers.join(', ')}\\n3. \\n4. \\\"\\\"\\\"-\\\"\\n5. JSONmarkdown\\n6. dataheaders\\n\\n**JSON**\\n{\\n  \\\"data\\\": [\\n    [\\\"1\\\", \\\"2\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"5\\\", \\\"6\\\"]\\n  ]\\n}\\n\\ndata${headers.length}${headers.join(', ')}`;\\n\\n    console.log('AI...');\\n    window.toastr.info('AI...');\\n\\n    // AI\\n    const response = await fetch(settings.value.api_endpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'user',\\n            content: aiPrompt,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens,\\n        temperature: settings.value.temperature,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API: ${response.status} ${response.statusText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log('AI:', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log('AI:', aiResponse);\\n\\n    // AIJSON\\n    let aiTableData;\\n    try {\\n      // JSONmarkdown\\n      let jsonText = aiResponse.trim();\\n\\n      // markdown\\n      jsonText = jsonText\\n        .replace(/^```json\\\\s*/i, '')\\n        .replace(/^```\\\\s*/, '')\\n        .replace(/```\\\\s*$/, '');\\n\\n      // JSON\\n      const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*\\\\}/);\\n      if (jsonMatch) {\\n        aiTableData = JSON.parse(jsonMatch[0]);\\n      } else {\\n        throw new Error('JSON');\\n      }\\n    } catch (parseError) {\\n      console.error('AI:', parseError);\\n      console.log('AI:', aiResponse);\\n      window.toastr.error('AI');\\n      return;\\n    }\\n\\n    // \\n    if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\\n      window.toastr.error('AIdata');\\n      return;\\n    }\\n\\n    // \\n    for (let i = 0; i < aiTableData.data.length; i++) {\\n      if (!Array.isArray(aiTableData.data[i])) {\\n        window.toastr.error(`${i + 1}`);\\n        return;\\n      }\\n      if (aiTableData.data[i].length !== headers.length) {\\n        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\\n        console.log(`:`, headers);\\n        console.log(`:`, aiTableData.data[i]);\\n        return;\\n      }\\n    }\\n\\n    // headers\\n    const tableData = {\\n      headers: headers,\\n      data: aiTableData.data,\\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push({\\n        start_id: settings.value.table_start_message_id,\\n        end_id: settings.value.table_end_message_id,\\n        headers: tableData.headers,\\n        data: tableData.data,\\n      });\\n\\n      insertOrAssignVariables({ table_history }, { type: 'chat' });\\n\\n      window.toastr.success(`${tableData.data.length}`);\\n      console.log(':', table_history);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_create_table = () => {\\n  try {\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headersInput: string | null = window.prompt(',,,');\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const emptyTableData = {\\n      start_id: settings.value.table_start_message_id,\\n      end_id: settings.value.table_end_message_id,\\n      headers: headers,\\n      data: [], // \\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push(emptyTableData);\\n      insertOrAssignVariables({ table_history }, { type: 'chat' });\\n\\n      window.toastr.success(`${headers.join(', ')}`);\\n      console.log(':', emptyTableData);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_hide_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const ranges = hide_range.value.split(',').map(range => range.trim());\\n    const messageIds: number[] = [];\\n\\n    for (const range of ranges) {\\n      if (range.includes('-')) {\\n        // 1-10\\n        const [start, end] = range.split('-').map(Number);\\n        if (start && end && start <= end) {\\n          for (let i = start; i <= end; i++) {\\n            messageIds.push(i);\\n          }\\n        }\\n      } else {\\n        // 5\\n        const id = Number(range);\\n        if (id) {\\n          messageIds.push(id);\\n        }\\n      }\\n    }\\n\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let hiddenCount = 0;\\n    const messagesToHide = [];\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        // \\n        messagesToHide.push({\\n          message_id: messageId,\\n          is_hidden: true,\\n        });\\n\\n        // \\n        hidden_messages.value.push({\\n          message_id: messageId,\\n          name: message.name || 'Unknown',\\n          role: message.role || 'user',\\n          message: message.message || '',\\n        });\\n        hiddenCount++;\\n      }\\n    }\\n\\n    // API\\n    if (messagesToHide.length > 0) {\\n      try {\\n        console.log(' slash :', messageIds);\\n\\n        //  slash \\n        for (const messageId of messageIds) {\\n          try {\\n            await triggerSlash(`/hide ${messageId}`);\\n            console.log(` ${messageId}`);\\n          } catch (error) {\\n            console.error(` ${messageId} :`, error);\\n          }\\n        }\\n\\n        window.toastr.success('');\\n      } catch (error) {\\n        console.error('API:', error);\\n        window.toastr.error('API: ' + (error as Error).message);\\n      }\\n    }\\n\\n    if (hiddenCount > 0) {\\n      // \\n      saveHiddenMessages();\\n      window.toastr.success(` ${hiddenCount} `);\\n      hide_range.value = ''; // \\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_show_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messageIds = parseMessageRange(hide_range.value.trim());\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messagesToShow = [];\\n    let shownCount = 0;\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        messagesToShow.push({\\n          message_id: messageId,\\n          is_hidden: false,\\n        });\\n        shownCount++;\\n      }\\n    }\\n\\n    if (messagesToShow.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      for (const messageId of messageIds) {\\n        try {\\n          await triggerSlash(`/unhide ${messageId}`);\\n          console.log(` ${messageId}`);\\n        } catch (error) {\\n          console.error(` ${messageId} :`, error);\\n        }\\n      }\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.error('API: ' + (error as Error).message);\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` ${shownCount} `);\\n    hide_range.value = ''; // \\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_refresh_hidden = async (showToast: boolean = false) => {\\n  try {\\n    console.log('', showToast);\\n\\n    // \\n    if (hidden_messages.value.length === 0) {\\n      console.log('...');\\n      loadHiddenMessages();\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      if (showToast) {\\n        window.toastr.error(': ' + (error as Error).message);\\n      }\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      if (showToast) {\\n        window.toastr.warning('');\\n      }\\n      return;\\n    }\\n\\n    // \\n    const validHiddenMessages = [];\\n    let removedCount = 0;\\n\\n    for (const hiddenMsg of hidden_messages.value) {\\n      const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\\n      if (message) {\\n        // \\n        validHiddenMessages.push({\\n          message_id: hiddenMsg.message_id,\\n          name: message.name || hiddenMsg.name,\\n          role: message.role || hiddenMsg.role,\\n          message: message.message || hiddenMsg.message,\\n        });\\n      } else {\\n        // \\n        removedCount++;\\n      }\\n    }\\n\\n    // \\n    hidden_messages.value = validHiddenMessages;\\n\\n    // \\n    saveHiddenMessages();\\n\\n    if (showToast) {\\n      if (removedCount > 0) {\\n        window.toastr.success(` ${removedCount} `);\\n      } else {\\n        window.toastr.success('');\\n      }\\n    }\\n\\n    console.log(`${validHiddenMessages.length} ${removedCount} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    if (showToast) {\\n      window.toastr.error(': ' + (error as Error).message);\\n    }\\n  }\\n};\\n\\nconst handle_unhide_single = async (messageId: number) => {\\n  try {\\n    console.log('', messageId);\\n\\n    // \\n    const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\\n    if (index === -1) {\\n      window.toastr.warning(` #${messageId} `);\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      await triggerSlash(`/unhide ${messageId}`);\\n      console.log(':', messageId);\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.warning('API');\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value.splice(index, 1);\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` #${messageId}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style>\\n.settings-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n  border: 2px solid red !important;\\n}\\n\\n.config-section {\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.config-section:last-child {\\n  border-bottom: none;\\n  margin-bottom: 0;\\n}\\n\\n.config-section h3 {\\n  margin: 0 0 20px 0 !important;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.form-group {\\n  margin-bottom: 18px !important;\\n}\\n\\n.form-group label {\\n  display: block;\\n  margin-bottom: 6px;\\n  color: #ccc;\\n  font-size: 13px;\\n}\\n\\n.checkbox-label {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.flex-label {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.form-group input[type='text'],\\n.form-group input[type='password'],\\n.form-group input[type='number'],\\n.form-group select {\\n  width: 100%;\\n  padding: 10px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  transition: border-color 0.2s;\\n}\\n\\n.form-group input:focus,\\n.form-group select:focus {\\n  outline: none;\\n  border-color: #4a9eff;\\n}\\n\\n.model-controls {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  flex-wrap: wrap;\\n  margin-top: 5px;\\n}\\n\\n.action-button {\\n  flex: 1;\\n  min-width: 120px;\\n  padding: 12px 16px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 500;\\n  font-size: 13px;\\n  transition: all 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.action-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.test-button {\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.test-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.fetch-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.fetch-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.summarize-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.summarize-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.create-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.create-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.table-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.table-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.hide-button {\\n  background: #ff6b6b;\\n  color: white;\\n  border: 1px solid #ff5252;\\n}\\n\\n.hide-button:hover {\\n  background: #ff5252;\\n  border-color: #ff4444;\\n}\\n\\n.unhide-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.unhide-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.refresh-button {\\n  background: #ffd43b;\\n  color: #333;\\n  border: 1px solid #ffcc02;\\n}\\n\\n.refresh-button:hover {\\n  background: #ffcc02;\\n  border-color: #ffb700;\\n}\\n\\n.action-button:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.model-select {\\n  margin-top: 8px;\\n}\\n\\n.hidden-messages-section {\\n  margin-top: 20px;\\n}\\n\\n.hidden-messages-list {\\n  max-height: 300px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  border: 1px solid #3a3a3a;\\n  background: #1a1a1a;\\n}\\n\\n.hidden-message-item {\\n  padding: 10px 12px;\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  border-bottom: 1px solid #2a2a2a;\\n  transition: background 0.2s;\\n}\\n\\n.hidden-message-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.hidden-message-item:hover {\\n  background: #2a2a2a;\\n}\\n\\n.message-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.message-id {\\n  font-weight: bold;\\n  color: #4a9eff;\\n  font-size: 13px;\\n  min-width: 50px;\\n}\\n\\n.message-role {\\n  font-size: 12px;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n  white-space: nowrap;\\n}\\n\\n.message-role.role-user {\\n  background: #3a5a3a;\\n  color: #90ee90;\\n}\\n\\n.message-role.role-assistant {\\n  background: #3a3a5a;\\n  color: #90a0ee;\\n}\\n\\n.message-role.role-system {\\n  background: #5a5a3a;\\n  color: #eea090;\\n}\\n\\n.message-preview {\\n  flex: 1;\\n  color: #888;\\n  font-size: 12px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.show-button {\\n  background: #4a9eff !important;\\n  color: white !important;\\n  padding: 6px 12px;\\n  border: 1px solid #5aaeff !important;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n  min-width: 60px;\\n  text-align: center;\\n}\\n\\n.show-button:hover {\\n  background: #5aaeff !important;\\n  border-color: #6abeff !important;\\n}\\n\\n.mini-button {\\n  background: #666;\\n  color: white;\\n  border: 1px solid #777;\\n  padding: 6px 12px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #777;\\n  border-color: #888;\\n}\\n\\n.empty-state {\\n  margin-top: 20px;\\n  padding: 20px;\\n  background: #2a2a2a;\\n  border-radius: 6px;\\n  text-align: center;\\n  color: #888;\\n  border: 1px solid #3a3a3a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"70f6127a\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-46.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcs_37bafd025248bbddf6b8842180147e3c/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.summary-tab[data-v-97028022]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-97028022]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-97028022]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.header-actions[data-v-97028022]{display:flex;align-items:center;gap:10px}.count-badge[data-v-97028022]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-97028022]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-97028022]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-97028022]{margin:10px 0;font-size:14px}.empty-state small[data-v-97028022]{color:#666;font-size:12px}.history-list[data-v-97028022]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-97028022]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-97028022]:hover{border-color:#4a4a4a}.history-header[data-v-97028022]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-97028022]:hover{background:#2a2a2a}.history-info[data-v-97028022]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-97028022]{color:#4a9eff;font-weight:bold}.history-range[data-v-97028022]{color:#888;font-size:12px}.expand-icon[data-v-97028022]{color:#888;font-size:12px}.history-content[data-v-97028022]{padding:15px;background:#2a2a2a}.history-actions[data-v-97028022]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-97028022]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-97028022]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-97028022]:hover{background:#ff4444;border-color:#ff4444;color:white}.mini-button.worldbook-button[data-v-97028022]{background:#28a745;color:white;border-color:#28a745}.mini-button.worldbook-button[data-v-97028022]:hover{background:#218838;border-color:#218838;color:white}.mini-button.create-worldbook-button[data-v-97028022]{background:#17a2b8;color:white;border-color:#17a2b8}.mini-button.create-worldbook-button[data-v-97028022]:hover{background:#138496;border-color:#138496;color:white}.mini-button.refresh-button[data-v-97028022]{background:#6c757d;color:white;border-color:#6c757d}.mini-button.refresh-button[data-v-97028022]:hover{background:#5a6268;border-color:#5a6268;color:white}.mini-button.debug-button[data-v-97028022]{background:#ffc107;color:#000;border-color:#ffb300}.mini-button.debug-button[data-v-97028022]:hover{background:#e0a800;border-color:#d39e00;color:#000}.history-text[data-v-97028022]{white-space:pre-wrap;word-wrap:break-word;line-height:1.6;max-height:400px;overflow-y:auto}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/SummaryTab.vue\"],\"names\":[],\"mappings\":\"AAqlCA,8BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,+CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,qDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,sDACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,4DACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,6CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,mDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,2CACE,kBAAmB,CACnB,UAAW,CACX,oBACF,CAEA,iDACE,kBAAmB,CACnB,oBAAqB,CACrB,UACF,CAEA,+BACE,oBAAqB,CACrB,oBAAqB,CACrB,eAAgB,CAChB,gBAAiB,CACjB,eACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"summary-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"summary_history.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n          >{{ summary_history.length }} </span\\n        >\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"handleRefreshData\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button create-worldbook-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #51cf66;\\n            border: 1px solid #40c057;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"createSummaryWorldbook\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button debug-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #ffc107;\\n            border: 1px solid #ffb300;\\n            border-radius: 4px;\\n            color: #000;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showDebugPanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <div\\n      v-if=\\\"summary_history && summary_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in summary_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{ isExpanded(index) ? '' : '' }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #3a3a3a\\\"\\n          >\\n            <button\\n              class=\\\"mini-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: background 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"copySummary(item.content)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button worldbook-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #4a9eff;\\n                border: 1px solid #5aaeff;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"bindToWorldbook(item.content, index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button delete-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #ff6b6b;\\n                border: 1px solid #ff5252;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"deleteSummary(index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-trash\\\"></i> \\n            </button>\\n          </div>\\n          <div\\n            class=\\\"history-text\\\"\\n            style=\\\"\\n              font-family: 'Courier New', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              color: #e0e0e0;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              user-select: text;\\n              cursor: text;\\n            \\\"\\n          >\\n            {{ item.content }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe } from '../utils';\\n\\nconst historyStore = useSummaryHistoryStore();\\n\\n// \\nconst summary_history = ref<Array<{ start_id: number; end_id: number; content: string }>>([]);\\nconst expandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshSummaryHistory = () => {\\n  try {\\n    summary_history.value = historyStore.getSummaryHistory();\\n    console.log(':', summary_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    summary_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleExpanded = (index: number) => {\\n  const current = expandedState.value.get(index) || false;\\n  expandedState.value.set(index, !current);\\n};\\n\\nconst isExpanded = (index: number) => {\\n  return expandedState.value.get(index) || false;\\n};\\n\\n// \\nconst handleRefreshData = async () => {\\n  console.log('');\\n  try {\\n    await refreshSummaryHistory();\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copySummary = (content: string) => {\\n  copyToClipboard(content, '');\\n};\\n\\n// \\nconst deleteSummary = (index: number) => {\\n  if (confirm('')) {\\n    try {\\n      const chat_id = getChatIdSafe();\\n      if (!chat_id) {\\n        window.toastr.error('');\\n        return;\\n      }\\n\\n      summary_history.value.splice(index, 1);\\n      insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error('');\\n    }\\n  }\\n};\\n\\n// \\nconst createSummaryWorldbook = async () => {\\n  try {\\n    // \\n    let characterName = '';\\n    try {\\n      const currentCharacter = getCharData('current');\\n      if (currentCharacter && currentCharacter.name) {\\n        characterName = currentCharacter.name;\\n        // \\n        characterName = characterName.replace(/[<>:\\\"/\\\\\\\\|?*]/g, '_').trim();\\n      }\\n    } catch (charError) {\\n      console.warn(':', charError);\\n    }\\n\\n    // \\n    const dateStr = new Date().toISOString().slice(0, 10);\\n    const worldbookName = `_${characterName}_${dateStr}`;\\n\\n    console.log(':', worldbookName);\\n\\n    const existingWorldbooks = getWorldbookNames();\\n    if (existingWorldbooks.includes(worldbookName)) {\\n      window.toastr.warning(` \\\"${worldbookName}\\\" `);\\n      return;\\n    }\\n\\n    await createWorldbook(worldbookName, []);\\n\\n    try {\\n      await rebindChatWorldbook('current', worldbookName);\\n      window.toastr.success(` \\\"${worldbookName}\\\" `);\\n    } catch (bindError) {\\n      console.warn(':', bindError);\\n      window.toastr.success(` \\\"${worldbookName}\\\"`);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst bindToWorldbook = async (content: string, summaryIndex: number) => {\\n  try {\\n    const worldbookNames = getWorldbookNames();\\n    if (worldbookNames.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const selectedWorldbook =\\n      worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\\n    if (!selectedWorldbook) {\\n      return;\\n    }\\n\\n    const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\\n    const newEntry = {\\n      name: entryName,\\n      enabled: true,\\n      strategy: {\\n        type: 'constant' as const,\\n        keys: [],\\n        keys_secondary: { logic: 'and_any' as const, keys: [] },\\n        scan_depth: 'same_as_global' as const,\\n      },\\n      position: {\\n        type: 'before_character_definition' as const,\\n        role: 'system' as const,\\n        depth: 1,\\n      },\\n      content: content,\\n      comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\\n      insertion_order: 0,\\n      case_sensitive: false,\\n      name_is_regex: false,\\n      keys_are_regex: false,\\n      selective_logic: 'and',\\n      secondary_keys_logic: 'and',\\n      activation_threshold: 0,\\n      disabled: false,\\n      order: 0,\\n      group: '',\\n      local_id: 0,\\n      depth_entries: [],\\n      depth_entries_all: false,\\n      search_range: 0,\\n      force_activation: false,\\n      disable: false,\\n      exclude_recursion: false,\\n      hidden: false,\\n      priority: 0,\\n      comment_is_regex: false,\\n      content_is_regex: false,\\n      secondary_keys_are_regex: false,\\n      keys_secondary_are_regex: false,\\n      uid: Date.now(),\\n    };\\n\\n    await createWorldbookEntries(selectedWorldbook, [newEntry]);\\n    window.toastr.success(`: ${selectedWorldbook}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst promptForWorldbook = async (worldbookNames: string[]): Promise<string | null> => {\\n  return new Promise<string | null>(resolve => {\\n    const dialog = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 50%;\\n        left: 50%;\\n        transform: translate(-50%, -50%);\\n        background: #2a2a2a;\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        padding: 20px;\\n        z-index: 1000000;\\n        min-width: 300px;\\n      \\\">\\n        <h3 style=\\\"margin: 0 0 15px 0; color: #e0e0e0;\\\"></h3>\\n        <div style=\\\"margin-bottom: 15px;\\\">\\n          ${worldbookNames\\n            .map(\\n              name => `\\n            <label style=\\\"display: block; margin: 5px 0; color: #e0e0e0;\\\">\\n              <input type=\\\"radio\\\" name=\\\"worldbook\\\" value=\\\"${name}\\\" style=\\\"margin-right: 8px;\\\">\\n              ${name}\\n            </label>\\n          `,\\n            )\\n            .join('')}\\n        </div>\\n        <div style=\\\"text-align: right;\\\">\\n          <button id=\\\"cancelWorldbook\\\" style=\\\"\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            margin-right: 10px;\\n            cursor: pointer;\\n          \\\"></button>\\n          <button id=\\\"confirmWorldbook\\\" style=\\\"\\n            background: #4a9eff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            cursor: pointer;\\n          \\\"></button>\\n        </div>\\n      </div>\\n    `);\\n\\n    const overlay = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0, 0, 0, 0.5);\\n        z-index: 999999;\\n      \\\"></div>\\n    `);\\n\\n    $('body').append(overlay).append(dialog);\\n\\n    $('#cancelWorldbook').on('click', () => {\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(null);\\n    });\\n\\n    $('#confirmWorldbook').on('click', () => {\\n      const selected = $('input[name=\\\"worldbook\\\"]:checked').val() as string;\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(selected || null);\\n    });\\n\\n    $('input[name=\\\"worldbook\\\"]:first').prop('checked', true);\\n  });\\n};\\n\\n// \\nconst showDebugPanel = () => {\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'debug-panel-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffc107;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 800px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ul style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li>localStorage</li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n      </div>\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      gap: 12px;\\n      margin-bottom: 20px;\\n    `;\\n\\n    // \\n    const buttons = [\\n      { id: 'testComplete', text: ' ', color: '#4a9eff' },\\n      { id: 'syncData', text: ' ', color: '#28a745' },\\n      { id: 'checkFloor', text: ' ', color: '#17a2b8' },\\n      { id: 'testCalculation', text: ' ', color: '#6f42c1' },\\n      { id: 'showStatus', text: ' ', color: '#fd7e14' },\\n      { id: 'resetStartId', text: ' ', color: '#dc3545' },\\n    ];\\n\\n    buttons.forEach(button => {\\n      const btn = parentDoc.createElement('button');\\n      btn.id = button.id;\\n      btn.textContent = button.text;\\n      btn.style.cssText = `\\n        background: ${button.color};\\n        color: white;\\n        border: none;\\n        padding: 12px 16px;\\n        border-radius: 6px;\\n        cursor: pointer;\\n        font-size: 13px;\\n        font-weight: 500;\\n        transition: background 0.2s;\\n      `;\\n      btn.onmouseover = () => {\\n        btn.style.opacity = '0.8';\\n      };\\n      btn.onmouseout = () => {\\n        btn.style.opacity = '1';\\n      };\\n      buttonContainer.appendChild(btn);\\n    });\\n\\n    // \\n    const outputArea = parentDoc.createElement('div');\\n    outputArea.id = 'debug-output';\\n    outputArea.style.cssText = `\\n      background: #1a1a1a;\\n      border: 1px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      height: 200px;\\n      overflow-y: auto;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 12px;\\n      color: #e0e0e0;\\n      white-space: pre-wrap;\\n      margin-bottom: 20px;\\n    `;\\n    outputArea.textContent = '...\\\\n';\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #6c757d;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n      align-self: center;\\n    `;\\n\\n    // \\n    container.appendChild(header);\\n    container.appendChild(buttonContainer);\\n    container.appendChild(outputArea);\\n    container.appendChild(closeButton);\\n\\n    overlay.appendChild(container);\\n    parentBody.appendChild(overlay);\\n\\n    // \\n    const log = (message: string) => {\\n      const output = parentDoc.getElementById('debug-output');\\n      if (output) {\\n        output.textContent += message + '\\\\n';\\n        output.scrollTop = output.scrollHeight;\\n      }\\n    };\\n\\n    // \\n    closeButton.onclick = () => {\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    // \\n    parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testCompleteAutoSummary) {\\n          (window as any).testCompleteAutoSummary();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('syncData')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).syncAutoSummaryData) {\\n          (window as any).syncAutoSummaryData();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkCurrentFloor) {\\n          (window as any).checkCurrentFloor();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testFloorCalculation) {\\n          (window as any).testFloorCalculation();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkAutoSummaryStatus) {\\n          (window as any).checkAutoSummaryStatus();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).smartResetChat) {\\n          (window as any).smartResetChat();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    window.toastr?.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr?.error('');\\n  }\\n};\\n\\n// \\nrefreshSummaryHistory();\\n</script>\\n\\n<style scoped>\\n.summary-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.header-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.mini-button.worldbook-button {\\n  background: #28a745;\\n  color: white;\\n  border-color: #28a745;\\n}\\n\\n.mini-button.worldbook-button:hover {\\n  background: #218838;\\n  border-color: #218838;\\n  color: white;\\n}\\n\\n.mini-button.create-worldbook-button {\\n  background: #17a2b8;\\n  color: white;\\n  border-color: #17a2b8;\\n}\\n\\n.mini-button.create-worldbook-button:hover {\\n  background: #138496;\\n  border-color: #138496;\\n  color: white;\\n}\\n\\n.mini-button.refresh-button {\\n  background: #6c757d;\\n  color: white;\\n  border-color: #6c757d;\\n}\\n\\n.mini-button.refresh-button:hover {\\n  background: #5a6268;\\n  border-color: #5a6268;\\n  color: white;\\n}\\n\\n.mini-button.debug-button {\\n  background: #ffc107;\\n  color: #000;\\n  border-color: #ffb300;\\n}\\n\\n.mini-button.debug-button:hover {\\n  background: #e0a800;\\n  border-color: #d39e00;\\n  color: #000;\\n}\\n\\n.history-text {\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  line-height: 1.6;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n    class: \"settings-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_5 = { class: \"form-group\" };\nconst _hoisted_6 = {\n    class: \"model-controls\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" }\n};\nconst _hoisted_7 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_11 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_12 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_13 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_14 = {\n    class: \"checkbox-label\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" }\n};\nconst _hoisted_15 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_16 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_18 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_19 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_20 = [\"disabled\"];\nconst _hoisted_21 = [\"disabled\"];\nconst _hoisted_22 = {\n    key: 0,\n    class: \"fa-solid fa-magic\"\n};\nconst _hoisted_23 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_24 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_25 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_26 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_27 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_28 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_29 = [\"value\"];\nconst _hoisted_30 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"gap\": \"8px\" }\n};\nconst _hoisted_31 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_32 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"align-items\": \"center\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_34 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_35 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\" }\n};\nconst _hoisted_36 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_37 = [\"disabled\"];\nconst _hoisted_38 = {\n    key: 0,\n    class: \"fa-solid fa-robot\"\n};\nconst _hoisted_39 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_40 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_41 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_42 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_43 = [\"disabled\"];\nconst _hoisted_44 = {\n    key: 0,\n    class: \"hidden-messages-section\"\n};\nconst _hoisted_45 = { class: \"form-group\" };\nconst _hoisted_46 = { class: \"flex-label\" };\nconst _hoisted_47 = {\n    key: 0,\n    class: \"hidden-messages-list\"\n};\nconst _hoisted_48 = { class: \"message-info\" };\nconst _hoisted_49 = { class: \"message-id\" };\nconst _hoisted_50 = { class: \"message-preview\" };\nconst _hoisted_51 = [\"onClick\"];\nconst _hoisted_52 = {\n    key: 1,\n    class: \"empty-state\"\n};\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { useSettingsStore } from '../settings';\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // API\n        // setChatMessages \n        // \n        const parseMessageRange = (range) => {\n            if (!range.trim())\n                return [];\n            const messageIds = [];\n            const parts = range.split(',');\n            for (const part of parts) {\n                const trimmed = part.trim();\n                if (!trimmed)\n                    continue;\n                if (trimmed.includes('-')) {\n                    //  \"1-10\"\n                    const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\n                    if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\n                        for (let i = start; i <= end; i++) {\n                            messageIds.push(i);\n                        }\n                    }\n                }\n                else {\n                    //  \"5\"  \"0\"\n                    const id = parseInt(trimmed);\n                    if (!isNaN(id) && id >= 0) {\n                        messageIds.push(id);\n                    }\n                }\n            }\n            return messageIds;\n        };\n        // \n        const available_models = ref([]);\n        const loading_models = ref(false);\n        const hide_range = ref('');\n        const hidden_messages = ref([]);\n        const hidden_display_expanded = ref(false);\n        // \n        const is_summarizing = ref(false);\n        const is_generating_table = ref(false);\n        // \n        const headerTemplates = ref([]);\n        const selectedTemplate = ref('');\n        const currentTemplate = ref({ name: '', headers: '' });\n        // \n        const loadGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                is_summarizing.value = scriptVars.is_summarizing || false;\n                is_generating_table.value = scriptVars.is_generating_table || false;\n                console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\n            }\n            catch (error) {\n                console.error(':', error);\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n            }\n        };\n        const saveGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    is_summarizing: is_summarizing.value,\n                    is_generating_table: is_generating_table.value,\n                }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const stopGeneration = () => {\n            if (is_summarizing.value || is_generating_table.value) {\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n                saveGenerationStatus();\n                window.toastr.info('');\n            }\n        };\n        // \n        const loadHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                //  header_templates  nullundefined\n                let templates = scriptVars.header_templates;\n                //  nullundefined  []\n                if (!Array.isArray(templates)) {\n                    templates = [];\n                }\n                headerTemplates.value = templates;\n                console.log(':', headerTemplates.value.length, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                headerTemplates.value = [];\n            }\n        };\n        const saveHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({ header_templates: headerTemplates.value }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const loadTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    currentTemplate.value = { ...headerTemplates.value[index] };\n                }\n            }\n        };\n        const showAddTemplateDialog = () => {\n            const name = window.prompt('');\n            if (name && name.trim()) {\n                const headers = window.prompt('');\n                if (headers && headers.trim()) {\n                    headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\n                    saveHeaderTemplates();\n                    selectedTemplate.value = (headerTemplates.value.length - 1).toString();\n                    loadTemplate();\n                    window.toastr.success('');\n                }\n            }\n        };\n        const saveTemplate = () => {\n            if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    headerTemplates.value[index] = { ...currentTemplate.value };\n                    saveHeaderTemplates();\n                    window.toastr.success('');\n                }\n            }\n            else {\n                window.toastr.warning('');\n            }\n        };\n        const deleteTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                if (confirm('')) {\n                    const index = parseInt(selectedTemplate.value);\n                    if (index >= 0 && index < headerTemplates.value.length) {\n                        headerTemplates.value.splice(index, 1);\n                        saveHeaderTemplates();\n                        selectedTemplate.value = '';\n                        currentTemplate.value = { name: '', headers: '' };\n                        window.toastr.success('');\n                    }\n                }\n            }\n        };\n        // \n        const loadHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                const saved = getVariables({ type: 'script', script_id: scriptId });\n                console.log(':', saved);\n                console.log(' hidden_messages :', saved?.hidden_messages);\n                if (saved && saved.hidden_messages) {\n                    hidden_messages.value = saved.hidden_messages;\n                    console.log(':', hidden_messages.value.length, '');\n                }\n                else {\n                    console.log('...');\n                    // \n                    const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\n                    for (const field of possibleFields) {\n                        if (saved && saved[field]) {\n                            console.log(` ${field}:`, saved[field]);\n                            hidden_messages.value = saved[field];\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        const saveHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                console.log(':', hidden_messages.value);\n                const dataToSave = {\n                    hidden_messages: hidden_messages.value,\n                };\n                console.log(':', dataToSave);\n                insertOrAssignVariables(dataToSave, { type: 'script', script_id: scriptId });\n                console.log(':', hidden_messages.value.length, '');\n                // \n                setTimeout(() => {\n                    const saved = getVariables({ type: 'script', script_id: scriptId });\n                    console.log(':', saved);\n                    console.log(' hidden_messages :', saved?.hidden_messages);\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        onMounted(() => {\n            console.log('SettingsTab ');\n            loadHiddenMessages();\n            loadHeaderTemplates();\n            loadGenerationStatus();\n        });\n        // \n        const handleTestButton = () => {\n            console.log(' - Vue');\n            window.toastr.success('Vue');\n        };\n        // \n        const handleSaveSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.saveSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleReloadSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.reloadSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleResetAutoSummaryStart = () => {\n            console.log(' ...');\n            try {\n                // \n                if (typeof window.resetAutoSummaryStart === 'function') {\n                    window.resetAutoSummaryStart();\n                }\n                else {\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const handle_fetch_models = async () => {\n            if (loading_models.value)\n                return;\n            try {\n                loading_models.value = true;\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const { fetchAvailableModels } = await import('../');\n                const models = await fetchAvailableModels();\n                console.log(':', models);\n                if (models.length > 0) {\n                    // \n                    available_models.value = models;\n                    window.toastr.success(` ${models.length} `);\n                    // \n                    if (!settings.value.model && models[0]) {\n                        settings.value.model = models[0];\n                    }\n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                loading_models.value = false;\n            }\n        };\n        const handle_test_connection = async () => {\n            try {\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        messages: [{ role: 'user', content: 'test' }],\n                        max_tokens: 1,\n                    }),\n                });\n                if (response.ok) {\n                    window.toastr.success('');\n                }\n                else {\n                    window.toastr.error('' + response.status);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_summarize = async () => {\n            try {\n                if (is_summarizing.value)\n                    return;\n                console.log('...');\n                is_summarizing.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const { summarizeMessages } = await import('../');\n                const summary = await summarizeMessages(0, chatMessages.length);\n                console.log(':', summary);\n                // \n                const scriptId = getScriptIdSafe();\n                if (scriptId) {\n                    insertOrAssignVariables({ last_summary: summary }, { type: 'script', script_id: scriptId });\n                }\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_summarizing.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_generate_table = async () => {\n            try {\n                if (is_generating_table.value)\n                    return;\n                console.log('...');\n                is_generating_table.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let headersInput = null;\n                if (currentTemplate.value.headers.trim()) {\n                    // \n                    const useTemplate = confirm(`\"${currentTemplate.value.name}\"\\n${currentTemplate.value.headers}`);\n                    if (useTemplate) {\n                        headersInput = currentTemplate.value.headers;\n                    }\n                }\n                if (!headersInput) {\n                    // \n                    headersInput = window.prompt(',,,');\n                }\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\n                    console.log(':', messageRange);\n                    chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // AI\n                const messagesText = chatMessages\n                    .map(msg => {\n                    const role = msg.role === 'user' ? '' : 'AI';\n                    return `${role}: ${msg.message}`;\n                })\n                    .join('\\n\\n');\n                const aiPrompt = `${headers.join(', ')}\n\n\n${messagesText}\n\n****\n1. \n2. ${headers.join(', ')}\n3. \n4. \"\"\"-\"\n5. JSONmarkdown\n6. dataheaders\n\n**JSON**\n{\n  \"data\": [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"]\n  ]\n}\n\ndata${headers.length}${headers.join(', ')}`;\n                console.log('AI...');\n                window.toastr.info('AI...');\n                // AI\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'user',\n                                content: aiPrompt,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens,\n                        temperature: settings.value.temperature,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API: ${response.status} ${response.statusText}`);\n                }\n                const result = await response.json();\n                console.log('AI:', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log('AI:', aiResponse);\n                // AIJSON\n                let aiTableData;\n                try {\n                    // JSONmarkdown\n                    let jsonText = aiResponse.trim();\n                    // markdown\n                    jsonText = jsonText\n                        .replace(/^```json\\s*/i, '')\n                        .replace(/^```\\s*/, '')\n                        .replace(/```\\s*$/, '');\n                    // JSON\n                    const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n                    if (jsonMatch) {\n                        aiTableData = JSON.parse(jsonMatch[0]);\n                    }\n                    else {\n                        throw new Error('JSON');\n                    }\n                }\n                catch (parseError) {\n                    console.error('AI:', parseError);\n                    console.log('AI:', aiResponse);\n                    window.toastr.error('AI');\n                    return;\n                }\n                // \n                if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\n                    window.toastr.error('AIdata');\n                    return;\n                }\n                // \n                for (let i = 0; i < aiTableData.data.length; i++) {\n                    if (!Array.isArray(aiTableData.data[i])) {\n                        window.toastr.error(`${i + 1}`);\n                        return;\n                    }\n                    if (aiTableData.data[i].length !== headers.length) {\n                        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\n                        console.log(`:`, headers);\n                        console.log(`:`, aiTableData.data[i]);\n                        return;\n                    }\n                }\n                // headers\n                const tableData = {\n                    headers: headers,\n                    data: aiTableData.data,\n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push({\n                        start_id: settings.value.table_start_message_id,\n                        end_id: settings.value.table_end_message_id,\n                        headers: tableData.headers,\n                        data: tableData.data,\n                    });\n                    insertOrAssignVariables({ table_history }, { type: 'chat' });\n                    window.toastr.success(`${tableData.data.length}`);\n                    console.log(':', table_history);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_generating_table.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_create_table = () => {\n            try {\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headersInput = window.prompt(',,,');\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const emptyTableData = {\n                    start_id: settings.value.table_start_message_id,\n                    end_id: settings.value.table_end_message_id,\n                    headers: headers,\n                    data: [], // \n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push(emptyTableData);\n                    insertOrAssignVariables({ table_history }, { type: 'chat' });\n                    window.toastr.success(`${headers.join(', ')}`);\n                    console.log(':', emptyTableData);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_hide_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const ranges = hide_range.value.split(',').map(range => range.trim());\n                const messageIds = [];\n                for (const range of ranges) {\n                    if (range.includes('-')) {\n                        // 1-10\n                        const [start, end] = range.split('-').map(Number);\n                        if (start && end && start <= end) {\n                            for (let i = start; i <= end; i++) {\n                                messageIds.push(i);\n                            }\n                        }\n                    }\n                    else {\n                        // 5\n                        const id = Number(range);\n                        if (id) {\n                            messageIds.push(id);\n                        }\n                    }\n                }\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let hiddenCount = 0;\n                const messagesToHide = [];\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        // \n                        messagesToHide.push({\n                            message_id: messageId,\n                            is_hidden: true,\n                        });\n                        // \n                        hidden_messages.value.push({\n                            message_id: messageId,\n                            name: message.name || 'Unknown',\n                            role: message.role || 'user',\n                            message: message.message || '',\n                        });\n                        hiddenCount++;\n                    }\n                }\n                // API\n                if (messagesToHide.length > 0) {\n                    try {\n                        console.log(' slash :', messageIds);\n                        //  slash \n                        for (const messageId of messageIds) {\n                            try {\n                                await triggerSlash(`/hide ${messageId}`);\n                                console.log(` ${messageId}`);\n                            }\n                            catch (error) {\n                                console.error(` ${messageId} :`, error);\n                            }\n                        }\n                        window.toastr.success('');\n                    }\n                    catch (error) {\n                        console.error('API:', error);\n                        window.toastr.error('API: ' + error.message);\n                    }\n                }\n                if (hiddenCount > 0) {\n                    // \n                    saveHiddenMessages();\n                    window.toastr.success(` ${hiddenCount} `);\n                    hide_range.value = ''; // \n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_show_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messageIds = parseMessageRange(hide_range.value.trim());\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messagesToShow = [];\n                let shownCount = 0;\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        messagesToShow.push({\n                            message_id: messageId,\n                            is_hidden: false,\n                        });\n                        shownCount++;\n                    }\n                }\n                if (messagesToShow.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    for (const messageId of messageIds) {\n                        try {\n                            await triggerSlash(`/unhide ${messageId}`);\n                            console.log(` ${messageId}`);\n                        }\n                        catch (error) {\n                            console.error(` ${messageId} :`, error);\n                        }\n                    }\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.error('API: ' + error.message);\n                    return;\n                }\n                // \n                hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\n                // \n                saveHiddenMessages();\n                window.toastr.success(` ${shownCount} `);\n                hide_range.value = ''; // \n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_refresh_hidden = async (showToast = false) => {\n            try {\n                console.log('', showToast);\n                // \n                if (hidden_messages.value.length === 0) {\n                    console.log('...');\n                    loadHiddenMessages();\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    if (showToast) {\n                        window.toastr.error(': ' + error.message);\n                    }\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    if (showToast) {\n                        window.toastr.warning('');\n                    }\n                    return;\n                }\n                // \n                const validHiddenMessages = [];\n                let removedCount = 0;\n                for (const hiddenMsg of hidden_messages.value) {\n                    const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\n                    if (message) {\n                        // \n                        validHiddenMessages.push({\n                            message_id: hiddenMsg.message_id,\n                            name: message.name || hiddenMsg.name,\n                            role: message.role || hiddenMsg.role,\n                            message: message.message || hiddenMsg.message,\n                        });\n                    }\n                    else {\n                        // \n                        removedCount++;\n                    }\n                }\n                // \n                hidden_messages.value = validHiddenMessages;\n                // \n                saveHiddenMessages();\n                if (showToast) {\n                    if (removedCount > 0) {\n                        window.toastr.success(` ${removedCount} `);\n                    }\n                    else {\n                        window.toastr.success('');\n                    }\n                }\n                console.log(`${validHiddenMessages.length} ${removedCount} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                if (showToast) {\n                    window.toastr.error(': ' + error.message);\n                }\n            }\n        };\n        const handle_unhide_single = async (messageId) => {\n            try {\n                console.log('', messageId);\n                // \n                const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\n                if (index === -1) {\n                    window.toastr.warning(` #${messageId} `);\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    await triggerSlash(`/unhide ${messageId}`);\n                    console.log(':', messageId);\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.warning('API');\n                    return;\n                }\n                // \n                hidden_messages.value.splice(index, 1);\n                // \n                saveHiddenMessages();\n                window.toastr.success(` #${messageId}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" API  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[23] || (_cache[23] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"  API  \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[18] || (_cache[18] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API \", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).api_endpoint) = $event)),\n                            type: \"text\",\n                            placeholder: \"https://your-api.com/v1/chat/completions\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(settings).api_endpoint]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API Key\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).api_key) = $event)),\n                            type: \"password\",\n                            placeholder: \"sk-...\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(settings).api_key]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[20] || (_cache[20] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createElementVNode(\"button\", {\n                                    class: \"test-button\",\n                                    style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                                    onClick: handleTestButton\n                                }, \" () \"),\n                                _createElementVNode(\"button\", {\n                                    disabled: loading_models.value,\n                                    class: \"fetch-button\",\n                                    style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                                    onClick: handle_fetch_models\n                                }, _toDisplayString(loading_models.value ? '...' : ''), 9 /* TEXT, PROPS */, _hoisted_8)\n                            ])\n                        ]),\n                        (available_models.value.length === 0)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).model) = $event)),\n                                type: \"text\",\n                                placeholder: \"gpt-4o-mini\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */)), [\n                                [_vModelText, _unref(settings).model]\n                            ])\n                            : _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                                key: 1,\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).model) = $event)),\n                                class: \"model-select\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(available_models.value, (model) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: model,\n                                        value: model\n                                    }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_9));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */)), [\n                                [_vModelSelect, _unref(settings).model]\n                            ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                        _cache[21] || (_cache[21] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" Token 4000\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).max_tokens) = $event)),\n                            type: \"number\",\n                            min: \"100\",\n                            max: \"16000\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).max_tokens,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" (0-2)\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).temperature) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            max: \"2\",\n                            step: \"0.1\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).temperature,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _cache[26] || (_cache[26] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_13, [\n                        _createElementVNode(\"label\", _hoisted_14, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).auto_summarize_enabled) = $event)),\n                                type: \"checkbox\",\n                                style: { \"width\": \"16px\", \"height\": \"16px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelCheckbox, _unref(settings).auto_summarize_enabled]\n                            ]),\n                            _cache[24] || (_cache[24] = _createTextVNode(\"  \", -1 /* CACHED */))\n                        ])\n                    ]),\n                    (_unref(settings).auto_summarize_enabled)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                            _cache[25] || (_cache[25] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).summarize_interval) = $event)),\n                                type: \"number\",\n                                min: \"1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).summarize_interval,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _createElementVNode(\"div\", { style: { \"margin-top\": \"10px\", \"display\": \"flex\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleSaveSettings\n                                }, \"   \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleReloadSettings\n                                }, \"   \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                    onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                    onClick: handleResetAutoSummaryStart\n                                }, \"   \")\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_16, [\n                    _cache[30] || (_cache[30] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                        _cache[27] || (_cache[27] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).start_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).start_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_18, [\n                        _cache[28] || (_cache[28] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).end_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).end_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_19, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button test-button\",\n                            disabled: is_summarizing.value,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                            onClick: handle_test_connection\n                        }, [...(_cache[29] || (_cache[29] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_20),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button summarize-button\",\n                            disabled: is_summarizing.value || !_unref(settings).api_key,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                            onClick: handle_summarize\n                        }, [\n                            (!is_summarizing.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_22))\n                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_23)),\n                            _createTextVNode(\" \" + _toDisplayString(is_summarizing.value ? '...' : ''), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_21)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_24, [\n                    _cache[43] || (_cache[43] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_25, [\n                        _cache[31] || (_cache[31] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(settings).table_start_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).table_start_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_26, [\n                        _cache[32] || (_cache[32] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).table_end_message_id) = $event)),\n                            type: \"number\",\n                            min: \"0\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [\n                                _vModelText,\n                                _unref(settings).table_end_message_id,\n                                void 0,\n                                { number: true }\n                            ]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_27, [\n                        _cache[37] || (_cache[37] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_28, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((selectedTemplate).value = $event)),\n                                style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                onChange: loadTemplate\n                            }, [\n                                _cache[33] || (_cache[33] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(headerTemplates.value, (template, index) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: index,\n                                        value: index\n                                    }, _toDisplayString(template.name), 9 /* TEXT, PROPS */, _hoisted_29));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelSelect, selectedTemplate.value]\n                            ]),\n                            _createElementVNode(\"button\", {\n                                style: { \"padding\": \"8px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                onClick: showAddTemplateDialog\n                            }, [...(_cache[34] || (_cache[34] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        (selectedTemplate.value !== '')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((currentTemplate.value.name) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"\",\n                                    style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, currentTemplate.value.name]\n                                ]),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((currentTemplate.value.headers) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"\",\n                                    style: { \"flex\": \"2\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, currentTemplate.value.headers]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#28a745\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: saveTemplate\n                                }, [...(_cache[35] || (_cache[35] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-save\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: deleteTemplate\n                                }, [...(_cache[36] || (_cache[36] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_31, [\n                        _cache[41] || (_cache[41] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_32, [\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                _createElementVNode(\"div\", {\n                                    style: _normalizeStyle({\n                                        width: '8px',\n                                        height: '8px',\n                                        borderRadius: '50%',\n                                        backgroundColor: is_summarizing.value ? '#ff6b6b' : '#4caf50',\n                                        transition: 'background-color 0.3s',\n                                    })\n                                }, null, 4 /* STYLE */),\n                                _cache[38] || (_cache[38] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _createElementVNode(\"div\", {\n                                    style: _normalizeStyle({\n                                        width: '8px',\n                                        height: '8px',\n                                        borderRadius: '50%',\n                                        backgroundColor: is_generating_table.value ? '#ff6b6b' : '#4caf50',\n                                        transition: 'background-color 0.3s',\n                                    })\n                                }, null, 4 /* STYLE */),\n                                _cache[39] || (_cache[39] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                            ]),\n                            (is_summarizing.value || is_generating_table.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"4px 8px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"11px\" },\n                                        onClick: stopGeneration\n                                    }, [...(_cache[40] || (_cache[40] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-stop\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_36, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button summarize-button\",\n                            disabled: is_generating_table.value || !_unref(settings).api_key,\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#4a9eff\", \"color\": \"white\" },\n                            onClick: handle_generate_table\n                        }, [\n                            (!is_generating_table.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_38))\n                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_39)),\n                            _createTextVNode(\" \" + _toDisplayString(is_generating_table.value ? 'AI...' : 'AI'), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_37),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button create-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#51cf66\", \"color\": \"white\" },\n                            onClick: handle_create_table\n                        }, [...(_cache[42] || (_cache[42] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_40, [\n                    _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0 !important\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_41, [\n                        _cache[44] || (_cache[44] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"1-10 5\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event) => ((hide_range).value = $event)),\n                            type: \"text\",\n                            placeholder: \"1-10\",\n                            style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, hide_range.value]\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_42, [\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ff6b6b\", \"color\": \"white\" },\n                            onClick: handle_hide_messages\n                        }, [...(_cache[45] || (_cache[45] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye-slash\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#51cf66\", \"color\": \"white\" },\n                            disabled: !hide_range.value.trim(),\n                            onClick: handle_show_messages\n                        }, [...(_cache[46] || (_cache[46] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_43),\n                        _createElementVNode(\"button\", {\n                            class: \"action-button\",\n                            style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ffcc02\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ffd43b\", \"color\": \"#333\" },\n                            onClick: _cache[16] || (_cache[16] = () => handle_refresh_hidden(true))\n                        }, [...(_cache[47] || (_cache[47] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    (hidden_messages.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_44, [\n                            _createElementVNode(\"div\", _hoisted_45, [\n                                _createElementVNode(\"label\", _hoisted_46, [\n                                    _createElementVNode(\"span\", null, \" (\" + _toDisplayString(hidden_messages.value.length) + \" )\", 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"mini-button\",\n                                        onClick: _cache[17] || (_cache[17] = ($event) => (hidden_display_expanded.value = !hidden_display_expanded.value))\n                                    }, _toDisplayString(hidden_display_expanded.value ? '' : ''), 1 /* TEXT */)\n                                ])\n                            ]),\n                            (hidden_display_expanded.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hidden_messages.value, (msg) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: msg.message_id,\n                                            class: \"hidden-message-item\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_48, [\n                                                _createElementVNode(\"span\", _hoisted_49, \"#\" + _toDisplayString(msg.message_id), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", {\n                                                    class: _normalizeClass([\"message-role\", 'role-' + msg.role])\n                                                }, _toDisplayString(msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '') + \" \" + _toDisplayString(msg.name), 3 /* TEXT, CLASS */),\n                                                _createElementVNode(\"span\", _hoisted_50, _toDisplayString(msg.message.substring(0, 50)) + _toDisplayString(msg.message.length > 50 ? '...' : ''), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"show-button\",\n                                                onClick: () => handle_unhide_single(msg.message_id)\n                                            }, \"\", 8 /* PROPS */, _hoisted_51)\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_52, \"\"))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsTab.vue?vue&type=style&index=0&id=2e1e6c9e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"summary-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_8 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_9 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_12 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    class: \"history-text\",\n    style: { \"font-family\": \"'Courier New', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"color\": \"#e0e0e0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"user-select\": \"text\", \"cursor\": \"text\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SummaryTab',\n    setup(__props) {\n        const historyStore = useSummaryHistoryStore();\n        // \n        const summary_history = ref([]);\n        const expandedState = ref(new Map());\n        // \n        const refreshSummaryHistory = () => {\n            try {\n                summary_history.value = historyStore.getSummaryHistory();\n                console.log(':', summary_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                summary_history.value = [];\n            }\n        };\n        // \n        const toggleExpanded = (index) => {\n            const current = expandedState.value.get(index) || false;\n            expandedState.value.set(index, !current);\n        };\n        const isExpanded = (index) => {\n            return expandedState.value.get(index) || false;\n        };\n        // \n        const handleRefreshData = async () => {\n            console.log('');\n            try {\n                await refreshSummaryHistory();\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copySummary = (content) => {\n            copyToClipboard(content, '');\n        };\n        // \n        const deleteSummary = (index) => {\n            if (confirm('')) {\n                try {\n                    const chat_id = getChatIdSafe();\n                    if (!chat_id) {\n                        window.toastr.error('');\n                        return;\n                    }\n                    summary_history.value.splice(index, 1);\n                    insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error('');\n                }\n            }\n        };\n        // \n        const createSummaryWorldbook = async () => {\n            try {\n                // \n                let characterName = '';\n                try {\n                    const currentCharacter = getCharData('current');\n                    if (currentCharacter && currentCharacter.name) {\n                        characterName = currentCharacter.name;\n                        // \n                        characterName = characterName.replace(/[<>:\"/\\\\|?*]/g, '_').trim();\n                    }\n                }\n                catch (charError) {\n                    console.warn(':', charError);\n                }\n                // \n                const dateStr = new Date().toISOString().slice(0, 10);\n                const worldbookName = `_${characterName}_${dateStr}`;\n                console.log(':', worldbookName);\n                const existingWorldbooks = getWorldbookNames();\n                if (existingWorldbooks.includes(worldbookName)) {\n                    window.toastr.warning(` \"${worldbookName}\" `);\n                    return;\n                }\n                await createWorldbook(worldbookName, []);\n                try {\n                    await rebindChatWorldbook('current', worldbookName);\n                    window.toastr.success(` \"${worldbookName}\" `);\n                }\n                catch (bindError) {\n                    console.warn(':', bindError);\n                    window.toastr.success(` \"${worldbookName}\"`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const bindToWorldbook = async (content, summaryIndex) => {\n            try {\n                const worldbookNames = getWorldbookNames();\n                if (worldbookNames.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const selectedWorldbook = worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\n                if (!selectedWorldbook) {\n                    return;\n                }\n                const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\n                const newEntry = {\n                    name: entryName,\n                    enabled: true,\n                    strategy: {\n                        type: 'constant',\n                        keys: [],\n                        keys_secondary: { logic: 'and_any', keys: [] },\n                        scan_depth: 'same_as_global',\n                    },\n                    position: {\n                        type: 'before_character_definition',\n                        role: 'system',\n                        depth: 1,\n                    },\n                    content: content,\n                    comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\n                    insertion_order: 0,\n                    case_sensitive: false,\n                    name_is_regex: false,\n                    keys_are_regex: false,\n                    selective_logic: 'and',\n                    secondary_keys_logic: 'and',\n                    activation_threshold: 0,\n                    disabled: false,\n                    order: 0,\n                    group: '',\n                    local_id: 0,\n                    depth_entries: [],\n                    depth_entries_all: false,\n                    search_range: 0,\n                    force_activation: false,\n                    disable: false,\n                    exclude_recursion: false,\n                    hidden: false,\n                    priority: 0,\n                    comment_is_regex: false,\n                    content_is_regex: false,\n                    secondary_keys_are_regex: false,\n                    keys_secondary_are_regex: false,\n                    uid: Date.now(),\n                };\n                await createWorldbookEntries(selectedWorldbook, [newEntry]);\n                window.toastr.success(`: ${selectedWorldbook}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const promptForWorldbook = async (worldbookNames) => {\n            return new Promise(resolve => {\n                const dialog = $(`\n      <div style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: #2a2a2a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        padding: 20px;\n        z-index: 1000000;\n        min-width: 300px;\n      \">\n        <h3 style=\"margin: 0 0 15px 0; color: #e0e0e0;\"></h3>\n        <div style=\"margin-bottom: 15px;\">\n          ${worldbookNames\n                    .map(name => `\n            <label style=\"display: block; margin: 5px 0; color: #e0e0e0;\">\n              <input type=\"radio\" name=\"worldbook\" value=\"${name}\" style=\"margin-right: 8px;\">\n              ${name}\n            </label>\n          `)\n                    .join('')}\n        </div>\n        <div style=\"text-align: right;\">\n          <button id=\"cancelWorldbook\" style=\"\n            background: #666;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            margin-right: 10px;\n            cursor: pointer;\n          \"></button>\n          <button id=\"confirmWorldbook\" style=\"\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n          \"></button>\n        </div>\n      </div>\n    `);\n                const overlay = $(`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n      \"></div>\n    `);\n                $('body').append(overlay).append(dialog);\n                $('#cancelWorldbook').on('click', () => {\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(null);\n                });\n                $('#confirmWorldbook').on('click', () => {\n                    const selected = $('input[name=\"worldbook\"]:checked').val();\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(selected || null);\n                });\n                $('input[name=\"worldbook\"]:first').prop('checked', true);\n            });\n        };\n        // \n        const showDebugPanel = () => {\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'debug-panel-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffc107;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 800px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ul style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li>localStorage</li>\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 20px;\n    `;\n                // \n                const buttons = [\n                    { id: 'testComplete', text: ' ', color: '#4a9eff' },\n                    { id: 'syncData', text: ' ', color: '#28a745' },\n                    { id: 'checkFloor', text: ' ', color: '#17a2b8' },\n                    { id: 'testCalculation', text: ' ', color: '#6f42c1' },\n                    { id: 'showStatus', text: ' ', color: '#fd7e14' },\n                    { id: 'resetStartId', text: ' ', color: '#dc3545' },\n                ];\n                buttons.forEach(button => {\n                    const btn = parentDoc.createElement('button');\n                    btn.id = button.id;\n                    btn.textContent = button.text;\n                    btn.style.cssText = `\n        background: ${button.color};\n        color: white;\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        transition: background 0.2s;\n      `;\n                    btn.onmouseover = () => {\n                        btn.style.opacity = '0.8';\n                    };\n                    btn.onmouseout = () => {\n                        btn.style.opacity = '1';\n                    };\n                    buttonContainer.appendChild(btn);\n                });\n                // \n                const outputArea = parentDoc.createElement('div');\n                outputArea.id = 'debug-output';\n                outputArea.style.cssText = `\n      background: #1a1a1a;\n      border: 1px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      height: 200px;\n      overflow-y: auto;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 12px;\n      color: #e0e0e0;\n      white-space: pre-wrap;\n      margin-bottom: 20px;\n    `;\n                outputArea.textContent = '...\\n';\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #6c757d;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n      align-self: center;\n    `;\n                // \n                container.appendChild(header);\n                container.appendChild(buttonContainer);\n                container.appendChild(outputArea);\n                container.appendChild(closeButton);\n                overlay.appendChild(container);\n                parentBody.appendChild(overlay);\n                // \n                const log = (message) => {\n                    const output = parentDoc.getElementById('debug-output');\n                    if (output) {\n                        output.textContent += message + '\\n';\n                        output.scrollTop = output.scrollHeight;\n                    }\n                };\n                // \n                closeButton.onclick = () => {\n                    parentBody.removeChild(overlay);\n                };\n                // \n                parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testCompleteAutoSummary) {\n                            window.testCompleteAutoSummary();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('syncData')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.syncAutoSummaryData) {\n                            window.syncAutoSummaryData();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkCurrentFloor) {\n                            window.checkCurrentFloor();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testFloorCalculation) {\n                            window.testFloorCalculation();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkAutoSummaryStatus) {\n                            window.checkAutoSummaryStatus();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.smartResetChat) {\n                            window.smartResetChat();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                window.toastr?.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr?.error('');\n            }\n        };\n        // \n        refreshSummaryHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (summary_history.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(summary_history.value.length) + \" \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: handleRefreshData\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button create-worldbook-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#51cf66\", \"border\": \"1px solid #40c057\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: createSummaryWorldbook\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button debug-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#ffc107\", \"border\": \"1px solid #ffb300\", \"border-radius\": \"4px\", \"color\": \"#000\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: showDebugPanel\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-bug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                (summary_history.value && summary_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(summary_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"span\", _hoisted_8, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(isExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                (isExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"background 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (copySummary(item.content))\n                                            }, [...(_cache[4] || (_cache[4] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button worldbook-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (bindToWorldbook(item.content, index))\n                                            }, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_14),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button delete-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#ff6b6b\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (deleteSummary(index))\n                                            }, [...(_cache[6] || (_cache[6] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_15)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, _toDisplayString(item.content), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-inbox\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SummaryTab.vue?vue&type=style&index=0&id=97028022&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-97028022\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"table-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_7 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_8 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_9 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_11 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-wrap\": \"wrap\" }\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    class: \"table-display\",\n    style: { \"overflow-x\": \"auto\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_15 = { style: { \"width\": \"100%\", \"border-collapse\": \"collapse\", \"background\": \"#1a1a1a\" } };\nconst _hoisted_16 = { style: { \"background\": \"#2a2a2a\" } };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { getChatIdSafe } from '../utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableTab',\n    setup(__props) {\n        const table_history = ref([]);\n        const tableExpandedState = ref(new Map());\n        // \n        const refreshTableHistory = () => {\n            try {\n                const chat_id = getChatIdSafe();\n                if (!chat_id) {\n                    console.warn('ID');\n                    table_history.value = [];\n                    return;\n                }\n                const chat_vars = getVariables({ type: 'chat' });\n                console.log(':', chat_vars);\n                console.log(':', chat_vars.table_history);\n                table_history.value = chat_vars.table_history || [];\n                console.log(':', table_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                table_history.value = [];\n            }\n        };\n        // \n        const toggleTableExpanded = (index) => {\n            const current = tableExpandedState.value.get(index) || false;\n            tableExpandedState.value.set(index, !current);\n        };\n        const isTableExpanded = (index) => {\n            return tableExpandedState.value.get(index) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copyTable = (tableItem) => {\n            try {\n                // TSV\n                const tsv = [tableItem.headers.join('\\t'), ...tableItem.data.map(row => row.join('\\t'))].join('\\n');\n                copyToClipboard(tsv, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        };\n        // \n        const deleteTable = (index) => {\n            if (confirm('')) {\n                table_history.value.splice(index, 1);\n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n            }\n        };\n        // \n        refreshTableHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    (table_history.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(table_history.value.length) + \" \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (table_history.value && table_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(table_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleTableExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"span\", _hoisted_7, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_8, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(isTableExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_5),\n                                (isTableExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (copyTable(item))\n                                            }, [...(_cache[1] || (_cache[1] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12),\n                                            _createElementVNode(\"button\", {\n                                                class: \"delete-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (deleteTable(index))\n                                            }, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-trash\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            _createElementVNode(\"table\", _hoisted_15, [\n                                                _createElementVNode(\"thead\", _hoisted_16, [\n                                                    _createElementVNode(\"tr\", null, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.headers, (header, idx) => {\n                                                            return (_openBlock(), _createElementBlock(\"th\", {\n                                                                key: idx,\n                                                                style: { \"padding\": \"12px 16px\", \"text-align\": \"left\", \"font-weight\": \"bold\", \"color\": \"#fff\", \"border-bottom\": \"2px solid #3a3a3a\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                            }, _toDisplayString(header), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"tbody\", null, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.data, (row, rowIdx) => {\n                                                        return (_openBlock(), _createElementBlock(\"tr\", {\n                                                            key: rowIdx,\n                                                            style: { \"border-bottom\": \"1px solid #3a3a3a\" }\n                                                        }, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row, (cell, cellIdx) => {\n                                                                return (_openBlock(), _createElementBlock(\"td\", {\n                                                                    key: cellIdx,\n                                                                    style: { \"padding\": \"10px 16px\", \"color\": \"#e0e0e0\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                                }, _toDisplayString(cell), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TableTab.vue?vue&type=style&index=0&id=0416f1c6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0416f1c6\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = _;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_5 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_8 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_9 = { class: \"tool-section\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_11 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_12 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_13 = [\"disabled\"];\nconst _hoisted_14 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_15 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_16 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_18 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_19 = [\"disabled\"];\nimport { debounce } from 'lodash';\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref, watch } from 'vue';\nimport { getScriptIdSafe } from '/utils';\nimport { useSettingsStore } from '../settings';\n\nimport { onBeforeUnmount } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ToolsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const toolExpandedState = ref(new Map());\n        const antiClicheInput = ref('');\n        const antiClicheOutput = ref('');\n        const isProcessingAntiCliche = ref(false);\n        const characterDescription = ref('');\n        const characterCardOutput = ref('');\n        const isGeneratingCharacter = ref(false);\n        const modifyRequest = ref('');\n        const isModifyingCharacter = ref(false);\n        // \n        const isDataLoaded = ref(false);\n        // \n        const loadToolsData = () => {\n            try {\n                isDataLoaded.value = false; // \n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    isDataLoaded.value = true;\n                    return;\n                }\n                const savedData = getVariables({ type: 'script', script_id });\n                console.log(' :', savedData);\n                // \n                if (savedData.tools_antiCliche) {\n                    antiClicheInput.value = savedData.tools_antiCliche.input || '';\n                    antiClicheOutput.value = savedData.tools_antiCliche.output || '';\n                    console.log(' :', {\n                        input: antiClicheInput.value.substring(0, 50),\n                        output: antiClicheOutput.value.substring(0, 50),\n                    });\n                }\n                // \n                if (savedData.tools_characterCard) {\n                    characterDescription.value = savedData.tools_characterCard.description || '';\n                    characterCardOutput.value = savedData.tools_characterCard.output || '';\n                    modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\n                    console.log(' :', {\n                        description: characterDescription.value.substring(0, 50),\n                        output: characterCardOutput.value.substring(0, 50),\n                        modifyRequest: modifyRequest.value.substring(0, 50),\n                    });\n                }\n                // \n                if (savedData.tools_expandedState) {\n                    toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\n                    console.log(' :', Object.fromEntries(toolExpandedState.value));\n                }\n                // \n                setTimeout(() => {\n                    isDataLoaded.value = true;\n                    console.log(' ');\n                }, 100);\n            }\n            catch (error) {\n                console.error(' :', error);\n                isDataLoaded.value = true;\n            }\n        };\n        // \n        const saveToolsDataImmediate = () => {\n            // \n            if (!isDataLoaded.value) {\n                console.log(' ');\n                return;\n            }\n            try {\n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    return;\n                }\n                const dataToSave = {\n                    tools_antiCliche: {\n                        input: antiClicheInput.value,\n                        output: antiClicheOutput.value,\n                    },\n                    tools_characterCard: {\n                        description: characterDescription.value,\n                        output: characterCardOutput.value,\n                        modifyRequest: modifyRequest.value,\n                    },\n                    tools_expandedState: Object.fromEntries(toolExpandedState.value),\n                };\n                insertOrAssignVariables(dataToSave, { type: 'script', script_id });\n                console.log(' :', {\n                    antiCliche_input_length: antiClicheInput.value.length,\n                    antiCliche_output_length: antiClicheOutput.value.length,\n                    character_desc_length: characterDescription.value.length,\n                    character_output_length: characterCardOutput.value.length,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n        };\n        // 300ms\n        const saveToolsData = debounce(saveToolsDataImmediate, 300);\n        // \n        watch([antiClicheInput, antiClicheOutput, characterDescription, characterCardOutput, modifyRequest, toolExpandedState], () => {\n            if (isDataLoaded.value) {\n                console.log(' ...');\n                saveToolsData();\n            }\n        }, { deep: true });\n        // \n        onMounted(() => {\n            console.log(' ToolsTab ...');\n            loadToolsData();\n        });\n        // \n        onBeforeUnmount(() => {\n            console.log(' ToolsTab ...');\n            // \n            saveToolsData.cancel();\n            saveToolsDataImmediate();\n        });\n        // \n        const toggleToolExpanded = (toolName) => {\n            console.log('toggleToolExpanded :', toolName);\n            const current = toolExpandedState.value.get(toolName) || false;\n            console.log(':', current);\n            toolExpandedState.value.set(toolName, !current);\n            console.log(':', !current);\n        };\n        // \n        const isToolExpanded = (toolName) => {\n            return toolExpandedState.value.get(toolName) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage) => {\n            console.log(' :', text.length);\n            console.log(' iframe:', window.parent !== window);\n            // 1\n            if (window.parent && window.parent !== window) {\n                console.log(' ...');\n                const parentSuccess = tryParentWindowCopy(text);\n                if (parentSuccess) {\n                    console.log(' ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                else {\n                    console.warn(' ');\n                }\n            }\n            // 2 execCommand \n            try {\n                console.log('  execCommand ...');\n                const success = execCommandCopy(text);\n                if (success) {\n                    console.log(' execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                else {\n                    console.warn(' execCommand ');\n                }\n            }\n            catch (error) {\n                console.warn(' execCommand :', error);\n            }\n            // 3 Clipboard API\n            try {\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log('  Clipboard API ...');\n                    await navigator.clipboard.writeText(text);\n                    // \n                    const clipboardContent = await navigator.clipboard.readText();\n                    if (clipboardContent === text) {\n                        console.log(' Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    else {\n                        console.warn(' Clipboard API ');\n                    }\n                }\n            }\n            catch (error) {\n                console.warn(' Clipboard API :', error);\n            }\n            // \n            console.log(' ');\n            showManualCopyDialog(text);\n        };\n        // \n        const tryParentWindowCopy = (text) => {\n            try {\n                if (window.parent && window.parent !== window) {\n                    console.log('   textarea...');\n                    // \n                    const parentDoc = window.parent.document;\n                    const tempTextArea = parentDoc.createElement('textarea');\n                    tempTextArea.value = text;\n                    // \n                    tempTextArea.style.cssText = `\n        position: fixed !important;\n        left: -9999px !important;\n        top: -9999px !important;\n        width: 1px !important;\n        height: 1px !important;\n        opacity: 0 !important;\n        pointer-events: none !important;\n      `;\n                    tempTextArea.setAttribute('readonly', '');\n                    parentDoc.body.appendChild(tempTextArea);\n                    console.log('   Textarea');\n                    // \n                    tempTextArea.focus();\n                    tempTextArea.select();\n                    tempTextArea.setSelectionRange(0, text.length);\n                    console.log('   ');\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    console.log('   execCommand:', success);\n                    // \n                    parentDoc.body.removeChild(tempTextArea);\n                    console.log('   Textarea');\n                    return success;\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n            return false;\n        };\n        // execCommand \n        const execCommandCopy = (text) => {\n            try {\n                console.log('   textarea...');\n                // \n                const textArea = document.createElement('textarea');\n                textArea.value = text;\n                // \n                textArea.style.cssText = `\n      position: fixed !important;\n      left: -9999px !important;\n      top: -9999px !important;\n      width: 1px !important;\n      height: 1px !important;\n      opacity: 0 !important;\n      pointer-events: none !important;\n    `;\n                textArea.setAttribute('readonly', '');\n                document.body.appendChild(textArea);\n                console.log('   Textarea');\n                // \n                textArea.focus();\n                textArea.select();\n                textArea.setSelectionRange(0, text.length);\n                console.log('   ');\n                // \n                const success = document.execCommand('copy');\n                console.log('   execCommand:', success);\n                // \n                document.body.removeChild(textArea);\n                console.log('   Textarea');\n                return success;\n            }\n            catch (error) {\n                console.error(' execCommand :', error);\n                return false;\n            }\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            try {\n                console.log(' ');\n                // \n                const targetDoc = window.parent && window.parent !== window ? window.parent.document : document;\n                const targetBody = targetDoc.body;\n                console.log(' :', targetDoc === window.parent.document ? '' : '');\n                // \n                const existingModal = targetDoc.getElementById('manual-copy-modal-tools');\n                if (existingModal) {\n                    targetBody.removeChild(existingModal);\n                }\n                // \n                const modal = targetDoc.createElement('div');\n                modal.id = 'manual-copy-modal-tools';\n                modal.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.9);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                const dialog = targetDoc.createElement('div');\n                dialog.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffa500;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 700px;\n      width: 90%;\n      max-height: 80vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);\n    `;\n                dialog.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffa500; font-size: 18px; font-weight: 600;\">\n        <i class=\"fa-solid fa-copy\" style=\"margin-right: 8px;\"></i>\n        \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #3a3a3a; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0; color: #e0e0e0; font-size: 14px; line-height: 1.6;\">\n           \n        </p>\n        <ol style=\"margin: 8px 0 0 20px; padding: 0; color: #ccc; font-size: 13px;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px;\">Ctrl+C</kbd> </li>\n        </ol>\n      </div>\n      <textarea\n        readonly\n        id=\"copyTextarea\"\n        style=\"\n          width: 100%;\n          height: 300px;\n          background: #1a1a1a;\n          border: 2px solid #3a3a3a;\n          border-radius: 6px;\n          padding: 12px;\n          color: #e0e0e0;\n          font-size: 13px;\n          font-family: 'Courier New', Consolas, monospace;\n          resize: vertical;\n          margin-bottom: 15px;\n          box-sizing: border-box;\n        \"\n      >${text}</textarea>\n      <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\n        <button id=\"manualCopyBtn\" style=\"\n          padding: 10px 20px;\n          background: #28a745;\n          border: none;\n          border-radius: 6px;\n          color: white;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: background 0.2s;\n        \"></button>\n        <button id=\"closeBtn\" style=\"\n          padding: 10px 20px;\n          background: #6c757d;\n          border: none;\n          border-radius: 6px;\n          color: white;\n          font-size: 14px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: background 0.2s;\n        \"></button>\n      </div>\n    `;\n                modal.appendChild(dialog);\n                targetBody.appendChild(modal);\n                console.log(' DOM');\n                // \n                const textarea = dialog.querySelector('#copyTextarea');\n                setTimeout(() => {\n                    textarea.focus();\n                    textarea.select();\n                    console.log(' ');\n                }, 100);\n                // \n                const copyBtn = dialog.querySelector('#manualCopyBtn');\n                const closeBtn = dialog.querySelector('#closeBtn');\n                copyBtn.onmouseover = () => (copyBtn.style.background = '#218838');\n                copyBtn.onmouseout = () => (copyBtn.style.background = '#28a745');\n                closeBtn.onmouseover = () => (closeBtn.style.background = '#5a6268');\n                closeBtn.onmouseout = () => (closeBtn.style.background = '#6c757d');\n                copyBtn.onclick = () => {\n                    try {\n                        console.log(' ...');\n                        textarea.focus();\n                        textarea.select();\n                        const success = targetDoc.execCommand('copy');\n                        console.log(' :', success);\n                        if (success) {\n                            window.toastr.success('');\n                            targetBody.removeChild(modal);\n                        }\n                        else {\n                            window.toastr.warning(' Ctrl+C ');\n                        }\n                    }\n                    catch (error) {\n                        console.error(' :', error);\n                        window.toastr.warning(' Ctrl+C ');\n                    }\n                };\n                closeBtn.onclick = () => {\n                    console.log(' ');\n                    targetBody.removeChild(modal);\n                };\n                // \n                modal.onclick = e => {\n                    if (e.target === modal) {\n                        console.log(' ');\n                        targetBody.removeChild(modal);\n                    }\n                };\n                // ESC\n                const handleEsc = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log(' ESC');\n                        targetBody.removeChild(modal);\n                        targetDoc.removeEventListener('keydown', handleEsc);\n                    }\n                };\n                targetDoc.addEventListener('keydown', handleEsc);\n                window.toastr.info('', '', { timeOut: 3000 });\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const handleAntiClicheProcess = async () => {\n            if (!antiClicheInput.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isProcessingAntiCliche.value = true;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: `\n\n## \n\n\n## \n- \n- \n- \n\n## \nxxx/xxx\n****\n\n## \nxxx/xxx//\n**\"\"\"\"**\n\n## \"\"\n\"\"\n\n## \n- \n- \"/\"\n- \"\"\n- \n\n## \n- \n- \n- \n\n## //\n- \n- \n- \n- user\n\n## NSFW\n- /\n- \n- \n\n## \n\n\n\n\n\n\n\n\n\nxxx\n\n****\n1. \n2. \n3. \n4. \n5. \n\n`,\n                            },\n                            {\n                                role: 'user',\n                                content: antiClicheInput.value,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens || 8000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                antiClicheOutput.value = data.choices[0].message.content.trim();\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isProcessingAntiCliche.value = false;\n            }\n        };\n        const copyAntiClicheResult = () => {\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(antiClicheOutput.value, '');\n        };\n        // \n        const handleGenerateCharacterCard = async () => {\n            if (!characterDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingCharacter.value = true;\n                window.toastr.info('AI...');\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        max_tokens: settings.value.max_tokens || 16000,\n                        temperature: 0.8,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: `\n\n****\n-  YAML \n- \n- AI\n- AI\n\n****\n\\`\\`\\`yaml\n:\n  : \"\"\n  : \n  : \"YYYYMM\"\n  : \"//\"\n  : \"Alpha/Beta/Omega/\"\n  : \"////\"\n  : \"\"\n  : \"//\"\n  : \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n  : \"\"\n  : \"\"\n\n:\n  :\n    - 1: \"\"\n    - 2: \"\"\n    - 3: \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"/\"\n  : [\"1\", \"2\"]\n\n:\n  : \"\"\n  : \"\"\n  : [\"1\", \"2\", \"3\"]\n  : \"TA\"\n  : \"\"\n  : \"TA\"\n\n:\n  : \"{{user}}\"\n  : \"\"\n  : \"//\"\n  : \"\"\n\n:\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"\"\n  : \"TA\"\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"TA\"\n  :\n    : \"\"\n    : \"\"\n\\`\\`\\`\n\n\n1. \n2. \n3. TA\n4. `,\n                            },\n                            {\n                                role: 'user',\n                                content: characterDescription.value,\n                            },\n                        ],\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                characterCardOutput.value = data.choices[0].message.content.trim();\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingCharacter.value = false;\n            }\n        };\n        const clearCharacterForm = () => {\n            characterDescription.value = '';\n            characterCardOutput.value = '';\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        const copyCharacterCard = () => {\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(characterCardOutput.value, '');\n        };\n        // \n        const clearAntiClicheForm = () => {\n            antiClicheInput.value = '';\n            antiClicheOutput.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleModifyCharacterCard = async () => {\n            if (!modifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingCharacter.value = true;\n                window.toastr.info('AI...');\n                const response = await fetch(settings.value.api_endpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        max_tokens: settings.value.max_tokens || 16000,\n                        temperature: 0.8,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ` YAML \n\n****\n1.  YAML \n2. \n3. \n4. \n5. \n6. \n\n****\n- ////\n- \n- \n- AI\n\n YAML `,\n                            },\n                            {\n                                role: 'user',\n                                content: `\n\n${characterCardOutput.value}\n\n---\n\n\n${modifyRequest.value}`,\n                            },\n                        ],\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                characterCardOutput.value = data.choices[0].message.content.trim();\n                modifyRequest.value = ''; // \n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingCharacter.value = false;\n            }\n        };\n        // \n        const clearModifyRequest = () => {\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleToolExpanded('antiCliche')))\n                    }, [\n                        _cache[5] || (_cache[5] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-broom\",\n                                style: { \"margin-right\": \"8px\", \"color\": \"#ff6b6b\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ]),\n                    (isToolExpanded('antiCliche'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"tool-instructions\" }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                    }),\n                                    _createTextVNode(\" //9200+ \")\n                                ]),\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#ffa500\", \"font-size\": \"11px\", \"background\": \"#1a1a1a\", \"padding\": \"6px\", \"border-radius\": \"4px\", \"border-left\": \"3px solid #ffa500\" } }, \"  /NSFW \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((antiClicheInput).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, antiClicheInput.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"button\", {\n                                    class: \"process-button\",\n                                    disabled: isProcessingAntiCliche.value || !antiClicheInput.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleAntiClicheProcess\n                                }, [\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isProcessingAntiCliche.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearAntiClicheForm\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (antiClicheOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_8, _toDisplayString(antiClicheOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyAntiClicheResult\n                                        }, [...(_cache[10] || (_cache[10] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_9, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (toggleToolExpanded('characterCard')))\n                    }, [\n                        _cache[13] || (_cache[13] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-user-plus\",\n                                style: { \"margin-right\": \"8px\", \"color\": \"#17a2b8\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ]),\n                    (isToolExpanded('characterCard'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                            _cache[25] || (_cache[25] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-0c833396><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-0c833396><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-0c833396></i> AIYAML  </p><p style=\\\"margin:0 0 6px 0;color:#4a9eff;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #17a2b8;\\\" data-v-0c833396>   </p><p style=\\\"margin:0 0 6px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-0c833396>  &quot;&quot;AI </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _cache[14] || (_cache[14] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((characterDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, characterDescription.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingCharacter.value || !characterDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateCharacterCard\n                                }, [\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingCharacter.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_13),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearCharacterForm\n                                }, [...(_cache[17] || (_cache[17] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (characterCardOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                    _cache[24] || (_cache[24] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_15, _toDisplayString(characterCardOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyCharacterCard\n                                        }, [...(_cache[18] || (_cache[18] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _cache[23] || (_cache[23] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-0c833396><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-0c833396></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-0c833396><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-0c833396><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-0c833396></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-0c833396>  YAML </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_17, [\n                                            _cache[19] || (_cache[19] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((modifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, modifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_18, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingCharacter.value || !modifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyCharacterCard\n                                            }, [\n                                                _cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[21] || (_cache[21] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingCharacter.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_19),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearModifyRequest\n                                            }, [...(_cache[22] || (_cache[22] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolsTab.vue?vue&type=style&index=0&id=0c833396&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0c833396\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"memory-panel-container\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\" }\n};\nconst _hoisted_2 = {\n    class: \"panel-tabs\",\n    style: { \"display\": \"flex\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-shrink\": \"0\" }\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = {\n    class: \"panel-content\",\n    style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"overflow-x\": \"hidden\", \"padding\": \"0\", \"min-height\": \"0\", \"scrollbar-width\": \"thin\", \"scrollbar-color\": \"#4a9eff #2a2a2a\" }\n};\nimport { computed, ref } from 'vue';\nimport SettingsTab from './SettingsTab.vue';\nimport SummaryTab from './SummaryTab.vue';\nimport TableTab from './TableTab.vue';\nimport ToolsTab from './ToolsTab.vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    setup(__props) {\n        const tabs = [\n            { key: 'summary', label: '', icon: 'fa-solid fa-list' },\n            { key: 'table', label: '', icon: 'fa-solid fa-table' },\n            { key: 'settings', label: '', icon: 'fa-solid fa-cog' },\n            { key: 'tools', label: '', icon: 'fa-solid fa-tools' },\n        ];\n        const activeTab = ref('settings');\n        // \n        const componentMap = {\n            summary: SummaryTab,\n            table: TableTab,\n            settings: SettingsTab,\n            tools: ToolsTab,\n        };\n        // \n        const currentComponent = computed(() => componentMap[activeTab.value]);\n        // \n        const componentProps = computed(() => ({\n            activeTab: activeTab.value,\n        }));\n        // \n        const switchTab = (tabKey) => {\n            console.log(':', tabKey);\n            activeTab.value = tabKey;\n        };\n        // \n        const closePanel = () => {\n            $('#memoryManagementPanel').fadeOut(200);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: \"panel-header\",\n                    style: { \"padding\": \"15px 20px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"border-radius\": \"8px 8px 0 0\", \"flex-shrink\": \"0\" }\n                }, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n                        class: \"header-left\",\n                        style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n                    }, [\n                        _createElementVNode(\"span\", { style: { \"font-size\": \"24px\" } }, \"\"),\n                        _createElementVNode(\"b\", null, \"mzrodyu\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", {\n                        class: \"close-button\",\n                        style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                        onClick: closePanel\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(tabs, (tab) => {\n                        return _createElementVNode(\"div\", {\n                            key: tab.key,\n                            class: _normalizeClass([{ 'tab-active': activeTab.value === tab.key }, \"tab-item\"]),\n                            style: _normalizeStyle({\n                                flex: '1',\n                                padding: '12px 20px',\n                                cursor: 'pointer',\n                                textAlign: 'center',\n                                transition: 'background 0.2s, color 0.2s',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '8px',\n                                borderBottom: '2px solid transparent',\n                                backgroundColor: activeTab.value === tab.key ? '#1a1a1a' : 'transparent',\n                                color: activeTab.value === tab.key ? '#4a9eff' : '#e0e0e0',\n                                borderBottomColor: activeTab.value === tab.key ? '#4a9eff' : 'transparent',\n                            }),\n                            onClick: ($event) => (switchTab(tab.key))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon)\n                            }, null, 2 /* CLASS */),\n                            _createTextVNode(\" \" + _toDisplayString(tab.label), 1 /* TEXT */)\n                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_3);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(currentComponent.value), _mergeProps({ key: activeTab.value }, componentProps.value), null, 16 /* FULL_PROPS */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MainPanel.vue?vue&type=style&index=0&id=4ef9901c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_9f8c8f8c5032ffc5bc436533b4cd65ef/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4ef9901c\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport MainPanel from './components/MainPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: '',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(MainPanel));\n        };\n    }\n});\n","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport  from './.vue';\n\n$(() => {\n  console.log('.ts ');\n\n  setTimeout(() => {\n    console.log('.ts setTimeout ');\n\n    // \n    const existingPanel = $('#memoryManagementPanel');\n\n    if (existingPanel.length > 0) {\n      console.log('mzrodyu...');\n      // \n      existingPanel.remove();\n      // DOM\n      setTimeout(() => {\n        console.log('...');\n      }, 100);\n    }\n\n    console.log('  - :', new Date().toISOString());\n\n    //  - \n    const panelContainer = $(`\n      <div id=\"memoryManagementPanel\" style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 90vw;\n        max-width: 1200px;\n        height: 80vh;\n        max-height: 80vh;\n        background: #1a1a1a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      \">\n      </div>\n    `);\n\n    //  body\n    $('body').append(panelContainer);\n    console.log(' body, :', panelContainer[0]);\n\n    //  Vue \n    console.log(' Vue :', panelContainer[0]);\n\n    const app = createApp().use(createPinia());\n\n    try {\n      app.mount(panelContainer[0]);\n      console.log('Vue ');\n      console.log('Vue :', (panelContainer[0] as any).__vue_app__);\n    } catch (error) {\n      console.error('Vue :', error);\n      console.error(':', JSON.stringify(error, null, 2));\n      console.error(':', (error as Error).stack);\n    }\n\n    console.log('mzrodyu:', panelContainer[0]);\n  }, 200);\n});\n\n// /\nexport function toggleMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  if (panel.is(':visible')) {\n    panel.fadeOut(200);\n  } else {\n    panel.fadeIn(200);\n  }\n}\n","import { watch } from 'vue';\nimport { useSettingsStore, useSummaryHistoryStore } from './settings';\nimport { getScriptIdSafe, setGlobalScriptId } from './utils';\nimport { summarizeMessages } from './';\nimport './';\nimport './';\n\n$(() => {\n  // \n  setTimeout(() => {\n    let script_id: string | null = null;\n    try {\n      script_id = getScriptId?.();\n    } catch (e) {\n      console.error(' script_id:', e);\n    }\n\n    if (!script_id) {\n      console.error(' script_idmzrodyu');\n      window.toastr.error('mzrodyu');\n      return;\n    }\n\n    //  script_id\n    setGlobalScriptId(script_id);\n\n    console.log('mzrodyuscript_id:', script_id);\n\n    // \n    setTimeout(() => {\n      // \n      const checkAutoSummarize = () => {\n        try {\n          console.log(' ...');\n\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return;\n          }\n\n          const settings = store.settings;\n\n          // \n          if (typeof settings.auto_summarize_enabled !== 'boolean') {\n            console.warn(' ');\n            return;\n          }\n\n          if (typeof settings.summarize_interval !== 'number' || settings.summarize_interval < 1) {\n            console.warn(' ');\n            return;\n          }\n          console.log(' :', {\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            summarize_interval: settings.summarize_interval,\n            has_api_key: !!settings.api_key,\n          });\n\n          if (!settings.auto_summarize_enabled) {\n            console.log(' ');\n            return;\n          }\n\n          if (!settings.api_key) {\n            console.log(' API Key ');\n            return;\n          }\n\n          const last_message_id = getLastMessageId();\n\n          // ID\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          if (!current_chat_id) {\n            console.log(' ID');\n            return;\n          }\n\n          // ID\n          let auto_summary_start_id = 0;\n          try {\n            // \n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id_key = 'auto_summary_start_id';\n\n            console.log(` :`, {\n              current_chat_id,\n              chat_vars: chatVars,\n              has_start_id: chatVars[auto_summary_start_id_key] !== undefined,\n              existing_start_id: chatVars[auto_summary_start_id_key],\n            });\n\n            if (chatVars[auto_summary_start_id_key] !== undefined && chatVars[auto_summary_start_id_key] !== null) {\n              auto_summary_start_id = chatVars[auto_summary_start_id_key];\n              console.log(` : ${auto_summary_start_id} (: ${current_chat_id})`);\n            } else {\n              // \n              // \n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = Array.isArray(scriptVars?.summary_history) ? scriptVars.summary_history : [];\n\n              if (existingSummaries.length > 0) {\n                // \n                const lastSummary = existingSummaries[0]; // \n                const lastSummaryEnd = lastSummary.end_id || 0;\n\n                // +1\n                if (last_message_id > lastSummaryEnd) {\n                  auto_summary_start_id = lastSummaryEnd + 1;\n                  console.log(\n                    ` : ${auto_summary_start_id} ( ${lastSummaryEnd} )`,\n                  );\n                  window.toastr?.info(` ${auto_summary_start_id} `);\n                } else {\n                  // \n                  auto_summary_start_id = last_message_id;\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(`: ${last_message_id}`);\n                }\n              } else {\n                // 0AI\n                auto_summary_start_id = 0;\n                console.log(` : 0 (: ${current_chat_id}) - AI`);\n                window.toastr?.info(` 0 AI`);\n              }\n\n              // 0AI\n              if (auto_summary_start_id < 0) {\n                auto_summary_start_id = 0;\n                console.log(` 0AI`);\n              }\n\n              // \n              insertOrAssignVariables({ [auto_summary_start_id_key]: auto_summary_start_id }, { type: 'chat' });\n            }\n          } catch (error) {\n            console.warn(':', error);\n            auto_summary_start_id = last_message_id;\n          }\n\n          console.log(\n            `: =${last_message_id}, =${auto_summary_start_id}, =${settings.summarize_interval}`,\n          );\n\n          // \n          // \n          // 0=AI, 1=, 2=AI, 3=...\n          const relative_position = last_message_id - auto_summary_start_id;\n\n          // 550-4, 5-9...\n          // 045relative_position=4 >= interval - 1\n          const should_trigger = relative_position >= settings.summarize_interval - 1;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summarize_interval,\n            should_trigger,\n            calculation: `${relative_position} >= ${settings.summarize_interval - 1} (${relative_position + 1})`,\n            expected_trigger_at_floor: auto_summary_start_id + settings.summarize_interval - 1,\n            will_summarize_range: `${auto_summary_start_id}-${auto_summary_start_id + settings.summarize_interval - 1}`,\n            floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n          });\n\n          if (last_message_id >= auto_summary_start_id && should_trigger) {\n            // interval55\n            const start_id = auto_summary_start_id;\n            const end_id = auto_summary_start_id + settings.summarize_interval - 1;\n\n            // \n            console.log(` :  ${start_id}-${end_id}`);\n            window.toastr.info(`  ${start_id}-${end_id}...`);\n\n            summarizeMessages(start_id, end_id)\n              .then(summary => {\n                console.log(` :  ${start_id}-${end_id}`, summary);\n\n                // \n                try {\n                  const historyStore = useSummaryHistoryStore();\n                  historyStore.addSummary(start_id, end_id, summary);\n                } catch (e) {\n                  console.error(':', e);\n                }\n\n                // \n                const new_start_id = end_id + 1;\n                insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n                console.log(` : ${new_start_id}`);\n\n                window.toastr.success(`  ${start_id}-${end_id}  ${new_start_id} `);\n              })\n              .catch(error => {\n                console.error(' ', error);\n                window.toastr.error(' ' + error.message);\n              });\n          }\n        } catch (error) {\n          console.error('checkAutoSummarize ', error);\n          // \n        }\n      };\n\n      // \n      try {\n        eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, () => {\n          console.log(' ...');\n          checkAutoSummarize();\n        });\n\n        // \n        eventOn(tavern_events.CHAT_CHANGED, (chat_file_name: string) => {\n          console.log(' :', chat_file_name);\n\n          // \n          try {\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n            if (auto_summary_start_id !== undefined && auto_summary_start_id !== null) {\n              console.log(` : ${chat_file_name}, : ${auto_summary_start_id}`);\n            } else {\n              console.log(` : ${chat_file_name}, `);\n            }\n          } catch (error) {\n            console.warn(':', error);\n          }\n        });\n\n        console.log(' ');\n\n        //  - \n        (window as any).testCompleteAutoSummary = () => {\n          try {\n            console.log(' ...');\n\n            // 1. \n            const last_message_id = getLastMessageId();\n            const current_floor = last_message_id;\n\n            console.log(':', current_floor);\n\n            // 2. \n            const chatVars = getVariables({ type: 'chat' });\n            const saved_start_id = chatVars.auto_summary_start_id;\n            console.log(':', saved_start_id);\n\n            // 3. \n            const scriptId = getScriptIdSafe();\n            if (!scriptId) {\n              console.warn('script_id ');\n              return;\n            }\n            const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n            const saved_summary = scriptVars?.summary_history?.[0];\n            if (saved_summary) {\n              console.log(':', saved_summary);\n            }\n\n            // 4. \n            const start_id = parseInt(saved_start_id) || 0;\n            const summarize_interval = 5;\n            const relative_position = current_floor - start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n\n            console.log(':', {\n              current_floor,\n              start_id,\n              relative_position,\n              summarize_interval,\n              should_trigger,\n              next_trigger_floor: start_id + summarize_interval - 1,\n              floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n            });\n\n            // 5. \n            console.log(':', scriptVars?.summary_history);\n\n            console.log(' ');\n          } catch (error) {\n            console.error(' :', error);\n          }\n        };\n\n        (window as any).checkCurrentFloor = () => {\n          try {\n            const last_message_id = getLastMessageId();\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n            const summarize_interval = 5;\n\n            const relative_position = last_message_id - auto_summary_start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n\n            console.log(' :', {\n              last_message_id,\n              auto_summary_start_id,\n              relative_position,\n              summarize_interval,\n              should_trigger,\n              calculation: `${relative_position} >= ${summarize_interval - 1} && (${relative_position} + 1) % ${summarize_interval} = ${(relative_position + 1) % summarize_interval}`,\n            });\n\n            window.toastr?.info(`${last_message_id}: =${relative_position}, =${should_trigger}`);\n          } catch (error) {\n            console.error(' :', error);\n            window.toastr?.error(': ' + (error as Error).message);\n          }\n        };\n\n        (window as any).testFloorCalculation = () => {\n          try {\n            const last_message_id = getLastMessageId();\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n            const summarize_interval = 5;\n\n            console.log(' :', {\n              last_message_id,\n              auto_summary_start_id,\n              summarize_interval,\n            });\n\n            // \n            console.log('0=AI, 1=, 2=AI, 3=...');\n            for (let floor = 0; floor <= 15; floor++) {\n              const relative_position = floor - auto_summary_start_id;\n              const should_trigger =\n                relative_position >= summarize_interval - 1 && (relative_position + 1) % summarize_interval === 0;\n              const start_id = auto_summary_start_id;\n              const end_id = floor;\n\n              const floorType = floor === 0 ? 'AI' : floor % 2 === 1 ? '' : 'AI';\n\n              console.log(\n                ` ${floor}(${floorType}): =${relative_position}, =${should_trigger}, =${start_id}-${end_id}, =${relative_position} % ${summarize_interval} = ${relative_position % summarize_interval} (: ${summarize_interval - 1})`,\n              );\n            }\n\n            window.toastr?.info('');\n          } catch (error) {\n            console.error(' :', error);\n            window.toastr?.error(': ' + (error as Error).message);\n          }\n        };\n\n        console.log(' ');\n\n        // \n        setTimeout(() => {\n          (window as any).autoDetectOldWindow();\n        }, 1000); // 1\n      } catch (error) {\n        console.error(' :', error);\n      }\n\n      // \n      (window as any).testAutoSummarize = checkAutoSummarize;\n\n      // localStorage\n      (window as any).syncAutoSummaryData = () => {\n        try {\n          console.log(' ...');\n\n          // localStorage\n          const saved_start_id = localStorage.getItem('auto_summary_start_id');\n          const saved_summary = localStorage.getItem('last_summary');\n\n          console.log('localStorage:', {\n            saved_start_id,\n            saved_summary: saved_summary ? JSON.parse(saved_summary) : null,\n          });\n\n          if (saved_start_id) {\n            // \n            insertOrAssignVariables({ auto_summary_start_id: parseInt(saved_start_id) }, { type: 'chat' });\n            console.log(` : ${saved_start_id}`);\n          }\n\n          if (saved_summary) {\n            try {\n              const summaryData = JSON.parse(saved_summary);\n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = scriptVars?.summary_history || [];\n\n              // \n              const exists = existingSummaries.some(\n                (s: any) => s.start_id === summaryData.start_id && s.end_id === summaryData.end_id,\n              );\n\n              if (!exists) {\n                // \n                const newSummary = {\n                  start_id: summaryData.start_id,\n                  end_id: summaryData.end_id,\n                  content: summaryData.summary,\n                  timestamp: summaryData.timestamp,\n                };\n\n                const updatedSummaries = [newSummary, ...existingSummaries];\n                insertOrAssignVariables({ summary_history: updatedSummaries }, { type: 'script', script_id: scriptId });\n                console.log(` :  ${summaryData.start_id}-${summaryData.end_id}`);\n              } else {\n                console.log(` `);\n              }\n            } catch (e) {\n              console.error(':', e);\n            }\n          }\n\n          window.toastr?.success('');\n          console.log(' ');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).autoDetectOldWindow = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n\n          // \n          if (\n            (chatVars.auto_summary_start_id === undefined || chatVars.auto_summary_start_id === null) &&\n            last_message_id > 0\n          ) {\n            console.log(` : ID=${current_chat_id}, =${last_message_id}`);\n            return (window as any).handleOldWindow();\n          } else {\n            console.log(` : ID=${current_chat_id}, =${last_message_id}`);\n            return null;\n          }\n        } catch (error) {\n          console.error(' :', error);\n          return null;\n        }\n      };\n\n      // \n      (window as any).smartResetChat = () => {\n        try {\n          // \n          insertOrAssignVariables({ auto_summary_start_id: null }, { type: 'chat' });\n\n          console.log(' ');\n          window.toastr?.success('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).fixStartId = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const current_start_id = chatVars.auto_summary_start_id;\n\n          console.log(' :', {\n            current_chat_id,\n            last_message_id,\n            current_start_id,\n          });\n\n          // 0\n          if (current_start_id === 0 || current_start_id === undefined || current_start_id === null) {\n            const new_start_id = last_message_id;\n            insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n            console.log(` : ${new_start_id}`);\n            window.toastr?.success(`: ${new_start_id}`);\n          } else {\n            console.log(` : ${current_start_id}`);\n            window.toastr?.info(`: ${current_start_id}`);\n          }\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // MemoryUI\n      (window as any).checkMemoryUIConflict = () => {\n        try {\n          const memoryUI = (window as any).MemoryUI;\n          const ourSettings = useSettingsStore();\n\n          console.log(' MemoryUI:', {\n            memoryUI_exists: !!memoryUI,\n            memoryUI_autoSummarizeEnabled: memoryUI?.autoSummarizeEnabled,\n            our_auto_summarize_enabled: ourSettings.settings.auto_summarize_enabled,\n            our_summarize_interval: ourSettings.settings.summarize_interval,\n          });\n\n          if (memoryUI && memoryUI.autoSummarizeEnabled !== undefined) {\n            console.log(' MemoryUI');\n            window.toastr?.warning('MemoryUI');\n          } else {\n            console.log(' MemoryUI');\n            window.toastr?.info('MemoryUI');\n          }\n        } catch (error) {\n          console.error(' MemoryUI:', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).testFloorCalculation = () => {\n        try {\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const auto_summary_start_id = chatVars.auto_summary_start_id || 0;\n          const summarize_interval = 5;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            summarize_interval,\n          });\n\n          // \n          for (let floor = 0; floor <= 15; floor++) {\n            const relative_position = floor - auto_summary_start_id;\n            const should_trigger =\n              relative_position >= summarize_interval - 1 &&\n              relative_position % summarize_interval === summarize_interval - 1;\n            const start_id = auto_summary_start_id;\n            const end_id = floor;\n\n            console.log(\n              ` ${floor}: =${relative_position}, =${should_trigger}, =${start_id}-${end_id}`,\n            );\n          }\n\n          window.toastr?.info('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).resetAutoSummaryStart = () => {\n        try {\n          const scriptId = getScriptId();\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n\n          if (!current_chat_id) {\n            window.toastr?.error('ID');\n            return;\n          }\n\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const auto_summary_data = scriptVars.auto_summary_data || {};\n          auto_summary_data[current_chat_id] = last_message_id;\n\n          insertOrAssignVariables({ auto_summary_data: auto_summary_data }, { type: 'script', script_id: scriptId });\n          console.log(` : ${last_message_id} (: ${current_chat_id})`);\n          window.toastr?.success(` ${last_message_id} `);\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // \n      (window as any).clearCurrentChatData = () => {\n        try {\n          // \n          insertOrAssignVariables({ auto_summary_start_id: null }, { type: 'chat' });\n          console.log(' ');\n          window.toastr?.success('');\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n        }\n      };\n\n      // ID\n      (window as any).watchChatId = () => {\n        let lastChatId = SillyTavern.getCurrentChatId();\n        console.log(' IDID:', lastChatId);\n\n        const checkChatId = () => {\n          const currentChatId = SillyTavern.getCurrentChatId();\n          if (currentChatId !== lastChatId) {\n            console.log(' ID:', lastChatId, '->', currentChatId);\n            lastChatId = currentChatId;\n          }\n        };\n\n        // \n        const interval = setInterval(checkChatId, 1000);\n\n        // \n        return () => {\n          clearInterval(interval);\n          console.log(' ID');\n        };\n      };\n\n      // \n      (window as any).showCurrentChatData = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const chatVars = getVariables({ type: 'chat' });\n\n          console.log(' :', {\n            current_chat_id,\n            chat_vars: chatVars,\n            auto_summary_start_id: chatVars.auto_summary_start_id,\n          });\n\n          window.toastr?.info(`ID: ${current_chat_id}`);\n          return chatVars;\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      (window as any).handleOldWindow = () => {\n        try {\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const last_message_id = getLastMessageId();\n          const chatVars = getVariables({ type: 'chat' });\n          const scriptId = getScriptId();\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const existingSummaries = scriptVars?.summary_history || [];\n\n          console.log(' :', {\n            current_chat_id,\n            last_message_id,\n            chat_has_start_id: chatVars.auto_summary_start_id !== undefined,\n            existing_summaries_count: existingSummaries.length,\n            last_summary_end: existingSummaries.length > 0 ? existingSummaries[0].end_id : 'none',\n          });\n\n          // \n          if (chatVars.auto_summary_start_id === undefined || chatVars.auto_summary_start_id === null) {\n            let auto_summary_start_id = last_message_id;\n\n            if (existingSummaries.length > 0) {\n              const lastSummary = existingSummaries[0];\n              const lastSummaryEnd = lastSummary.end_id || 0;\n\n              if (last_message_id > lastSummaryEnd) {\n                auto_summary_start_id = lastSummaryEnd + 1;\n                console.log(\n                  ` :  ${auto_summary_start_id}  ( ${lastSummaryEnd} )`,\n                );\n              } else {\n                console.log(` :  ${last_message_id} ()`);\n              }\n            } else {\n              console.log(` :  ${last_message_id} ()`);\n            }\n\n            // \n            insertOrAssignVariables({ auto_summary_start_id: auto_summary_start_id }, { type: 'chat' });\n\n            window.toastr?.info(`: ${auto_summary_start_id}`);\n          } else {\n            console.log(` : ${chatVars.auto_summary_start_id}`);\n            window.toastr?.info(`: ${chatVars.auto_summary_start_id}`);\n          }\n\n          return {\n            chat_id: current_chat_id,\n            last_message_id,\n            auto_summary_start_id: chatVars.auto_summary_start_id,\n            existing_summaries: existingSummaries.length,\n          };\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      (window as any).checkAutoSummaryStatus = () => {\n        try {\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return null;\n          }\n\n          const settings = store.settings;\n          const scriptId = getScriptId();\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n          const last_message_id = getLastMessageId();\n          const auto_summary_data = scriptVars.auto_summary_data || {};\n          const auto_summary_start_id = auto_summary_data[current_chat_id] || 0;\n          const relative_position = last_message_id - auto_summary_start_id + 1;\n          const should_trigger = relative_position % settings.summarize_interval === 0;\n\n          const status = {\n            current_chat_id,\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summarize_interval,\n            should_trigger,\n            calculation: `${relative_position} % ${settings.summarize_interval} = ${relative_position % settings.summarize_interval}`,\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            api_key_set: !!settings.api_key,\n            all_chat_data: auto_summary_data,\n          };\n\n          console.log(' :', status);\n          window.toastr?.info(``);\n          return status;\n        } catch (error) {\n          console.error(' :', error);\n          window.toastr?.error(': ' + (error as Error).message);\n          return null;\n        }\n      };\n\n      // \n      const settingsStore = useSettingsStore();\n      if (settingsStore && settingsStore.settings) {\n        // \n        const unwatch = watch(\n          () => settingsStore.settings.auto_summarize_enabled,\n          (newValue, oldValue) => {\n            console.log(` : ${oldValue} -> ${newValue}`);\n            if (newValue && !oldValue) {\n              // \n              try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                  console.warn('script_id ');\n                  return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const auto_summary_start_id = scriptVars.auto_summary_start_id;\n\n                // \n                if (auto_summary_start_id === undefined || auto_summary_start_id === null) {\n                  const last_message_id = getLastMessageId();\n                  insertOrAssignVariables(\n                    { auto_summary_start_id: last_message_id },\n                    { type: 'script', script_id: scriptId },\n                  );\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(` ${last_message_id} `);\n                } else {\n                  console.log(` : ${auto_summary_start_id}`);\n                  window.toastr?.info(`: ${auto_summary_start_id}`);\n                }\n              } catch (error) {\n                console.error(' :', error);\n              }\n            }\n          },\n          { immediate: false },\n        );\n\n        // \n        $(window).on('pagehide', () => {\n          unwatch();\n        });\n      }\n\n      window.toastr.success('mzrodyu');\n    }, 200);\n  }, 100);\n});\n"],"names":["content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","push","y","x","__webpack_require__","d","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","Vue","async","fetchAvailableModels","settings","api_endpoint","trim","Error","apiUrl","console","log","URL","e","startsWith","possibleEndpoints","replace","modelsUrl","response","fetch","method","headers","Authorization","api_key","status","ok","contentType","get","includes","data","json","Array","isArray","models","model","name","filter","Boolean","summarizeMessages","start_id","end_id","messages","msg","getChatMessages","summaryPrompt","max_tokens","role","message","temperature","body","JSON","stringify","error","errorMessage","choices","sfc","props","target","__vccOpts","key","val","globalScriptId","getScriptIdSafe","getScriptId","warn","setGlobalScriptId","getChatIdSafe","window","getChatId","SillyTavern","getCurrentChatId","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","firstChild","$","setTimeout","isAdding","addNavButton","possibleSelectors","topBar","foundSelector","selector","found","existingButton","targetContainer","settingsHolder","navButton","outerHTML","substring","children","first","prepend","on","preventDefault","stopPropagation","panel","is","fadeOut","fadeIn","toastr","parentElement","className","setInterval","eventOn","tavern_events","CHAT_CHANGED","z","object","parse","def","string","number","boolean","array","schema","prefault","Settings","auto_summarize_enabled","summarize_interval","start_message_id","end_message_id","table_start_message_id","table_end_message_id","summary_history","useSettingsStore","defineStore","getScriptIdSafely","script_id","ref","getVariables","initSettings","realVariables","Object","keys","value","saveTimeout","watch","new_settings","clearTimeout","insertOrAssignVariables","saved","immediate","deep","saveSettings","success","reloadSettings","useSummaryHistoryStore","addSummary","chat_id","chatHistory","chatData","unshift","slice","getSummaryHistory","code","cssMapping","base64","sourceMapping","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","n","getter","a","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","_hoisted_1","class","style","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","__name","setup","__props","settingsStore","storeToRefs","available_models","loading_models","hide_range","hidden_messages","hidden_display_expanded","is_summarizing","is_generating_table","headerTemplates","selectedTemplate","currentTemplate","saveGenerationStatus","scriptId","stopGeneration","info","saveHeaderTemplates","header_templates","loadTemplate","parseInt","showAddTemplateDialog","prompt","saveTemplate","warning","deleteTemplate","confirm","splice","loadHiddenMessages","possibleFields","field","saveHiddenMessages","dataToSave","onMounted","templates","loadHeaderTemplates","scriptVars","summarizing","generating_table","loadGenerationStatus","handleTestButton","handleSaveSettings","handleReloadSettings","handleResetAutoSummaryStart","resetAutoSummaryStart","handle_fetch_models","handle_test_connection","handle_summarize","chatMessages","lastMessageId","getLastMessageId","hide_state","summary","last_summary","handle_generate_table","headersInput","split","h","messageRange","messagesText","aiPrompt","statusText","result","aiResponse","aiTableData","jsonText","jsonMatch","match","parseError","tableData","table_history","handle_create_table","emptyTableData","handle_hide_messages","ranges","range","messageIds","start","end","Number","hiddenCount","messagesToHide","messageId","find","message_id","is_hidden","triggerSlash","handle_show_messages","trimmed","s","isNaN","parseMessageRange","messagesToShow","shownCount","hiddenMsg","_ctx","_cache","$event","placeholder","onClick","disabled","min","max","step","onmouseover","onmouseout","onChange","template","width","height","borderRadius","backgroundColor","transition","showToast","validHiddenMessages","removedCount","handle_refresh_hidden","findIndex","handle_unhide_single","historyStore","expandedState","Map","refreshSummaryHistory","isExpanded","handleRefreshData","tryParentWindowCopy","text","Promise","resolve","parentDoc","parent","parentBody","textarea","focus","select","setSelectionRange","execCommand","err","execCommandCopy","position","left","top","opacity","pointerEvents","showManualCopyDialog","existingOverlay","getElementById","overlay","container","header","innerHTML","buttonContainer","closeButton","textContent","background","copyButton","onclick","handleKeyDown","removeEventListener","addEventListener","copySummary","successMessage","clipboard","isSecureContext","writeText","clipboardErr","copyToClipboard","createSummaryWorldbook","characterName","currentCharacter","getCharData","charError","worldbookName","Date","toISOString","getWorldbookNames","createWorldbook","rebindChatWorldbook","bindError","promptForWorldbook","worldbookNames","dialog","append","selected","showDebugPanel","color","forEach","button","btn","outputArea","output","scrollTop","scrollHeight","testCompleteAutoSummary","syncAutoSummaryData","checkCurrentFloor","testFloorCalculation","checkAutoSummaryStatus","smartResetChat","current","set","summaryIndex","selectedWorldbook","newEntry","toLocaleDateString","enabled","strategy","keys_secondary","logic","scan_depth","depth","comment","insertion_order","case_sensitive","name_is_regex","keys_are_regex","selective_logic","secondary_keys_logic","activation_threshold","order","group","local_id","depth_entries","depth_entries_all","search_range","force_activation","disable","exclude_recursion","hidden","priority","comment_is_regex","content_is_regex","secondary_keys_are_regex","keys_secondary_are_regex","uid","now","createWorldbookEntries","tableExpandedState","isTableExpanded","copyTable","tableItem","row","chat_vars","refreshTableHistory","idx","rowIdx","cell","cellIdx","_","toolExpandedState","antiClicheInput","antiClicheOutput","isProcessingAntiCliche","characterDescription","characterCardOutput","isGeneratingCharacter","modifyRequest","isModifyingCharacter","isDataLoaded","saveToolsDataImmediate","tools_antiCliche","input","tools_characterCard","description","tools_expandedState","fromEntries","antiCliche_input_length","antiCliche_output_length","character_desc_length","character_output_length","saveToolsData","debounce","savedData","entries","loadToolsData","onBeforeUnmount","cancel","toggleToolExpanded","toolName","isToolExpanded","readText","tempTextArea","textArea","targetDoc","targetBody","existingModal","modal","copyBtn","closeBtn","handleEsc","timeOut","handleAntiClicheProcess","copyAntiClicheResult","handleGenerateCharacterCard","clearCharacterForm","copyCharacterCard","clearAntiClicheForm","handleModifyCharacterCard","clearModifyRequest","tabs","label","icon","activeTab","componentMap","SummaryTab","table","TableTab","SettingsTab","tools","ToolsTab","currentComponent","computed","componentProps","closePanel","tab","flex","padding","cursor","textAlign","display","alignItems","justifyContent","gap","borderBottom","borderBottomColor","tabKey","MainPanel","existingPanel","panelContainer","app","createApp","use","createPinia","mount","__vue_app__","stack","checkAutoSummarize","store","has_api_key","last_message_id","current_chat_id","auto_summary_start_id","chatVars","auto_summary_start_id_key","has_start_id","existing_start_id","existingSummaries","lastSummaryEnd","relative_position","should_trigger","calculation","expected_trigger_at_floor","will_summarize_range","floor_explanation","then","new_start_id","catch","CHARACTER_MESSAGE_RENDERED","chat_file_name","current_floor","saved_start_id","saved_summary","next_trigger_floor","floor","floorType","autoDetectOldWindow","testAutoSummarize","localStorage","getItem","summaryData","some","updatedSummaries","timestamp","handleOldWindow","fixStartId","current_start_id","checkMemoryUIConflict","memoryUI","MemoryUI","ourSettings","memoryUI_exists","memoryUI_autoSummarizeEnabled","autoSummarizeEnabled","our_auto_summarize_enabled","our_summarize_interval","auto_summary_data","clearCurrentChatData","watchChatId","lastChatId","interval","currentChatId","clearInterval","showCurrentChatData","chat_has_start_id","existing_summaries_count","last_summary_end","existing_summaries","api_key_set","all_chat_data","unwatch","newValue","oldValue"],"sourceRoot":""}