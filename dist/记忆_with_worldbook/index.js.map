{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?7035","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/klona/+esm\"","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?7eac","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?3cb0","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?21a8","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?8c84","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?8e7e","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?b271","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?f60b","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?63eb","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?e94d","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?d661","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?eb7e","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?5097","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?61ce","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?f7fc","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/src/_with_worldbook/.ts","src://tavern_helper_template/src/_with_worldbook/settings.ts","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?c7ea","src://tavern_helper_template/src/_with_worldbook/.ts","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?dce9","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?e6a6","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?db1c","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?89fd","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?7ae4","src://tavern_helper_template/external var \"z\"","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?7083","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?ffea","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?6070","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?4e78","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?730f","src://tavern_helper_template/src/_with_worldbook/utils.ts","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?49b5","webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?45ff","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src/_with_worldbook/i18n/zh-CN.ts","src://tavern_helper_template/src/_with_worldbook/i18n/en-US.ts","src://tavern_helper_template/src/_with_worldbook/i18n/index.ts","src://tavern_helper_template/external var \"toastr\"","src://tavern_helper_template/src/_with_worldbook/utils/api.ts","src://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/AIGenerateDialog.vue?19bb","src://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/AIModifyDialog.vue?0a5e","src://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/GreetingsTab.vue?ef57","src://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/HelpTab.vue?f5f1","src://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/MvuBetaTab.vue?dd17","src://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ProgressDialog.vue?25be","src://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ProjectManager.vue?b94e","src://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue","webpack://tavern_helper_template/src/_with_worldbook/components/RegexUIGenerator.vue?a284","src://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/SettingsTab.vue?260c","src://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue","webpack://tavern_helper_template/src/_with_worldbook/components/StatusBarGenerator.vue?7378","src://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/SummaryTab.vue?a3bd","src://tavern_helper_template/src/_with_worldbook/components/TableTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/TableTab.vue?15c5","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue","webpack://tavern_helper_template/src/_with_worldbook/components/ToolsTab.vue?11fe","src://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue","src://tavern_helper_template/src/_with_worldbook/.ts","webpack://tavern_helper_template/src/_with_worldbook/components/MainPanel.vue?141e","webpack://tavern_helper_template/src/_with_worldbook/.vue?46f7","src://tavern_helper_template/src/_with_worldbook/.vue","src://tavern_helper_template/src/_with_worldbook/index.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e71c3684\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"klona\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__.klona) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore), [\"storeToRefs\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.storeToRefs) });","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","module.exports = Vue;","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=67eefd1a&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"40832545\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=67eefd1a&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MainPanel.vue?vue&type=style&index=0&id=67eefd1a&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes fadeIn-e3e6a546{from{opacity:0}to{opacity:1}}@keyframes slideUp-e3e6a546{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes spin-e3e6a546{to{transform:rotate(360deg)}}.details-area[data-v-e3e6a546]::-webkit-scrollbar{width:6px}.details-area[data-v-e3e6a546]::-webkit-scrollbar-track{background:rgba(30,30,30,0.5);border-radius:3px}.details-area[data-v-e3e6a546]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:3px}.details-area[data-v-e3e6a546]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ProgressDialog.vue\"],\"names\":[],\"mappings\":\"AA8OA,2BACE,KACE,SACF,CACA,GACE,SACF,CACF,CAEA,4BACE,KACE,0BAA2B,CAC3B,SACF,CACA,GACE,uBAAwB,CACxB,SACF,CACF,CAEA,yBACE,GACE,wBACF,CACF,CAGA,kDACE,SACF,CAEA,wDACE,6BAAiC,CACjC,iBACF,CAEA,wDACE,kBAAmB,CACnB,iBACF,CAEA,8DACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    v-if=\\\"show\\\"\\n    class=\\\"progress-overlay\\\"\\n    style=\\\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.85);\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      z-index: 999999;\\n      animation: fadeIn 0.2s ease;\\n    \\\"\\n  >\\n    <div\\n      class=\\\"progress-card\\\"\\n      style=\\\"\\n        background: linear-gradient(145deg, #2a2a2a, #1e1e1e);\\n        border-radius: 16px;\\n        padding: 35px;\\n        width: 520px;\\n        max-width: 90vw;\\n        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        border: 1px solid #3a3a3a;\\n        animation: slideUp 0.3s ease;\\n      \\\"\\n    >\\n      <!--  -->\\n      <div style=\\\"display: flex; align-items: center; gap: 12px; margin-bottom: 24px\\\">\\n        <div\\n          class=\\\"spinner\\\"\\n          style=\\\"\\n            width: 28px;\\n            height: 28px;\\n            border: 3px solid #3a3a3a;\\n            border-top-color: #4a9eff;\\n            border-radius: 50%;\\n            animation: spin 0.8s linear infinite;\\n          \\\"\\n        ></div>\\n        <h3 style=\\\"margin: 0; color: #fff; font-size: 18px; font-weight: 600\\\">\\n          {{ title }}\\n        </h3>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        class=\\\"progress-bar-container\\\"\\n        style=\\\"\\n          width: 100%;\\n          height: 10px;\\n          background: rgba(30, 30, 30, 0.8);\\n          border-radius: 5px;\\n          overflow: hidden;\\n          margin-bottom: 20px;\\n          box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);\\n        \\\"\\n      >\\n        <div\\n          class=\\\"progress-bar\\\"\\n          :style=\\\"{\\n            width: progress + '%',\\n            height: '100%',\\n            background: 'linear-gradient(90deg, #4a9eff 0%, #7c3aed 50%, #10b981 100%)',\\n            transition: 'width 0.3s ease',\\n            boxShadow: '0 0 10px rgba(74, 158, 255, 0.5)',\\n          }\\\"\\n        ></div>\\n      </div>\\n\\n      <!--  -->\\n      <div class=\\\"current-stage\\\" style=\\\"color: #e0e0e0; font-size: 14px; margin-bottom: 12px; min-height: 20px\\\">\\n        {{ currentMessage }}\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        v-if=\\\"details.length > 0\\\"\\n        class=\\\"details-area\\\"\\n        style=\\\"\\n          max-height: 150px;\\n          overflow-y: auto;\\n          background: rgba(10, 10, 10, 0.5);\\n          border-radius: 8px;\\n          padding: 12px;\\n          margin-bottom: 16px;\\n          font-family: 'Consolas', 'Monaco', monospace;\\n          font-size: 11px;\\n          color: #a0a0a0;\\n          line-height: 1.6;\\n        \\\"\\n      >\\n        <div v-for=\\\"(detail, i) in details\\\" :key=\\\"i\\\" style=\\\"margin-bottom: 4px\\\">\\n          <span style=\\\"color: #4a9eff\\\"></span> {{ detail }}\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div style=\\\"display: flex; justify-content: space-between; align-items: center\\\">\\n        <div class=\\\"progress-percent\\\" style=\\\"color: #4a9eff; font-size: 16px; font-weight: 600\\\">\\n          {{ Math.round(progress) }}%\\n        </div>\\n\\n        <div class=\\\"elapsed-time\\\" style=\\\"color: #888; font-size: 12px\\\">: {{ elapsedSeconds }}</div>\\n      </div>\\n\\n      <!--  -->\\n      <button\\n        v-if=\\\"cancellable\\\"\\n        style=\\\"\\n          width: 100%;\\n          margin-top: 20px;\\n          padding: 10px;\\n          background: #3a3a3a;\\n          border: 1px solid #4a4a4a;\\n          border-radius: 8px;\\n          color: #e0e0e0;\\n          font-size: 13px;\\n          cursor: pointer;\\n          transition: all 0.2s;\\n        \\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n        @click=\\\"$emit('cancel')\\\"\\n      >\\n        \\n      </button>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref, computed, watch, onUnmounted } from 'vue';\\n\\ninterface Props {\\n  show: boolean;\\n  title?: string;\\n  initialMessage?: string;\\n  cancellable?: boolean;\\n}\\n\\nconst props = withDefaults(defineProps<Props>(), {\\n  title: 'AI ',\\n  initialMessage: '...',\\n  cancellable: false,\\n});\\n\\ndefineEmits<{\\n  (e: 'cancel'): void;\\n}>();\\n\\n// \\nconst progress = ref(0);\\nconst currentMessage = ref(props.initialMessage);\\nconst details = ref<string[]>([]);\\nconst startTime = ref(0);\\nconst elapsedSeconds = ref(0);\\n\\nlet elapsedInterval: number | null = null;\\n\\n// \\nwatch(\\n  () => props.show,\\n  newVal => {\\n    if (newVal) {\\n      // \\n      progress.value = 0;\\n      currentMessage.value = props.initialMessage;\\n      details.value = [];\\n      startTime.value = Date.now();\\n      elapsedSeconds.value = 0;\\n\\n      // \\n      if (elapsedInterval) {\\n        clearInterval(elapsedInterval);\\n      }\\n      elapsedInterval = window.setInterval(() => {\\n        elapsedSeconds.value = Math.floor((Date.now() - startTime.value) / 1000);\\n      }, 1000);\\n    } else {\\n      // \\n      if (elapsedInterval) {\\n        clearInterval(elapsedInterval);\\n        elapsedInterval = null;\\n      }\\n    }\\n  },\\n);\\n\\nonUnmounted(() => {\\n  if (elapsedInterval) {\\n    clearInterval(elapsedInterval);\\n  }\\n});\\n\\n// \\nfunction setProgress(percent: number) {\\n  progress.value = Math.min(100, Math.max(0, percent));\\n}\\n\\nfunction setMessage(message: string) {\\n  currentMessage.value = message;\\n}\\n\\nfunction addDetail(detail: string) {\\n  details.value.push(detail);\\n  // \\n  setTimeout(() => {\\n    const detailsArea = document.querySelector('.details-area');\\n    if (detailsArea) {\\n      detailsArea.scrollTop = detailsArea.scrollHeight;\\n    }\\n  }, 50);\\n}\\n\\nfunction clearDetails() {\\n  details.value = [];\\n}\\n\\nfunction complete() {\\n  progress.value = 100;\\n  currentMessage.value = '';\\n}\\n\\ndefineExpose({\\n  setProgress,\\n  setMessage,\\n  addDetail,\\n  clearDetails,\\n  complete,\\n});\\n</script>\\n\\n<style scoped>\\n@keyframes fadeIn {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes slideUp {\\n  from {\\n    transform: translateY(20px);\\n    opacity: 0;\\n  }\\n  to {\\n    transform: translateY(0);\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes spin {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n\\n/*  */\\n.details-area::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.details-area::-webkit-scrollbar-track {\\n  background: rgba(30, 30, 30, 0.5);\\n  border-radius: 3px;\\n}\\n\\n.details-area::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 3px;\\n}\\n\\n.details-area::-webkit-scrollbar-thumb:hover {\\n  background: #5ab0ff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes spin-c12ec546{to{transform:rotate(360deg)}}button[data-v-c12ec546]:disabled{cursor:not-allowed !important}button[data-v-c12ec546]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}div[data-v-c12ec546]::-webkit-scrollbar{width:8px}div[data-v-c12ec546]::-webkit-scrollbar-track{background:#1a1a1a}div[data-v-c12ec546]::-webkit-scrollbar-thumb{background:#667eea;border-radius:4px}div[data-v-c12ec546]::-webkit-scrollbar-thumb:hover{background:#5568d3}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/AIGenerateDialog.vue\"],\"names\":[],\"mappings\":\"AAuKA,yBACE,GACE,wBACF,CACF,CAEA,iCACE,6BACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAGA,wCACE,SACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    v-if=\\\"show\\\"\\n    @click.self=\\\"handleClose\\\"\\n    style=\\\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.8);\\n      z-index: 1000000;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 20px;\\n    \\\"\\n  >\\n    <div\\n      style=\\\"\\n        background: #2a2a2a;\\n        border: 2px solid #667eea;\\n        border-radius: 12px;\\n        padding: 30px;\\n        max-width: 500px;\\n        width: 100%;\\n        text-align: center;\\n      \\\"\\n      @click.stop\\n    >\\n      <h3 style=\\\"color: #667eea; margin: 0 0 15px 0\\\">\\n        <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n        {{ title || 'AI ' }}\\n      </h3>\\n      <p style=\\\"color: #888; margin: 0 0 25px 0; line-height: 1.6\\\">\\n        {{ description || 'AI ...' }}\\n      </p>\\n\\n      <!--  -->\\n      <textarea\\n        v-if=\\\"showInput\\\"\\n        v-model=\\\"localInput\\\"\\n        :placeholder=\\\"placeholder || '...'\\\"\\n        style=\\\"\\n          width: 100%;\\n          min-height: 120px;\\n          background: #1a1a1a;\\n          color: #e0e0e0;\\n          border: 1px solid #444;\\n          border-radius: 4px;\\n          padding: 12px;\\n          font-size: 14px;\\n          margin-bottom: 20px;\\n          resize: vertical;\\n          box-sizing: border-box;\\n        \\\"\\n      ></textarea>\\n\\n      <!--  -->\\n      <div v-if=\\\"isGenerating\\\" style=\\\"margin-bottom: 25px\\\">\\n        <div\\n          style=\\\"\\n            display: inline-block;\\n            width: 50px;\\n            height: 50px;\\n            border: 4px solid #3a3a3a;\\n            border-top-color: #667eea;\\n            border-radius: 50%;\\n            animation: spin 1s linear infinite;\\n          \\\"\\n        ></div>\\n        <p style=\\\"color: #888; margin-top: 15px; font-size: 14px\\\">...</p>\\n      </div>\\n\\n      <div style=\\\"display: flex; gap: 12px\\\">\\n        <button\\n          v-if=\\\"!isGenerating\\\"\\n          @click=\\\"handleConfirm\\\"\\n          :disabled=\\\"showInput && !localInput\\\"\\n          style=\\\"\\n            flex: 1;\\n            background: #667eea;\\n            color: white;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n          \\\"\\n          :style=\\\"{ opacity: showInput && !localInput ? 0.5 : 1 }\\\"\\n        >\\n          <i class=\\\"fa-solid fa-check\\\"></i>\\n          \\n        </button>\\n        <button\\n          @click=\\\"handleClose\\\"\\n          :disabled=\\\"isGenerating\\\"\\n          style=\\\"\\n            flex: 1;\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n          \\\"\\n          :style=\\\"{ opacity: isGenerating ? 0.5 : 1 }\\\"\\n        >\\n          {{ isGenerating ? '...' : '' }}\\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref, watch } from 'vue';\\n\\nconst props = defineProps<{\\n  show: boolean;\\n  title?: string;\\n  description?: string;\\n  placeholder?: string;\\n  isGenerating?: boolean;\\n  showInput?: boolean; // \\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: 'close'): void;\\n  (e: 'confirm', input?: string): void;\\n}>();\\n\\nconst localInput = ref('');\\n\\n// \\nwatch(\\n  () => props.show,\\n  newVal => {\\n    if (newVal) {\\n      localInput.value = '';\\n    }\\n  },\\n);\\n\\nconst handleConfirm = () => {\\n  if (!props.isGenerating) {\\n    if (props.showInput) {\\n      emit('confirm', localInput.value);\\n    } else {\\n      emit('confirm');\\n    }\\n  }\\n};\\n\\nconst handleClose = () => {\\n  if (!props.isGenerating) {\\n    emit('close');\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n@keyframes spin {\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n\\nbutton:disabled {\\n  cursor: not-allowed !important;\\n}\\n\\nbutton:not(:disabled):hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n/*  */\\ndiv::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\ndiv::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n}\\n\\ndiv::-webkit-scrollbar-thumb {\\n  background: #667eea;\\n  border-radius: 4px;\\n}\\n\\ndiv::-webkit-scrollbar-thumb:hover {\\n  background: #5568d3;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.settings-tab{height:100%;overflow-y:auto;padding:25px !important;background:#1a1a1a !important;border:2px solid red !important}.config-section{padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.config-section:last-child{border-bottom:none;margin-bottom:0}.config-section h3{margin:0 0 20px 0 !important;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.form-group{margin-bottom:18px !important}.form-group label{display:block;margin-bottom:6px;color:#ccc;font-size:13px}.checkbox-label{display:flex;align-items:center;gap:8px}.flex-label{display:flex;justify-content:space-between;align-items:center}.form-group input[type='text'],.form-group input[type='password'],.form-group input[type='number'],.form-group select{width:100%;padding:10px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;color:#e0e0e0;font-size:13px;transition:border-color 0.2s}.form-group input:focus,.form-group select:focus{outline:none;border-color:#4a9eff}.model-controls{display:flex;flex-direction:column;gap:10px}.button-group{display:flex;gap:12px;flex-wrap:wrap;margin-top:5px}.action-button{flex:1;min-width:120px;padding:12px 16px;border:none;border-radius:6px;cursor:pointer;font-weight:500;font-size:13px;transition:all 0.2s;display:flex;align-items:center;justify-content:center;gap:6px;background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.action-button:hover{background:#4a4a4a;border-color:#5a5a5a}.test-button{background:#3a3a3a;color:#e0e0e0;border:1px solid #4a4a4a}.test-button:hover{background:#4a4a4a;border-color:#5a5a5a}.fetch-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.fetch-button:hover{background:#5aaeff;border-color:#6abeff}.summarize-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.summarize-button:hover{background:#5aaeff;border-color:#6abeff}.create-button{background:#51cf66;color:white;border:1px solid #40c057}.create-button:hover{background:#40c057;border-color:#37b24d}.table-button{background:#4a9eff;color:white;border:1px solid #5aaeff}.table-button:hover{background:#5aaeff;border-color:#6abeff}.hide-button{background:#ff6b6b;color:white;border:1px solid #ff5252}.hide-button:hover{background:#ff5252;border-color:#ff4444}.unhide-button{background:#51cf66;color:white;border:1px solid #40c057}.unhide-button:hover{background:#40c057;border-color:#37b24d}.refresh-button{background:#ffd43b;color:#333;border:1px solid #ffcc02}.refresh-button:hover{background:#ffcc02;border-color:#ffb700}.action-button:disabled{opacity:0.5;cursor:not-allowed}.model-select{margin-top:8px}.hidden-messages-section{margin-top:20px}.hidden-messages-list{max-height:300px;overflow-y:auto;border-radius:6px;border:1px solid #3a3a3a;background:#1a1a1a}.hidden-message-item{padding:10px 12px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #2a2a2a;transition:background 0.2s}.hidden-message-item:last-child{border-bottom:none}.hidden-message-item:hover{background:#2a2a2a}.message-info{display:flex;align-items:center;gap:10px;flex:1}.message-id{font-weight:bold;color:#4a9eff;font-size:13px;min-width:50px}.message-role{font-size:12px;padding:2px 8px;border-radius:4px;white-space:nowrap}.message-role.role-user{background:#3a5a3a;color:#90ee90}.message-role.role-assistant{background:#3a3a5a;color:#90a0ee}.message-role.role-system{background:#5a5a3a;color:#eea090}.message-preview{flex:1;color:#888;font-size:12px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.show-button{background:#4a9eff !important;color:white !important;padding:6px 12px;border:1px solid #5aaeff !important;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s;min-width:60px;text-align:center}.show-button:hover{background:#5aaeff !important;border-color:#6abeff !important}.mini-button{background:#666;color:white;border:1px solid #777;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:12px;transition:all 0.2s}.mini-button:hover{background:#777;border-color:#888}.empty-state{margin-top:20px;padding:20px;background:#2a2a2a;border-radius:6px;text-align:center;color:#888;border:1px solid #3a3a3a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/SettingsTab.vue\"],\"names\":[],\"mappings\":\"AA6kFA,cACE,WAAY,CACZ,eAAgB,CAChB,uBAAwB,CACxB,6BAA8B,CAC9B,+BACF,CAEA,gBACE,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,2BACE,kBAAmB,CACnB,eACF,CAEA,mBACE,4BAA6B,CAC7B,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,6BACF,CAEA,kBACE,aAAc,CACd,iBAAkB,CAClB,UAAW,CACX,cACF,CAEA,gBACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,YACE,YAAa,CACb,6BAA8B,CAC9B,kBACF,CAEA,sHAIE,UAAW,CACX,iBAAkB,CAClB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,4BACF,CAEA,iDAEE,YAAa,CACb,oBACF,CAEA,gBACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,cACE,YAAa,CACb,QAAS,CACT,cAAe,CACf,cACF,CAEA,eACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,cAAe,CACf,mBAAoB,CACpB,YAAa,CACb,kBAAmB,CACnB,sBAAuB,CACvB,OAAQ,CACR,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,aAAc,CACd,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,kBACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,wBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,cACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,oBACE,kBAAmB,CACnB,oBACF,CAEA,aACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,mBACE,kBAAmB,CACnB,oBACF,CAEA,eACE,kBAAmB,CACnB,WAAY,CACZ,wBACF,CAEA,qBACE,kBAAmB,CACnB,oBACF,CAEA,gBACE,kBAAmB,CACnB,UAAW,CACX,wBACF,CAEA,sBACE,kBAAmB,CACnB,oBACF,CAEA,wBACE,WAAY,CACZ,kBACF,CAEA,cACE,cACF,CAEA,yBACE,eACF,CAEA,sBACE,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,wBAAyB,CACzB,kBACF,CAEA,qBACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,+BAAgC,CAChC,0BACF,CAEA,gCACE,kBACF,CAEA,2BACE,kBACF,CAEA,cACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,YACE,gBAAiB,CACjB,aAAc,CACd,cAAe,CACf,cACF,CAEA,cACE,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,wBACE,kBAAmB,CACnB,aACF,CAEA,6BACE,kBAAmB,CACnB,aACF,CAEA,0BACE,kBAAmB,CACnB,aACF,CAEA,iBACE,MAAO,CACP,UAAW,CACX,cAAe,CACf,eAAgB,CAChB,sBAAuB,CACvB,kBACF,CAEA,aACE,6BAA8B,CAC9B,sBAAuB,CACvB,gBAAiB,CACjB,mCAAoC,CACpC,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBAAoB,CACpB,cAAe,CACf,iBACF,CAEA,mBACE,6BAA8B,CAC9B,+BACF,CAEA,aACE,eAAgB,CAChB,WAAY,CACZ,qBAAsB,CACtB,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,cAAe,CACf,mBACF,CAEA,mBACE,eAAgB,CAChB,iBACF,CAEA,aACE,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,iBAAkB,CAClB,iBAAkB,CAClB,UAAW,CACX,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"settings-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!-- API  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('api')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #17a2b8; font-size: 18px\\\"></i>\\n          API \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['api'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['api']\\\">\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API </label>\\n          <select\\n            v-model=\\\"settings.api_provider\\\"\\n            @change=\\\"handleProviderChange\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n              cursor: pointer;\\n            \\\"\\n          >\\n            <option value=\\\"openai\\\">OpenAI</option>\\n            <option value=\\\"gemini\\\">Gemini AI Studio</option>\\n          </select>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            API \\n            <span style=\\\"color: #888; font-size: 11px; margin-left: 8px\\\"> ( base URL ) </span>\\n          </label>\\n          <input\\n            v-model=\\\"settings.api_endpoint\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"https:///v1\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div\\n            style=\\\"\\n              margin-top: 8px;\\n              padding: 8px 12px;\\n              background: rgba(74, 158, 255, 0.1);\\n              border-radius: 4px;\\n              border-left: 3px solid #4a9eff;\\n            \\\"\\n          >\\n            <div style=\\\"color: #4a9eff; font-size: 12px; font-weight: bold; margin-bottom: 4px\\\">\\n               \\n            </div>\\n            <div style=\\\"color: #999; font-size: 11px; line-height: 1.6\\\">\\n               <strong>OpenAI :</strong> https://api.openai.com/v1<br />\\n               <strong>Gemini AI Studio:</strong> https://generativelanguage.googleapis.com/v1beta/openai/<br />\\n               <strong>NewAPI / One API:</strong> https:///v1<br />\\n               <strong> (Ollama):</strong> http://localhost:11434/v1<br />\\n               <strong></strong> /chat/completions\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">API Key</label>\\n          <input\\n            v-model=\\\"settings.api_key\\\"\\n            type=\\\"password\\\"\\n            placeholder=\\\"sk-...\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n          <div class=\\\"model-controls\\\" style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n            <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n              \\n              <span v-if=\\\"available_models.length === 0\\\" style=\\\"color: #888; font-size: 11px; margin-left: 8px\\\">\\n                ( gpt-4o-mini)\\n              </span>\\n            </label>\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n              <button\\n                :disabled=\\\"loading_models\\\"\\n                class=\\\"fetch-button\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  min-width: 120px;\\n                  padding: 12px 16px;\\n                  border: 1px solid #5aaeff;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  font-weight: 500;\\n                  font-size: 13px;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  gap: 6px;\\n                  background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n                  box-shadow:\\n                    0 2px 8px rgba(74, 158, 255, 0.25),\\n                    inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n                  color: white;\\n                \\\"\\n                onmouseover=\\\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(74, 158, 255, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n                onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n                @click=\\\"handle_fetch_models\\\"\\n              >\\n                {{ loading_models ? '...' : ' ' }}\\n              </button>\\n              <button\\n                class=\\\"save-button\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  min-width: 120px;\\n                  padding: 12px 16px;\\n                  border: 1px solid #28a745;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  font-weight: 500;\\n                  font-size: 13px;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  gap: 6px;\\n                  background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n                  box-shadow:\\n                    0 2px 8px rgba(81, 207, 102, 0.25),\\n                    inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n                  color: white;\\n                \\\"\\n                onmouseover=\\\"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(81, 207, 102, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n                onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\\\"\\n                @click=\\\"handleSaveApiConfig\\\"\\n              >\\n                 \\n              </button>\\n            </div>\\n          </div>\\n          <input\\n            v-if=\\\"available_models.length === 0\\\"\\n            v-model=\\\"settings.model\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"gpt-4o-mini  deepseek-chat \\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <select\\n            v-else\\n            v-model=\\\"settings.model\\\"\\n            class=\\\"model-select\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          >\\n            <option v-for=\\\"model in available_models\\\" :key=\\\"model\\\" :value=\\\"model\\\">{{ model }}</option>\\n          </select>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n            > Token 4000</label\\n          >\\n          <input\\n            v-model.number=\\\"settings.max_tokens\\\"\\n            type=\\\"number\\\"\\n            min=\\\"100\\\"\\n            max=\\\"16000\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            Temperature () <span style=\\\"color: #888; font-size: 11px\\\">(0-2 0.7)</span>\\n          </label>\\n          <input\\n            v-model.number=\\\"settings.temperature\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            max=\\\"2\\\"\\n            step=\\\"0.1\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div style=\\\"margin-top: 4px; color: #888; font-size: 11px\\\">\\n             0.8 0.2\\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            Top P () <span style=\\\"color: #888; font-size: 11px\\\">(0-1 1.0)</span>\\n          </label>\\n          <input\\n            v-model.number=\\\"settings.top_p\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            max=\\\"1\\\"\\n            step=\\\"0.01\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div style=\\\"margin-top: 4px; color: #888; font-size: 11px\\\">\\n              Temperature  Top P\\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            Presence Penalty () <span style=\\\"color: #888; font-size: 11px\\\">(-2.0 to 2.0 0)</span>\\n          </label>\\n          <input\\n            v-model.number=\\\"settings.presence_penalty\\\"\\n            type=\\\"number\\\"\\n            min=\\\"-2\\\"\\n            max=\\\"2\\\"\\n            step=\\\"0.1\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div style=\\\"margin-top: 4px; color: #888; font-size: 11px\\\">\\n            \\n          </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\">\\n            Frequency Penalty () <span style=\\\"color: #888; font-size: 11px\\\">(-2.0 to 2.0 0)</span>\\n          </label>\\n          <input\\n            v-model.number=\\\"settings.frequency_penalty\\\"\\n            type=\\\"number\\\"\\n            min=\\\"-2\\\"\\n            max=\\\"2\\\"\\n            step=\\\"0.1\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div style=\\\"margin-top: 4px; color: #888; font-size: 11px\\\">\\n            \\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('autoSummary')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-bolt\\\" style=\\\"color: #ffc107; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['autoSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['autoSummary']\\\">\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label\\n            class=\\\"checkbox-label\\\"\\n            style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px\\\"\\n          >\\n            <input v-model=\\\"settings.auto_summarize_enabled\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px\\\" />\\n            \\n          </label>\\n        </div>\\n        <div v-if=\\\"settings.auto_summarize_enabled\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <input\\n            v-model.number=\\\"settings.summarize_interval\\\"\\n            type=\\\"number\\\"\\n            min=\\\"1\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n          <div style=\\\"margin-top: 10px; display: flex; gap: 10px\\\">\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 12px;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n              \\\"\\n              onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n              onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n              @click=\\\"handleSaveSettings\\\"\\n            >\\n               \\n            </button>\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 12px;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n              \\\"\\n              onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n              onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n              @click=\\\"handleReloadSettings\\\"\\n            >\\n               \\n            </button>\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 12px;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\\n              \\\"\\n              onmouseover=\\\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\\\"\\n              onmouseout=\\\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\\\"\\n              @click=\\\"handleResetAutoSummaryStart\\\"\\n            >\\n               \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('manualSummary')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-pen-to-square\\\" style=\\\"color: #28a745; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['manualSummary'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['manualSummary']\\\">\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <input\\n            v-model.number=\\\"settings.start_message_id\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <input\\n            v-model.number=\\\"settings.end_message_id\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n          <button\\n            class=\\\"action-button test-button\\\"\\n            :disabled=\\\"is_summarizing\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #4a4a4a;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: #3a3a3a;\\n              color: #e0e0e0;\\n            \\\"\\n            @click=\\\"handle_test_connection\\\"\\n          >\\n            <i class=\\\"fa-solid fa-plug\\\"></i> \\n          </button>\\n          <button\\n            class=\\\"action-button summarize-button\\\"\\n            :disabled=\\\"is_summarizing || !settings.api_key\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #5aaeff;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n              box-shadow:\\n                0 2px 8px rgba(74, 158, 255, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n              color: white;\\n            \\\"\\n            @click=\\\"handle_summarize\\\"\\n          >\\n            <i v-if=\\\"!is_summarizing\\\" class=\\\"fa-solid fa-magic\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n            {{ is_summarizing ? '...' : '' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('tableGeneration')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-table\\\" style=\\\"color: #6f42c1; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['tableGeneration'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['tableGeneration']\\\">\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <input\\n            v-model.number=\\\"settings.table_start_message_id\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <input\\n            v-model.number=\\\"settings.table_end_message_id\\\"\\n            type=\\\"number\\\"\\n            min=\\\"0\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <div style=\\\"display: flex; gap: 8px; margin-bottom: 8px\\\">\\n            <select\\n              v-model=\\\"selectedTemplate\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 8px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n              \\\"\\n              @change=\\\"loadTemplate\\\"\\n            >\\n              <option value=\\\"\\\">...</option>\\n              <option v-for=\\\"(template, index) in headerTemplates\\\" :key=\\\"index\\\" :value=\\\"index\\\">\\n                {{ template.name }}\\n              </option>\\n            </select>\\n            <button\\n              style=\\\"\\n                padding: 8px 12px;\\n                background: #4a9eff;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                white-space: nowrap;\\n              \\\"\\n              @click=\\\"showAddTemplateDialog\\\"\\n            >\\n              <i class=\\\"fa-solid fa-plus\\\"></i> \\n            </button>\\n          </div>\\n          <div v-if=\\\"selectedTemplate !== ''\\\" style=\\\"display: flex; gap: 8px\\\">\\n            <input\\n              v-model=\\\"currentTemplate.name\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 8px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n              \\\"\\n            />\\n            <input\\n              v-model=\\\"currentTemplate.headers\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                flex: 2;\\n                padding: 8px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n              \\\"\\n            />\\n            <button\\n              style=\\\"\\n                padding: 8px 12px;\\n                background: #28a745;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                white-space: nowrap;\\n              \\\"\\n              @click=\\\"saveTemplate\\\"\\n            >\\n              <i class=\\\"fa-solid fa-save\\\"></i> \\n            </button>\\n            <button\\n              style=\\\"\\n                padding: 8px 12px;\\n                background: #dc3545;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                white-space: nowrap;\\n              \\\"\\n              @click=\\\"deleteTemplate\\\"\\n            >\\n              <i class=\\\"fa-solid fa-trash\\\"></i> \\n            </button>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"></label>\\n          <div style=\\\"display: flex; gap: 12px; align-items: center\\\">\\n            <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n              <div\\n                :style=\\\"{\\n                  width: '8px',\\n                  height: '8px',\\n                  borderRadius: '50%',\\n                  backgroundColor: is_summarizing ? '#ff6b6b' : '#4caf50',\\n                  transition: 'background-color 0.3s',\\n                }\\\"\\n              ></div>\\n              <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n            </div>\\n            <div style=\\\"display: flex; align-items: center; gap: 6px\\\">\\n              <div\\n                :style=\\\"{\\n                  width: '8px',\\n                  height: '8px',\\n                  borderRadius: '50%',\\n                  backgroundColor: is_generating_table ? '#ff6b6b' : '#4caf50',\\n                  transition: 'background-color 0.3s',\\n                }\\\"\\n              ></div>\\n              <span style=\\\"color: #ccc; font-size: 12px\\\"></span>\\n            </div>\\n            <div v-if=\\\"is_summarizing || is_generating_table\\\" style=\\\"margin-left: auto\\\">\\n              <button\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: #dc3545;\\n                  border: none;\\n                  border-radius: 4px;\\n                  color: white;\\n                  cursor: pointer;\\n                  font-size: 11px;\\n                \\\"\\n                @click=\\\"stopGeneration\\\"\\n              >\\n                <i class=\\\"fa-solid fa-stop\\\"></i> \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n          <button\\n            class=\\\"action-button summarize-button\\\"\\n            :disabled=\\\"is_generating_table || !settings.api_key\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #5aaeff;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%);\\n              box-shadow:\\n                0 2px 8px rgba(74, 158, 255, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n              color: white;\\n            \\\"\\n            @click=\\\"handle_generate_table\\\"\\n          >\\n            <i v-if=\\\"!is_generating_table\\\" class=\\\"fa-solid fa-robot\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\"></i>\\n            {{ is_generating_table ? 'AI...' : 'AI' }}\\n          </button>\\n          <button\\n            class=\\\"action-button create-button\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #40c057;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n              box-shadow:\\n                0 2px 8px rgba(81, 207, 102, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n              color: white;\\n            \\\"\\n            @click=\\\"handle_create_table\\\"\\n          >\\n            <i class=\\\"fa-solid fa-plus\\\"></i> \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"config-section\\\"\\n      style=\\\"padding: 20px 25px !important; border-bottom: 1px solid #3a3a3a; margin-bottom: 5px\\\"\\n    >\\n      <div\\n        style=\\\"\\n          cursor: pointer;\\n          user-select: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: space-between;\\n          padding: 20px 28px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 14px;\\n          margin-bottom: 20px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          position: relative;\\n          overflow: hidden;\\n          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n        \\\"\\n        @click=\\\"toggleSection('messageManagement')\\\"\\n        @mouseenter=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n        \\\"\\n        @mouseleave=\\\"\\n          ($event.currentTarget as HTMLElement).style.background =\\n            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n          ($event.currentTarget as HTMLElement).style.transform = 'none';\\n          ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            position: relative;\\n            z-index: 1;\\n            display: flex;\\n            align-items: center;\\n            gap: 12px;\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            letter-spacing: 0.5px;\\n            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-layer-group\\\" style=\\\"color: #dc3545; font-size: 18px\\\"></i>\\n          \\n        </h3>\\n        <i\\n          :class=\\\"expandedSections['messageManagement'] ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n          class=\\\"fa-solid\\\"\\n          style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-show=\\\"expandedSections['messageManagement']\\\">\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 18px !important\\\">\\n          <label style=\\\"display: block; margin-bottom: 6px; color: #ccc; font-size: 13px\\\"\\n            >1-10 5</label\\n          >\\n          <input\\n            v-model=\\\"hide_range\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"1-10\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 10px 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: border-color 0.2s;\\n            \\\"\\n          />\\n        </div>\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; flex-wrap: wrap; margin-top: 5px\\\">\\n          <button\\n            class=\\\"action-button\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #ff5252;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: #ff6b6b;\\n              color: white;\\n            \\\"\\n            @click=\\\"handle_hide_messages\\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye-slash\\\"></i> \\n          </button>\\n          <button\\n            class=\\\"action-button\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #40c057;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);\\n              box-shadow:\\n                0 2px 8px rgba(81, 207, 102, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15);\\n              color: white;\\n            \\\"\\n            :disabled=\\\"!hide_range.trim()\\\"\\n            @click=\\\"handle_show_messages\\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye\\\"></i> \\n          </button>\\n          <button\\n            class=\\\"action-button\\\"\\n            style=\\\"\\n              flex: 1;\\n              min-width: 120px;\\n              padding: 12px 16px;\\n              border: 1px solid #ffcc02;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-weight: 500;\\n              font-size: 13px;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 6px;\\n              background: #ffd43b;\\n              color: #333;\\n            \\\"\\n            @click=\\\"() => handle_refresh_hidden(true)\\\"\\n          >\\n            <i class=\\\"fa-solid fa-refresh\\\"></i> \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"hidden_messages.length > 0\\\" class=\\\"hidden-messages-section\\\">\\n          <div class=\\\"form-group\\\">\\n            <label class=\\\"flex-label\\\">\\n              <span> ({{ hidden_messages.length }} )</span>\\n              <button class=\\\"mini-button\\\" @click=\\\"hidden_display_expanded = !hidden_display_expanded\\\">\\n                {{ hidden_display_expanded ? '' : '' }}\\n              </button>\\n            </label>\\n          </div>\\n          <div v-if=\\\"hidden_display_expanded\\\" class=\\\"hidden-messages-list\\\">\\n            <div v-for=\\\"msg in hidden_messages\\\" :key=\\\"msg.message_id\\\" class=\\\"hidden-message-item\\\">\\n              <div class=\\\"message-info\\\">\\n                <span class=\\\"message-id\\\">#{{ msg.message_id }}</span>\\n                <span class=\\\"message-role\\\" :class=\\\"'role-' + msg.role\\\">\\n                  {{ msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '' }}\\n                  {{ msg.name }}\\n                </span>\\n                <span class=\\\"message-preview\\\">\\n                  {{ msg.message.substring(0, 50) }}{{ msg.message.length > 50 ? '...' : '' }}\\n                </span>\\n              </div>\\n              <button class=\\\"show-button\\\" @click=\\\"() => handle_unhide_single(msg.message_id)\\\"></button>\\n            </div>\\n          </div>\\n        </div>\\n        <div v-else class=\\\"empty-state\\\"></div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref } from 'vue';\\nimport { useSettingsStore, useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\nconst summaryHistoryStore = useSummaryHistoryStore();\\n\\n// \\nconst expandedSections = ref<Record<string, boolean>>({\\n  api: true,\\n  autoSummary: true,\\n  manualSummary: true,\\n  tableGeneration: true,\\n  messageManagement: true,\\n});\\n\\n// /\\nconst toggleSection = (section: string) => {\\n  expandedSections.value[section] = !expandedSections.value[section];\\n};\\n\\n// API\\n// setChatMessages \\n\\n// \\nconst parseMessageRange = (range: string): number[] => {\\n  if (!range.trim()) return [];\\n\\n  const messageIds: number[] = [];\\n  const parts = range.split(',');\\n\\n  for (const part of parts) {\\n    const trimmed = part.trim();\\n    if (!trimmed) continue;\\n\\n    if (trimmed.includes('-')) {\\n      //  \\\"1-10\\\"\\n      const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\\n      if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\\n        for (let i = start; i <= end; i++) {\\n          messageIds.push(i);\\n        }\\n      }\\n    } else {\\n      //  \\\"5\\\"  \\\"0\\\"\\n      const id = parseInt(trimmed);\\n      if (!isNaN(id) && id >= 0) {\\n        messageIds.push(id);\\n      }\\n    }\\n  }\\n\\n  return messageIds;\\n};\\n\\n// \\nconst available_models = ref<string[]>([]);\\nconst loading_models = ref(false);\\nconst hide_range = ref<string>('');\\nconst hidden_messages = ref<Array<{ message_id: number; name: string; role: string; message: string }>>([]);\\nconst hidden_display_expanded = ref(false);\\n\\n// \\nconst is_summarizing = ref(false);\\nconst is_generating_table = ref(false);\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// \\nconst headerTemplates = ref<Array<{ name: string; headers: string }>>([]);\\nconst selectedTemplate = ref<string>('');\\nconst currentTemplate = ref<{ name: string; headers: string }>({ name: '', headers: '' });\\n\\n// \\nconst loadGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    is_summarizing.value = scriptVars.is_summarizing || false;\\n    is_generating_table.value = scriptVars.is_generating_table || false;\\n    console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\\n  } catch (error) {\\n    console.error(':', error);\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n  }\\n};\\n\\nconst saveGenerationStatus = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(\\n      {\\n        is_summarizing: is_summarizing.value,\\n        is_generating_table: is_generating_table.value,\\n      },\\n      { type: 'script', script_id: scriptId },\\n    );\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst stopGeneration = () => {\\n  if (is_summarizing.value || is_generating_table.value) {\\n    is_summarizing.value = false;\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n    window.toastr.info('');\\n  }\\n};\\n\\n// \\nconst loadHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    //  header_templates  nullundefined\\n    let templates = scriptVars.header_templates;\\n    //  nullundefined  []\\n    if (!Array.isArray(templates)) {\\n      templates = [];\\n    }\\n    headerTemplates.value = templates;\\n    console.log(':', headerTemplates.value.length, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    headerTemplates.value = [];\\n  }\\n};\\n\\nconst saveHeaderTemplates = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    insertOrAssignVariables(klona({ header_templates: headerTemplates.value }), {\\n      type: 'script',\\n      script_id: scriptId,\\n    });\\n    console.log('');\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\nconst loadTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      currentTemplate.value = { ...headerTemplates.value[index] };\\n    }\\n  }\\n};\\n\\nconst showAddTemplateDialog = () => {\\n  const name = window.prompt('');\\n  if (name && name.trim()) {\\n    const headers = window.prompt('');\\n    if (headers && headers.trim()) {\\n      headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\\n      saveHeaderTemplates();\\n      selectedTemplate.value = (headerTemplates.value.length - 1).toString();\\n      loadTemplate();\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\nconst saveTemplate = () => {\\n  if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\\n    const index = parseInt(selectedTemplate.value);\\n    if (index >= 0 && index < headerTemplates.value.length) {\\n      headerTemplates.value[index] = { ...currentTemplate.value };\\n      saveHeaderTemplates();\\n      window.toastr.success('');\\n    }\\n  } else {\\n    window.toastr.warning('');\\n  }\\n};\\n\\nconst deleteTemplate = () => {\\n  if (selectedTemplate.value !== '') {\\n    if (confirm('')) {\\n      const index = parseInt(selectedTemplate.value);\\n      if (index >= 0 && index < headerTemplates.value.length) {\\n        headerTemplates.value.splice(index, 1);\\n        saveHeaderTemplates();\\n        selectedTemplate.value = '';\\n        currentTemplate.value = { name: '', headers: '' };\\n        window.toastr.success('');\\n      }\\n    }\\n  }\\n};\\n\\n// \\nconst loadHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n\\n    const saved = getVariables({ type: 'script', script_id: scriptId });\\n    console.log(':', saved);\\n    console.log(' hidden_messages :', saved?.hidden_messages);\\n\\n    if (saved && saved.hidden_messages) {\\n      hidden_messages.value = saved.hidden_messages;\\n      console.log(':', hidden_messages.value.length, '');\\n    } else {\\n      console.log('...');\\n      // \\n      const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\\n      for (const field of possibleFields) {\\n        if (saved && saved[field]) {\\n          console.log(` ${field}:`, saved[field]);\\n          hidden_messages.value = saved[field];\\n          break;\\n        }\\n      }\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n// \\nconst saveHiddenMessages = () => {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n    console.log('ID:', scriptId);\\n    console.log(':', klona(hidden_messages.value));\\n\\n    const dataToSave = {\\n      hidden_messages: hidden_messages.value,\\n    };\\n    console.log(':', klona(dataToSave));\\n\\n    insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id: scriptId });\\n    console.log(':', hidden_messages.value.length, '');\\n\\n    // \\n    setTimeout(() => {\\n      const saved = getVariables({ type: 'script', script_id: scriptId });\\n      console.log(':', saved);\\n      console.log(' hidden_messages :', saved?.hidden_messages);\\n    }, 100);\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n};\\n\\n//  API \\nconst initApiProvider = () => {\\n  if (!settings.value.api_provider || settings.value.api_provider === '') {\\n    const endpoint = settings.value.api_endpoint || '';\\n    if (endpoint.includes('generativelanguage.googleapis.com')) {\\n      settings.value.api_provider = 'gemini';\\n    } else if (endpoint.includes('open.bigmodel.cn')) {\\n      settings.value.api_provider = 'zhipu';\\n    } else {\\n      settings.value.api_provider = 'openai';\\n    }\\n  }\\n};\\n\\n// \\nonMounted(() => {\\n  console.log('SettingsTab ');\\n  initApiProvider(); //  API \\n  loadHiddenMessages();\\n  loadHeaderTemplates();\\n  loadGenerationStatus();\\n});\\n\\n// \\nconst handleTestButton = () => {\\n  console.log(' - Vue');\\n  window.toastr.success('Vue');\\n};\\n\\n// \\nconst handleSaveSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.saveSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleReloadSettings = () => {\\n  console.log(' ...');\\n  const success = settingsStore.reloadSettings();\\n  if (success) {\\n    console.log(' ');\\n  } else {\\n    console.error(' ');\\n  }\\n};\\n\\nconst handleResetAutoSummaryStart = () => {\\n  console.log(' ...');\\n  try {\\n    // \\n    if (typeof (window as any).resetAutoSummaryStart === 'function') {\\n      (window as any).resetAutoSummaryStart();\\n    } else {\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// API \\nconst handleProviderChange = () => {\\n  const provider = settings.value.api_provider;\\n  const providerEndpoints: Record<string, string> = {\\n    openai: 'https://api.openai.com/v1',\\n    gemini: 'https://generativelanguage.googleapis.com/v1beta/openai',\\n  };\\n\\n  if (providerEndpoints[provider]) {\\n    settings.value.api_endpoint = providerEndpoints[provider];\\n    window.toastr.success(` ${provider === 'openai' ? 'OpenAI' : 'Gemini AI Studio'}`);\\n  }\\n};\\n\\n// \\n// API\\nconst handleSaveApiConfig = () => {\\n  try {\\n    // \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    const success = settingsStore.saveSettings();\\n    if (success) {\\n      console.log('API :', {\\n        endpoint: settings.value.api_endpoint,\\n        model: settings.value.model,\\n        provider: settings.value.api_provider,\\n        //  API Key\\n        api_key: settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '',\\n      });\\n    }\\n  } catch (error) {\\n    console.error(' API :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst handleImportFromTavern = async () => {\\n  try {\\n    console.log(' ...');\\n\\n    // \\n    if (typeof triggerSlash === 'undefined') {\\n      window.toastr.error('');\\n      return;\\n    }\\n\\n    console.log(' ...');\\n\\n    //  1: \\n    console.log('1  /profile ...');\\n    const currentProfileResult = await triggerSlash('/profile', '');\\n    console.log(':', currentProfileResult);\\n\\n    // \\n    if (\\n      !currentProfileResult ||\\n      currentProfileResult === 'No connection profile selected.' ||\\n      currentProfileResult.includes('')\\n    ) {\\n      console.log(' ...');\\n\\n      // \\n      const parentWin = window.parent || window.top || window;\\n      const powerUser = (parentWin as any).power_user;\\n      const secretState = (parentWin as any).secret_state;\\n\\n      let endpoint = '';\\n      let apiKey = '';\\n      let model = '';\\n\\n      if (powerUser) {\\n        endpoint = powerUser.custom_chat_url || powerUser.reverse_proxy || '';\\n        model = powerUser.custom_model || powerUser.openai_model || '';\\n      }\\n\\n      if (secretState) {\\n        apiKey = secretState.api_key_custom || secretState.custom || secretState.openai || '';\\n      }\\n\\n      if (!endpoint && !apiKey && !model) {\\n        window.toastr.warning(\\n          ' API \\\\n\\\\n' +\\n            ' \\\\n' +\\n            'API     ',\\n        );\\n        return;\\n      }\\n\\n      // \\n      if (endpoint) settings.value.api_endpoint = endpoint;\\n      if (apiKey) settings.value.api_key = apiKey;\\n      if (model) settings.value.model = model;\\n\\n      await settingsStore.saveSettings();\\n\\n      window.toastr.success(\\n        ` \\\\n\\\\n` +\\n          (endpoint ? ` : ${endpoint}\\\\n` : '') +\\n          (apiKey ? ` Key: ***${apiKey.slice(-4)}\\\\n` : '') +\\n          (model ? ` : ${model}` : ''),\\n      );\\n\\n      return;\\n    }\\n\\n    //  2: \\n    const profileName = currentProfileResult.trim();\\n    console.log(`2 : ${profileName}`);\\n\\n    const profileDetailsResult = await triggerSlash('/profile-get', profileName);\\n    console.log(':', profileDetailsResult);\\n\\n    //  JSON\\n    let profileData: any;\\n    try {\\n      profileData = JSON.parse(profileDetailsResult);\\n      console.log(' :', profileData);\\n    } catch (parseError) {\\n      console.error('  JSON :', parseError);\\n      window.toastr.error('');\\n      return;\\n    }\\n\\n    // \\n    let endpoint = '';\\n    let apiKey = '';\\n    let model = '';\\n\\n    // API  api-url  server_url\\n    if (profileData['api-url']) {\\n      endpoint = profileData['api-url'];\\n      console.log('  API  (api-url):', endpoint);\\n    } else if (profileData.server_url) {\\n      endpoint = profileData.server_url;\\n      console.log('  API  (server_url):', endpoint);\\n    }\\n\\n    // API Key - \\n    if (profileData['secret-id']) {\\n      const secretId = profileData['secret-id'];\\n      console.log('  secret-id:', secretId);\\n      console.log(' API Key ');\\n    } else if (profileData.key) {\\n      apiKey = profileData.key;\\n      console.log('  API Key (key)');\\n    }\\n\\n    // model\\n    if (profileData.model) {\\n      model = profileData.model;\\n      console.log(' :', model);\\n    }\\n\\n    // \\n    if (!endpoint && !model) {\\n      window.toastr.warning(\\n        ' API \\\\n\\\\n' +\\n          '\\\\n' +\\n          ' \\\\n' +\\n          ' \\\\n\\\\n' +\\n          ' ',\\n      );\\n      console.warn(' :', profileData);\\n      return;\\n    }\\n\\n    //  API Key\\n    if (!apiKey) {\\n      console.log(' API Key ');\\n    }\\n\\n    // \\n    let importedCount = 0;\\n    const importDetails: string[] = [];\\n\\n    if (endpoint) {\\n      settings.value.api_endpoint = endpoint;\\n      importedCount++;\\n      importDetails.push(` API : ${endpoint}`);\\n    }\\n\\n    if (apiKey) {\\n      settings.value.api_key = apiKey;\\n      importedCount++;\\n      importDetails.push(` API Key: ***${apiKey.slice(-4)}`);\\n    }\\n\\n    if (model) {\\n      settings.value.model = model;\\n      importedCount++;\\n      importDetails.push(` : ${model}`);\\n    }\\n\\n    // \\n    await settingsStore.saveSettings();\\n\\n    // \\n    let successMessage =\\n      `  ${importedCount} \\\\n\\\\n` +\\n      ` : ${profileName}\\\\n\\\\n` +\\n      `${importDetails.join('\\\\n')}`;\\n\\n    //  API Key\\n    if (!apiKey) {\\n      successMessage += `\\\\n\\\\n API Key \\\\n API Key`;\\n    }\\n\\n    window.toastr.success(successMessage);\\n\\n    console.log(' :', {\\n      profileName,\\n      endpoint,\\n      apiKey: apiKey ? '***' + apiKey.slice(-4) : '',\\n      model,\\n    });\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_fetch_models = async () => {\\n  if (loading_models.value) return;\\n\\n  try {\\n    loading_models.value = true;\\n    console.log(' ...');\\n    console.log(' API :', settings.value.api_endpoint);\\n    console.log(' API Key:', settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    window.toastr.info('...');\\n\\n    // \\n    const { fetchAvailableModels } = await import('../');\\n    const models = await fetchAvailableModels();\\n\\n    console.log(' :', models);\\n\\n    if (models.length > 0) {\\n      // \\n      available_models.value = models;\\n      window.toastr.success(\\n        `  ${models.length} \\\\n` +\\n          `: ${models.slice(0, 3).join(', ')}${models.length > 3 ? '...' : ''}`,\\n      );\\n\\n      // \\n      if (!settings.value.model && models[0]) {\\n        settings.value.model = models[0];\\n        console.log(' :', models[0]);\\n      }\\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n\\n    // \\n    const errorMessage = (error as Error).message;\\n\\n    // \\n    if (errorMessage.length > 200) {\\n      window.toastr.error(\\n        ' \\\\n\\\\n' +\\n          'F12\\\\n\\\\n' +\\n          '\\\\n' +\\n          ' API  /v1/models \\\\n' +\\n          ' API Key \\\\n' +\\n          '  CORS ',\\n      );\\n    } else {\\n      window.toastr.error(` \\\\n\\\\n${errorMessage}`);\\n    }\\n\\n    console.error(' :', errorMessage);\\n  } finally {\\n    loading_models.value = false;\\n  }\\n};\\n\\nconst handle_test_connection = async () => {\\n  try {\\n    console.log('...');\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    window.toastr.info('...');\\n\\n    // \\n    const { normalizeApiEndpoint } = await import('../settings');\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    //  OpenAI \\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model || 'gpt-3.5-turbo',\\n        messages: [{ role: 'user', content: 'Hello' }],\\n        max_tokens: 5,\\n        temperature: settings.value.temperature,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (response.ok) {\\n      const data = await response.json();\\n      console.log('API :', data);\\n\\n      // \\n      const reply = data.choices?.[0]?.message?.content || '()';\\n      const modelUsed = data.model || settings.value.model;\\n\\n      window.toastr.success(` \\\\n` + ` : ${modelUsed}\\\\n` + ` : ${reply.substring(0, 50)}...`);\\n    } else {\\n      const errorText = await response.text();\\n      console.error('API :', errorText);\\n      window.toastr.error(`  (${response.status})\\\\n` + `: ${errorText.substring(0, 100)}`);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_summarize = async () => {\\n  try {\\n    if (is_summarizing.value) return;\\n\\n    console.log('...');\\n    is_summarizing.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    if (settings.value.start_message_id === undefined || settings.value.end_message_id === undefined) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    if (settings.value.start_message_id < 0 || settings.value.end_message_id < settings.value.start_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    console.log(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\\n\\n    // \\n    showProgress.value = true;\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(\\n      `: ${settings.value.start_message_id} - ${settings.value.end_message_id}`,\\n    );\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    // \\n    const { summarizeMessages } = await import('../');\\n    const summary = await summarizeMessages(settings.value.start_message_id, settings.value.end_message_id);\\n\\n    progressDialogRef.value?.setProgress(90);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    console.log(':', summary);\\n\\n    // \\n    const scriptId = getScriptIdSafe();\\n    if (scriptId) {\\n      insertOrAssignVariables(klona({ last_summary: summary }), { type: 'script', script_id: scriptId });\\n    }\\n\\n    // \\n    summaryHistoryStore.addSummary(\\n      settings.value.start_message_id ?? 0,\\n      settings.value.end_message_id ?? settings.value.start_message_id ?? 0,\\n      summary,\\n    );\\n\\n    // \\n    window.dispatchEvent(new CustomEvent('summary-history-updated'));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail('');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      window.toastr.success('');\\n    }, 800);\\n  } catch (error) {\\n    console.error(':', error);\\n    showProgress.value = false;\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_summarizing.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_generate_table = async () => {\\n  try {\\n    if (is_generating_table.value) return;\\n\\n    console.log('...');\\n    is_generating_table.value = true;\\n    saveGenerationStatus();\\n\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.warning(' API  API Key');\\n      return;\\n    }\\n\\n    // \\n    showProgress.value = true;\\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let headersInput: string | null = null;\\n\\n    if (currentTemplate.value.headers.trim()) {\\n      // \\n      const useTemplate = confirm(\\n        `\\\"${currentTemplate.value.name}\\\"\\\\n${currentTemplate.value.headers}`,\\n      );\\n      if (useTemplate) {\\n        headersInput = currentTemplate.value.headers;\\n      }\\n    }\\n\\n    if (!headersInput) {\\n      // \\n      headersInput = window.prompt(',,,');\\n    }\\n\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(\\n      `: ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id}`,\\n    );\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\\n      console.log(':', messageRange);\\n      chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n\\n      progressDialogRef.value?.addDetail(` ${chatMessages.length} `);\\n    } catch (error) {\\n      console.error(':', error);\\n      showProgress.value = false;\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // AI\\n    const messagesText = chatMessages\\n      .map(msg => {\\n        const role = msg.role === 'user' ? '' : 'AI';\\n        return `${role}: ${msg.message}`;\\n      })\\n      .join('\\\\n\\\\n');\\n\\n    const aiPrompt = `${headers.join(', ')}\\n\\n\\n${messagesText}\\n\\n****\\n1. \\n2. ${headers.join(', ')}\\n3. \\n4. \\\"\\\"\\\"-\\\"\\n5. JSONmarkdown\\n6. dataheaders\\n\\n**JSON**\\n{\\n  \\\"data\\\": [\\n    [\\\"1\\\", \\\"2\\\", \\\"3\\\"],\\n    [\\\"4\\\", \\\"5\\\", \\\"6\\\"]\\n  ]\\n}\\n\\ndata${headers.length}${headers.join(', ')}`;\\n\\n    console.log('AI...');\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${headers.join(', ')}`);\\n\\n    // \\n    const { normalizeApiEndpoint } = await import('../settings');\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    // AI\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'user',\\n            content: aiPrompt,\\n          },\\n        ],\\n        max_tokens: settings.value.max_tokens,\\n        temperature: settings.value.temperature,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API: ${response.status} ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    console.log('AI:', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log('AI:', aiResponse);\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // AIJSON\\n    let aiTableData;\\n    try {\\n      // JSONmarkdown\\n      let jsonText = aiResponse.trim();\\n\\n      // markdown\\n      jsonText = jsonText\\n        .replace(/^```json\\\\s*/i, '')\\n        .replace(/^```\\\\s*/, '')\\n        .replace(/```\\\\s*$/, '');\\n\\n      // JSON\\n      const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*\\\\}/);\\n      if (jsonMatch) {\\n        aiTableData = JSON.parse(jsonMatch[0]);\\n      } else {\\n        throw new Error('JSON');\\n      }\\n    } catch (parseError) {\\n      console.error('AI:', parseError);\\n      console.log('AI:', aiResponse);\\n      window.toastr.error('AI');\\n      return;\\n    }\\n\\n    // \\n    if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\\n      window.toastr.error('AIdata');\\n      return;\\n    }\\n\\n    // \\n    for (let i = 0; i < aiTableData.data.length; i++) {\\n      if (!Array.isArray(aiTableData.data[i])) {\\n        window.toastr.error(`${i + 1}`);\\n        return;\\n      }\\n      if (aiTableData.data[i].length !== headers.length) {\\n        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\\n        console.log(`:`, headers);\\n        console.log(`:`, aiTableData.data[i]);\\n        return;\\n      }\\n    }\\n\\n    // headers\\n    const tableData = {\\n      headers: headers,\\n      data: aiTableData.data,\\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push({\\n        start_id: settings.value.table_start_message_id,\\n        end_id: settings.value.table_end_message_id,\\n        headers: tableData.headers,\\n        data: tableData.data,\\n      });\\n\\n      insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\\n\\n      progressDialogRef.value?.setProgress(100);\\n      progressDialogRef.value?.setMessage(' ');\\n      progressDialogRef.value?.addDetail(` ${tableData.data.length} `);\\n\\n      setTimeout(() => {\\n        showProgress.value = false;\\n        window.toastr.success(`${tableData.data.length}`);\\n      }, 800);\\n\\n      console.log(':', table_history);\\n    } else {\\n      showProgress.value = false;\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    showProgress.value = false;\\n    window.toastr.error(': ' + (error as Error).message);\\n  } finally {\\n    is_generating_table.value = false;\\n    saveGenerationStatus();\\n  }\\n};\\n\\nconst handle_create_table = () => {\\n  try {\\n    // \\n    if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headersInput: string | null = window.prompt(',,,');\\n    if (!headersInput || !headersInput.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const headers: string[] = headersInput\\n      .split(',')\\n      .map((h: string) => h.trim())\\n      .filter((h: string) => h);\\n\\n    if (headers.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const emptyTableData = {\\n      start_id: settings.value.table_start_message_id,\\n      end_id: settings.value.table_end_message_id,\\n      headers: headers,\\n      data: [], // \\n    };\\n\\n    // \\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      const chat_vars = getVariables({ type: 'chat' });\\n      const table_history = chat_vars.table_history || [];\\n\\n      table_history.push(emptyTableData);\\n      insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\\n\\n      window.toastr.success(`${headers.join(', ')}`);\\n      console.log(':', emptyTableData);\\n    } else {\\n      window.toastr.warning('ID');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_hide_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const ranges = hide_range.value.split(',').map(range => range.trim());\\n    const messageIds: number[] = [];\\n\\n    for (const range of ranges) {\\n      if (range.includes('-')) {\\n        // 1-10\\n        const [start, end] = range.split('-').map(Number);\\n        if (start && end && start <= end) {\\n          for (let i = start; i <= end; i++) {\\n            messageIds.push(i);\\n          }\\n        }\\n      } else {\\n        // 5\\n        const id = Number(range);\\n        if (id) {\\n          messageIds.push(id);\\n        }\\n      }\\n    }\\n\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let hiddenCount = 0;\\n    const messagesToHide = [];\\n\\n    for (const messageId of messageIds) {\\n      // \\n      const alreadyHidden = hidden_messages.value.some(msg => msg.message_id === messageId);\\n      if (alreadyHidden) {\\n        console.log(` ${messageId} `);\\n        continue;\\n      }\\n\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        // \\n        messagesToHide.push({\\n          message_id: messageId,\\n          is_hidden: true,\\n        });\\n\\n        // \\n        hidden_messages.value.push({\\n          message_id: messageId,\\n          name: message.name || 'Unknown',\\n          role: message.role || 'user',\\n          message: message.message || '',\\n        });\\n        hiddenCount++;\\n      }\\n    }\\n\\n    // API\\n    if (messagesToHide.length > 0) {\\n      try {\\n        console.log(' slash :', messageIds);\\n\\n        //  slash \\n        for (const messageId of messageIds) {\\n          try {\\n            await triggerSlash(`/hide ${messageId}`);\\n            console.log(` ${messageId}`);\\n          } catch (error) {\\n            console.error(` ${messageId} :`, error);\\n          }\\n        }\\n\\n        window.toastr.success('');\\n      } catch (error) {\\n        console.error('API:', error);\\n        window.toastr.error('API: ' + (error as Error).message);\\n      }\\n    }\\n\\n    if (hiddenCount > 0) {\\n      // \\n      saveHiddenMessages();\\n      window.toastr.success(` ${hiddenCount} `);\\n      hide_range.value = ''; // \\n    } else {\\n      window.toastr.warning('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_show_messages = async () => {\\n  try {\\n    console.log('...');\\n\\n    if (!hide_range.value.trim()) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messageIds = parseMessageRange(hide_range.value.trim());\\n    if (messageIds.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error(': ' + (error as Error).message);\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // \\n    const messagesToShow = [];\\n    let shownCount = 0;\\n\\n    for (const messageId of messageIds) {\\n      const message = chatMessages.find(msg => msg.message_id === messageId);\\n      if (message) {\\n        messagesToShow.push({\\n          message_id: messageId,\\n          is_hidden: false,\\n        });\\n        shownCount++;\\n      }\\n    }\\n\\n    if (messagesToShow.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      for (const messageId of messageIds) {\\n        try {\\n          await triggerSlash(`/unhide ${messageId}`);\\n          console.log(` ${messageId}`);\\n        } catch (error) {\\n          console.error(` ${messageId} :`, error);\\n        }\\n      }\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.error('API: ' + (error as Error).message);\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` ${shownCount} `);\\n    hide_range.value = ''; // \\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\nconst handle_refresh_hidden = async (showToast: boolean = false) => {\\n  try {\\n    console.log('', showToast);\\n\\n    // \\n    if (hidden_messages.value.length === 0) {\\n      console.log('...');\\n      loadHiddenMessages();\\n    }\\n\\n    // \\n    let chatMessages;\\n    try {\\n      const lastMessageId = getLastMessageId();\\n      console.log('ID:', lastMessageId);\\n      chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\\n      console.log(':', chatMessages.length);\\n    } catch (error) {\\n      console.error(':', error);\\n      if (showToast) {\\n        window.toastr.error(': ' + (error as Error).message);\\n      }\\n      return;\\n    }\\n\\n    if (!chatMessages || chatMessages.length === 0) {\\n      if (showToast) {\\n        window.toastr.warning('');\\n      }\\n      return;\\n    }\\n\\n    // \\n    const validHiddenMessages = [];\\n    let removedCount = 0;\\n\\n    for (const hiddenMsg of hidden_messages.value) {\\n      const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\\n      if (message) {\\n        // \\n        validHiddenMessages.push({\\n          message_id: hiddenMsg.message_id,\\n          name: message.name || hiddenMsg.name,\\n          role: message.role || hiddenMsg.role,\\n          message: message.message || hiddenMsg.message,\\n        });\\n      } else {\\n        // \\n        removedCount++;\\n      }\\n    }\\n\\n    // \\n    hidden_messages.value = validHiddenMessages;\\n\\n    // \\n    saveHiddenMessages();\\n\\n    if (showToast) {\\n      if (removedCount > 0) {\\n        window.toastr.success(` ${removedCount} `);\\n      } else {\\n        window.toastr.success('');\\n      }\\n    }\\n\\n    console.log(`${validHiddenMessages.length} ${removedCount} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    if (showToast) {\\n      window.toastr.error(': ' + (error as Error).message);\\n    }\\n  }\\n};\\n\\nconst handle_unhide_single = async (messageId: number) => {\\n  try {\\n    console.log('', messageId);\\n\\n    // \\n    const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\\n    if (index === -1) {\\n      window.toastr.warning(` #${messageId} `);\\n      return;\\n    }\\n\\n    // API\\n    try {\\n      //  slash \\n      await triggerSlash(`/unhide ${messageId}`);\\n      console.log(':', messageId);\\n    } catch (error) {\\n      console.error('API:', error);\\n      window.toastr.warning('API');\\n      return;\\n    }\\n\\n    // \\n    hidden_messages.value.splice(index, 1);\\n\\n    // \\n    saveHiddenMessages();\\n\\n    window.toastr.success(` #${messageId}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style>\\n.settings-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n  border: 2px solid red !important;\\n}\\n\\n.config-section {\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.config-section:last-child {\\n  border-bottom: none;\\n  margin-bottom: 0;\\n}\\n\\n.config-section h3 {\\n  margin: 0 0 20px 0 !important;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.form-group {\\n  margin-bottom: 18px !important;\\n}\\n\\n.form-group label {\\n  display: block;\\n  margin-bottom: 6px;\\n  color: #ccc;\\n  font-size: 13px;\\n}\\n\\n.checkbox-label {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.flex-label {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n}\\n\\n.form-group input[type='text'],\\n.form-group input[type='password'],\\n.form-group input[type='number'],\\n.form-group select {\\n  width: 100%;\\n  padding: 10px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  transition: border-color 0.2s;\\n}\\n\\n.form-group input:focus,\\n.form-group select:focus {\\n  outline: none;\\n  border-color: #4a9eff;\\n}\\n\\n.model-controls {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  flex-wrap: wrap;\\n  margin-top: 5px;\\n}\\n\\n.action-button {\\n  flex: 1;\\n  min-width: 120px;\\n  padding: 12px 16px;\\n  border: none;\\n  border-radius: 6px;\\n  cursor: pointer;\\n  font-weight: 500;\\n  font-size: 13px;\\n  transition: all 0.2s;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  gap: 6px;\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.action-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.test-button {\\n  background: #3a3a3a;\\n  color: #e0e0e0;\\n  border: 1px solid #4a4a4a;\\n}\\n\\n.test-button:hover {\\n  background: #4a4a4a;\\n  border-color: #5a5a5a;\\n}\\n\\n.fetch-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.fetch-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.summarize-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.summarize-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.create-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.create-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.table-button {\\n  background: #4a9eff;\\n  color: white;\\n  border: 1px solid #5aaeff;\\n}\\n\\n.table-button:hover {\\n  background: #5aaeff;\\n  border-color: #6abeff;\\n}\\n\\n.hide-button {\\n  background: #ff6b6b;\\n  color: white;\\n  border: 1px solid #ff5252;\\n}\\n\\n.hide-button:hover {\\n  background: #ff5252;\\n  border-color: #ff4444;\\n}\\n\\n.unhide-button {\\n  background: #51cf66;\\n  color: white;\\n  border: 1px solid #40c057;\\n}\\n\\n.unhide-button:hover {\\n  background: #40c057;\\n  border-color: #37b24d;\\n}\\n\\n.refresh-button {\\n  background: #ffd43b;\\n  color: #333;\\n  border: 1px solid #ffcc02;\\n}\\n\\n.refresh-button:hover {\\n  background: #ffcc02;\\n  border-color: #ffb700;\\n}\\n\\n.action-button:disabled {\\n  opacity: 0.5;\\n  cursor: not-allowed;\\n}\\n\\n.model-select {\\n  margin-top: 8px;\\n}\\n\\n.hidden-messages-section {\\n  margin-top: 20px;\\n}\\n\\n.hidden-messages-list {\\n  max-height: 300px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  border: 1px solid #3a3a3a;\\n  background: #1a1a1a;\\n}\\n\\n.hidden-message-item {\\n  padding: 10px 12px;\\n  display: flex;\\n  align-items: center;\\n  gap: 12px;\\n  border-bottom: 1px solid #2a2a2a;\\n  transition: background 0.2s;\\n}\\n\\n.hidden-message-item:last-child {\\n  border-bottom: none;\\n}\\n\\n.hidden-message-item:hover {\\n  background: #2a2a2a;\\n}\\n\\n.message-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.message-id {\\n  font-weight: bold;\\n  color: #4a9eff;\\n  font-size: 13px;\\n  min-width: 50px;\\n}\\n\\n.message-role {\\n  font-size: 12px;\\n  padding: 2px 8px;\\n  border-radius: 4px;\\n  white-space: nowrap;\\n}\\n\\n.message-role.role-user {\\n  background: #3a5a3a;\\n  color: #90ee90;\\n}\\n\\n.message-role.role-assistant {\\n  background: #3a3a5a;\\n  color: #90a0ee;\\n}\\n\\n.message-role.role-system {\\n  background: #5a5a3a;\\n  color: #eea090;\\n}\\n\\n.message-preview {\\n  flex: 1;\\n  color: #888;\\n  font-size: 12px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.show-button {\\n  background: #4a9eff !important;\\n  color: white !important;\\n  padding: 6px 12px;\\n  border: 1px solid #5aaeff !important;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n  min-width: 60px;\\n  text-align: center;\\n}\\n\\n.show-button:hover {\\n  background: #5aaeff !important;\\n  border-color: #6abeff !important;\\n}\\n\\n.mini-button {\\n  background: #666;\\n  color: white;\\n  border: 1px solid #777;\\n  padding: 6px 12px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: all 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #777;\\n  border-color: #888;\\n}\\n\\n.empty-state {\\n  margin-top: 20px;\\n  padding: 20px;\\n  background: #2a2a2a;\\n  border-radius: 6px;\\n  text-align: center;\\n  color: #888;\\n  border: 1px solid #3a3a3a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"70dcd538\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=69c7c08e&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"31df22f5\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=69c7c08e&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HelpTab.vue?vue&type=style&index=0&id=69c7c08e&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tool-section[data-v-6329201c]{margin-bottom:20px}.tool-content[data-v-6329201c]{padding:0 20px 20px 20px}.form-group[data-v-6329201c]{margin-bottom:15px}.generate-btn:hover .shimmer-effect[data-v-6329201c]{left:100%}.output-section[data-v-6329201c]{margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1)}.code-output[data-v-6329201c]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:15px;position:relative;max-height:400px;overflow-y:auto}.code-output pre[data-v-6329201c]{margin:0;color:#e0e0e0;font-family:'Courier New',monospace;font-size:12px;white-space:pre-wrap;word-wrap:break-word}.copy-btn-abs[data-v-6329201c]{position:absolute;top:8px;right:8px;background:linear-gradient(135deg,rgba(74,158,255,0.2),rgba(102,126,234,0.3));border:1px solid rgba(74,158,255,0.4);border-radius:6px;color:#4a9eff;padding:8px 14px;cursor:pointer;font-size:12px;font-weight:600;transition:all 0.3s ease;box-shadow:0 2px 8px rgba(74,158,255,0.2)}.copy-btn-abs[data-v-6329201c]:hover{background:linear-gradient(135deg,rgba(74,158,255,0.35),rgba(102,126,234,0.45));border-color:rgba(74,158,255,0.6);box-shadow:0 4px 12px rgba(74,158,255,0.35);transform:translateY(-2px);color:#fff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/MvuBetaTab.vue\"],\"names\":[],\"mappings\":\"AA6rDA,+BACE,kBACF,CAEA,+BACE,wBACF,CAEA,6BACE,kBACF,CAEA,qDACE,SACF,CAEA,iCACE,eAAgB,CAChB,gBAAiB,CACjB,0CACF,CAEA,8BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,iBAAkB,CAClB,gBAAiB,CACjB,eACF,CAEA,kCACE,QAAS,CACT,aAAc,CACd,mCAAqC,CACrC,cAAe,CACf,oBAAqB,CACrB,oBACF,CAEA,+BACE,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,6EAAsF,CACtF,qCAAyC,CACzC,iBAAkB,CAClB,aAAc,CACd,gBAAiB,CACjB,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,wBAAyB,CACzB,yCACF,CAEA,qCACE,+EAAwF,CACxF,iCAAqC,CACrC,2CAA+C,CAC/C,0BAA2B,CAC3B,UACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleExpanded('structure')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-database\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n          [InitVar] \\n        </h4>\\n        <i\\n          :class=\\\"expanded.structure ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"expanded.structure\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\" style=\\\"margin-bottom: 15px\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n             MVU Beta  <strong style=\\\"color: #4a9eff\\\">[InitVar]</strong> \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             InitVar JSON <strong> \\\"stat_data\\\" </strong>\\n          </p>\\n        </div>\\n\\n        <!-- AI -->\\n        <div\\n          style=\\\"\\n            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08));\\n            border: 1px solid rgba(102, 126, 234, 0.3);\\n            border-radius: 8px;\\n            padding: 15px;\\n            margin-bottom: 20px;\\n          \\\"\\n        >\\n          <h4 style=\\\"color: #667eea; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n            AI \\n          </h4>\\n\\n          <div class=\\\"form-group\\\" style=\\\"margin: 0 0 12px 0\\\">\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n              \\n            </label>\\n            <textarea\\n              v-model=\\\"aiStructurePrompt\\\"\\n              placeholder=\\\"1-30100\\\"\\n              rows=\\\"4\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n                resize: vertical;\\n                line-height: 1.5;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @focus=\\\"(e: any) => (e.target.style.borderColor = '#667eea')\\\"\\n              @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\n            ></textarea>\\n          </div>\\n\\n          <button\\n            class=\\\"ai-generate-btn\\\"\\n            :disabled=\\\"isGeneratingAI || !aiStructurePrompt.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            :style=\\\"{\\n              opacity: isGeneratingAI || !aiStructurePrompt.trim() ? 0.6 : 1,\\n              cursor: isGeneratingAI || !aiStructurePrompt.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"handleAIGenerateStructure\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                if (!isGeneratingAI && aiStructurePrompt.trim()) {\\n                  e.currentTarget.style.transform = 'translateY(-2px)';\\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\n                }\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.transform = 'translateY(0)';\\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\n              }\\n            \\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i\\n              class=\\\"fa-solid fa-wand-magic-sparkles\\\"\\n              style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"\\n            ></i>\\n            <span style=\\\"position: relative; z-index: 1\\\">{{ isGeneratingAI ? 'AI ...' : 'AI ' }}</span>\\n          </button>\\n\\n          <!-- AI  -->\\n          <button\\n            v-if=\\\"generatedStructure && originalStructurePrompt\\\"\\n            style=\\\"\\n              margin-left: 12px;\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\\n              border: 1px solid rgba(251, 191, 36, 0.4);\\n              border-radius: 8px;\\n              color: #fbbf24;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\\n            \\\"\\n            @click=\\\"showStructureModifyDialog = true\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background =\\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\\n                e.currentTarget.style.transform = 'translateY(-2px)';\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background =\\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\\n                e.currentTarget.style.transform = 'translateY(0)';\\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\\n              }\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            AI \\n          </button>\\n\\n          <p style=\\\"color: #888; font-size: 11px; margin: 8px 0 0 0\\\">\\n             AI  $meta\\n          </p>\\n        </div>\\n\\n        <div style=\\\"text-align: center; margin: 20px 0; position: relative\\\">\\n          <span\\n            style=\\\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\\\"\\n            ></span\\n          >\\n          <div\\n            style=\\\"\\n              position: absolute;\\n              top: 50%;\\n              left: 0;\\n              right: 0;\\n              height: 1px;\\n              background: rgba(255, 255, 255, 0.1);\\n              z-index: 0;\\n            \\\"\\n          ></div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <input\\n            v-model=\\\"varName\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#4a9eff')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\n          />\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            ::\\n          </label>\\n          <textarea\\n            v-model=\\\"subFields\\\"\\n            placeholder=\\\"&#10;:number:[-30,100]&#10;:string:&#10;:array:\\\"\\n            rows=\\\"5\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: 'Courier New', monospace;\\n              line-height: 1.5;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#4a9eff')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\n          ></textarea>\\n          <p style=\\\"color: #888; font-size: 11px; margin: 6px 0 0 0\\\"> numberstringarrayobject</p>\\n        </div>\\n\\n        <button\\n          class=\\\"generate-btn\\\"\\n          style=\\\"\\n            padding: 12px 24px;\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n            position: relative;\\n            overflow: hidden;\\n          \\\"\\n          @click=\\\"generateStructure\\\"\\n          @mouseenter=\\\"\\n            (e: any) => {\\n              e.currentTarget.style.transform = 'translateY(-2px)';\\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\n            }\\n          \\\"\\n          @mouseleave=\\\"\\n            (e: any) => {\\n              e.currentTarget.style.transform = 'translateY(0)';\\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\n            }\\n          \\\"\\n        >\\n          <div\\n            style=\\\"\\n              position: absolute;\\n              top: 0;\\n              left: -100%;\\n              width: 100%;\\n              height: 100%;\\n              background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n              transition: left 0.5s;\\n            \\\"\\n            class=\\\"shimmer-effect\\\"\\n          ></div>\\n          <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"></i>\\n          <span style=\\\"position: relative; z-index: 1\\\"> [InitVar] </span>\\n        </button>\\n\\n        <div v-if=\\\"generatedStructure\\\" class=\\\"output-section\\\">\\n          <h4 style=\\\"color: #4a9eff; font-size: 14px; margin-bottom: 10px\\\"> [InitVar] </h4>\\n          <div class=\\\"code-output\\\">\\n            <pre>{{ generatedStructure }}</pre>\\n            <button class=\\\"copy-btn-abs\\\" @click=\\\"copyGenerated\\\">\\n              <i class=\\\"fa-solid fa-copy\\\"></i>\\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div\\n            style=\\\"\\n              margin-top: 15px;\\n              padding: 12px;\\n              background: rgba(74, 158, 255, 0.05);\\n              border: 1px solid rgba(74, 158, 255, 0.2);\\n              border-radius: 8px;\\n            \\\"\\n          >\\n            <p style=\\\"margin: 0 0 10px 0; color: #4a9eff; font-size: 12px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-link\\\"></i> \\n            </p>\\n            <div style=\\\"display: flex; gap: 10px; flex-wrap: wrap\\\">\\n              <button\\n                style=\\\"\\n                  flex: 1;\\n                  min-width: 140px;\\n                  padding: 8px 16px;\\n                  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.3));\\n                  color: #10b981;\\n                  border: 1px solid rgba(16, 185, 129, 0.4);\\n                  border-radius: 6px;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"autoGeneratePrompt\\\"\\n                @mouseenter=\\\"\\n                  (e: any) => {\\n                    e.currentTarget.style.transform = 'translateY(-1px)';\\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';\\n                  }\\n                \\\"\\n                @mouseleave=\\\"\\n                  (e: any) => {\\n                    e.currentTarget.style.transform = 'translateY(0)';\\n                    e.currentTarget.style.boxShadow = 'none';\\n                  }\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-file-alt\\\"></i>  COT \\n              </button>\\n              <button\\n                style=\\\"\\n                  flex: 1;\\n                  min-width: 140px;\\n                  padding: 8px 16px;\\n                  background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3));\\n                  color: #f59e0b;\\n                  border: 1px solid rgba(245, 158, 11, 0.4);\\n                  border-radius: 6px;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"exportWorldbook\\\"\\n                @mouseenter=\\\"\\n                  (e: any) => {\\n                    e.currentTarget.style.transform = 'translateY(-1px)';\\n                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.3)';\\n                  }\\n                \\\"\\n                @mouseleave=\\\"\\n                  (e: any) => {\\n                    e.currentTarget.style.transform = 'translateY(0)';\\n                    e.currentTarget.style.boxShadow = 'none';\\n                  }\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-book\\\"></i>  JSON\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- COT  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleExpanded('prompt')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-file-code\\\" style=\\\"color: #fbbf24; font-size: 18px\\\"></i>\\n          COT 6 \\n        </h4>\\n        <i\\n          :class=\\\"expanded.prompt ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"expanded.prompt\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\" style=\\\"margin-bottom: 15px\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n             MVU Beta  <strong style=\\\"color: #fbbf24\\\">COT</strong> 6 \\n          </p>\\n        </div>\\n\\n        <!-- AI -->\\n        <div\\n          style=\\\"\\n            background: linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.08));\\n            border: 1px solid rgba(251, 191, 36, 0.3);\\n            border-radius: 8px;\\n            padding: 15px;\\n            margin-bottom: 20px;\\n          \\\"\\n        >\\n          <h4 style=\\\"color: #fbbf24; font-size: 14px; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n            AI \\n          </h4>\\n\\n          <div class=\\\"form-group\\\" style=\\\"margin: 0 0 12px 0\\\">\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n              \\n            </label>\\n            <textarea\\n              v-model=\\\"aiPromptDescription\\\"\\n              placeholder=\\\" AI \\\"\\n              rows=\\\"4\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n                resize: vertical;\\n                line-height: 1.5;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @focus=\\\"(e: any) => (e.target.style.borderColor = '#fbbf24')\\\"\\n              @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\n            ></textarea>\\n          </div>\\n\\n          <button\\n            class=\\\"ai-generate-btn\\\"\\n            :disabled=\\\"isGeneratingPrompt || !aiPromptDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(251, 191, 36, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            :style=\\\"{\\n              opacity: isGeneratingPrompt || !aiPromptDescription.trim() ? 0.6 : 1,\\n              cursor: isGeneratingPrompt || !aiPromptDescription.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"handleAIGeneratePrompt\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                if (!isGeneratingPrompt && aiPromptDescription.trim()) {\\n                  e.currentTarget.style.transform = 'translateY(-2px)';\\n                  e.currentTarget.style.boxShadow = '0 6px 20px rgba(251, 191, 36, 0.4)';\\n                }\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.transform = 'translateY(0)';\\n                e.currentTarget.style.boxShadow = '0 3px 12px rgba(251, 191, 36, 0.3)';\\n              }\\n            \\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i\\n              class=\\\"fa-solid fa-wand-magic-sparkles\\\"\\n              style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"\\n            ></i>\\n            <span style=\\\"position: relative; z-index: 1\\\">{{\\n              isGeneratingPrompt ? 'AI ...' : 'AI '\\n            }}</span>\\n          </button>\\n\\n          <!-- AI  -->\\n          <button\\n            v-if=\\\"generatedPrompt && originalPromptDescription\\\"\\n            style=\\\"\\n              margin-left: 12px;\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3));\\n              border: 1px solid rgba(251, 191, 36, 0.4);\\n              border-radius: 8px;\\n              color: #fbbf24;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);\\n            \\\"\\n            @click=\\\"showPromptModifyDialog = true\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background =\\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\\n                e.currentTarget.style.transform = 'translateY(-2px)';\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background =\\n                  'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\\n                e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\\n                e.currentTarget.style.transform = 'translateY(0)';\\n                e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\\n              }\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            AI \\n          </button>\\n\\n          <p style=\\\"color: #888; font-size: 11px; margin: 8px 0 0 0\\\">\\n             AI  6  COT \\n          </p>\\n        </div>\\n\\n        <div style=\\\"text-align: center; margin: 20px 0; position: relative\\\">\\n          <span\\n            style=\\\"background: #1a1a1a; padding: 0 12px; color: #666; font-size: 12px; position: relative; z-index: 1\\\"\\n            ></span\\n          >\\n          <div\\n            style=\\\"\\n              position: absolute;\\n              top: 50%;\\n              left: 0;\\n              right: 0;\\n              height: 1px;\\n              background: rgba(255, 255, 255, 0.1);\\n              z-index: 0;\\n            \\\"\\n          ></div>\\n        </div>\\n\\n        <div v-if=\\\"generatedStructure\\\" class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n             STEP 3\\n          </label>\\n          <textarea\\n            v-model=\\\"variableCategories\\\"\\n            placeholder=\\\"&#10; - 3 fields&#10; - 2 fields&#10; - 1 field\\\"\\n            rows=\\\"4\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: 'Courier New', monospace;\\n              line-height: 1.5;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#fbbf24')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = '#3a3a3a')\\\"\\n          ></textarea>\\n          <p style=\\\"color: #888; font-size: 11px; margin: 6px 0 0 0\\\"> AI  STEP 3 </p>\\n        </div>\\n\\n        <button\\n          class=\\\"generate-btn\\\"\\n          style=\\\"\\n            margin-top: 10px;\\n            padding: 12px 24px;\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n            box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n            position: relative;\\n            overflow: hidden;\\n          \\\"\\n          @click=\\\"generatePrompt\\\"\\n          @mouseenter=\\\"\\n            (e: any) => {\\n              e.currentTarget.style.transform = 'translateY(-2px)';\\n              e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\\n            }\\n          \\\"\\n          @mouseleave=\\\"\\n            (e: any) => {\\n              e.currentTarget.style.transform = 'translateY(0)';\\n              e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\\n            }\\n          \\\"\\n        >\\n          <div\\n            style=\\\"\\n              position: absolute;\\n              top: 0;\\n              left: -100%;\\n              width: 100%;\\n              height: 100%;\\n              background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n              transition: left 0.5s;\\n            \\\"\\n            class=\\\"shimmer-effect\\\"\\n          ></div>\\n          <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px; position: relative; z-index: 1\\\"></i>\\n          <span style=\\\"position: relative; z-index: 1\\\"> COT </span>\\n        </button>\\n\\n        <div v-if=\\\"generatedPrompt\\\" class=\\\"output-section\\\">\\n          <h4 style=\\\"color: #fbbf24; font-size: 14px; margin-bottom: 10px\\\"> COT </h4>\\n          <div class=\\\"code-output\\\">\\n            <pre>{{ generatedPrompt }}</pre>\\n            <button class=\\\"copy-btn-abs\\\" @click=\\\"copyPrompt\\\">\\n              <i class=\\\"fa-solid fa-copy\\\"></i>\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <!-- AI  -  -->\\n  <AIModifyDialog\\n    :show=\\\"showStructureModifyDialog\\\"\\n    :is-modifying=\\\"isModifyingStructure\\\"\\n    title=\\\"AI  [InitVar] \\\"\\n    description=\\\" AI  MVU \\\"\\n    :examples=\\\"[\\n      ' number',\\n      '',\\n      '',\\n      '',\\n    ]\\\"\\n    @close=\\\"showStructureModifyDialog = false\\\"\\n    @confirm=\\\"modifyStructureWithAI\\\"\\n  />\\n\\n  <!-- AI  -  -->\\n  <AIModifyDialog\\n    :show=\\\"showPromptModifyDialog\\\"\\n    :is-modifying=\\\"isModifyingPrompt\\\"\\n    title=\\\"AI  COT \\\"\\n    description=\\\" AI \\\"\\n    :examples=\\\"[\\n      ' STEP 2 ',\\n      '',\\n      '',\\n      ' STEP 3 ',\\n    ]\\\"\\n    @close=\\\"showPromptModifyDialog = false\\\"\\n    @confirm=\\\"modifyPromptWithAI\\\"\\n  />\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onMounted, ref, watch } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { getScriptIdSafe } from '../utils';\\nimport AIModifyDialog from './AIModifyDialog.vue';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\nconst expanded = ref({\\n  structure: true,\\n  prompt: false,\\n});\\n\\nfunction toggleExpanded(key: keyof typeof expanded.value) {\\n  expanded.value[key] = !expanded.value[key];\\n}\\n\\n// AI\\nconst aiStructurePrompt = ref('');\\nconst isGeneratingAI = ref(false);\\nconst aiPromptDescription = ref('');\\nconst isGeneratingPrompt = ref(false);\\n\\n// \\nconst originalStructurePrompt = ref('');\\nconst originalPromptDescription = ref('');\\n\\n// \\nconst showStructureModifyDialog = ref(false);\\nconst isModifyingStructure = ref(false);\\nconst showPromptModifyDialog = ref(false);\\nconst isModifyingPrompt = ref(false);\\n\\n// \\nconst varName = ref('');\\nconst subFields = ref('');\\nconst generatedStructure = ref('');\\nconst variableCategories = ref('');\\nconst generatedPrompt = ref('');\\n\\nfunction copyToClipboard(text: string) {\\n  navigator.clipboard.writeText(text).then(() => {\\n    window.toastr.success('');\\n  });\\n}\\n\\nfunction generateStructure() {\\n  if (!varName.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  const result: any = {\\n    $meta: {\\n      extensible: false,\\n      strictSet: true,\\n    },\\n  };\\n\\n  result[varName.value] = parseSubFields();\\n  generatedStructure.value = JSON.stringify(result, null, 2);\\n}\\n\\nfunction parseSubFields(): any {\\n  const lines = subFields.value.split('\\\\n').filter(l => l.trim());\\n  const obj: any = {};\\n\\n  lines.forEach(line => {\\n    const parts = line.split(':').map(s => s.trim());\\n    const name = parts[0];\\n    const type = parts[1] || 'string';\\n    const desc = parts[2] || '...';\\n\\n    if (!name) return;\\n\\n    if (type === 'number') {\\n      obj[name] = [0, desc];\\n    } else if (type === 'string') {\\n      obj[name] = ['', desc];\\n    } else if (type === 'array') {\\n      obj[name] = [[], desc];\\n    } else if (type === 'object') {\\n      obj[name] = [{}, desc];\\n    } else {\\n      obj[name] = [null, desc];\\n    }\\n  });\\n\\n  return obj;\\n}\\n\\nfunction copyGenerated() {\\n  copyToClipboard(generatedStructure.value);\\n}\\n\\n// AI\\nasync function handleAIGenerateStructure() {\\n  if (!aiStructurePrompt.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    window.toastr.error(' API  API Key');\\n    return;\\n  }\\n\\n  // \\n  originalStructurePrompt.value = aiStructurePrompt.value;\\n\\n  isGeneratingAI.value = true;\\n\\n  try {\\n    const systemPrompt = ` MVU Beta  [InitVar] JSON\\n\\n\\n1.  \\\"stat_data\\\" \\n2. : [, \\\"\\\"]\\n3. $meta \\n4. \\n5. 20\\n\\n\\n{\\n  \\\"$meta\\\": {\\\"extensible\\\": false, \\\"strictSet\\\": true},\\n  \\\"\\\": {\\n    \\\"\\\": [, \\\"\\\"]\\n  }\\n}\\n\\n JSON`;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: `${aiStructurePrompt.value}\\\\n\\\\n [InitVar] JSON` },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 4000,\\n      }),\\n    });\\n\\n    // \\n    const responseText = await response.text();\\n\\n    if (!response.ok) {\\n      // \\n      let errorMessage = `API : ${response.status}`;\\n      try {\\n        const errorData = JSON.parse(responseText);\\n        if (errorData.error) {\\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\\n        } else if (errorData.message) {\\n          errorMessage = `${errorMessage} - ${errorData.message}`;\\n        } else {\\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\\n        }\\n      } catch (e) {\\n        errorMessage = `${errorMessage} - ${responseText.slice(0, 200)}`;\\n      }\\n      console.error('API :', errorMessage);\\n      console.error(' URL:', settings.value.api_endpoint);\\n      console.error(\\n        ':',\\n        JSON.stringify(\\n          {\\n            model: settings.value.model,\\n            messages: [\\n              { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\\n              { role: 'user', content: `${aiStructurePrompt.value.substring(0, 100)}...` },\\n            ],\\n            temperature: settings.value.temperature || 0.7,\\n            max_tokens: settings.value.max_tokens || 4000,\\n          },\\n          null,\\n          2,\\n        ),\\n      );\\n      throw new Error(errorMessage);\\n    }\\n\\n    // \\n    const data = JSON.parse(responseText);\\n    // \\n    let result = '';\\n    if (data.choices && data.choices[0] && data.choices[0].message) {\\n      result = data.choices[0].message.content || '';\\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\\n      //  API  data.data.choices \\n      result = data.data.choices[0].message?.content || '';\\n    } else if (data.content) {\\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\\n    }\\n\\n    console.log('AI :', result);\\n\\n    //  JSON\\n    let jsonText = result;\\n\\n    // \\n    jsonText = jsonText.replace(/```json\\\\s*/gi, '').replace(/```\\\\s*$/g, '');\\n\\n    //  JSON \\n    const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*$/);\\n    if (!jsonMatch) {\\n      throw new Error(' JSON ');\\n    }\\n\\n    jsonText = jsonMatch[0];\\n\\n    //  JSON\\n    let bracketCount = 0;\\n    let inString = false;\\n    let escapeNext = false;\\n    let lastValidPos = jsonText.length;\\n\\n    for (let i = 0; i < jsonText.length; i++) {\\n      const char = jsonText[i];\\n\\n      if (escapeNext) {\\n        escapeNext = false;\\n        continue;\\n      }\\n\\n      if (char === '\\\\\\\\') {\\n        escapeNext = true;\\n        continue;\\n      }\\n\\n      if (char === '\\\"' && !inString) {\\n        inString = true;\\n        continue;\\n      } else if (char === '\\\"' && inString) {\\n        inString = false;\\n        continue;\\n      }\\n\\n      if (inString) continue;\\n\\n      if (char === '{') bracketCount++;\\n      else if (char === '}') bracketCount--;\\n\\n      if (bracketCount === 0) {\\n        lastValidPos = i + 1;\\n        break;\\n      }\\n    }\\n\\n    jsonText = jsonText.substring(0, lastValidPos);\\n\\n    // \\n    if (bracketCount > 0) {\\n      console.warn(`JSON  ${bracketCount} ...`);\\n      jsonText += '}'.repeat(bracketCount);\\n    }\\n\\n    //  JSON\\n    // \\n    jsonText = jsonText.replace(/,(\\\\s*[}\\\\]])/g, '$1');\\n    // \\n    jsonText = jsonText.replace(/\\\\/\\\\/[^\\\\n]*/g, '');\\n    jsonText = jsonText.replace(/\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\//g, '');\\n\\n    let parsed;\\n    try {\\n      parsed = JSON.parse(jsonText);\\n    } catch (e) {\\n      console.error('JSON :', jsonText);\\n      throw new Error(`JSON : ${(e as Error).message} AI  JSON`);\\n    }\\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\\n    varName.value = varNameParsed;\\n\\n    const varData = parsed[varNameParsed] || {};\\n    const fields: string[] = [];\\n\\n    for (const key in varData) {\\n      if (key === '$meta') continue;\\n      const value = varData[key];\\n      if (Array.isArray(value) && value.length === 2) {\\n        const val = value[0];\\n        const type =\\n          typeof val === 'number'\\n            ? 'number'\\n            : typeof val === 'string'\\n              ? 'string'\\n              : Array.isArray(val)\\n                ? 'array'\\n                : 'object';\\n        const desc = value[1] || '...';\\n        fields.push(`${key}:${type}:${desc}`);\\n      }\\n    }\\n\\n    subFields.value = fields.join('\\\\n');\\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\\n    window.toastr.success('AI ');\\n  } catch (error: any) {\\n    console.error('AI:', error);\\n    window.toastr.error(`AI: ${error.message}`);\\n  } finally {\\n    isGeneratingAI.value = false;\\n  }\\n}\\n\\nfunction autoGeneratePrompt() {\\n  if (!generatedStructure.value) {\\n    window.toastr.error(' [InitVar] ');\\n    return;\\n  }\\n\\n  try {\\n    const structure = JSON.parse(generatedStructure.value);\\n    const varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\\n\\n    const varData = structure[varNameParsed] || {};\\n    let fieldCount = 0;\\n\\n    for (const key in varData) {\\n      if (key === '$meta') continue;\\n      fieldCount++;\\n    }\\n\\n    variableCategories.value = `${varNameParsed} - ${fieldCount} fields`;\\n    expanded.value.prompt = true;\\n    generatePrompt();\\n    window.toastr.success(' COT ');\\n\\n    setTimeout(() => {\\n      const promptSection = document.querySelector('.tool-section:nth-child(2)');\\n      promptSection?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\\n    }, 100);\\n  } catch (error: any) {\\n    console.error(':', error);\\n    window.toastr.error('');\\n  }\\n}\\n\\nfunction generatePrompt() {\\n  const categories = variableCategories.value.trim() || ' - X fields';\\n\\n  const promptTemplate = `<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\\n\\n\\n\\n\\n\\n<status_current_variables>\\n{{get_message_variable::stat_data}}\\n</status_current_variables>\\n\\n\\n\\nrule:\\n  description:\\n    - Output update analysis at the end of response\\n    - Variable updates are omitted in context but you must still add them\\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\\n    - 4 commands available: \\\\\\\\\\\\`_.set\\\\\\\\\\\\` (2-3 args), \\\\\\\\\\\\`_.insert\\\\\\\\\\\\` (2-3 args), \\\\\\\\\\\\`_.remove\\\\\\\\\\\\` (1-2 args), \\\\\\\\\\\\`_.add\\\\\\\\\\\\` (2 args)\\n    - **RECOMMENDED**: Use \\\\\\\\\\\\`_.insert\\\\\\\\\\\\` instead of \\\\\\\\\\\\`_.assign\\\\\\\\\\\\`\\n    - strictSet enabled: [0] suffix is mandatory for all value access\\n\\n  command_usage:\\n    - \\\\\\\\\\\\`_.set('path[0]', old?, new);//reason\\\\\\\\\\\\` - Replace value\\n    - \\\\\\\\\\\\`_.add('path[0]', delta);//reason\\\\\\\\\\\\` - Add/subtract numbers only\\n    - \\\\\\\\\\\\`_.insert('path[0]', value);//reason\\\\\\\\\\\\` - Add to array end\\n    - \\\\\\\\\\\\`_.insert('path[0]', index, value);//reason\\\\\\\\\\\\` - Insert to array at position\\n    - \\\\\\\\\\\\`_.insert('path', key, value);//reason\\\\\\\\\\\\` - Add key-value to object\\n    - \\\\\\\\\\\\`_.remove('path[0]', value);//reason\\\\\\\\\\\\` - Remove from array/object\\n\\n  analysis:\\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\\n\\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\\n    - Identify current scene/stage/phase\\n    - Describe what happened\\n    - Determine what changes occurred (time/location/status/progress)\\n\\n    **STEP 2: Time & Key Status Check**\\n    - Extract current time/status from story context\\n    - Read key variables from <status_current_variables>\\n    - Calculate changes\\n    - Decision: What needs to be updated?\\n\\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\\n    Go through each variable category systematically and mark Y or N:\\n\\n    ${categories}:\\n      - 1[0]: [Y/N] - explain\\n      - 2[0]: [Y/N] - explain\\n\\n    **STEP 4: Command Selection**\\n    For each variable marked Y, determine which command to use\\n\\n    **STEP 5: Analyze Other Variable Systems**\\n    - stat_data detailed COT: COMPLETED\\n    - Other variable groups? [YES/NO]\\n\\n    **STEP 6: Final Validation Checklist**\\n    - All [0] suffixes present? [YES/NO]\\n    - All Y variables have corresponding commands? [YES/NO]\\n    - All commands have clear Chinese comments? [YES/NO]\\n\\n  format: |-\\n    <UpdateVariable>\\n        <ThinkingProcess>\\n            **STEP 1: Scene Analysis**\\n            [50 words]\\n\\n            **STEP 2: Time & Key Status Check**\\n            - Current status: ...\\n            - Stored variable[0]: ...\\n            - Changes: ...\\n            - Update decision: ...\\n\\n            **STEP 3: Variable Review (stat_data)**\\n            [List categories with Y/N]\\n\\n            **STEP 4: Command Selection**\\n            [For each Y variable, state which command]\\n\\n            **STEP 5: Other Systems**\\n            - stat_data COT: COMPLETED\\n            - Other groups? NO\\n\\n            **STEP 6: Final Check**\\n            - [0] suffixes? YES\\n            - All Y have commands? YES\\n            - Chinese comments? YES\\n        </ThinkingProcess>\\n\\n        _.set('path[0]', old?, new);//reason\\n        _.add('path[0]', delta);//reason\\n        _.insert('path[0]', value);//reason\\n        _.remove('path[0]', value);//reason\\n    </UpdateVariable>\\n\\n  example: |-\\n    <UpdateVariable>\\n        <ThinkingProcess>\\n            **STEP 1: Scene Analysis**\\n            User and character had conversation at library. User helped find a book. Time advanced from 10:00 to 10:30. Character's impression improved.\\n\\n            **STEP 2: Time & Key Status Check**\\n            - Current time: 10:30\\n            - Stored [0]: \\\"10:00\\\"\\n            - Time passed: 30 minutes\\n            - Update decision: Time, Favor\\n\\n            **STEP 3: Variable Review (stat_data)**\\n             - 3 fields:\\n              - [0]: Y - Time advanced\\n              - [0]: N - Same day\\n              - [0]: N - Still at library\\n\\n             - 1 field:\\n              - [0]: Y - Positive interaction\\n\\n            **STEP 4: Command Selection**\\n            - : use _.set\\n            - : use _.add\\n\\n            **STEP 5: Other Systems**\\n            - stat_data COT: COMPLETED\\n            - Other groups? NO\\n\\n            **STEP 6: Final Check**\\n            - [0] suffixes? YES\\n            - All Y have commands? YES\\n            - Chinese comments? YES\\n        </ThinkingProcess>\\n\\n        _.set('[0]', '10:00', '10:30');//30\\n        _.add('.[0]', 3);//\\n    </UpdateVariable>\\n\\n  specific_rules:\\n    -  _.set \\n    - /\\n    -  _.add \\n    -  _.insert _.remove\\n    - [0][0]\\n    -  $__META_EXTENSIBLE__$  _.insert \\n    -  _.insert('', , ) `;\\n\\n  generatedPrompt.value = promptTemplate;\\n}\\n\\nfunction copyPrompt() {\\n  copyToClipboard(generatedPrompt.value);\\n}\\n\\n// AI\\nasync function handleAIGeneratePrompt() {\\n  if (!aiPromptDescription.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    window.toastr.error(' API  API Key');\\n    return;\\n  }\\n\\n  // \\n  originalPromptDescription.value = aiPromptDescription.value;\\n\\n  isGeneratingPrompt.value = true;\\n\\n  try {\\n    const systemPrompt = ` MVU Beta COT  6 \\n\\n## \\n1.  {{get_message_variable::stat_data}}\\n2.  _.insert  _.assign\\n3.  [0] \\n4. 6  COT \\n\\n EJS `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: `${aiPromptDescription.value}\\\\n\\\\n COT ` },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 3000,\\n      }),\\n    });\\n\\n    // \\n    const responseText2 = await response.text();\\n\\n    if (!response.ok) {\\n      // \\n      let errorMessage = `API : ${response.status}`;\\n      try {\\n        const errorData = JSON.parse(responseText2);\\n        if (errorData.error) {\\n          errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\\n        } else if (errorData.message) {\\n          errorMessage = `${errorMessage} - ${errorData.message}`;\\n        } else {\\n          errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\\n        }\\n      } catch (e) {\\n        errorMessage = `${errorMessage} - ${responseText2.slice(0, 200)}`;\\n      }\\n      console.error('API :', errorMessage);\\n      console.error(' URL:', settings.value.api_endpoint);\\n      console.error(\\n        ':',\\n        JSON.stringify(\\n          {\\n            model: settings.value.model,\\n            messages: [\\n              { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\\n              { role: 'user', content: `${aiPromptDescription.value.substring(0, 100)}...` },\\n            ],\\n            temperature: settings.value.temperature || 0.7,\\n            max_tokens: settings.value.max_tokens || 3000,\\n          },\\n          null,\\n          2,\\n        ),\\n      );\\n      throw new Error(errorMessage);\\n    }\\n\\n    // \\n    const data = JSON.parse(responseText2);\\n    // \\n    let result = '';\\n    if (data.choices && data.choices[0] && data.choices[0].message) {\\n      result = data.choices[0].message.content || '';\\n    } else if (data.data && data.data.choices && data.data.choices[0]) {\\n      //  API  data.data.choices \\n      result = data.data.choices[0].message?.content || '';\\n    } else if (data.content) {\\n      result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\\n    }\\n\\n    generatedPrompt.value = result.trim();\\n    window.toastr.success('AI ');\\n  } catch (error: any) {\\n    console.error('AI:', error);\\n    window.toastr.error(`AI: ${error.message}`);\\n  } finally {\\n    isGeneratingPrompt.value = false;\\n  }\\n}\\n\\n// AI \\nasync function modifyStructureWithAI(modifyInstruction: string) {\\n  if (!originalStructurePrompt.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingStructure.value = true;\\n\\n  try {\\n    window.toastr.info('AI ...');\\n\\n    const systemPrompt = ` MVU Beta  [InitVar] JSON\\n\\n\\n1.  \\\"stat_data\\\" \\n2. : [, \\\"\\\"]\\n3. $meta \\n4. \\n5. 20\\n\\n JSON`;\\n\\n    const userPrompt = `# \\n${originalStructurePrompt.value}\\n\\n# \\n${modifyInstruction}\\n\\n [InitVar] JSON`;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 4000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    //  JSON\\n    let jsonText = result.replace(/```json\\\\s*/gi, '').replace(/```\\\\s*$/g, '');\\n    const jsonMatch = jsonText.match(/\\\\{[\\\\s\\\\S]*$/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    // \\n    jsonText = jsonText.replace(/,(\\\\s*[}\\\\]])/g, '$1');\\n    const parsed = JSON.parse(jsonText);\\n\\n    const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\\n    varName.value = varNameParsed;\\n\\n    const varData = parsed[varNameParsed] || {};\\n    const fields: string[] = [];\\n\\n    for (const key in varData) {\\n      if (key === '$meta') continue;\\n      const value = varData[key];\\n      if (Array.isArray(value) && value.length === 2) {\\n        const val = value[0];\\n        const type =\\n          typeof val === 'number'\\n            ? 'number'\\n            : typeof val === 'string'\\n              ? 'string'\\n              : Array.isArray(val)\\n                ? 'array'\\n                : 'object';\\n        const desc = value[1] || '...';\\n        fields.push(`${key}:${type}:${desc}`);\\n      }\\n    }\\n\\n    subFields.value = fields.join('\\\\n');\\n    generatedStructure.value = JSON.stringify(parsed, null, 2);\\n\\n    // \\n    originalStructurePrompt.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    window.toastr.success(' AI ');\\n    showStructureModifyDialog.value = false;\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingStructure.value = false;\\n  }\\n}\\n\\n// AI \\nasync function modifyPromptWithAI(modifyInstruction: string) {\\n  if (!originalPromptDescription.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingPrompt.value = true;\\n\\n  try {\\n    window.toastr.info('AI ...');\\n\\n    const systemPrompt = ` MVU Beta COT  6 \\n\\n## \\n1.  {{get_message_variable::stat_data}}\\n2.  _.insert  _.assign\\n3.  [0] \\n4. 6  COT \\n\\n EJS `;\\n\\n    const userPrompt = `# \\n${originalPromptDescription.value}\\n\\n# \\n${modifyInstruction}\\n\\n COT `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 3000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    generatedPrompt.value = result.trim();\\n\\n    // \\n    originalPromptDescription.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    window.toastr.success(' AI ');\\n    showPromptModifyDialog.value = false;\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingPrompt.value = false;\\n  }\\n}\\n\\nfunction exportWorldbook() {\\n  if (!generatedStructure.value) {\\n    window.toastr.error(' [InitVar] ');\\n    return;\\n  }\\n\\n  if (!generatedPrompt.value) {\\n    autoGeneratePrompt();\\n  }\\n\\n  setTimeout(() => {\\n    exportAsWorldbook();\\n  }, 100);\\n}\\n\\nfunction exportAsWorldbook() {\\n  if (!generatedStructure.value || !generatedPrompt.value) {\\n    window.toastr.error(' [InitVar]  COT ');\\n    return;\\n  }\\n\\n  let varNameParsed = 'myVar';\\n  try {\\n    const structure = JSON.parse(generatedStructure.value);\\n    varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\\n  } catch (e) {\\n    console.error(':', e);\\n  }\\n\\n  const worldbookEntries = [\\n    {\\n      uid: generateUID(),\\n      key: [],\\n      keysecondary: [],\\n      comment: '[InitVar]',\\n      content: generatedStructure.value,\\n      constant: false,\\n      vectorized: false,\\n      selective: true,\\n      selectiveLogic: 0,\\n      addMemo: false,\\n      order: 100,\\n      position: 0,\\n      disable: false,\\n      excludeRecursion: false,\\n      delayUntilRecursion: false,\\n      probability: 100,\\n      useProbability: true,\\n      depth: 4,\\n      group: '',\\n      groupOverride: false,\\n      groupWeight: 100,\\n      scanDepth: null,\\n      caseSensitive: null,\\n      matchWholeWords: null,\\n      useGroupScoring: false,\\n      automationId: '',\\n      role: 0,\\n      sticky: 0,\\n      cooldown: 0,\\n      delay: 0,\\n    },\\n    {\\n      uid: generateUID(),\\n      key: [],\\n      keysecondary: [],\\n      comment: '',\\n      content: generatedPrompt.value,\\n      constant: true,\\n      vectorized: false,\\n      selective: false,\\n      selectiveLogic: 0,\\n      addMemo: false,\\n      order: 100,\\n      position: 1,\\n      disable: false,\\n      excludeRecursion: false,\\n      delayUntilRecursion: false,\\n      probability: 100,\\n      useProbability: true,\\n      depth: 0,\\n      group: '',\\n      groupOverride: false,\\n      groupWeight: 100,\\n      scanDepth: null,\\n      caseSensitive: null,\\n      matchWholeWords: null,\\n      useGroupScoring: false,\\n      automationId: '',\\n      role: 0,\\n      sticky: 0,\\n      cooldown: 0,\\n      delay: 0,\\n    },\\n  ];\\n\\n  const jsonStr = JSON.stringify(worldbookEntries, null, 2);\\n  const blob = new Blob([jsonStr], { type: 'application/json' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download = `${varNameParsed}_MVU_worldbook.json`;\\n  document.body.appendChild(a);\\n  a.click();\\n  document.body.removeChild(a);\\n  URL.revokeObjectURL(url);\\n\\n  window.toastr.success(`  JSON[InitVar] + `);\\n}\\n\\nfunction generateUID(): number {\\n  return Date.now() + Math.floor(Math.random() * 1000);\\n}\\n\\n// ====================  ====================\\n\\n// \\nfunction loadSavedData() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id  MVU ');\\n      return;\\n    }\\n\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    const savedData = scriptVars.mvu_beta_config;\\n\\n    if (savedData) {\\n      if (savedData.varName) varName.value = savedData.varName;\\n      if (savedData.subFields) subFields.value = savedData.subFields;\\n      if (savedData.generatedStructure) generatedStructure.value = savedData.generatedStructure;\\n      if (savedData.variableCategories) variableCategories.value = savedData.variableCategories;\\n      if (savedData.generatedPrompt) generatedPrompt.value = savedData.generatedPrompt;\\n      console.log('  MVU Beta ');\\n    }\\n  } catch (error) {\\n    console.error(' MVU Beta :', error);\\n  }\\n}\\n\\n// \\nfunction saveData() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id  MVU ');\\n      return;\\n    }\\n\\n    insertOrAssignVariables(\\n      {\\n        mvu_beta_config: {\\n          varName: varName.value,\\n          subFields: subFields.value,\\n          generatedStructure: generatedStructure.value,\\n          variableCategories: variableCategories.value,\\n          generatedPrompt: generatedPrompt.value,\\n        },\\n      },\\n      { type: 'script', script_id: scriptId },\\n    );\\n  } catch (error) {\\n    console.error(' MVU Beta :', error);\\n  }\\n}\\n\\n// \\nonMounted(() => {\\n  loadSavedData();\\n});\\n\\n// \\nlet saveTimer: number | null = null;\\nwatch([varName, subFields, generatedStructure, variableCategories, generatedPrompt], () => {\\n  if (saveTimer) clearTimeout(saveTimer);\\n  saveTimer = window.setTimeout(() => {\\n    saveData();\\n  }, 1000); // 1\\n});\\n</script>\\n\\n<style scoped>\\n.tool-section {\\n  margin-bottom: 20px;\\n}\\n\\n.tool-content {\\n  padding: 0 20px 20px 20px;\\n}\\n\\n.form-group {\\n  margin-bottom: 15px;\\n}\\n\\n.generate-btn:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.output-section {\\n  margin-top: 15px;\\n  padding-top: 15px;\\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\\n}\\n\\n.code-output {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 15px;\\n  position: relative;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n\\n.code-output pre {\\n  margin: 0;\\n  color: #e0e0e0;\\n  font-family: 'Courier New', monospace;\\n  font-size: 12px;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n}\\n\\n.copy-btn-abs {\\n  position: absolute;\\n  top: 8px;\\n  right: 8px;\\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.2), rgba(102, 126, 234, 0.3));\\n  border: 1px solid rgba(74, 158, 255, 0.4);\\n  border-radius: 6px;\\n  color: #4a9eff;\\n  padding: 8px 14px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  font-weight: 600;\\n  transition: all 0.3s ease;\\n  box-shadow: 0 2px 8px rgba(74, 158, 255, 0.2);\\n}\\n\\n.copy-btn-abs:hover {\\n  background: linear-gradient(135deg, rgba(74, 158, 255, 0.35), rgba(102, 126, 234, 0.45));\\n  border-color: rgba(74, 158, 255, 0.6);\\n  box-shadow: 0 4px 12px rgba(74, 158, 255, 0.35);\\n  transform: translateY(-2px);\\n  color: #fff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.statusbar-generator[data-v-22fa8ffd]{padding:20px;height:100%;display:flex;flex-direction:column;gap:20px;background:#1a1a1a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/StatusBarGenerator.vue\"],\"names\":[],\"mappings\":\"AA43FA,sCACE,YAAa,CACb,WAAY,CACZ,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,kBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"statusbar-generator\\\">\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px !important;\\n          font-weight: 600;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-chart-bar\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <div style=\\\"display: flex; gap: 10px; flex-wrap: wrap\\\">\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"loadTemplate('abo')\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-magic\\\" style=\\\"margin-right: 6px\\\"></i>\\n           ABO \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"showAIDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 600;\\n            cursor: pointer;\\n            transition: all 0.3s ease;\\n          \\\"\\n          @click=\\\"exportRegex\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-2px)')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-download\\\" style=\\\"margin-right: 6px\\\"></i>\\n           JSON\\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 280px 1fr 500px; gap: 20px; min-height: 600px\\\">\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n          overflow-y: auto;\\n        \\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0 0 15px 0;\\n            color: #fff;\\n            font-size: 14px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 8px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #4a9eff\\\"></i>\\n          \\n        </h4>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #c0c0c0; font-size: 12px; font-weight: 600\\\"\\n            ></label\\n          >\\n          <input\\n            v-model=\\\"config.findRegex\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"<-CHARACTER_STATUS->\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 8px 12px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 12px;\\n            \\\"\\n          />\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"flex: 1; display: flex; flex-direction: column; gap: 10px; margin-bottom: 15px\\\">\\n          <div\\n            v-for=\\\"(field, index) in config.fields\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"padding: 10px; background: #1e1e1e; border-radius: 6px; border: 1px solid #3a3a3a\\\"\\n          >\\n            <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px\\\">\\n              <span style=\\\"color: #4a9eff; font-size: 11px; font-weight: 600\\\"> {{ index + 1 }}</span>\\n              <button\\n                :disabled=\\\"config.fields.length <= 1\\\"\\n                :style=\\\"{\\n                  padding: '4px 8px',\\n                  background: '#ef4444',\\n                  border: 'none',\\n                  borderRadius: '4px',\\n                  color: 'white',\\n                  fontSize: '10px',\\n                  cursor: 'pointer',\\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\\n                }\\\"\\n                @click=\\\"removeField(index)\\\"\\n              >\\n                \\n              </button>\\n            </div>\\n            <input\\n              v-model=\\\"field.name\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 6px 10px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                margin-bottom: 6px;\\n              \\\"\\n            />\\n            <input\\n              v-model=\\\"field.label\\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\"\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 6px 10px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                margin-bottom: 6px;\\n              \\\"\\n            />\\n            <div style=\\\"display: flex; gap: 6px; align-items: center\\\">\\n              <input\\n                v-model=\\\"field.icon\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"fa-solid fa-user\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 6px 10px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                  font-family: monospace;\\n                \\\"\\n              />\\n              <button\\n                style=\\\"\\n                  padding: 6px 10px;\\n                  background: #3a3a3a;\\n                  border: 1px solid #4a4a4a;\\n                  border-radius: 4px;\\n                  color: #fff;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  min-width: 36px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"showIconPicker(index)\\\"\\n              >\\n                <i v-if=\\\"field.icon\\\" :class=\\\"field.icon\\\"></i>\\n                <i v-else class=\\\"fa-solid fa-icons\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"addField\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"showXmlParseDialog\\\"\\n        >\\n          <i class=\\\"fa-solid fa-code\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI  XML \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"showAiFieldGeneratorDialog\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n\\n        <button\\n          style=\\\"\\n            width: 100%;\\n            padding: 8px;\\n            margin-top: 10px;\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n            border: none;\\n            border-radius: 6px;\\n            color: white;\\n            font-size: 12px;\\n            font-weight: 600;\\n            cursor: pointer;\\n          \\\"\\n          @click=\\\"generateFromFields\\\"\\n        >\\n          <i class=\\\"fa-solid fa-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 1px solid #3a3a3a; padding-bottom: 8px\\\"\\n        >\\n          <div\\n            v-for=\\\"file in files\\\"\\n            :key=\\\"file.path\\\"\\n            :style=\\\"{\\n              padding: '6px 14px',\\n              background: currentFile?.path === file.path ? '#4a9eff' : '#1e1e1e',\\n              color: currentFile?.path === file.path ? '#fff' : '#c0c0c0',\\n              borderRadius: '6px',\\n              fontSize: '12px',\\n              fontWeight: '600',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s ease',\\n            }\\\"\\n            @click=\\\"currentFile = file\\\"\\n          >\\n            {{ file.path }}\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <textarea\\n          v-if=\\\"currentFile\\\"\\n          v-model=\\\"currentFile.content\\\"\\n          style=\\\"\\n            flex: 1;\\n            width: 100%;\\n            padding: 12px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-family: 'Consolas', 'Monaco', monospace;\\n            line-height: 1.6;\\n            resize: none;\\n            min-height: 400px;\\n          \\\"\\n          @input=\\\"updatePreview\\\"\\n        ></textarea>\\n      </div>\\n\\n      <!--  -->\\n      <div style=\\\"display: flex; flex-direction: column; gap: 15px; overflow-y: auto\\\">\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a\\\">\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px\\\">\\n            <h4\\n              style=\\\"\\n                margin: 0;\\n                color: #fff;\\n                font-size: 14px;\\n                font-weight: 600;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\" style=\\\"color: #4a9eff\\\"></i>\\n              \\n            </h4>\\n            <button\\n              style=\\\"\\n                padding: 6px 12px;\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 12px;\\n                font-weight: 600;\\n                cursor: pointer;\\n              \\\"\\n              @click=\\\"copyWorldbook\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"margin-right: 4px\\\"></i>\\n              \\n            </button>\\n          </div>\\n          <div\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 12px;\\n              border: 1px solid #3a3a3a;\\n              overflow: auto;\\n              max-height: 200px;\\n            \\\"\\n          >\\n            <pre\\n              style=\\\"\\n                margin: 0;\\n                color: #e0e0e0;\\n                font-size: 11px;\\n                line-height: 1.6;\\n                white-space: pre-wrap;\\n                word-wrap: break-word;\\n                font-family: 'Consolas', 'Monaco', monospace;\\n              \\\"\\n              >{{ worldbookContent }}</pre\\n            >\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; border-radius: 12px; padding: 15px; border: 1px solid #3a3a3a; flex: 1\\\">\\n          <h4\\n            style=\\\"\\n              margin: 0 0 12px 0;\\n              color: #fff;\\n              font-size: 14px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye\\\" style=\\\"color: #4a9eff\\\"></i>\\n            \\n          </h4>\\n          <div\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 20px;\\n              min-height: 400px;\\n              border: 1px solid #3a3a3a;\\n              overflow: auto;\\n            \\\"\\n            v-html=\\\"previewHtml\\\"\\n          ></div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showIconPickerFor !== null\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showIconPickerFor = null\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 20px;\\n          width: 600px;\\n          max-width: 90vw;\\n          border: 1px solid #3a3a3a;\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #fff; font-size: 15px; font-weight: 600\\\"></h3>\\n        <div\\n          style=\\\"\\n            display: grid;\\n            grid-template-columns: repeat(8, 1fr);\\n            gap: 8px;\\n            margin-bottom: 16px;\\n            max-height: 400px;\\n            overflow-y: auto;\\n          \\\"\\n        >\\n          <div\\n            v-for=\\\"(iconClass, idx) in iconList\\\"\\n            :key=\\\"idx\\\"\\n            :style=\\\"{\\n              padding: '14px',\\n              background: '#1e1e1e',\\n              borderRadius: '8px',\\n              cursor: 'pointer',\\n              textAlign: 'center',\\n              border: '1px solid #3a3a3a',\\n              transition: 'all 0.2s ease',\\n              display: 'flex',\\n              alignItems: 'center',\\n              justifyContent: 'center',\\n            }\\\"\\n            :title=\\\"iconClass\\\"\\n            @click=\\\"selectIcon(iconClass)\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#3a3a3a';\\n                e.currentTarget.style.borderColor = '#4a9eff';\\n                e.currentTarget.style.transform = 'scale(1.1)';\\n                e.currentTarget.style.boxShadow = '0 4px 12px rgba(74, 158, 255, 0.3)';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#1e1e1e';\\n                e.currentTarget.style.borderColor = '#3a3a3a';\\n                e.currentTarget.style.transform = 'scale(1)';\\n                e.currentTarget.style.boxShadow = 'none';\\n              }\\n            \\\"\\n          >\\n            <i :class=\\\"iconClass\\\" style=\\\"font-size: 20px; color: #4a9eff\\\"></i>\\n          </div>\\n        </div>\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #fff;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showIconPickerFor = null\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #ef4444;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"\\n              config.fields[showIconPickerFor!].icon = '';\\n              showIconPickerFor = null;\\n            \\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAI\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showAI = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 600px;\\n          max-width: 90vw;\\n          max-height: 90vh;\\n          overflow-y: auto;\\n          border: 1px solid #3a3a3a;\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #fff; font-size: 16px; font-weight: 600\\\">AI </h3>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%);\\n            border: 1px solid rgba(59, 130, 246, 0.3);\\n            border-radius: 8px;\\n            padding: 12px 16px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <div style=\\\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px\\\">\\n            <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n              <i class=\\\"fa-solid fa-cog\\\" style=\\\"color: #60a5fa; font-size: 16px\\\"></i>\\n              <div style=\\\"color: #93c5fd; font-size: 13px; font-weight: 600\\\">\\n                 {{ config.fields.length }} \\n              </div>\\n            </div>\\n            <button\\n              style=\\\"\\n                padding: 4px 10px;\\n                background: rgba(16, 185, 129, 0.2);\\n                border: 1px solid rgba(16, 185, 129, 0.4);\\n                border-radius: 4px;\\n                color: #10b981;\\n                font-size: 11px;\\n                cursor: pointer;\\n              \\\"\\n              @click=\\\"addFieldInDialog\\\"\\n            >\\n              <i class=\\\"fa-solid fa-plus\\\"></i> \\n            </button>\\n          </div>\\n\\n          <div v-if=\\\"config.fields.length > 0\\\" style=\\\"display: flex; flex-direction: column; gap: 8px\\\">\\n            <div\\n              v-for=\\\"(field, i) in config.fields\\\"\\n              :key=\\\"i\\\"\\n              style=\\\"\\n                background: rgba(15, 23, 42, 0.6);\\n                border: 1px solid rgba(148, 163, 184, 0.15);\\n                border-radius: 6px;\\n                padding: 8px 10px;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <span style=\\\"color: #60a5fa; font-weight: 600; font-size: 11px; min-width: 50px\\\">{{ i + 1 }}:</span>\\n              <input\\n                v-model=\\\"field.label\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 4px 8px;\\n                  background: #1e1e1e;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                \\\"\\n              />\\n              <input\\n                v-model=\\\"field.name\\\"\\n                type=\\\"text\\\"\\n                placeholder=\\\"\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 4px 8px;\\n                  background: #1e1e1e;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 4px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                \\\"\\n              />\\n              <button\\n                v-if=\\\"field.icon\\\"\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: rgba(139, 92, 246, 0.2);\\n                  border: 1px solid rgba(139, 92, 246, 0.3);\\n                  border-radius: 4px;\\n                  color: #a78bfa;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  min-width: 30px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"field.icon = ''\\\"\\n              >\\n                <i :class=\\\"field.icon\\\"></i>\\n              </button>\\n              <button\\n                :disabled=\\\"config.fields.length <= 1\\\"\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: rgba(239, 68, 68, 0.2);\\n                  border: 1px solid rgba(239, 68, 68, 0.3);\\n                  border-radius: 4px;\\n                  color: #ef4444;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: config.fields.length <= 1 ? 0.4 : 1,\\n                  cursor: config.fields.length <= 1 ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                title=\\\"\\\"\\n                @click=\\\"removeFieldInDialog(i)\\\"\\n              >\\n                <i class=\\\"fa-solid fa-trash\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <div v-else style=\\\"color: #fbbf24; font-size: 12px; padding: 8px 0\\\"> \\\"\\\"</div>\\n        </div>\\n\\n        <textarea\\n          v-model=\\\"aiPrompt\\\"\\n          placeholder=\\\"&#10; &#10; &#10; &#10; &#10;&#10; &#10; AI &#10; \\\"\\n          style=\\\"\\n            width: 100%;\\n            padding: 12px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            min-height: 120px;\\n            margin-bottom: 16px;\\n            resize: vertical;\\n          \\\"\\n        ></textarea>\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #fff;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showAI = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"generateWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n        <div v-if=\\\"originalAiPrompt\\\" style=\\\"margin-top: 16px; display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingAi\\\"\\n            @click=\\\"showAiModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingAi ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <AIModifyDialog\\n      :show=\\\"showAiModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        '',\\n      ]\\\"\\n      @close=\\\"showAiModifyDialog = false\\\"\\n      @confirm=\\\"modifyWithAI\\\"\\n    />\\n\\n    <!-- XML  -->\\n    <div\\n      v-if=\\\"showXmlDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showXmlDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 90%;\\n          max-width: 700px;\\n          max-height: 80vh;\\n          overflow-y: auto;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #f59e0b; font-size: 18px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right: 8px\\\"></i>\\n          AI  XML \\n        </h3>\\n\\n        <div\\n          style=\\\"\\n            background: rgba(251, 191, 36, 0.1);\\n            border: 1px solid rgba(251, 191, 36, 0.3);\\n            border-radius: 6px;\\n            padding: 12px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #fbbf24; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-circle-info\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong> AI\\n            <i class=\\\"fa-solid fa-cog\\\"></i>  API \\n          </p>\\n        </div>\\n\\n        <div style=\\\"margin-bottom: 16px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\\\">\\n             XML \\n          </label>\\n          <textarea\\n            v-model=\\\"xmlInput\\\"\\n            placeholder=\\\"&#10;<state_bar>&#10;<i></i>&#10;<></>&#10;<></>&#10;</state_bar>\\\"\\n            style=\\\"\\n              width: 100%;\\n              min-height: 200px;\\n              padding: 12px;\\n              background: #1a1a1a;\\n              border: 1px solid #404040;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-family: 'Consolas', 'Monaco', monospace;\\n              font-size: 13px;\\n              resize: vertical;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #404040;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showXmlDialog = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n              margin-right: 10px;\\n            \\\"\\n            :disabled=\\\"!xmlInput.trim() || isParsingXml\\\"\\n            @click=\\\"parseXmlWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isParsingXml ? 'AI ...' : '' }}\\n          </button>\\n          <button\\n            v-if=\\\"originalXmlInput\\\"\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingXml\\\"\\n            @click=\\\"showXmlModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingXml ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- XML  -->\\n    <AIModifyDialog\\n      :show=\\\"showXmlModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingXml\\\"\\n      title=\\\"AI  XML \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        '3',\\n      ]\\\"\\n      @close=\\\"showXmlModifyDialog = false\\\"\\n      @confirm=\\\"modifyXmlWithAI\\\"\\n    />\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAiFieldDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"showAiFieldDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 24px;\\n          width: 90%;\\n          max-width: 700px;\\n          max-height: 80vh;\\n          overflow-y: auto;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3 style=\\\"margin: 0 0 16px 0; color: #10b981; font-size: 18px; font-weight: 600\\\">\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 8px\\\"></i>\\n          AI \\n        </h3>\\n\\n        <div\\n          style=\\\"\\n            background: rgba(16, 185, 129, 0.1);\\n            border: 1px solid rgba(16, 185, 129, 0.3);\\n            border-radius: 6px;\\n            padding: 12px;\\n            margin-bottom: 16px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #10b981; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong>AI \\n          </p>\\n        </div>\\n\\n        <div style=\\\"margin-bottom: 16px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 13px\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"aiFieldDescription\\\"\\n            placeholder=\\\"&#10;&#10;- &#10;- &#10;- &#10;- &#10;- &#10;- &#10;- \\\"\\n            style=\\\"\\n              width: 100%;\\n              min-height: 180px;\\n              padding: 12px;\\n              background: #1a1a1a;\\n              border: 1px solid #404040;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              line-height: 1.6;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #404040;\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            @click=\\\"showAiFieldDialog = false\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              cursor: pointer;\\n              margin-right: 10px;\\n            \\\"\\n            :disabled=\\\"!aiFieldDescription.trim() || isGeneratingFields\\\"\\n            @click=\\\"generateFieldsWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isGeneratingFields ? 'AI ...' : '' }}\\n          </button>\\n          <button\\n            v-if=\\\"originalFieldDescription\\\"\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #ffc107;\\n              border: none;\\n              border-radius: 6px;\\n              color: #000;\\n              font-size: 13px;\\n              cursor: pointer;\\n            \\\"\\n            :disabled=\\\"isModifyingField\\\"\\n            @click=\\\"showFieldModifyDialog = true\\\"\\n          >\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ isModifyingField ? '...' : 'AI ' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <AIModifyDialog\\n      :show=\\\"showFieldModifyDialog\\\"\\n      :is-modifying=\\\"isModifyingField\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"['', '3', '', '2']\\\"\\n      @close=\\\"showFieldModifyDialog = false\\\"\\n      @confirm=\\\"modifyFieldWithAI\\\"\\n    />\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { computed, onMounted, ref, watch } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\\nimport AIModifyDialog from './AIModifyDialog.vue';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\ninterface Field {\\n  name: string;\\n  label: string;\\n  icon: string;\\n}\\n\\ninterface Config {\\n  name: string;\\n  findRegex: string;\\n  fields: Field[];\\n}\\n\\ninterface CodeFile {\\n  path: string;\\n  content: string;\\n}\\n\\n//  settings store\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst templates = {\\n  simple: {\\n    name: '',\\n    findRegex: '<-CHARACTER_STATUS->',\\n    fields: [\\n      { name: '', label: '', icon: 'fa-solid fa-user' },\\n      { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\\n      { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\\n    ],\\n  },\\n  abo: {\\n    name: 'ABO',\\n    findRegex:\\n      '<-ENVIRONMENT_DATA->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|([^|]+)\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*',\\n    fields: [\\n      { name: '', label: '', icon: 'fa-solid fa-calendar' },\\n      { name: '', label: '', icon: 'fa-solid fa-clock' },\\n      { name: '', label: '', icon: 'fa-solid fa-location-dot' },\\n      { name: '', label: '', icon: 'fa-solid fa-cloud-sun' },\\n      { name: '', label: '', icon: 'fa-solid fa-shirt' },\\n      { name: '', label: '', icon: 'fa-solid fa-heart' },\\n      { name: '', label: '', icon: 'fa-solid fa-fire' },\\n      { name: '', label: '', icon: 'fa-solid fa-bookmark' },\\n    ],\\n  },\\n};\\n\\nconst config = ref<Config>({\\n  name: '',\\n  findRegex: '<-CHARACTER_STATUS->',\\n  fields: [\\n    { name: '', label: '', icon: 'fa-solid fa-user' },\\n    { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\\n    { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\\n    { name: '', label: '', icon: 'fa-solid fa-heart' },\\n  ],\\n});\\n\\nconst files = ref<CodeFile[]>([\\n  { path: 'index.html', content: '' },\\n  { path: 'style.css', content: '' },\\n  { path: 'script.js', content: '' },\\n]);\\n\\nconst currentFile = ref<CodeFile | null>(files.value[0]);\\nconst showAI = ref(false);\\nconst aiPrompt = ref('');\\nconst originalAiPrompt = ref(''); // AI\\nconst showAiModifyDialog = ref(false); // AI\\nconst isModifyingAi = ref(false); // AI\\nconst showIconPickerFor = ref<number | null>(null);\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// XML\\nconst originalXmlInput = ref(''); // XML\\nconst showXmlModifyDialog = ref(false);\\nconst isModifyingXml = ref(false);\\n\\n// AI\\nconst originalFieldDescription = ref(''); // \\nconst showFieldModifyDialog = ref(false);\\nconst isModifyingField = ref(false);\\n\\n// XML \\nconst showXmlDialog = ref(false);\\nconst xmlInput = ref('');\\nconst isParsingXml = ref(false);\\n\\n// AI \\nconst showAiFieldDialog = ref(false);\\nconst aiFieldDescription = ref('');\\nconst isGeneratingFields = ref(false);\\n\\n// Font Awesome \\nconst iconList = [\\n  // \\n  'fa-solid fa-cat',\\n  'fa-solid fa-dog',\\n  'fa-solid fa-dove',\\n  'fa-solid fa-fish',\\n  'fa-solid fa-paw',\\n  'fa-solid fa-spider',\\n  'fa-solid fa-horse',\\n  // \\n  'fa-solid fa-heart',\\n  'fa-solid fa-heart-pulse',\\n  // \\n  'fa-solid fa-face-smile',\\n  'fa-solid fa-face-grin-stars',\\n  'fa-solid fa-face-grin-beam',\\n  'fa-solid fa-face-laugh',\\n  // \\n  'fa-solid fa-star',\\n  // \\n  'fa-solid fa-wand-magic-sparkles',\\n  'fa-solid fa-hat-wizard',\\n  'fa-solid fa-bolt',\\n  'fa-solid fa-fire',\\n  'fa-solid fa-meteor',\\n  'fa-solid fa-rocket',\\n  // \\n  'fa-solid fa-sun',\\n  'fa-solid fa-moon',\\n  'fa-solid fa-cloud',\\n  'fa-solid fa-seedling',\\n  'fa-solid fa-leaf',\\n  'fa-solid fa-tree',\\n  'fa-solid fa-snowflake',\\n  // \\n  'fa-solid fa-cake-candles',\\n  'fa-solid fa-candy-cane',\\n  'fa-solid fa-apple',\\n  'fa-solid fa-ice-cream',\\n  // \\n  'fa-solid fa-gem',\\n  'fa-solid fa-crown',\\n  'fa-solid fa-gift',\\n  'fa-solid fa-ribbon',\\n  'fa-solid fa-medal',\\n  'fa-solid fa-trophy',\\n  // \\n  'fa-solid fa-shield',\\n  'fa-solid fa-scroll',\\n  // \\n  'fa-solid fa-book',\\n  'fa-solid fa-book-open',\\n  'fa-solid fa-feather',\\n  'fa-solid fa-pen',\\n  'fa-solid fa-paintbrush',\\n  'fa-solid fa-palette',\\n  // \\n  'fa-solid fa-music',\\n  'fa-solid fa-headphones',\\n  'fa-solid fa-gamepad',\\n  'fa-solid fa-chess',\\n  'fa-solid fa-puzzle-piece',\\n  'fa-solid fa-dice',\\n  // \\n  'fa-solid fa-mobile-screen',\\n  'fa-solid fa-tablet',\\n  'fa-solid fa-laptop',\\n  'fa-solid fa-camera',\\n  'fa-solid fa-video',\\n  'fa-solid fa-tv',\\n  // \\n  'fa-solid fa-bell',\\n  'fa-solid fa-envelope',\\n];\\n\\n// \\nconst worldbookContent = computed(() => {\\n  // {{}}\\n  const placeholders = config.value.fields.map(f => `{{${f.label || f.name}}}`).join('|');\\n\\n  // \\n  const fieldDefinitions = config.value.fields\\n    .map(f => {\\n      const iconDesc = f.icon ? `<i class=\\\"${f.icon}\\\"></i> ` : '';\\n      const label = f.label || f.name;\\n      return `  - ${iconDesc}${label}{{char}}${label}`;\\n    })\\n    .join('\\\\n');\\n\\n  // \\n  const exampleValues = config.value.fields.map(f => f.label || f.name || '').join('|');\\n\\n  // \\n  const parseRegexStructure = (regex: string, fields: Field[]): { formatExample: string; exampleOutput: string } => {\\n    //  <-ENVIRONMENT_DATA->\\n    const triggerMatches = regex.match(/<-[^>]+->/g) || [];\\n\\n    if (triggerMatches.length === 0) {\\n      // \\n      const placeholders = fields.map(f => `{{${f.label || f.name}}}`).join('|');\\n      const exampleValues = fields.map(f => f.label || f.name).join('|');\\n      return {\\n        formatExample: `|${placeholders}|`,\\n        exampleOutput: `|${exampleValues}|`,\\n      };\\n    }\\n\\n    // \\n    let normalizedRegex = regex\\n      .replace(/\\\\\\\\\\\\\\\\/g, '\\\\\\\\') // \\\\\\\\ -> \\\\\\n      .replace(/\\\\\\\\\\\\|/g, '|') // \\\\| -> |\\n      .replace(/\\\\\\\\\\\\(/g, '(') // \\\\( -> (\\n      .replace(/\\\\\\\\\\\\)/g, ')') // \\\\) -> )\\n      .replace(/\\\\\\\\\\\\[/g, '[') // \\\\[ -> [\\n      .replace(/\\\\\\\\\\\\]/g, ']') // \\\\] -> ]\\n      .replace(/\\\\\\\\\\\\+/g, '+'); // \\\\+ -> +\\n\\n    console.log(' :', regex);\\n    console.log(' :', normalizedRegex);\\n\\n    // \\n    const lines: string[] = [];\\n    const exampleLines: string[] = [];\\n    let fieldIndex = 0;\\n\\n    // \\n    const parts = normalizedRegex.split(/(<-[^>]+->)/);\\n    console.log(' :', parts);\\n\\n    for (let i = 0; i < parts.length; i++) {\\n      const part = parts[i];\\n\\n      // \\n      if (part.match(/<-[^>]+->/)) {\\n        lines.push(part);\\n        exampleLines.push(part);\\n        console.log(` : ${part}`);\\n      }\\n      // \\n      else if (part.trim().length > 0 && !part.match(/<-[^>]+->/)) {\\n        // \\n        const allCaptures = part.match(/\\\\([^\\\\)]+\\\\)/g) || [];\\n        const totalCount = allCaptures.length;\\n        console.log(`  (100): \\\"${part.substring(0, 100)}\\\"`);\\n        console.log(` :`, allCaptures);\\n        console.log(` : ${totalCount}, : ${fieldIndex}, : ${fields.length}`);\\n\\n        if (totalCount === 0) {\\n          console.warn(` `);\\n          continue;\\n        }\\n\\n        // 4\\n        const perLine = 4;\\n\\n        for (let offset = 0; offset < totalCount; offset += perLine) {\\n          const count = Math.min(perLine, totalCount - offset);\\n          //  fieldIndex < fields.length \\n          if (count > 0) {\\n            const segmentFields = fields.slice(fieldIndex, fieldIndex + count);\\n            // \\n            while (segmentFields.length < count) {\\n              segmentFields.push({\\n                name: `${fieldIndex + segmentFields.length + 1}`,\\n                label: `${fieldIndex + segmentFields.length + 1}`,\\n                icon: '',\\n              });\\n            }\\n            const placeholders = segmentFields.map(f => `{{${f.label || f.name}}}`).join('|');\\n            const examples = segmentFields.map(f => f.label || f.name).join('|');\\n            lines.push(`|${placeholders}|`);\\n            exampleLines.push(`|${examples}|`);\\n            console.log(` : |${examples}|`);\\n            fieldIndex += count;\\n          }\\n        }\\n      }\\n    }\\n\\n    console.log(' :', lines.join('\\\\n'));\\n    console.log(' :', exampleLines.join('\\\\n'));\\n\\n    return {\\n      formatExample: lines.join('\\\\n'),\\n      exampleOutput: exampleLines.join('\\\\n'),\\n    };\\n  };\\n\\n  const { formatExample, exampleOutput } = parseRegexStructure(config.value.findRegex, config.value.fields);\\n\\n  return `<status_rule>\\n#{{char}}\\n\\n##\\n<status>\\n${formatExample}\\n</status>\\n\\n##\\n${fieldDefinitions || '  - '}\\n\\n##\\n\\n<status>\\n${exampleOutput}\\n</status>\\n\\n##\\n1. ** <status> **\\n   -  <status>\\n   -  </status>\\n   -  \\n\\n2. ****\\n   -  <-ENVIRONMENT_DATA->\\n   -  | \\n   - \\n   - \\n\\n3. ****\\n   -  |: |: |\\n   -  |||\\n   - \\n\\n4. ****\\n   - \\n   - \\n   - \\n   - \\n\\n5. ****\\n   - \\n   - {{}} \\n   -  {{char}}  {{user}} \\n</status_rule>`;\\n});\\n\\n//  HTML\\nconst previewHtml = computed(() => {\\n  const htmlFile = files.value.find(f => f.path === 'index.html');\\n  const cssFile = files.value.find(f => f.path === 'style.css');\\n  const jsFile = files.value.find(f => f.path === 'script.js');\\n\\n  if (!htmlFile) return '';\\n\\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n\\n  //  $1, $2 \\n  let previewContent = htmlFile.content || '';\\n  config.value.fields.forEach((field, i) => {\\n    const exampleValue = field.name || `${i + 1}`;\\n    previewContent = previewContent.replace(new RegExp(`\\\\\\\\$${i + 1}(?!\\\\\\\\d)`, 'g'), exampleValue);\\n  });\\n\\n  return `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\\\">\\n  <${styleTag}>\\n    html, body {\\n      margin: 0;\\n      padding: 0;\\n      width: 100%;\\n      height: auto;\\n      min-height: 800px;\\n      overflow: visible;\\n    }\\n    ${cssFile?.content || ''}\\n  </${styleTag}>\\n  <${scriptTag} src=\\\"https://code.jquery.com/jquery-3.7.1.min.js\\\"></${scriptTag}>\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\\\">\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\\\"></${scriptTag}>\\n</head>\\n<body>\\n  ${previewContent}\\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\\n</body>\\n</html>`;\\n});\\n\\n// \\nfunction updatePreview() {\\n  // \\n}\\n\\n// \\nfunction addField() {\\n  config.value.fields.push({ name: '', label: '', icon: '' });\\n}\\n\\n// \\nfunction removeField(index: number) {\\n  config.value.fields.splice(index, 1);\\n}\\n\\n//  XML \\nfunction showXmlParseDialog() {\\n  showXmlDialog.value = true;\\n  xmlInput.value = '';\\n}\\n\\n//  AI \\nfunction showAiFieldGeneratorDialog() {\\n  showAiFieldDialog.value = true;\\n  aiFieldDescription.value = '';\\n}\\n\\n// AI  XML \\nasync function parseXmlWithAI() {\\n  if (!xmlInput.value.trim()) {\\n    toastr.warning(' XML ');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API \\\" \\\" API ', '', {\\n      timeOut: 0,\\n      extendedTimeOut: 0,\\n      closeButton: true,\\n    });\\n    return;\\n  }\\n\\n  // \\n  originalXmlInput.value = xmlInput.value;\\n\\n  isParsingXml.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' XML...');\\n    progressDialogRef.value?.addDetail(`XML : ${xmlInput.value.length} `);\\n    const systemPrompt = ` XML  XML \\n\\n1. **** XML  <i><2i><><> \\n2. ****\\n   -  <i><2i><3i> \\n   -  <><>\\n3. **** namelabelicon\\n\\n** JSON **\\n\\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]\\n\\n****\\n- name  date, location, status\\n- label  \\n- icon  Font Awesome \\n- **** JSON \\n- **** JSON\\n\\n\\n<state_bar>\\n<i></i>\\n<></>\\n<></>\\n</state_bar>\\n\\n\\n[\\n  { \\\"name\\\": \\\"content\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"\\\" },\\n  { \\\"name\\\": \\\"date\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-calendar\\\" },\\n  { \\\"name\\\": \\\"physical_status\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-heart-pulse\\\" }\\n]`;\\n\\n    const userPrompt = ` XML \\n\\n\\\\`\\\\`\\\\`xml\\n${xmlInput.value.trim()}\\n\\\\`\\\\`\\\\`\\n\\n JSON `;\\n\\n    console.log('  AI  XML...');\\n    console.log('  API:', settings.value.api_endpoint);\\n    console.log(' :', settings.value.model);\\n\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' XML  AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI  XML ...');\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: systemPrompt,\\n          },\\n          {\\n            role: 'user',\\n            content: userPrompt,\\n          },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API: ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log(' AI :', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log(' AI :', aiResponse);\\n\\n    // =====  =====\\n    if (!aiResponse || typeof aiResponse !== 'string') {\\n      throw new Error('AI ');\\n    }\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim();\\n\\n    //  markdown \\n    jsonText = jsonText.replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n\\n    //  JSON  AI \\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    //  JSON\\n    let parsedFields: any;\\n    try {\\n      parsedFields = JSON.parse(jsonText);\\n    } catch (parseError: any) {\\n      throw new Error(\\n        `AI  JSON \\\\n\\\\n AI \\\\n\\\\n200:\\\\n${result.slice(0, 200)}`,\\n      );\\n    }\\n\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    const validFields = parsedFields.filter((field: any) => {\\n      return field.name && field.label;\\n    });\\n\\n    if (validFields.length === 0) {\\n      throw new Error(' AI ');\\n    }\\n\\n    // \\n    config.value.fields = validFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showXmlDialog.value = false;\\n      xmlInput.value = '';\\n      toastr.success(` ${validFields.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error(' XML :', error);\\n    showProgress.value = false;\\n\\n    // \\n    const errorMsg = error.message || '';\\n\\n    //  API \\n    if (\\n      errorMsg.includes('API') ||\\n      errorMsg.includes('403') ||\\n      errorMsg.includes('401') ||\\n      errorMsg.includes('Unauthorized')\\n    ) {\\n      toastr.error(' API \\\\n1. API \\\\n2. \\\\n3. ', '', {\\n        timeOut: 0,\\n        extendedTimeOut: 0,\\n        closeButton: true,\\n      });\\n    } else {\\n      toastr.error(`: ${errorMsg}`, '', {\\n        timeOut: 8000,\\n        closeButton: true,\\n      });\\n    }\\n  } finally {\\n    isParsingXml.value = false;\\n  }\\n}\\n\\n// AI  XML \\nasync function modifyXmlWithAI(modifyInstruction: string) {\\n  if (!originalXmlInput.value) {\\n    window.toastr.warning(' XML');\\n    return;\\n  }\\n\\n  isModifyingXml.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const systemPrompt = ` XML  XML `;\\n\\n    const userPrompt = `#  XML\\n${originalXmlInput.value}\\n\\n# \\n${modifyInstruction}\\n\\n XML \\nJSON \\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]`;\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    const aiResponse = result.choices[0]?.message?.content || '';\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    //  JSON\\n    let jsonText = aiResponse\\n      .trim()\\n      .replace(/^```(?:json)?\\\\s*\\\\n?/i, '')\\n      .replace(/\\\\n?```\\\\s*$/i, '');\\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    const parsedFields = JSON.parse(jsonText);\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    config.value.fields = parsedFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || field.name || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    // \\n    originalXmlInput.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showXmlModifyDialog.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingXml.value = false;\\n  }\\n}\\n\\n// AI \\nasync function generateFieldsWithAI() {\\n  if (!aiFieldDescription.value.trim()) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API \\\" \\\" API ', '', {\\n      timeOut: 0,\\n      extendedTimeOut: 0,\\n      closeButton: true,\\n    });\\n    return;\\n  }\\n\\n  // \\n  originalFieldDescription.value = aiFieldDescription.value;\\n\\n  isGeneratingFields.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail('AI ');\\n    const systemPrompt = `\\n\\n1. ****ABO\\n2. ****\\n3. **** namelabelicon\\n\\n** JSON **\\n\\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" }\\n]\\n\\n****\\n- name  realm, spiritual_power, location\\n- label  \\n- icon  Font Awesome  fa-solid fa-star, fa-solid fa-bolt\\n- **** JSON \\n- **** JSON\\n\\n\\n- fa-solid fa-user, fa-solid fa-user-ninja, fa-solid fa-user-secret\\n- fa-solid fa-heart, fa-solid fa-heart-pulse, fa-solid fa-star\\n- fa-solid fa-location-dot, fa-solid fa-map-marker\\n- fa-solid fa-clock, fa-solid fa-calendar\\n- fa-solid fa-bolt, fa-solid fa-fire, fa-solid fa-droplet\\n- fa-solid fa-book, fa-solid fa-wand-magic-sparkles, fa-solid fa-scroll\\n- fa-solid fa-heart, fa-solid fa-face-smile, fa-solid fa-face-sad-tear\\n\\n\\n\\\"\\\"\\n\\n[\\n  { \\\"name\\\": \\\"name\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-user-ninja\\\" },\\n  { \\\"name\\\": \\\"realm\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-star\\\" },\\n  { \\\"name\\\": \\\"spiritual_power\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-bolt\\\" },\\n  { \\\"name\\\": \\\"cultivation_method\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-scroll\\\" },\\n  { \\\"name\\\": \\\"location\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-location-dot\\\" },\\n  { \\\"name\\\": \\\"status\\\", \\\"label\\\": \\\"\\\", \\\"icon\\\": \\\"fa-solid fa-heart-pulse\\\" }\\n]`;\\n\\n    const userPrompt = `\\n\\n${aiFieldDescription.value.trim()}\\n\\n JSON `;\\n\\n    console.log('  AI ...');\\n    console.log('  API:', settings.value.api_endpoint);\\n    console.log(' :', settings.value.model);\\n\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    console.log(' :', apiUrl);\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: systemPrompt,\\n          },\\n          {\\n            role: 'user',\\n            content: userPrompt,\\n          },\\n        ],\\n        max_tokens: 3000,\\n        temperature: 0.8,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API: ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n    console.log(' AI :', result);\\n\\n    if (!result.choices || !result.choices[0] || !result.choices[0].message) {\\n      throw new Error('AI');\\n    }\\n\\n    const aiResponse = result.choices[0].message.content;\\n    console.log(' AI :', aiResponse);\\n\\n    // =====  =====\\n    if (!aiResponse || typeof aiResponse !== 'string') {\\n      throw new Error('AI ');\\n    }\\n\\n    //  JSON\\n    let jsonText = aiResponse.trim();\\n\\n    //  markdown \\n    jsonText = jsonText.replace(/^```(?:json)?\\\\s*\\\\n?/i, '').replace(/\\\\n?```\\\\s*$/i, '');\\n\\n    //  JSON  AI \\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    //  JSON\\n    let parsedFields: any;\\n    try {\\n      parsedFields = JSON.parse(jsonText);\\n    } catch (parseError: any) {\\n      throw new Error(\\n        `AI  JSON \\\\n\\\\n AI \\\\n\\\\n200:\\\\n${aiResponse.slice(0, 200)}`,\\n      );\\n    }\\n\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    const validFields = parsedFields.filter((field: any) => {\\n      return field.name && field.label;\\n    });\\n\\n    if (validFields.length === 0) {\\n      throw new Error(' AI ');\\n    }\\n\\n    // \\n    config.value.fields = validFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${validFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showAiFieldDialog.value = false;\\n      aiFieldDescription.value = '';\\n      toastr.success(` ${validFields.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error(' AI :', error);\\n    showProgress.value = false;\\n\\n    // \\n    const errorMsg = error.message || '';\\n\\n    //  API \\n    if (\\n      errorMsg.includes('API') ||\\n      errorMsg.includes('403') ||\\n      errorMsg.includes('401') ||\\n      errorMsg.includes('Unauthorized')\\n    ) {\\n      toastr.error(' API \\\\n1. API \\\\n2. \\\\n3. ', '', {\\n        timeOut: 0,\\n        extendedTimeOut: 0,\\n        closeButton: true,\\n      });\\n    } else {\\n      toastr.error(`: ${errorMsg}`, '', {\\n        timeOut: 8000,\\n        closeButton: true,\\n      });\\n    }\\n  } finally {\\n    isGeneratingFields.value = false;\\n  }\\n}\\n\\n// \\nfunction showIconPicker(index: number) {\\n  showIconPickerFor.value = index;\\n}\\n\\n// \\nfunction selectIcon(iconClass: string) {\\n  if (showIconPickerFor.value !== null) {\\n    config.value.fields[showIconPickerFor.value].icon = iconClass;\\n    showIconPickerFor.value = null;\\n  }\\n}\\n\\n// AI \\nasync function modifyFieldWithAI(modifyInstruction: string) {\\n  if (!originalFieldDescription.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingField.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const systemPrompt = ``;\\n\\n    const userPrompt = `# \\n${originalFieldDescription.value}\\n\\n# \\n${modifyInstruction}\\n\\n\\nJSON \\n[\\n  { \\\"name\\\": \\\"1\\\", \\\"label\\\": \\\"1\\\", \\\"icon\\\": \\\"fa-solid fa-xxx\\\" },\\n  { \\\"name\\\": \\\"2\\\", \\\"label\\\": \\\"2\\\", \\\"icon\\\": \\\"\\\" }\\n]`;\\n\\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        max_tokens: 2000,\\n        temperature: 0.7,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const result = await response.json();\\n    const aiResponse = result.choices[0]?.message?.content || '';\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    //  JSON\\n    let jsonText = aiResponse\\n      .trim()\\n      .replace(/^```(?:json)?\\\\s*\\\\n?/i, '')\\n      .replace(/\\\\n?```\\\\s*$/i, '');\\n    const jsonMatch = jsonText.match(/\\\\[\\\\s*{[\\\\s\\\\S]*}\\\\s*\\\\]/);\\n    if (jsonMatch) {\\n      jsonText = jsonMatch[0];\\n    }\\n\\n    const parsedFields = JSON.parse(jsonText);\\n    if (!Array.isArray(parsedFields)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    config.value.fields = parsedFields.map((field: any) => ({\\n      name: field.name || '',\\n      label: field.label || field.name || '',\\n      icon: field.icon || '',\\n    }));\\n\\n    // \\n    originalFieldDescription.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' ');\\n    progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showFieldModifyDialog.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingField.value = false;\\n  }\\n}\\n\\n// \\nfunction generateFromFields() {\\n  const fields = config.value.fields;\\n\\n  //  findRegex\\n  const totalFields = fields.length;\\n\\n  if (totalFields === 0) {\\n    config.value.findRegex = '<-CHARACTER_STATUS->';\\n    console.log(' ');\\n    return;\\n  }\\n\\n  if (totalFields <= 4) {\\n    // 4\\n    config.value.findRegex = `<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*\\\\\\\\|${fields.map(() => '([^|]+)').join('\\\\\\\\|')}\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*`;\\n    console.log('  findRegex ():', config.value.findRegex);\\n    console.log(' :', totalFields);\\n  } else {\\n    // 4\\n    // 4\\n    const perLine = totalFields <= 8 ? Math.ceil(totalFields / 2) : 4;\\n\\n    // \\n    const firstHalf = Math.min(Math.ceil(totalFields / 2), totalFields <= 12 ? 4 : Math.ceil(totalFields / 3));\\n\\n    const lines: string[] = [];\\n\\n    //  + \\n    lines.push('<-ENVIRONMENT_DATA->[\\\\\\\\r\\\\\\\\n]*');\\n    for (let i = 0; i < firstHalf; i += perLine) {\\n      const count = Math.min(perLine, firstHalf - i);\\n      lines.push(\\n        '\\\\\\\\|' +\\n          fields\\n            .slice(i, i + count)\\n            .map(() => '([^|]+)')\\n            .join('\\\\\\\\|') +\\n          '\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*',\\n      );\\n    }\\n\\n    //  + perLine\\n    lines.push('<-CHARACTER_STATUS->[\\\\\\\\r\\\\\\\\n]*');\\n    for (let i = firstHalf; i < totalFields; i += perLine) {\\n      const count = Math.min(perLine, totalFields - i);\\n      lines.push(\\n        '\\\\\\\\|' +\\n          fields\\n            .slice(i, i + count)\\n            .map(() => '([^|]+)')\\n            .join('\\\\\\\\|') +\\n          '\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*',\\n      );\\n    }\\n\\n    config.value.findRegex = lines.join('');\\n\\n    console.log('  findRegex ():', config.value.findRegex);\\n    console.log(' :', totalFields);\\n    console.log(\\n      ' :',\\n      `: ${firstHalf}, : ${totalFields - firstHalf}, : ${perLine}`,\\n    );\\n  }\\n\\n  //  HTML\\n  const fieldsHtml = fields\\n    .map((f, i) => {\\n      const iconPart = f.icon ? `<i class=\\\"${f.icon}\\\"></i> ` : '';\\n      return `        <div class=\\\"status-field\\\">\\n          <div class=\\\"field-label\\\">${iconPart}${f.label || '' + (i + 1)}</div>\\n          <div class=\\\"field-value\\\">$${i + 1}</div>\\n        </div>`;\\n    })\\n    .join('\\\\n');\\n\\n  const htmlContent = `<details>\\n<summary> ${config.value.name} </summary>\\n<div class=\\\"status-card\\\">\\n    <div class=\\\"status-header\\\">\\n        <span></span>\\n        <span>${config.value.name}</span>\\n    </div>\\n    <div class=\\\"status-content\\\">\\n        <div class=\\\"status-grid\\\">\\n${fieldsHtml}\\n        </div>\\n    </div>\\n</div>\\n</details>`;\\n\\n  //  CSS\\n  const cssContent = `.status-card {\\n    font-family: 'Microsoft YaHei', sans-serif;\\n    background: linear-gradient(145deg, #1e293b, #334155);\\n    border-radius: 14px;\\n    margin: 16px 0;\\n    box-shadow: 0 8px 25px rgba(15, 23, 42, 0.4);\\n    overflow: hidden;\\n    border: 1px solid rgba(148, 163, 184, 0.2);\\n    max-width: 600px;\\n}\\n\\n.status-header {\\n    background: linear-gradient(135deg, #0f172a, #1e293b);\\n    color: #e2e8f0;\\n    padding: 12px 20px;\\n    font-size: 15px;\\n    font-weight: 600;\\n    display: flex;\\n    align-items: center;\\n    gap: 8px;\\n    border-bottom: 1px solid rgba(148, 163, 184, 0.15);\\n}\\n\\n.status-content {\\n    padding: 20px;\\n    background: rgba(30, 41, 59, 0.5);\\n}\\n\\n.status-grid {\\n    display: grid;\\n    grid-template-columns: repeat(2, 1fr);\\n    gap: 16px;\\n}\\n\\n.status-field {\\n    background: rgba(30, 41, 59, 0.8);\\n    padding: 16px;\\n    border-radius: 10px;\\n    border-left: 3px solid #6366f1;\\n}\\n\\n.field-label {\\n    font-size: 11px;\\n    color: #94a3b8;\\n    margin-bottom: 8px;\\n    font-weight: 600;\\n    text-transform: uppercase;\\n}\\n\\n.field-value {\\n    font-size: 14px;\\n    color: #e2e8f0;\\n    line-height: 1.5;\\n    font-weight: 600;\\n}`;\\n\\n  //  JS - \\n  const jsContent = `// \\n(function() {\\n  // \\n  setTimeout(function() {\\n    console.log('${config.value.name} ');\\n\\n    // \\n    if (typeof gsap !== 'undefined') {\\n      gsap.from('.status-field', {\\n        opacity: 0,\\n        y: 20,\\n        duration: 0.5,\\n        stagger: 0.1,\\n        ease: 'power2.out'\\n      });\\n\\n      // \\n      $('.status-field').hover(\\n        function() {\\n          gsap.to($(this), { scale: 1.05, duration: 0.2 });\\n        },\\n        function() {\\n          gsap.to($(this), { scale: 1, duration: 0.2 });\\n        }\\n      );\\n    }\\n  }, 100);\\n})();`;\\n\\n  files.value[0].content = htmlContent;\\n  files.value[1].content = cssContent;\\n  files.value[2].content = jsContent;\\n  currentFile.value = files.value[0];\\n\\n  window.toastr.success(' ');\\n}\\n\\n//  AI \\nfunction showAIDialog() {\\n  showAI.value = true;\\n  aiPrompt.value = '';\\n}\\n\\n// \\nfunction addFieldInDialog() {\\n  config.value.fields.push({\\n    name: `${config.value.fields.length + 1}`,\\n    label: `${config.value.fields.length + 1}`,\\n    icon: '',\\n  });\\n}\\n\\n// \\nfunction removeFieldInDialog(index: number) {\\n  if (config.value.fields.length <= 1) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n  config.value.fields.splice(index, 1);\\n}\\n\\n// \\nfunction loadTemplate(templateKey: 'simple' | 'abo') {\\n  const template = templates[templateKey];\\n  if (template) {\\n    config.value = JSON.parse(JSON.stringify(template)); // \\n    window.toastr.success(` \\\"${template.name}\\\"`);\\n  }\\n}\\n\\n// AI \\nasync function generateWithAI() {\\n  if (!aiPrompt.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  originalAiPrompt.value = aiPrompt.value;\\n\\n  // \\n  showProgress.value = true;\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      window.toastr.error(' API  API Key');\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    // 1: \\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${config.value.fields.length} `);\\n    progressDialogRef.value?.addDetail(`: ${settings.value.model}`);\\n\\n    // \\n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    // \\n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \\n\\n Regex  replaceString  AI \\n**{{char}}**{{user}}\\n\\n\\n- Font Awesome \\n- jQuery ($) - \\n- toastr- \\n- gsap- \\n- lodash (_) - \\n\\n\\n-  $1$2$3 \\n- $1 $2 \\n- \\n- ****\\n\\n\\nFILE_START: index.html\\n<details>\\n<summary>  </summary>\\n<div class=\\\"status-card\\\">\\n  <!--  $1, $2, $3  -->\\n  <div class=\\\"field-value\\\">$1</div>\\n</div>\\n</details>\\nFILE_END\\n\\nFILE_START: style.css\\n.status-card {\\n  /*  */\\n}\\nFILE_END\\n\\nFILE_START: script.js\\n(function() {\\n  // \\n  //  $  document\\n})();\\nFILE_END\\n\\n\\n1. index.html  <details>  </details>  <!DOCTYPE>  <html> \\n2. FILE_START  FILE_END ****\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`html\\\"\\\"\\\"html \\n3. HTML $1, $2, $3...\\n4. CSS \\n5. JS  (function() { ... })() $(function() { ... })\\n6.  DOM \\n7. ****`;\\n\\n    const userPrompt = `# \\n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\\\n')}\\n\\n \\n1. HTML  ${config.value.fields.length} \\n2. $1 = ${config.value.fields[0]?.label || '1'}, $2 = ${config.value.fields[1]?.label || '2'}${config.value.fields[2] ? `, $3 = ${config.value.fields[2].label}` : ''}${config.value.fields[3] ? `, $4 = ${config.value.fields[3].label}` : ''}${config.value.fields[4] ? `, $5 = ${config.value.fields[4].label}` : ''}\\n3. \\\"\\\"\\\"\\\"\\\"\\\"\\n4.  $${config.value.fields.length + 1} \\n\\n# \\n**{{char}}****{{user}}**\\nMVU Beta{{char}}stat_data\\n\\n# \\n${config.value.findRegex}\\n\\n# \\n${aiPrompt.value}\\n\\n# \\n${currentFiles}\\n\\n\\n1. \\n2.  ${config.value.fields.length} $1, $2, $3... HTML \\n3. \\n4.  index.htmlstyle.cssscript.js \\n5. `;\\n\\n    // 2: \\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`API : ${settings.value.api_endpoint}`);\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature || 0.7,\\n        max_tokens: settings.value.max_tokens || 65500,\\n      }),\\n    });\\n\\n    // 3: \\n    progressDialogRef.value?.setProgress(40);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    const data = await response.json();\\n    const resultText = data.choices[0]?.message?.content || '';\\n\\n    // 4: \\n    progressDialogRef.value?.setProgress(70);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\\n\\n    //  AI \\n    const FILE_START_REGEX = /FILE_START:\\\\s*([^\\\\n]+)\\\\n([\\\\s\\\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\\n\\n    if (matches.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    for (const match of matches) {\\n      const rawPath = match[1].trim();\\n      const normalizedPath = rawPath.replace(/^\\\\.\\\\//, '');\\n      let content = sanitizeFileContent(normalizedPath, match[2]);\\n\\n      //  FILE_END\\n      if (content.endsWith('FILE_END')) {\\n        content = content.slice(0, -8).trim();\\n      }\\n\\n      const file = files.value.find(f => f.path === normalizedPath);\\n      if (file) {\\n        file.content = content;\\n      } else if (normalizedPath === 'index.html' || normalizedPath === 'style.css' || normalizedPath === 'script.js') {\\n        // \\n        files.value.push({ path: normalizedPath, content: content });\\n      }\\n    }\\n\\n    //  './'\\n    files.value.forEach(file => {\\n      file.path = file.path.replace(/^\\\\.\\\\//, '');\\n    });\\n\\n    //  './index.html' \\n    const uniqueFiles = new Map<string, CodeFile>();\\n    files.value.forEach(file => {\\n      uniqueFiles.set(file.path, file);\\n    });\\n    files.value = Array.from(uniqueFiles.values());\\n\\n    // 5: \\n    progressDialogRef.value?.setProgress(90);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\\n\\n    const htmlFile = files.value.find(f => f.path === 'index.html') || files.value[0];\\n    currentFile.value = htmlFile;\\n    updatePreview();\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showAI.value = false;\\n      window.toastr.success(' AI ');\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  }\\n}\\n\\n// AI \\nasync function modifyWithAI(modifyInstruction: string) {\\n  if (!originalAiPrompt.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifyingAi.value = true;\\n  showProgress.value = true;\\n\\n  try {\\n    // 1: \\n    progressDialogRef.value?.setProgress(10);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\\n\\n    const currentFiles = files.value.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    const systemPrompt = ` SillyTavern  HTML/CSS/JS \\n\\n\\n1. ** index.htmlstyle.cssscript.js **\\n2. \\n3. \\n4.  FILE_START  FILE_END \\n\\n****`;\\n\\n    const userPrompt = `# \\n${originalAiPrompt.value}\\n\\n# \\n${modifyInstruction}\\n\\n# \\n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\\\n')}\\n\\n# \\n${currentFiles}\\n\\n ****\\n\\nFILE_START: index.html\\n<details>\\n  <!--  HTML $1, $2, $3  -->\\n</details>\\nFILE_END\\n\\nFILE_START: style.css\\n/*  CSS  */\\nFILE_END\\n\\nFILE_START: script.js\\n(function() {\\n  //  JS \\n})();\\nFILE_END\\n\\n****`;\\n\\n    // 2: \\n    progressDialogRef.value?.setProgress(20);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(`: ${files.value.length} `);\\n\\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n\\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    progressDialogRef.value?.addDetail(' 10-30 ');\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 65500,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.statusText}`);\\n    }\\n\\n    // 3: \\n    progressDialogRef.value?.setProgress(60);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    const data = await response.json();\\n    const resultText = data.choices[0]?.message?.content || '';\\n\\n    // 4: \\n    progressDialogRef.value?.setProgress(80);\\n    progressDialogRef.value?.setMessage('...');\\n    progressDialogRef.value?.addDetail(`: ${resultText.length} `);\\n\\n    // \\n    const FILE_START_REGEX = /FILE_START:\\\\s*([^\\\\n]+)\\\\n([\\\\s\\\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\\n    const matches = [...resultText.matchAll(FILE_START_REGEX)];\\n\\n    if (matches.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.addDetail(` ${matches.length} `);\\n\\n    // \\n    const generatedFiles = matches.map(m => m[1].trim().replace(/^\\\\.\\\\//, ''));\\n    const requiredFiles = ['index.html', 'style.css', 'script.js'];\\n    const missingFiles = requiredFiles.filter(f => !generatedFiles.includes(f));\\n\\n    if (missingFiles.length > 0) {\\n      progressDialogRef.value?.addDetail(` : AI : ${missingFiles.join(', ')}`);\\n      window.toastr.warning(`AI : ${missingFiles.join(', ')}`, '', {\\n        timeOut: 5000,\\n      });\\n    }\\n\\n    if (matches.length > 0) {\\n      for (const match of matches) {\\n        const normalizedPath = match[1].trim().replace(/^\\\\.\\\\//, '');\\n        let content = sanitizeFileContent(normalizedPath, match[2]);\\n        if (content.endsWith('FILE_END')) {\\n          content = content.slice(0, -8).trim();\\n        }\\n        const file = files.value.find(f => f.path === normalizedPath);\\n        if (file) {\\n          file.content = content;\\n          progressDialogRef.value?.addDetail(` : ${normalizedPath}`);\\n        }\\n      }\\n    }\\n\\n    // 5: \\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    originalAiPrompt.value += `\\\\n\\\\n${modifyInstruction}`;\\n\\n    updatePreview();\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showAiModifyDialog.value = false;\\n      window.toastr.success(` AI  ${matches.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n    window.toastr.error('AI : ' + error.message);\\n  } finally {\\n    isModifyingAi.value = false;\\n  }\\n}\\n\\n// \\nasync function copyWorldbook() {\\n  await copyToClipboard(worldbookContent.value, ' ');\\n}\\n\\nfunction sanitizeFileContent(filePath: string, raw: string): string {\\n  let content = raw.trim();\\n\\n  //  markdown ```html ... ```\\n  const fenceMatch = content.match(/^```[a-zA-Z0-9]*\\\\s*([\\\\s\\\\S]*?)\\\\s*```$/);\\n  if (fenceMatch) {\\n    content = fenceMatch[1].trim();\\n  }\\n\\n  //  Python docstring \\\"\\\"\\\"html ... \\\"\\\"\\\"  '''html ... '''\\n  const docstringMatch = content.match(/^(\\\"\\\"\\\"|''')[a-zA-Z0-9]*\\\\s*([\\\\s\\\\S]*?)\\\\s*\\\\1$/);\\n  if (docstringMatch) {\\n    content = docstringMatch[2].trim();\\n  }\\n\\n  //  \\\"\\\"\\\"html  ```html \\n  content = content.replace(/^(```|\\\"\\\"\\\"|''')[a-zA-Z0-9]*\\\\s*\\\\n?/, '');\\n  content = content.replace(/\\\\n?\\\\s*(```|\\\"\\\"\\\"|''')$/, '');\\n\\n  if (filePath.endsWith('.html')) {\\n    content = content.replace(/<!DOCTYPE html>/i, match => match.toUpperCase());\\n  }\\n\\n  return content;\\n}\\n\\n// \\nfunction exportRegex() {\\n  const htmlFile = files.value.find(f => f.path === 'index.html');\\n  const cssFile = files.value.find(f => f.path === 'style.css');\\n  const jsFile = files.value.find(f => f.path === 'script.js');\\n\\n  if (!htmlFile || htmlFile.content.trim() === '') {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\\n    const r = (Math.random() * 16) | 0;\\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\\n    return v.toString(16);\\n  });\\n\\n  // <details> \\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n\\n  //  <details> \\n  const detailsHtml = htmlFile.content.trim();\\n  const replaceString = `${detailsHtml}\\n<${styleTag}>\\n${cssFile?.content || ''}\\n</${styleTag}>\\n\\n<${scriptTag}>\\n${jsFile?.content || ''}\\n</${scriptTag}>`;\\n\\n  //  findRegex\\n  //  findRegex \\n  // \\n  let regexPattern = config.value.findRegex;\\n\\n  //  findRegex \\n  const existingCaptureGroups = (regexPattern.match(/\\\\([^)]+\\\\)/g) || []).length;\\n  const fieldCount = config.value.fields.length;\\n\\n  if (existingCaptureGroups === 0) {\\n    // \\n    regexPattern = `${regexPattern.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&')}[\\\\\\\\r\\\\\\\\n]*${Array(fieldCount)\\n      .fill('\\\\\\\\|([^|]+)')\\n      .join('')}\\\\\\\\|[\\\\\\\\r\\\\\\\\n]*`;\\n  }\\n  // \\n\\n  // \\n  const cleanReplaceString = replaceString.replace(/\\\\r\\\\n/g, '\\\\n').replace(/\\\\r/g, '\\\\n');\\n\\n  const regexJson = {\\n    id: uuid,\\n    scriptName: config.value.name,\\n    findRegex: regexPattern,\\n    replaceString: cleanReplaceString,\\n    trimStrings: [],\\n    placement: [2],\\n    disabled: false,\\n    markdownOnly: true,\\n    promptOnly: false,\\n    runOnEdit: true,\\n    substituteRegex: 0,\\n    minDepth: null,\\n    maxDepth: null,\\n  };\\n\\n  //  JSON\\n  const blob = new Blob([JSON.stringify(regexJson, null, 2)], { type: 'application/json' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download = `regex-${config.value.name}.json`;\\n  a.click();\\n  URL.revokeObjectURL(url);\\n\\n  window.toastr.success('  JSON ');\\n}\\n\\n// ====================  ====================\\n\\n// \\nfunction loadSavedConfig() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n\\n    const scriptVars = getVariables({ type: 'script', script_id: scriptId });\\n    const savedConfig = scriptVars.statusbar_generator_config;\\n\\n    if (savedConfig) {\\n      config.value = { ...config.value, ...savedConfig };\\n      console.log(' ');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nfunction saveConfig() {\\n  try {\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      console.warn('script_id ');\\n      return;\\n    }\\n\\n    insertOrAssignVariables({ statusbar_generator_config: config.value }, { type: 'script', script_id: scriptId });\\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nonMounted(() => {\\n  loadSavedConfig();\\n});\\n\\n// \\nwatch(\\n  () => config.value,\\n  () => {\\n    saveConfig();\\n  },\\n  { deep: true },\\n);\\n</script>\\n\\n<style scoped>\\n.statusbar-generator {\\n  padding: 20px;\\n  height: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 20px;\\n  background: #1a1a1a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3100a601&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7bb1737c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3100a601&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./GreetingsTab.vue?vue&type=style&index=0&id=3100a601&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=7890f262&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"482d2d0e\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=7890f262&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIModifyDialog.vue?vue&type=style&index=0&id=7890f262&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.memory-panel-container[data-v-67eefd1a]{display:flex;flex-direction:column;height:100%;background:#1a1a1a;color:#e0e0e0}.panel-header[data-v-67eefd1a]{padding:15px 20px;background:#2a2a2a;border-bottom:1px solid #3a3a3a;display:flex;justify-content:space-between;align-items:center;border-radius:8px 8px 0 0}.header-left[data-v-67eefd1a]{display:flex;align-items:center;gap:10px}.language-button[data-v-67eefd1a]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.language-button[data-v-67eefd1a]:hover{background:rgba(74,158,255,0.2)}.minimize-button[data-v-67eefd1a]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.minimize-button[data-v-67eefd1a]:hover{background:rgba(255,255,255,0.1)}.close-button[data-v-67eefd1a]{cursor:pointer;padding:5px 10px;border-radius:4px;transition:background 0.2s}.close-button[data-v-67eefd1a]:hover{background:rgba(255,255,255,0.1)}.panel-tabs[data-v-67eefd1a]{display:flex;background:#2a2a2a;border-bottom:1px solid #3a3a3a}.tab-item[data-v-67eefd1a]:hover{background:rgba(255,255,255,0.05) !important}.panel-content[data-v-67eefd1a]{flex:1;overflow-y:auto;overflow-x:hidden;padding:0;min-height:0}.panel-content[data-v-67eefd1a]::-webkit-scrollbar{width:8px}.panel-content[data-v-67eefd1a]::-webkit-scrollbar-track{background:#2a2a2a}.panel-content[data-v-67eefd1a]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.panel-content[data-v-67eefd1a]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/MainPanel.vue\"],\"names\":[],\"mappings\":\"AAqMA,yCACE,YAAa,CACb,qBAAsB,CACtB,WAAY,CACZ,kBAAmB,CACnB,aACF,CAEA,+BACE,iBAAkB,CAClB,kBAAmB,CACnB,+BAAgC,CAChC,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,yBACF,CAEA,8BACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,kCACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,wCACE,+BACF,CAEA,kCACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,wCACE,gCACF,CAEA,+BACE,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,0BACF,CAEA,qCACE,gCACF,CAEA,6BACE,YAAa,CACb,kBAAmB,CACnB,+BACF,CAEA,iCACE,4CACF,CAEA,gCACE,MAAO,CACP,eAAgB,CAChB,iBAAkB,CAClB,SAAU,CACV,YACF,CAGA,mDACE,SACF,CAEA,yDACE,kBACF,CAEA,yDACE,kBAAmB,CACnB,iBACF,CAEA,+DACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"memory-panel-container\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a; color: #e0e0e0\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"panel-header\\\"\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: #2a2a2a;\\n        border-bottom: 1px solid #3a3a3a;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        border-radius: 8px 8px 0 0;\\n        flex-shrink: 0;\\n      \\\"\\n    >\\n      <div class=\\\"header-left\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span style=\\\"font-size: 24px\\\"></span>\\n        <b class=\\\"panel-title\\\">{{ t('panel.title') }}</b>\\n        <b class=\\\"panel-title-mobile\\\">{{ currentLocale === 'zh-CN' ? '' : \\\"mzrodyu's Tool\\\" }}</b>\\n      </div>\\n      <div style=\\\"display: flex; gap: 10px; align-items: center\\\">\\n        <!--  -->\\n        <div\\n          class=\\\"language-button\\\"\\n          style=\\\"\\n            cursor: pointer;\\n            padding: 5px 10px;\\n            border-radius: 4px;\\n            transition: background 0.2s;\\n            font-size: 14px;\\n            display: flex;\\n            align-items: center;\\n            gap: 5px;\\n          \\\"\\n          :title=\\\"currentLocale === 'zh-CN' ? 'Switch to English' : ''\\\"\\n          @click=\\\"toggleLanguage\\\"\\n        >\\n          <i class=\\\"fa-solid fa-language\\\"></i>\\n          <span>{{ currentLocale === 'zh-CN' ? 'EN' : '' }}</span>\\n        </div>\\n        <div\\n          class=\\\"minimize-button\\\"\\n          style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n          :title=\\\"t('panel.minimize')\\\"\\n          @click=\\\"minimizePanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-minus\\\"></i>\\n        </div>\\n        <div\\n          class=\\\"close-button\\\"\\n          style=\\\"cursor: pointer; padding: 5px 10px; border-radius: 4px; transition: background 0.2s\\\"\\n          :title=\\\"currentLocale === 'zh-CN' ? '' : 'Close'\\\"\\n          @click=\\\"closePanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-times\\\"></i>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-tabs\\\"\\n      style=\\\"display: flex; background: #2a2a2a; border-bottom: 1px solid #3a3a3a; flex-shrink: 0\\\"\\n    >\\n      <div\\n        v-for=\\\"tab in tabs\\\"\\n        :key=\\\"tab.key\\\"\\n        :class=\\\"{ 'tab-active': activeTab === tab.key }\\\"\\n        class=\\\"tab-item\\\"\\n        :style=\\\"{\\n          flex: '1',\\n          padding: '12px 20px',\\n          cursor: 'pointer',\\n          textAlign: 'center',\\n          transition: 'background 0.2s, color 0.2s',\\n          display: 'flex',\\n          alignItems: 'center',\\n          justifyContent: 'center',\\n          gap: '8px',\\n          borderBottom: '2px solid transparent',\\n          backgroundColor: activeTab === tab.key ? '#1a1a1a' : 'transparent',\\n          color: activeTab === tab.key ? '#4a9eff' : '#e0e0e0',\\n          borderBottomColor: activeTab === tab.key ? '#4a9eff' : 'transparent',\\n        }\\\"\\n        @click=\\\"switchTab(tab.key)\\\"\\n      >\\n        <i :class=\\\"tab.icon\\\"></i>\\n        <span class=\\\"tab-label\\\">{{ tab.label }}</span>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      class=\\\"panel-content\\\"\\n      style=\\\"\\n        flex: 1;\\n        overflow-y: auto;\\n        overflow-x: hidden;\\n        padding: 0;\\n        min-height: 0;\\n        scrollbar-width: thin;\\n        scrollbar-color: #4a9eff #2a2a2a;\\n      \\\"\\n    >\\n      <component :is=\\\"currentComponent\\\" :key=\\\"activeTab\\\" v-bind=\\\"componentProps\\\" />\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, ref } from 'vue';\\nimport { useI18n } from 'vue-i18n';\\nimport { minimizeMemoryPanel } from '../';\\nimport GreetingsTab from './GreetingsTab.vue';\\nimport HelpTab from './HelpTab.vue';\\nimport MvuBetaTab from './MvuBetaTab.vue';\\nimport ProjectManager from './ProjectManager.vue';\\nimport RegexUIGenerator from './RegexUIGenerator.vue';\\nimport SettingsTab from './SettingsTab.vue';\\nimport StatusBarGenerator from './StatusBarGenerator.vue';\\nimport SummaryTab from './SummaryTab.vue';\\nimport TableTab from './TableTab.vue';\\nimport ToolsTab from './ToolsTab.vue';\\n\\nconst { t, locale } = useI18n();\\nconst currentLocale = computed(() => locale.value);\\n\\n// \\nconst tabs = computed(() => [\\n  { key: 'settings', label: t('tabs.settings'), icon: 'fa-solid fa-cog' },\\n  { key: 'summary', label: t('tabs.history'), icon: 'fa-solid fa-list' },\\n  { key: 'table', label: t('tabs.table'), icon: 'fa-solid fa-table' },\\n  { key: 'greetings', label: t('tabs.greetings'), icon: 'fa-solid fa-comments' },\\n  { key: 'regex', label: t('tabs.regex'), icon: 'fa-solid fa-code' },\\n  { key: 'status', label: t('tabs.state'), icon: 'fa-solid fa-chart-bar' },\\n  { key: 'project', label: t('tabs.projects'), icon: 'fa-solid fa-laptop-code' },\\n  { key: 'tools', label: t('tabs.tools'), icon: 'fa-solid fa-tools' },\\n  { key: 'mvu', label: t('tabs.mvu'), icon: 'fa-solid fa-flask' },\\n  { key: 'help', label: t('tabs.help'), icon: 'fa-solid fa-question-circle' },\\n]);\\n\\nconst activeTab = ref<\\n  'settings' | 'summary' | 'table' | 'greetings' | 'status' | 'regex' | 'project' | 'tools' | 'mvu' | 'help'\\n>('settings');\\n\\n// \\nconst componentMap = {\\n  settings: SettingsTab,\\n  summary: SummaryTab,\\n  table: TableTab,\\n  greetings: GreetingsTab,\\n  status: StatusBarGenerator,\\n  regex: RegexUIGenerator,\\n  project: ProjectManager,\\n  tools: ToolsTab,\\n  mvu: MvuBetaTab,\\n  help: HelpTab,\\n};\\n\\n// \\nconst currentComponent = computed(() => componentMap[activeTab.value]);\\n\\n// \\nconst componentProps = computed(() => ({\\n  activeTab: activeTab.value,\\n}));\\n\\n// \\nconst switchTab = (tabKey: string) => {\\n  console.log(':', tabKey);\\n  activeTab.value = tabKey as any;\\n};\\n\\n// \\nconst toggleLanguage = () => {\\n  const newLocale = locale.value === 'zh-CN' ? 'en-US' : 'zh-CN';\\n  locale.value = newLocale;\\n  localStorage.setItem('maomao_tool_locale', newLocale);\\n  toastr.success(newLocale === 'zh-CN' ? '' : 'Switched to English');\\n};\\n\\n// \\nconst minimizePanel = () => {\\n  minimizeMemoryPanel();\\n};\\n\\n// \\nconst closePanel = () => {\\n  $('#memoryManagementPanel').fadeOut(200);\\n};\\n</script>\\n\\n<style scoped>\\n.memory-panel-container {\\n  display: flex;\\n  flex-direction: column;\\n  height: 100%;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.panel-header {\\n  padding: 15px 20px;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  border-radius: 8px 8px 0 0;\\n}\\n\\n.header-left {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.language-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.language-button:hover {\\n  background: rgba(74, 158, 255, 0.2);\\n}\\n\\n.minimize-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.minimize-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.close-button {\\n  cursor: pointer;\\n  padding: 5px 10px;\\n  border-radius: 4px;\\n  transition: background 0.2s;\\n}\\n\\n.close-button:hover {\\n  background: rgba(255, 255, 255, 0.1);\\n}\\n\\n.panel-tabs {\\n  display: flex;\\n  background: #2a2a2a;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.tab-item:hover {\\n  background: rgba(255, 255, 255, 0.05) !important;\\n}\\n\\n.panel-content {\\n  flex: 1;\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n  padding: 0;\\n  min-height: 0;\\n}\\n\\n/*  */\\n.panel-content::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.panel-content::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.panel-content::-webkit-scrollbar-thumb:hover {\\n  background: #5ab0ff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9e3a34be\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.regex-ui-generator[data-v-f1283e36]{height:100%;overflow-y:auto}button[data-v-f1283e36]:disabled{cursor:not-allowed !important;opacity:0.5 !important}button[data-v-f1283e36]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}code[data-v-f1283e36]{background:#1a1a1a;padding:2px 6px;border-radius:3px;font-family:'Consolas',monospace}pre[data-v-f1283e36]::-webkit-scrollbar{width:8px;height:8px}pre[data-v-f1283e36]::-webkit-scrollbar-track{background:#1a1a1a}pre[data-v-f1283e36]::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}pre[data-v-f1283e36]::-webkit-scrollbar-thumb:hover{background:#5ab0ff}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/RegexUIGenerator.vue\"],\"names\":[],\"mappings\":\"AAuqBA,qCACE,WAAY,CACZ,eACF,CAEA,iCACE,6BAA8B,CAC9B,sBACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAEA,sBACE,kBAAmB,CACnB,eAAgB,CAChB,iBAAkB,CAClB,gCACF,CAEA,wCACE,SAAU,CACV,UACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"regex-ui-generator\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);\\n        padding: 20px;\\n        border-radius: 12px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(102, 126, 234, 0.2);\\n      \\\"\\n    >\\n      <h3 style=\\\"color: #4a9eff; margin: 0 0 10px 0; font-size: 20px; font-weight: 600\\\"> </h3>\\n      <p style=\\\"color: #888; margin: 0; font-size: 14px; line-height: 1.6\\\">\\n        AI  HTML/CSS/JS \\n      </p>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        background: #2a2a2a;\\n        padding: 20px;\\n        border-radius: 8px;\\n        margin-bottom: 20px;\\n        border-left: 4px solid #ffc107;\\n      \\\"\\n    >\\n      <h4 style=\\\"color: #ffc107; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\\\">\\n        <i class=\\\"fa-solid fa-lightbulb\\\"></i>\\n        \\n      </h4>\\n      <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; line-height: 2\\\">\\n        <li>\\n          <strong style=\\\"color: #fff\\\">1</strong> \\n          <code style=\\\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #4a9eff\\\"></code>\\n          \\n        </li>\\n        <li><strong style=\\\"color: #fff\\\">2</strong> </li>\\n        <li><strong style=\\\"color: #fff\\\">3</strong> \\\"AI \\\"AI </li>\\n        <li>\\n          <strong style=\\\"color: #fff\\\">4</strong> <strong style=\\\"color: #51cf66\\\"></strong\\n          >\\\"AI \\\"\\n        </li>\\n        <li><strong style=\\\"color: #fff\\\">5</strong> \\\"\\\"</li>\\n        <li>\\n          <strong style=\\\"color: #fff\\\"></strong> \\n          <code style=\\\"background: #1a1a1a; padding: 2px 6px; border-radius: 3px; color: #51cf66\\\"></code>\\n          \\n        </li>\\n      </ol>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px\\\">\\n      <!--  -->\\n      <div style=\\\"display: flex; flex-direction: column; gap: 20px\\\">\\n        <!--  -->\\n        <div style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px\\\">\\n          <h4 style=\\\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\\\">\\n            <i class=\\\"fa-solid fa-key\\\"></i>\\n            :\\n          </h4>\\n          <input\\n            v-model=\\\"triggerKeyword\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"\\\"\\n            style=\\\"\\n              width: 100%;\\n              background: #1a1a1a;\\n              color: #e0e0e0;\\n              border: 1px solid #444;\\n              border-radius: 4px;\\n              padding: 12px;\\n              font-size: 14px;\\n            \\\"\\n          />\\n        </div>\\n\\n        <!-- AI  -->\\n        <div\\n          style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px; flex: 1; display: flex; flex-direction: column\\\"\\n        >\\n          <h4 style=\\\"color: #4a9eff; margin: 0 0 15px 0; font-size: 16px\\\">\\n            <i class=\\\"fa-solid fa-magic\\\"></i>\\n            AI :\\n          </h4>\\n          <p style=\\\"color: #888; margin: 0 0 10px 0; font-size: 13px\\\">\\n            RPG...\\n          </p>\\n          <textarea\\n            v-model=\\\"interfaceDescription\\\"\\n            placeholder=\\\"&#10;- &#10;- RPG&#10;- &#10;&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              flex: 1;\\n              min-height: 200px;\\n              background: #1a1a1a;\\n              color: #e0e0e0;\\n              border: 1px solid #444;\\n              border-radius: 4px;\\n              padding: 12px;\\n              font-size: 14px;\\n              font-family: 'Consolas', monospace;\\n              resize: none;\\n              line-height: 1.6;\\n            \\\"\\n          />\\n\\n          <!-- AI / -->\\n          <div style=\\\"display: flex; gap: 12px; margin-top: 15px\\\">\\n            <button\\n              :disabled=\\\"!triggerKeyword || !interfaceDescription || isGenerating\\\"\\n              style=\\\"\\n                flex: 1;\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                color: white;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-size: 14px;\\n                font-weight: 600;\\n                transition: all 0.3s;\\n              \\\"\\n              :style=\\\"{ opacity: !triggerKeyword || !interfaceDescription || isGenerating ? 0.5 : 1 }\\\"\\n              @click=\\\"generateWithAI\\\"\\n            >\\n              <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n              {{ isGenerating ? 'AI ...' : generatedCode ? 'AI ' : 'AI ' }}\\n            </button>\\n            <button\\n              v-if=\\\"generatedCode\\\"\\n              :disabled=\\\"isModifying\\\"\\n              style=\\\"\\n                flex: 1;\\n                background: #ffc107;\\n                color: #000;\\n                border: none;\\n                padding: 12px 24px;\\n                border-radius: 6px;\\n                cursor: pointer;\\n                font-size: 14px;\\n                font-weight: 600;\\n                transition: all 0.3s;\\n              \\\"\\n              :style=\\\"{ opacity: isModifying ? 0.5 : 1 }\\\"\\n              @click=\\\"showModifyDialog\\\"\\n            >\\n              <i class=\\\"fa-solid fa-edit\\\"></i>\\n              {{ isModifying ? '...' : 'AI ' }}\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px; display: flex; flex-direction: column\\\">\\n        <h4 style=\\\"color: #51cf66; margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center; gap: 8px\\\">\\n          <i class=\\\"fa-solid fa-eye\\\"></i>\\n          \\n          <span\\n            v-if=\\\"generatedCode\\\"\\n            style=\\\"\\n              margin-left: auto;\\n              background: #51cf66;\\n              color: white;\\n              padding: 4px 12px;\\n              border-radius: 12px;\\n              font-size: 12px;\\n            \\\"\\n            ></span\\n          >\\n        </h4>\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            background: #1a1a1a;\\n            border: 2px solid #444;\\n            border-radius: 6px;\\n            overflow: hidden;\\n            display: flex;\\n            align-items: center;\\n            justify-content: center;\\n            min-height: 400px;\\n          \\\"\\n        >\\n          <div v-if=\\\"!generatedCode\\\" style=\\\"text-align: center; color: #666; padding: 40px\\\">\\n            <i class=\\\"fa-solid fa-image\\\" style=\\\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\\\"></i>\\n            <p style=\\\"font-size: 16px; margin: 0\\\">...</p>\\n            <p style=\\\"font-size: 14px; margin: 10px 0 0 0\\\">\\\"AI \\\"</p>\\n          </div>\\n          <iframe\\n            v-else\\n            ref=\\\"previewFrame\\\"\\n            :srcdoc=\\\"generatedCode\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n        </div>\\n\\n        <!--  -->\\n        <button\\n          v-if=\\\"generatedCode\\\"\\n          style=\\\"\\n            margin-top: 15px;\\n            background: #51cf66;\\n            color: white;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"copyRegex\\\"\\n        >\\n          <i class=\\\"fa-solid fa-copy\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div v-if=\\\"generatedRegex\\\" style=\\\"background: #2a2a2a; padding: 20px; border-radius: 8px\\\">\\n      <div\\n        style=\\\"display: flex; justify-content: space-between; align-items: center; cursor: pointer; margin-bottom: 15px\\\"\\n        @click=\\\"showCode = !showCode\\\"\\n      >\\n        <h4 style=\\\"color: #4a9eff; margin: 0\\\">\\n          <i class=\\\"fa-solid fa-code\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"showCode ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #888; transition: transform 0.3s\\\"\\n        ></i>\\n      </div>\\n      <div\\n        v-if=\\\"showCode\\\"\\n        style=\\\"\\n          background: #1a1a1a;\\n          padding: 15px;\\n          border-radius: 4px;\\n          border: 1px solid #444;\\n          max-height: 300px;\\n          overflow-y: auto;\\n        \\\"\\n      >\\n        <pre\\n          style=\\\"\\n            margin: 0;\\n            color: #e0e0e0;\\n            font-family: 'Consolas', monospace;\\n            font-size: 13px;\\n            white-space: pre-wrap;\\n            word-wrap: break-word;\\n          \\\"\\n          >{{ generatedRegex }}</pre\\n        >\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showModify\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        z-index: 1000000;\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showModify = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 2px solid #ffc107;\\n          border-radius: 12px;\\n          padding: 30px;\\n          max-width: 600px;\\n          width: 100%;\\n        \\\"\\n        @click.stop\\n      >\\n        <h3 style=\\\"color: #ffc107; margin: 0 0 20px 0\\\">\\n          <i class=\\\"fa-solid fa-edit\\\"></i>\\n          AI \\n        </h3>\\n        <p style=\\\"color: #888; margin: 0 0 15px 0; line-height: 1.6\\\">\\n          AI \\n        </p>\\n        <ul style=\\\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\\\">\\n          <li></li>\\n          <li></li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n        <textarea\\n          v-model=\\\"modifyInstruction\\\"\\n          placeholder=\\\"...\\\"\\n          style=\\\"\\n            width: 100%;\\n            min-height: 150px;\\n            background: #1a1a1a;\\n            color: #e0e0e0;\\n            border: 1px solid #444;\\n            border-radius: 4px;\\n            padding: 12px;\\n            font-size: 14px;\\n            margin-bottom: 20px;\\n            resize: vertical;\\n          \\\"\\n        ></textarea>\\n        <div style=\\\"display: flex; gap: 12px\\\">\\n          <button\\n            :disabled=\\\"!modifyInstruction || isModifying\\\"\\n            style=\\\"\\n              flex: 1;\\n              background: #ffc107;\\n              color: #000;\\n              border: none;\\n              padding: 12px 24px;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-size: 14px;\\n              font-weight: 600;\\n            \\\"\\n            :style=\\\"{ opacity: !modifyInstruction || isModifying ? 0.5 : 1 }\\\"\\n            @click=\\\"modifyWithAI\\\"\\n          >\\n            <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n            {{ isModifying ? '...' : '' }}\\n          </button>\\n          <button\\n            style=\\\"\\n              flex: 1;\\n              background: #666;\\n              color: white;\\n              border: none;\\n              padding: 12px 24px;\\n              border-radius: 6px;\\n              cursor: pointer;\\n              font-size: 14px;\\n              font-weight: 600;\\n            \\\"\\n            @click=\\\"showModify = false\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst settings = settingsStore.settings;\\n\\nconst triggerKeyword = ref('');\\nconst interfaceDescription = ref('');\\nconst generatedCode = ref('');\\nconst generatedRegex = ref('');\\nconst isGenerating = ref(false);\\nconst isModifying = ref(false);\\nconst showCode = ref(false);\\nconst showModify = ref(false);\\nconst modifyInstruction = ref('');\\nconst previewFrame = ref<HTMLIFrameElement | null>(null);\\n\\n// AI \\nconst generateWithAI = async () => {\\n  if (!triggerKeyword.value || !interfaceDescription.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isGenerating.value = true;\\n\\n  try {\\n    const prompt = ` HTML \\n\\n${triggerKeyword.value}\\n\\n\\n${interfaceDescription.value}\\n\\n HTML \\n1. HTML \\n2.  <style> CSS \\n3.  <script>  JS \\n\\n\\n- HTML \\n- CSS \\n- JS \\n- \\n- \\n\\n HTML  <!DOCTYPE html>  <div> `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content: ' HTML/CSS/JS ',\\n          },\\n          { role: 'user', content: prompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 4000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    console.log(' [] AI :', result.length);\\n    console.log(' [] AI 500:', result.substring(0, 500));\\n\\n    //  markdown \\n    result = result\\n      .replace(/```html\\\\n?/g, '')\\n      .replace(/```\\\\n?/g, '')\\n      .trim();\\n\\n    // HTMLAI\\n    // 1.  <!DOCTYPE html \\n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\\\s\\\\S]*/i);\\n    if (doctypeMatch) {\\n      result = doctypeMatch[0].trim();\\n      console.log(' [] HTMLDOCTYPE');\\n    } else {\\n      // 2. DOCTYPE <html \\n      const htmlMatch = result.match(/<html[\\\\s\\\\S]*/i);\\n      if (htmlMatch) {\\n        result = htmlMatch[0].trim();\\n        console.log(' [] HTMLDOCTYPE');\\n      } else if (result.includes('<') && result.includes('>')) {\\n        // 3. htmlHTML\\n        console.log(' [] HTML');\\n        // \\n        if (!result.includes('<html')) {\\n          result = `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n</head>\\n<body>\\n${result}\\n</body>\\n</html>`;\\n          console.log(' [] HTML');\\n        }\\n      } else {\\n        // 4. HTMLAI\\n        console.error(' [] AIHTML');\\n        console.error('AI:', result);\\n        throw new Error('AIHTML');\\n      }\\n    }\\n\\n    console.log(' [] HTML:', result.length);\\n\\n    generatedCode.value = result;\\n\\n    // \\n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n    const regexJson = {\\n      id: `regex_ui_${Date.now()}`,\\n      scriptName: `_${triggerKeyword.value}`,\\n      findRegex: findRegex,\\n      replaceString: result,\\n      trimStrings: [],\\n      placement: [2], // AI\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\\n\\n    window.toastr.success('AI ');\\n  } catch (error) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + (error as Error).message);\\n  } finally {\\n    isGenerating.value = false;\\n  }\\n};\\n\\n// \\nconst showModifyDialog = () => {\\n  modifyInstruction.value = '';\\n  showModify.value = true;\\n};\\n\\n// AI \\nconst modifyWithAI = async () => {\\n  if (!modifyInstruction.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  isModifying.value = true;\\n\\n  try {\\n    //  +  AI \\n    const prompt = ` HTML \\n\\n${triggerKeyword.value}\\n\\n\\n${interfaceDescription.value}\\n\\n\\n${modifyInstruction.value}\\n\\n HTML \\n1. HTML \\n2.  <style> CSS \\n3.  <script>  JS \\n\\n\\n- \\n- HTML \\n- CSS \\n- JS \\n- \\n\\n HTML  <!DOCTYPE html>  <div> `;\\n\\n    const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\\n\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.model,\\n        messages: [\\n          {\\n            role: 'system',\\n            content:\\n              ' HTML/CSS/JS ',\\n          },\\n          { role: 'user', content: prompt },\\n        ],\\n        temperature: 0.7,\\n        max_tokens: 4000,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      throw new Error(`API : ${response.status}`);\\n    }\\n\\n    const data = await response.json();\\n    let result = data.choices?.[0]?.message?.content || '';\\n\\n    console.log(' [] AI :', result.length);\\n    console.log(' [] AI 500:', result.substring(0, 500));\\n\\n    //  markdown \\n    result = result\\n      .replace(/```html\\\\n?/g, '')\\n      .replace(/```\\\\n?/g, '')\\n      .trim();\\n\\n    // HTMLAI\\n    // 1.  <!DOCTYPE html \\n    const doctypeMatch = result.match(/<!DOCTYPE html>[\\\\s\\\\S]*/i);\\n    if (doctypeMatch) {\\n      result = doctypeMatch[0].trim();\\n      console.log(' [] HTMLDOCTYPE');\\n    } else {\\n      // 2. DOCTYPE <html \\n      const htmlMatch = result.match(/<html[\\\\s\\\\S]*/i);\\n      if (htmlMatch) {\\n        result = htmlMatch[0].trim();\\n        console.log(' [] HTMLDOCTYPE');\\n      } else if (result.includes('<') && result.includes('>')) {\\n        // 3. htmlHTML\\n        console.log(' [] HTML');\\n        // \\n        if (!result.includes('<html')) {\\n          result = `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n</head>\\n<body>\\n${result}\\n</body>\\n</html>`;\\n          console.log(' [] HTML');\\n        }\\n      } else {\\n        // 4. HTMLAI\\n        console.error(' [] AIHTML');\\n        console.error('AI:', result);\\n        throw new Error('AIHTML');\\n      }\\n    }\\n\\n    console.log(' [] HTML:', result.length);\\n\\n    generatedCode.value = result;\\n\\n    // \\n    const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\\\]\\\\\\\\]/g, '\\\\\\\\$&');\\n    const regexJson = {\\n      id: `regex_ui_${Date.now()}`,\\n      scriptName: `_${triggerKeyword.value}`,\\n      findRegex: findRegex,\\n      replaceString: result,\\n      trimStrings: [],\\n      placement: [2], // AI\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n    generatedRegex.value = JSON.stringify(regexJson, null, 2);\\n\\n    // \\n    interfaceDescription.value = `${interfaceDescription.value}\\\\n\\\\n\\\\n${modifyInstruction.value}`;\\n\\n    window.toastr.success('AI ');\\n    showModify.value = false;\\n  } catch (error) {\\n    console.error('AI :', error);\\n    window.toastr.error('AI : ' + (error as Error).message);\\n  } finally {\\n    isModifying.value = false;\\n  }\\n};\\n\\n// \\nconst copyRegex = () => {\\n  copyToClipboard(generatedRegex.value, '');\\n};\\n</script>\\n\\n<style scoped>\\n.regex-ui-generator {\\n  height: 100%;\\n  overflow-y: auto;\\n}\\n\\nbutton:disabled {\\n  cursor: not-allowed !important;\\n  opacity: 0.5 !important;\\n}\\n\\nbutton:not(:disabled):hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\ncode {\\n  background: #1a1a1a;\\n  padding: 2px 6px;\\n  border-radius: 3px;\\n  font-family: 'Consolas', monospace;\\n}\\n\\npre::-webkit-scrollbar {\\n  width: 8px;\\n  height: 8px;\\n}\\n\\npre::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n}\\n\\npre::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\npre::-webkit-scrollbar-thumb:hover {\\n  background: #5ab0ff;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"8b910c1a\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","import { useSettingsStore, normalizeApiEndpoint } from './settings';\n\n/**\n *  CORS\n */\nasync function proxyFetch(url: string, options: RequestInit = {}): Promise<Response> {\n  try {\n    //  1: \n    const tavernOrigin = window.location.origin; //  http://localhost:8000\n\n    console.log(' :', tavernOrigin);\n\n    const proxyResponse = await fetch(`${tavernOrigin}/api/proxy`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(typeof SillyTavern !== 'undefined' && SillyTavern.getRequestHeaders ? SillyTavern.getRequestHeaders() : {}),\n      },\n      body: JSON.stringify({\n        url: url,\n        method: options.method || 'GET',\n        headers: options.headers || {},\n      }),\n    });\n\n    if (proxyResponse.ok) {\n      console.log(' ');\n      return proxyResponse;\n    }\n\n    console.log(' ');\n  } catch (proxyError) {\n    console.log(' :', proxyError);\n  }\n\n  //  2:  CORS\n  return fetch(url, options);\n}\n\n/**\n * \n */\nexport async function fetchAvailableModels(): Promise<string[]> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  normalizeApiEndpoint  models \n  const baseUrl = settings.api_endpoint.trim();\n  console.log(' :', baseUrl);\n\n  //  /models \n  let modelsUrl: string;\n  try {\n    modelsUrl = normalizeApiEndpoint(baseUrl, '/models');\n    console.log('  models :', modelsUrl);\n  } catch (e) {\n    throw new Error(`API : ${baseUrl}`);\n  }\n\n  //  URL\n  try {\n    new URL(modelsUrl);\n  } catch (e) {\n    throw new Error(`API : ${modelsUrl}`);\n  }\n\n  //  models API \n  const possibleEndpoints = [\n    modelsUrl, //  /models\n    // \n    baseUrl + (baseUrl.endsWith('/') ? 'models' : '/models'),\n    new URL(modelsUrl).origin + '/v1/models',\n    new URL(modelsUrl).origin + '/models',\n  ];\n\n  console.log(' :', possibleEndpoints);\n\n  const errors: string[] = [];\n  let hasCorsError = false;\n\n  for (const modelsUrl of possibleEndpoints) {\n    try {\n      console.log(` : ${modelsUrl}`);\n\n      // \n      const response = await proxyFetch(modelsUrl, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.api_key}`,\n        },\n      });\n\n      console.log(` : ${response.status} ${response.statusText}`);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        errors.push(`${modelsUrl}: ${response.status} - ${errorText.substring(0, 100)}`);\n        console.log(` : ${response.status}`);\n        console.log(`: ${errorText.substring(0, 200)}`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      console.log(` : ${contentType}`);\n\n      if (!contentType || !contentType.includes('application/json')) {\n        const text = await response.text();\n        errors.push(`${modelsUrl}:  JSON  - ${text.substring(0, 100)}`);\n        console.log(`  JSON :`, text.substring(0, 200));\n        continue;\n      }\n\n      const data = await response.json();\n      console.log(' API :', JSON.stringify(data, null, 2));\n\n      // OpenAI  API : { data: [...] }\n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n          return models;\n        }\n      }\n\n      // \n      if (Array.isArray(data)) {\n        const models = data.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n          return models;\n        }\n      }\n\n      //  API  { models: [...] }\n      if (data.models && Array.isArray(data.models)) {\n        const models = data.models.map((model: any) => model.id || model.name || model).filter(Boolean);\n        console.log(`  ${models.length} :`, models);\n        if (models.length > 0) {\n          return models;\n        }\n      }\n\n      errors.push(`${modelsUrl}:  - ${JSON.stringify(data).substring(0, 100)}`);\n      console.log(' ');\n    } catch (e) {\n      const errMsg = (e as Error).message;\n      if (errMsg.includes('Failed to fetch') || errMsg.includes('CORS')) {\n        hasCorsError = true;\n      }\n      errors.push(`${modelsUrl}: ${errMsg}`);\n      console.log(` :`, e);\n      continue;\n    }\n  }\n\n  console.error(' :');\n  errors.forEach((err, i) => console.error(`  ${i + 1}. ${err}`));\n\n  let errorMessage =\n    ` API  ${possibleEndpoints.length} \\n\\n` +\n    `\\n${errors.join('\\n\\n')}\\n\\n` +\n    `\\n` +\n    `1. API ${baseUrl}\\n` +\n    `2. API Key \\n` +\n    `3.  API  /v1/models \\n`;\n\n  if (hasCorsError) {\n    errorMessage +=\n      `\\n  CORS \\n` +\n      ` API ${new URL(baseUrl).origin} CORS \\n` +\n      `\\n` +\n      `  Zeabur  CORS\\n` +\n      `  API  CORS \\n` +\n      `  API\\n\\n`;\n  }\n\n  errorMessage += ` API `;\n\n  throw new Error(errorMessage);\n}\n\n/**\n * \n * @param start_id \n * @param end_id \n * @returns \n */\nexport async function summarizeMessages(start_id: number, end_id: number): Promise<string> {\n  const settings = useSettingsStore().settings;\n\n  //  API endpoint\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  //  API  /chat/completions\n  const baseUrl = settings.api_endpoint.trim();\n  let apiUrl: string;\n  try {\n    apiUrl = normalizeApiEndpoint(baseUrl);\n    console.log(' :', baseUrl);\n    console.log('  API URL:', apiUrl);\n  } catch (e) {\n    throw new Error(`API : ${baseUrl}`);\n  }\n\n  //  URL\n  try {\n    new URL(apiUrl);\n  } catch (e) {\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  // \n  const messages: Array<{ role: string; message: string }> = [];\n  for (let i = start_id; i <= end_id; i++) {\n    const msg = getChatMessages(i);\n    if (msg.length > 0) {\n      messages.push(...msg);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  //  - \n  const summaryPrompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: summaryPrompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature,\n  });\n\n  //  OpenAI  API\n  let response;\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [\n          {\n            role: 'user',\n            content: summaryPrompt,\n          },\n        ],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n        top_p: settings.top_p,\n        presence_penalty: settings.presence_penalty,\n        frequency_penalty: settings.frequency_penalty,\n      }),\n    });\n  } catch (e) {\n    console.error('fetch :', e);\n    throw new Error(` API: ${(e as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    let errorDetails = '';\n\n    try {\n      const error = await response.json();\n      errorMessage = error.error?.message || error.message || errorMessage;\n      errorDetails = JSON.stringify(error, null, 2);\n    } catch (e) {\n      //  JSON\n      try {\n        errorDetails = await response.text();\n      } catch {}\n    }\n\n    // \n    let userFriendlyMessage = errorMessage;\n    if (response.status === 500) {\n      userFriendlyMessage = `API  (500)${errorMessage}\\n\\n\\n API \\n \\n `;\n    } else if (response.status === 429) {\n      userFriendlyMessage = `API  (429)`;\n    } else if (response.status === 401) {\n      userFriendlyMessage = `API  (401) API `;\n    } else if (response.status === 400) {\n      userFriendlyMessage = `API  (400)${errorMessage}`;\n    }\n\n    console.error(' API :', {\n      status: response.status,\n      statusText: response.statusText,\n      errorMessage,\n      errorDetails: errorDetails.substring(0, 500),\n    });\n\n    throw new Error(userFriendlyMessage);\n  }\n\n  const data = await response.json();\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n  return data.choices[0].message.content;\n}\n","import { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { ref, watch } from 'vue';\nimport { getChatIdSafe, getScriptIdSafe } from './utils';\n\n//  zod\nlet z: any;\ntry {\n  z = require('zod');\n} catch (e) {\n  console.warn('zod ');\n  // \n  z = {\n    object: (obj: any) => ({\n      parse: (data: any) => data,\n      default: (def: any) => ({ parse: (data: any) => data || def }),\n    }),\n    string: () => ({ default: (def: string) => ({ parse: (data: any) => data || def }) }),\n    number: () => ({ default: (def: number) => ({ parse: (data: any) => data || def }) }),\n    boolean: () => ({ default: (def: boolean) => ({ parse: (data: any) => data || def }) }),\n    array: (schema: any) => ({\n      default: (def: any[]) => ({ parse: (data: any) => (Array.isArray(data) ? data : def) }),\n    }),\n    prefault: (def: any) => ({ parse: (data: any) => data || def }),\n  };\n}\n\nconst Settings = z\n  .object({\n    api_provider: z.string().default('openai'), // 'openai' | 'gemini'\n    api_endpoint: z.string().default('https://api.openai.com/v1'), // base URL\n    api_key: z.string().default(''),\n    model: z.string().default('gpt-4o-mini'),\n    max_tokens: z.number().default(4000),\n    temperature: z.number().default(0.7),\n    top_p: z.number().default(1.0), //  (0-1)\n    presence_penalty: z.number().default(0.0), //  (-2.0 to 2.0)\n    frequency_penalty: z.number().default(0.0), //  (-2.0 to 2.0)\n    auto_summarize_enabled: z.boolean().default(false),\n    summarize_interval: z.number().default(50), // \n    start_message_id: z.number().default(0), // \n    end_message_id: z.number().default(0), // \n    table_start_message_id: z.number().default(0), // \n    table_end_message_id: z.number().default(0), // \n    summary_history: z\n      .array(\n        z.object({\n          start_id: z.number(),\n          end_id: z.number(),\n          content: z.string(),\n        }),\n      )\n      .default([]),\n  })\n  .prefault({});\n\n/**\n *  API  URL\n *  base URL /v1/chat/completions\n */\nexport function normalizeApiEndpoint(endpoint: string, path: string = '/chat/completions'): string {\n  if (!endpoint || endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const trimmed = endpoint.trim();\n\n  //  /chat/completions  /models\n  if (trimmed.includes('/chat/completions') || trimmed.includes('/models')) {\n    return trimmed;\n  }\n\n  // \n  let baseUrl = trimmed.endsWith('/') ? trimmed.slice(0, -1) : trimmed;\n\n  //  URL  /v1 /v1\n  if (!baseUrl.endsWith('/v1')) {\n    baseUrl = baseUrl + '/v1';\n  }\n\n  // \n  return baseUrl + path;\n}\n\nexport const useSettingsStore = defineStore('settings', () => {\n  // \n  const getScriptIdSafely = () => getScriptIdSafe();\n\n  // \n  const isLocalDebug = () => {\n    return typeof getVariables !== 'function' || !getScriptIdSafely();\n  };\n\n  // \n  const initSettings = () => {\n    const script_id = getScriptIdSafely();\n\n    //  localStorage\n    if (isLocalDebug()) {\n      console.warn('  localStorage ');\n      try {\n        const saved = localStorage.getItem('tavern_helper_settings');\n        if (saved) {\n          return ref(Settings.parse(JSON.parse(saved)));\n        }\n      } catch (e) {\n        console.warn(' localStorage :', e);\n      }\n      return ref(Settings.parse({}));\n    }\n\n    // \n    try {\n      return ref(Settings.parse(getVariables({ type: 'script', script_id })));\n    } catch (e) {\n      console.warn(':', e);\n      return ref(Settings.parse({}));\n    }\n  };\n\n  const settings = initSettings();\n\n  // \n  setTimeout(() => {\n    if (isLocalDebug()) {\n      console.log(' ');\n      return;\n    }\n\n    const script_id = getScriptIdSafely();\n    if (script_id) {\n      try {\n        const realVariables = getVariables({ type: 'script', script_id });\n        if (realVariables && Object.keys(realVariables).length > 0) {\n          settings.value = Settings.parse(realVariables);\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n    }\n  }, 200);\n\n  // \n  const saveImmediately = (new_settings: any) => {\n    //  localStorage\n    if (isLocalDebug()) {\n      try {\n        console.log('  localStorage:', klona(new_settings));\n        localStorage.setItem('tavern_helper_settings', JSON.stringify(klona(new_settings)));\n        console.log('  localStorage');\n      } catch (e) {\n        console.error('  localStorage :', e);\n      }\n      return;\n    }\n\n    // \n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return;\n    }\n    try {\n      console.log(' :', klona(new_settings));\n      insertOrAssignVariables(klona(new_settings), { type: 'script', script_id });\n      console.log(' ');\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n  };\n\n  // \n  let saveTimeout: number | null = null;\n  const debouncedSave = (new_settings: any) => {\n    if (saveTimeout) {\n      clearTimeout(saveTimeout);\n    }\n    saveTimeout = setTimeout(() => {\n      saveImmediately(new_settings);\n    }, 300); // 300ms \n  };\n\n  watch(settings, debouncedSave, { immediate: false, deep: true });\n\n  // \n  if (typeof window !== 'undefined') {\n    window.addEventListener('pagehide', () => {\n      console.log(' ');\n      saveImmediately(settings.value);\n    });\n  }\n\n  // \n  const saveSettings = () => {\n    //  localStorage\n    if (isLocalDebug()) {\n      try {\n        console.log('  localStorage:', klona(settings.value));\n        localStorage.setItem('tavern_helper_settings', JSON.stringify(klona(settings.value)));\n        window.toastr?.success('localStorage');\n        return true;\n      } catch (e) {\n        console.error('  localStorage :', e);\n        window.toastr?.error(': ' + (e as Error).message);\n        return false;\n      }\n    }\n\n    // \n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      window.toastr?.error('script_id ');\n      return false;\n    }\n    try {\n      console.log(' :', klona(settings.value));\n      insertOrAssignVariables(klona(settings.value), { type: 'script', script_id });\n      window.toastr?.success('');\n      return true;\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n      return false;\n    }\n  };\n\n  // \n  const reloadSettings = () => {\n    const script_id = getScriptIdSafely();\n    if (!script_id) {\n      console.warn('script_id  null');\n      return false;\n    }\n    try {\n      const realVariables = getVariables({ type: 'script', script_id });\n      if (realVariables && Object.keys(realVariables).length > 0) {\n        settings.value = Settings.parse(realVariables);\n        console.log(' :', settings.value);\n        window.toastr?.success('');\n        return true;\n      }\n    } catch (e) {\n      console.error(' :', e);\n      window.toastr?.error(': ' + (e as Error).message);\n    }\n    return false;\n  };\n\n  return {\n    settings,\n    saveSettings,\n    reloadSettings,\n  };\n});\n\n//  Store - \nexport const useSummaryHistoryStore = defineStore('summaryHistory', () => {\n  const addSummary = (start_id: number, end_id: number, content: string) => {\n    try {\n      //  ID\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        console.error(' ID');\n        window.toastr.error('');\n        return;\n      }\n\n      console.log(':', chat_id);\n\n      // \n      let chatHistory: Array<{ start_id: number; end_id: number; content: string }> = [];\n      try {\n        const chatData = getVariables({ type: 'chat' });\n        if (chatData && chatData.summary_history) {\n          chatHistory = Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n        }\n      } catch (e) {\n        console.warn(':', e);\n      }\n\n      // \n      chatHistory.unshift({\n        start_id,\n        end_id,\n        content,\n      });\n\n      //  50 \n      if (chatHistory.length > 50) {\n        chatHistory = chatHistory.slice(0, 50);\n      }\n\n      // \n      insertOrAssignVariables(klona({ summary_history: chatHistory }), { type: 'chat' });\n\n      console.log(':', chat_id);\n    } catch (error) {\n      console.error(':', error);\n      window.toastr.error(': ' + (error as Error).message);\n    }\n  };\n\n  const getSummaryHistory = (): Array<{ start_id: number; end_id: number; content: string }> => {\n    try {\n      const chat_id = getChatIdSafe();\n      if (!chat_id) {\n        return [];\n      }\n\n      const chatData = getVariables({ type: 'chat' });\n      if (chatData && chatData.summary_history) {\n        return Array.isArray(chatData.summary_history) ? chatData.summary_history : [];\n      }\n      return [];\n    } catch (e) {\n      console.warn(':', e);\n      return [];\n    }\n  };\n\n  return {\n    addSummary,\n    getSummaryHistory,\n  };\n});\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=6329201c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"cdbea3fc\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=6329201c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MvuBetaTab.vue?vue&type=style&index=0&id=6329201c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","$(() => {\n  // \n  setTimeout(() => {\n    let isAdding = false;\n\n    const addNavButton = () => {\n      // \n      if (isAdding) {\n        return;\n      }\n      isAdding = true;\n      try {\n        // \n        const possibleSelectors = [\n          '#top-bar', //  HTML \n          '#top-settings-holder', //  HTML \n          '#topBar',\n          '.topBar',\n          '#navbar',\n          '.navbar',\n          'header',\n          '.header',\n          '#header',\n          '.top_header',\n          '.navigation',\n        ];\n\n        let topBar: JQuery<HTMLElement> = $();\n        let foundSelector = '';\n\n        for (const selector of possibleSelectors) {\n          const found = $(selector);\n          if (found.length > 0) {\n            topBar = found;\n            foundSelector = selector;\n            console.log(`: ${selector}`);\n            break;\n          }\n        }\n\n        if (topBar.length === 0) {\n          console.log('500ms...');\n          setTimeout(addNavButton, 500);\n          return;\n        }\n\n        console.log(`: ${foundSelector}`);\n\n        // \n        const existingButton = $('#memoryNavButton');\n        if (existingButton.length > 0) {\n          console.log('mzrodyu');\n          existingButton.remove();\n        }\n\n        //  -  top-bar top-settings-holder\n        let targetContainer = topBar;\n        if (foundSelector === '#top-bar') {\n          const settingsHolder = $('#top-settings-holder');\n          if (settingsHolder.length > 0) {\n            targetContainer = settingsHolder;\n            console.log(' top-settings-holder ');\n          }\n        }\n\n        //  - \n        const navButton = $(\n          `<div id=\"memoryNavButton\" class=\"interactable\" style=\"\n            padding: 8px;\n            display: inline-flex;\n            align-items: center;\n            justify-content: center;\n            cursor: pointer;\n            color: inherit;\n            border-radius: 4px;\n            transition: background 0.2s;\n            position: relative;\n          \" title=\"mzrodyu\">\n            <span style=\"font-size: 24px\"></span>\n          </div>`,\n        );\n\n        // \n        console.log(':', targetContainer[0]?.id || '');\n        console.log('HTML:', targetContainer[0]?.outerHTML?.substring(0, 300));\n\n        //  targetContainer  top-settings-holder\n        if (targetContainer[0]?.id === 'top-settings-holder') {\n          console.log(' top-settings-holder ');\n          const firstChild = targetContainer.children().first();\n          if (firstChild.length > 0) {\n            navButton.insertBefore(firstChild);\n          } else {\n            targetContainer.prepend(navButton);\n          }\n        } else {\n          // \n          console.log('');\n          targetContainer.prepend(navButton);\n        }\n\n        //  - \n        navButton.on('click', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n\n          console.log('mzrodyu');\n\n          // \n          const panel = $('#memoryManagementPanel');\n          if (panel.length > 0) {\n            if (panel.is(':visible')) {\n              panel.fadeOut(200);\n            } else {\n              panel.fadeIn(200);\n            }\n          } else {\n            toastr.error('');\n          }\n        });\n\n        // \n        navButton\n          .on('mouseenter', function () {\n            $(this).css('background', 'rgba(255, 255, 255, 0.1)');\n          })\n          .on('mouseleave', function () {\n            $(this).css('background', 'transparent');\n          });\n\n        console.log('mzrodyu:', targetContainer[0]?.id || '');\n        console.log(':', navButton[0]?.parentElement?.children?.[0]?.className || '');\n        console.log(':', navButton[0]);\n        console.log(':', $('#memoryManagementPanel').length);\n        isAdding = false;\n      } catch (error) {\n        console.error(':', error);\n        isAdding = false;\n        setTimeout(addNavButton, 500);\n      }\n    };\n\n    // \n    addNavButton();\n\n    // 2\n    setInterval(() => {\n      const button = $('#memoryNavButton');\n      if (button.length === 0 && !isAdding) {\n        console.log('...');\n        addNavButton();\n      }\n    }, 2000);\n\n    // UI\n    if (typeof eventOn === 'function') {\n      try {\n        // \n        eventOn(tavern_events.CHAT_CHANGED, () => {\n          console.log('...');\n          setTimeout(() => {\n            const button = $('#memoryNavButton');\n            if (button.length === 0 && !isAdding) {\n              console.log('...');\n              addNavButton();\n            }\n          }, 500);\n        });\n      } catch (e) {\n        console.log(':', e);\n      }\n    }\n  }, 300);\n});\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=22fa8ffd&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"eb638316\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=22fa8ffd&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./StatusBarGenerator.vue?vue&type=style&index=0&id=22fa8ffd&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=e3e6a546&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"59403083\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=e3e6a546&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ProgressDialog.vue?vue&type=style&index=0&id=e3e6a546&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=c12ec546&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"273d6f03\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=c12ec546&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AIGenerateDialog.vue?vue&type=style&index=0&id=c12ec546&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `button[data-v-7890f262]:disabled{cursor:not-allowed !important}button[data-v-7890f262]:not(:disabled):hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}div[data-v-7890f262]::-webkit-scrollbar{width:8px}div[data-v-7890f262]::-webkit-scrollbar-track{background:#1a1a1a}div[data-v-7890f262]::-webkit-scrollbar-thumb{background:#ffc107;border-radius:4px}div[data-v-7890f262]::-webkit-scrollbar-thumb:hover{background:#ffb300}.progress-bar[data-v-7890f262]{position:absolute;top:0;left:0;height:100%;width:100%;background:linear-gradient(90deg,#ffc107 0%,#ffb300 50%,#ffc107 100%);background-size:200% 100%;animation:progressMove-7890f262 2s linear infinite;box-shadow:0 0 10px rgba(255,193,7,0.5)}@keyframes progressMove-7890f262{0%{background-position:-200% 0}100%{background-position:200% 0}}@keyframes pulse-7890f262{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.7;transform:scale(1.1)}}.icon-spin[data-v-7890f262]{animation:spin-7890f262 1s linear infinite}@keyframes spin-7890f262{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/AIModifyDialog.vue\"],\"names\":[],\"mappings\":\"AAqKA,iCACE,6BACF,CAEA,6CACE,0BAA2B,CAC3B,qCACF,CAGA,wCACE,SACF,CAEA,8CACE,kBACF,CAEA,8CACE,kBAAmB,CACnB,iBACF,CAEA,oDACE,kBACF,CAGA,+BACE,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,WAAY,CACZ,UAAW,CACX,qEAAyE,CACzE,yBAA0B,CAC1B,kDAA0C,CAC1C,uCACF,CAEA,iCACE,GACE,2BACF,CACA,KACE,0BACF,CACF,CAGA,0BACE,QAEE,SAAU,CACV,kBACF,CACA,IACE,WAAY,CACZ,oBACF,CACF,CAGA,4BACE,0CACF,CAEA,yBACE,KACE,sBACF,CACA,GACE,wBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    v-if=\\\"show\\\"\\n    @click.self=\\\"$emit('close')\\\"\\n    style=\\\"\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.8);\\n      z-index: 1000000;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 20px;\\n    \\\"\\n  >\\n    <div\\n      style=\\\"\\n        background: #2a2a2a;\\n        border: 2px solid #ffc107;\\n        border-radius: 12px;\\n        padding: 30px;\\n        max-width: 600px;\\n        width: 100%;\\n        max-height: 80vh;\\n        overflow-y: auto;\\n      \\\"\\n      @click.stop\\n    >\\n      <h3 style=\\\"color: #ffc107; margin: 0 0 20px 0\\\">\\n        <i class=\\\"fa-solid fa-edit\\\"></i>\\n        {{ title || 'AI ' }}\\n      </h3>\\n      <p style=\\\"color: #888; margin: 0 0 15px 0; line-height: 1.6\\\">\\n        {{ description || 'AI ' }}\\n      </p>\\n      <ul\\n        v-if=\\\"examples && examples.length > 0\\\"\\n        style=\\\"color: #888; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.8\\\"\\n      >\\n        <li v-for=\\\"(example, index) in examples\\\" :key=\\\"index\\\">{{ example }}</li>\\n      </ul>\\n      <textarea\\n        v-model=\\\"localInstruction\\\"\\n        :placeholder=\\\"placeholder || '...'\\\"\\n        style=\\\"\\n          width: 100%;\\n          min-height: 150px;\\n          background: #1a1a1a;\\n          color: #e0e0e0;\\n          border: 1px solid #444;\\n          border-radius: 4px;\\n          padding: 12px;\\n          font-size: 14px;\\n          margin-bottom: 20px;\\n          resize: vertical;\\n          box-sizing: border-box;\\n        \\\"\\n      ></textarea>\\n      <!--  -->\\n      <div\\n        v-if=\\\"isModifying\\\"\\n        style=\\\"margin-bottom: 20px; background: #1a1a1a; border-radius: 8px; padding: 15px; border: 1px solid #444\\\"\\n      >\\n        <div style=\\\"display: flex; align-items: center; gap: 12px; margin-bottom: 10px\\\">\\n          <i\\n            class=\\\"fa-solid fa-wand-magic-sparkles\\\"\\n            style=\\\"color: #ffc107; font-size: 18px; animation: pulse 1.5s infinite\\\"\\n          ></i>\\n          <span style=\\\"color: #ffc107; font-weight: 600; font-size: 14px\\\">AI ...</span>\\n        </div>\\n        <div\\n          style=\\\"width: 100%; height: 6px; background: #333; border-radius: 3px; overflow: hidden; position: relative\\\"\\n        >\\n          <div class=\\\"progress-bar\\\"></div>\\n        </div>\\n        <p style=\\\"color: #888; font-size: 12px; margin: 8px 0 0 0; text-align: center\\\"></p>\\n      </div>\\n\\n      <div style=\\\"display: flex; gap: 12px\\\">\\n        <button\\n          @click=\\\"handleConfirm\\\"\\n          :disabled=\\\"!localInstruction || isModifying\\\"\\n          style=\\\"\\n            flex: 1;\\n            background: #ffc107;\\n            color: #000;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n            position: relative;\\n            overflow: hidden;\\n          \\\"\\n          :style=\\\"{ opacity: !localInstruction || isModifying ? 0.5 : 1 }\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" :class=\\\"{ 'icon-spin': isModifying }\\\"></i>\\n          {{ isModifying ? '...' : '' }}\\n        </button>\\n        <button\\n          @click=\\\"$emit('close')\\\"\\n          :disabled=\\\"isModifying\\\"\\n          style=\\\"\\n            flex: 1;\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 12px 24px;\\n            border-radius: 6px;\\n            cursor: pointer;\\n            font-size: 14px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n          \\\"\\n          :style=\\\"{ opacity: isModifying ? 0.5 : 1 }\\\"\\n        >\\n          \\n        </button>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref, watch } from 'vue';\\n\\nconst props = defineProps<{\\n  show: boolean;\\n  title?: string;\\n  description?: string;\\n  examples?: string[];\\n  placeholder?: string;\\n  isModifying?: boolean;\\n}>();\\n\\nconst emit = defineEmits<{\\n  (e: 'close'): void;\\n  (e: 'confirm', instruction: string): void;\\n}>();\\n\\nconst localInstruction = ref('');\\n\\n// \\nwatch(\\n  () => props.show,\\n  newVal => {\\n    if (newVal) {\\n      localInstruction.value = '';\\n    }\\n  },\\n);\\n\\nconst handleConfirm = () => {\\n  if (localInstruction.value && !props.isModifying) {\\n    emit('confirm', localInstruction.value);\\n  }\\n};\\n</script>\\n\\n<style scoped>\\nbutton:disabled {\\n  cursor: not-allowed !important;\\n}\\n\\nbutton:not(:disabled):hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n/*  */\\ndiv::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\ndiv::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n}\\n\\ndiv::-webkit-scrollbar-thumb {\\n  background: #ffc107;\\n  border-radius: 4px;\\n}\\n\\ndiv::-webkit-scrollbar-thumb:hover {\\n  background: #ffb300;\\n}\\n\\n/*  */\\n.progress-bar {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n  width: 100%;\\n  background: linear-gradient(90deg, #ffc107 0%, #ffb300 50%, #ffc107 100%);\\n  background-size: 200% 100%;\\n  animation: progressMove 2s linear infinite;\\n  box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);\\n}\\n\\n@keyframes progressMove {\\n  0% {\\n    background-position: -200% 0;\\n  }\\n  100% {\\n    background-position: 200% 0;\\n  }\\n}\\n\\n/*  */\\n@keyframes pulse {\\n  0%,\\n  100% {\\n    opacity: 1;\\n    transform: scale(1);\\n  }\\n  50% {\\n    opacity: 0.7;\\n    transform: scale(1.1);\\n  }\\n}\\n\\n/*  */\\n.icon-spin {\\n  animation: spin 1s linear infinite;\\n}\\n\\n@keyframes spin {\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"edc8d058\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","module.exports = z;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.help-tab[data-v-69c7c08e] ::-webkit-scrollbar{width:8px}.help-tab[data-v-69c7c08e] ::-webkit-scrollbar-track{background:#2a2a2a;border-radius:4px}.help-tab[data-v-69c7c08e] ::-webkit-scrollbar-thumb{background:#4a9eff;border-radius:4px}.help-tab[data-v-69c7c08e] ::-webkit-scrollbar-thumb:hover{background:#3a8edf}.help-tab ul[data-v-69c7c08e]{list-style-type:none;position:relative}.help-tab ul li[data-v-69c7c08e]{position:relative;padding-left:20px;margin-bottom:8px}.help-tab ul li[data-v-69c7c08e]::before{content:'';position:absolute;left:0;color:#4a9eff;font-weight:bold}.help-tab a[data-v-69c7c08e]{transition:color 0.2s}.help-tab a[data-v-69c7c08e]:hover{color:#3a8edf !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/HelpTab.vue\"],\"names\":[],\"mappings\":\"AA0pBA,+CACE,SACF,CAEA,qDACE,kBAAmB,CACnB,iBACF,CAEA,qDACE,kBAAmB,CACnB,iBACF,CAEA,2DACE,kBACF,CAEA,8BACE,oBAAqB,CACrB,iBACF,CAEA,iCACE,iBAAkB,CAClB,iBAAkB,CAClB,iBACF,CAEA,yCACE,WAAY,CACZ,iBAAkB,CAClB,MAAO,CACP,aAAc,CACd,gBACF,CAEA,6BACE,qBACF,CAEA,mCACE,wBACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"help-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        text-align: center;\\n      \\\"\\n    >\\n      <div style=\\\"font-size: 48px; margin-bottom: 10px\\\"></div>\\n      <h2 style=\\\"margin: 0 0 10px 0; color: #4a9eff; font-size: 24px; font-weight: 600\\\">mzrodyu</h2>\\n      <div style=\\\"color: #888; font-size: 14px; margin-bottom: 15px\\\"> v1.33</div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          margin-top: 20px;\\n          padding: 15px 20px;\\n          background: rgba(220, 53, 69, 0.1);\\n          border: 1px solid rgba(220, 53, 69, 0.3);\\n          border-radius: 8px;\\n          text-align: left;\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; align-items: center; gap: 8px; margin-bottom: 10px\\\">\\n          <i class=\\\"fa-solid fa-shield-halved\\\" style=\\\"color: #dc3545; font-size: 16px\\\"></i>\\n          <span style=\\\"color: #dc3545; font-weight: 600; font-size: 14px\\\"></span>\\n        </div>\\n        <div style=\\\"color: #e0e0e0; font-size: 13px; line-height: 1.6\\\">\\n          <div style=\\\"margin-bottom: 5px\\\"> <strong style=\\\"color: #ffc107\\\">/</strong></div>\\n          <div style=\\\"margin-bottom: 5px\\\"> <strong style=\\\"color: #dc3545\\\"></strong></div>\\n          <div style=\\\"margin-bottom: 5px\\\"> </div>\\n          <div> <strong style=\\\"color: #dc3545\\\"></strong></div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        cursor: pointer;\\n        user-select: none;\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        position: relative;\\n        overflow: hidden;\\n        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n      \\\"\\n      @click=\\\"expandedSections.usage = !expandedSections.usage\\\"\\n      @mouseenter=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n      \\\"\\n      @mouseleave=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'none';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          position: relative;\\n          z-index: 1;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px;\\n          font-weight: 600;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-book-open\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <i\\n        :class=\\\"expandedSections.usage ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n        class=\\\"fa-solid\\\"\\n        style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n      ></i>\\n    </div>\\n\\n    <div v-show=\\\"expandedSections.usage\\\" style=\\\"padding: 0 10px 20px 10px\\\">\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #3a3a3a;\\n          border-radius: 8px;\\n          padding: 20px;\\n          color: #e0e0e0;\\n          line-height: 1.8;\\n        \\\"\\n      >\\n        <h4 style=\\\"color: #4a9eff; margin-top: 0; margin-bottom: 15px; font-size: 16px\\\"> </h4>\\n        <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n          <li><strong></strong>/</li>\\n          <li><strong></strong> AI </li>\\n          <li><strong></strong> JSON </li>\\n          <li><strong>MVU Beta</strong>$meta </li>\\n          <li><strong></strong></li>\\n        </ul>\\n\\n        <h4 style=\\\"color: #4a9eff; margin-top: 25px; margin-bottom: 15px; font-size: 16px\\\"> </h4>\\n        <div\\n          style=\\\"\\n            margin-bottom: 15px;\\n            padding: 12px 15px;\\n            background: rgba(220, 53, 69, 0.1);\\n            border-left: 3px solid #dc3545;\\n            border-radius: 4px;\\n          \\\"\\n        >\\n          <div style=\\\"color: #dc3545; font-weight: 600; margin-bottom: 8px\\\"> API </div>\\n          <div style=\\\"font-size: 13px; color: #e0e0e0; line-height: 1.6\\\">\\n            <div style=\\\"margin-bottom: 8px\\\">\\n              <strong></strong>\\n              <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n                <li><code>https://api.openai.com</code>   <code>/v1</code></li>\\n                <li><code>https://api.openai.com/v1</code>  </li>\\n                <li><code>https://your-proxy.com/v1/chat/completions</code>  </li>\\n              </ul>\\n            </div>\\n            <div style=\\\"margin-bottom: 5px\\\">\\n              <strong>OpenAI </strong\\n              ><code style=\\\"background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px\\\"\\n                >https://api.openai.com</code\\n              >\\n            </div>\\n            <div>\\n              <strong>Gemini AI Studio</strong\\n              ><code style=\\\"background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px\\\"\\n                >https://generativelanguage.googleapis.com/v1beta/openai/</code\\n              >\\n            </div>\\n          </div>\\n        </div>\\n        <ul style=\\\"margin: 5px 0; padding-left: 20px\\\">\\n          <li><strong></strong>      </li>\\n          <li><strong></strong>\\\"\\\" API</li>\\n          <li><strong></strong> 20-30 </li>\\n        </ul>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        cursor: pointer;\\n        user-select: none;\\n        display: flex;\\n        align-items: center;\\n        justify-content: space-between;\\n        padding: 20px 28px;\\n        background: linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid rgba(255, 255, 255, 0.06);\\n        box-shadow:\\n          0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n        position: relative;\\n        overflow: hidden;\\n        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n      \\\"\\n      @click=\\\"expandedSections.changelog = !expandedSections.changelog\\\"\\n      @mouseenter=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\\n      \\\"\\n      @mouseleave=\\\"\\n        ($event.currentTarget as HTMLElement).style.background =\\n          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\\n        ($event.currentTarget as HTMLElement).style.transform = 'none';\\n        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          position: relative;\\n          z-index: 1;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px;\\n          font-weight: 600;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-clock-rotate-left\\\" style=\\\"color: #28a745; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <i\\n        :class=\\\"expandedSections.changelog ? 'fa-chevron-up' : 'fa-chevron-down'\\\"\\n        class=\\\"fa-solid\\\"\\n        style=\\\"color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s\\\"\\n      ></i>\\n    </div>\\n\\n    <div v-show=\\\"expandedSections.changelog\\\" style=\\\"padding: 0 10px 20px 10px\\\">\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #3a3a3a;\\n          border-radius: 8px;\\n          padding: 20px;\\n          color: #e0e0e0;\\n          line-height: 1.8;\\n        \\\"\\n      >\\n        <!-- v1.33 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.33</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-06</span>\\n          </div>\\n          <ul class=\\\"update-list\\\">\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\">AI </li>\\n            <li class=\\\"update-item\\\">AI </li>\\n            <li class=\\\"update-item\\\"> AI AIHTML</li>\\n            <li class=\\\"update-item\\\"></li>\\n            <li class=\\\"update-item\\\"> STScript JSON </li>\\n            <li class=\\\"update-item\\\"></li>\\n          </ul>\\n        </div>\\n\\n        <!-- v1.32 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.32</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-06</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.31 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.31</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-05</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li>AI </li>\\n              <li> AI  XML </li>\\n            </ul>\\n          </div>\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n              <li> AI  API </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.27 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.27</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-05</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> MVU Beta $meta </li>\\n              <li> JSON </li>\\n              <li> ABO </li>\\n            </ul>\\n          </div>\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #6366f1; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI  max_tokens  temperature</li>\\n              <li>MVU Beta </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.26 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #64748b 0%, #475569 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.26</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-02</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.23 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.23</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-11-02</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #10b981; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI </li>\\n              <li> 50 </li>\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.15 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.15</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-31</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li> AI </li>\\n              <li></li>\\n              <li> AI </li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.2 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.2</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-30</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li>AI </li>\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.05 -->\\n        <div style=\\\"margin-bottom: 25px\\\">\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: #4a9eff;\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.05</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-30</span>\\n          </div>\\n\\n          <div style=\\\"margin-bottom: 15px\\\">\\n            <div style=\\\"color: #28a745; font-weight: 600; margin-bottom: 8px\\\"> </div>\\n            <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n              <li></li>\\n            </ul>\\n          </div>\\n        </div>\\n\\n        <!-- v1.00 -->\\n        <div>\\n          <div\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                background: #888;\\n                color: white;\\n                padding: 4px 10px;\\n                border-radius: 12px;\\n                font-size: 13px;\\n                font-weight: 600;\\n              \\\"\\n              >v1.00</span\\n            >\\n            <span style=\\\"color: #888; font-size: 13px\\\">2025-10-29</span>\\n          </div>\\n\\n          <ul style=\\\"margin: 5px 0; padding-left: 20px; font-size: 14px\\\">\\n            <li> </li>\\n            <li>//</li>\\n          </ul>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      style=\\\"\\n        padding: 15px 20px;\\n        background: rgba(30, 30, 30, 0.5);\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        text-align: center;\\n        color: #888;\\n        font-size: 13px;\\n      \\\"\\n    >\\n      <div style=\\\"margin-bottom: 8px\\\">Made with <span style=\\\"color: #dc3545\\\"></span> by mzrodyu</div>\\n      <div style=\\\"font-size: 12px\\\">\\n        \\n        <a\\n          href=\\\"https://github.com/SillyTavern/SillyTavern\\\"\\n          target=\\\"_blank\\\"\\n          style=\\\"color: #4a9eff; text-decoration: none\\\"\\n          >SillyTavern</a\\n        >\\n        \\n        <a\\n          href=\\\"https://n0vi028.github.io/JS-Slash-Runner-Doc/\\\"\\n          target=\\\"_blank\\\"\\n          style=\\\"color: #4a9eff; text-decoration: none\\\"\\n          >Tavern Helper</a\\n        >\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\n\\n// \\nconst expandedSections = ref({\\n  usage: false,\\n  changelog: false,\\n});\\n</script>\\n\\n<style scoped>\\n.help-tab ::-webkit-scrollbar {\\n  width: 8px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-track {\\n  background: #2a2a2a;\\n  border-radius: 4px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-thumb {\\n  background: #4a9eff;\\n  border-radius: 4px;\\n}\\n\\n.help-tab ::-webkit-scrollbar-thumb:hover {\\n  background: #3a8edf;\\n}\\n\\n.help-tab ul {\\n  list-style-type: none;\\n  position: relative;\\n}\\n\\n.help-tab ul li {\\n  position: relative;\\n  padding-left: 20px;\\n  margin-bottom: 8px;\\n}\\n\\n.help-tab ul li::before {\\n  content: '';\\n  position: absolute;\\n  left: 0;\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.help-tab a {\\n  transition: color 0.2s;\\n}\\n\\n.help-tab a:hover {\\n  color: #3a8edf !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-tab[data-v-170043aa]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-170043aa]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-170043aa]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.count-badge[data-v-170043aa]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-170043aa]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-170043aa]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-170043aa]{margin:10px 0;font-size:14px}.empty-state small[data-v-170043aa]{color:#666;font-size:12px}.history-list[data-v-170043aa]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-170043aa]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-170043aa]:hover{border-color:#4a4a4a}.history-header[data-v-170043aa]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-170043aa]:hover{background:#2a2a2a}.history-info[data-v-170043aa]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-170043aa]{color:#4a9eff;font-weight:bold}.history-range[data-v-170043aa]{color:#888;font-size:12px}.expand-icon[data-v-170043aa]{color:#888;font-size:12px}.history-content[data-v-170043aa]{padding:15px;background:#2a2a2a}.history-actions[data-v-170043aa]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-170043aa]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-170043aa]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-170043aa]:hover{background:#ff4444;border-color:#ff4444;color:white}.table-display[data-v-170043aa]{margin-top:15px;overflow-x:auto;max-height:400px;overflow-y:auto;border-radius:6px;background:#1a1a1a}.table-display table[data-v-170043aa]{width:100%;font-size:12px;border-collapse:collapse}.table-display th[data-v-170043aa],.table-display td[data-v-170043aa]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;padding:8px;border:1px solid #444}.table-display th[data-v-170043aa]{background:#2a2a2a;font-weight:bold;color:#fff}.table-display td[data-v-170043aa]{color:#e0e0e0}.copy-button:hover .shimmer-effect[data-v-170043aa],.delete-button:hover .shimmer-effect[data-v-170043aa]{left:100%}.copy-button[data-v-170043aa]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.delete-button[data-v-170043aa]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(255,107,107,0.4)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/TableTab.vue\"],\"names\":[],\"mappings\":\"AAomBA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,gCACE,eAAgB,CAChB,eAAgB,CAChB,gBAAiB,CACjB,eAAgB,CAChB,iBAAkB,CAClB,kBACF,CAEA,sCACE,UAAW,CACX,cAAe,CACf,wBACF,CAEA,sEAEE,kBAAmB,CACnB,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CAChB,WAAY,CACZ,qBACF,CAEA,mCACE,kBAAmB,CACnB,gBAAiB,CACjB,UACF,CAEA,mCACE,aACF,CAGA,0GAEE,SACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,sCACE,0BAA2B,CAC3B,2CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"table-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <span\\n        v-if=\\\"table_history.length > 0\\\"\\n        class=\\\"count-badge\\\"\\n        style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >{{ table_history.length }} </span\\n      >\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"table_history && table_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in table_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleTableExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{\\n            isTableExpanded(index) ? '' : ''\\n          }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isTableExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"\\n              display: flex;\\n              gap: 10px;\\n              margin-bottom: 12px;\\n              padding-bottom: 8px;\\n              border-bottom: 1px solid #3a3a3a;\\n              flex-wrap: wrap;\\n            \\\"\\n          >\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyTable(item)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"delete-button\\\"\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                font-weight: 600;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 6px;\\n                box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"deleteTable(index)\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 12px\\\"></i> \\n            </button>\\n          </div>\\n          <div class=\\\"table-display\\\" style=\\\"overflow-x: auto; border-radius: 6px; border: 1px solid #3a3a3a\\\">\\n            <table style=\\\"width: 100%; border-collapse: collapse; background: #1a1a1a\\\">\\n              <thead style=\\\"background: #2a2a2a\\\">\\n                <tr>\\n                  <th\\n                    v-for=\\\"(header, idx) in item.headers\\\"\\n                    :key=\\\"idx\\\"\\n                    style=\\\"\\n                      padding: 12px 16px;\\n                      text-align: left;\\n                      font-weight: bold;\\n                      color: #fff;\\n                      border-bottom: 2px solid #3a3a3a;\\n                      border-right: 1px solid #3a3a3a;\\n                    \\\"\\n                  >\\n                    {{ header }}\\n                  </th>\\n                </tr>\\n              </thead>\\n              <tbody>\\n                <tr v-for=\\\"(row, rowIdx) in item.data\\\" :key=\\\"rowIdx\\\" style=\\\"border-bottom: 1px solid #3a3a3a\\\">\\n                  <td\\n                    v-for=\\\"(cell, cellIdx) in row\\\"\\n                    :key=\\\"cellIdx\\\"\\n                    style=\\\"padding: 10px 16px; color: #e0e0e0; border-right: 1px solid #3a3a3a\\\"\\n                  >\\n                    {{ cell }}\\n                  </td>\\n                </tr>\\n              </tbody>\\n            </table>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-table\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { getChatIdSafe } from '../utils';\\n\\n// \\nconst table_history = ref<Array<{ start_id: number; end_id: number; headers: string[]; data: string[][] }>>([]);\\nconst tableExpandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshTableHistory = () => {\\n  try {\\n    const chat_id = getChatIdSafe();\\n    if (!chat_id) {\\n      console.warn('ID');\\n      table_history.value = [];\\n      return;\\n    }\\n\\n    const chat_vars = getVariables({ type: 'chat' });\\n    console.log(':', chat_vars);\\n    console.log(':', chat_vars.table_history);\\n\\n    table_history.value = chat_vars.table_history || [];\\n    console.log(':', table_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    table_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleTableExpanded = (index: number) => {\\n  const current = tableExpandedState.value.get(index) || false;\\n  tableExpandedState.value.set(index, !current);\\n};\\n\\nconst isTableExpanded = (index: number) => {\\n  return tableExpandedState.value.get(index) || false;\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copyTable = (tableItem: { headers: string[]; data: string[][] }) => {\\n  try {\\n    // TSV\\n    const tsv = [tableItem.headers.join('\\\\t'), ...tableItem.data.map(row => row.join('\\\\t'))].join('\\\\n');\\n    copyToClipboard(tsv, '');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('');\\n  }\\n};\\n\\n// \\nconst deleteTable = (index: number) => {\\n  if (confirm('')) {\\n    table_history.value.splice(index, 1);\\n    const chat_id = getChatIdSafe();\\n    if (chat_id) {\\n      insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    }\\n  }\\n};\\n\\n// \\nrefreshTableHistory();\\n</script>\\n\\n<style scoped>\\n.table-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.table-display {\\n  margin-top: 15px;\\n  overflow-x: auto;\\n  max-height: 400px;\\n  overflow-y: auto;\\n  border-radius: 6px;\\n  background: #1a1a1a;\\n}\\n\\n.table-display table {\\n  width: 100%;\\n  font-size: 12px;\\n  border-collapse: collapse;\\n}\\n\\n.table-display th,\\n.table-display td {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  max-width: 200px;\\n  padding: 8px;\\n  border: 1px solid #444;\\n}\\n\\n.table-display th {\\n  background: #2a2a2a;\\n  font-weight: bold;\\n  color: #fff;\\n}\\n\\n.table-display td {\\n  color: #e0e0e0;\\n}\\n\\n/*  */\\n.copy-button:hover .shimmer-effect,\\n.delete-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.delete-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tools-tab[data-v-14fcd832]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-14fcd832]{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;background:linear-gradient(135deg,#2a2a2a 0%,#3a3a3a 100%);border-radius:8px;cursor:pointer;transition:all 0.3s ease;margin-bottom:15px;border:1px solid #3a3a3a}.section-header[data-v-14fcd832]:hover{background:linear-gradient(135deg,#3a3a3a 0%,#4a4a4a 100%);transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}.section-header-anti-cliche[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(255,107,107,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(255,107,107,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-anti-cliche[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(255,107,107,0.2) 0%,rgba(238,90,36,0.2) 100%) !important;border-color:rgba(255,107,107,0.5) !important;box-shadow:0 4px 16px rgba(255,107,107,0.3),0 0 0 1px rgba(255,107,107,0.2) inset !important;transform:translateY(-2px) !important}.section-header-worldbook[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(255,193,7,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(255,193,7,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-worldbook[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(255,193,7,0.2) 0%,rgba(255,152,0,0.2) 100%) !important;border-color:rgba(255,193,7,0.5) !important;box-shadow:0 4px 16px rgba(255,193,7,0.3),0 0 0 1px rgba(255,193,7,0.2) inset !important;transform:translateY(-2px) !important}.section-header-character[data-v-14fcd832]{background:linear-gradient(135deg,rgba(42,42,42,0.95) 0%,rgba(58,58,58,0.95) 100%) !important;border:1px solid rgba(23,162,184,0.3) !important;box-shadow:0 2px 8px rgba(0,0,0,0.2),0 0 0 1px rgba(23,162,184,0.1) inset !important;backdrop-filter:blur(10px)}.section-header-character[data-v-14fcd832]:hover{background:linear-gradient(135deg,rgba(23,162,184,0.2) 0%,rgba(19,132,150,0.2) 100%) !important;border-color:rgba(23,162,184,0.5) !important;box-shadow:0 4px 16px rgba(23,162,184,0.3),0 0 0 1px rgba(23,162,184,0.2) inset !important;transform:translateY(-2px) !important}.tool-section-anti-cliche[data-v-14fcd832],.tool-section-worldbook[data-v-14fcd832],.tool-section-character[data-v-14fcd832]{margin-bottom:20px;border-radius:12px;overflow:hidden;background:rgba(26,26,26,0.5);backdrop-filter:blur(5px)}.tool-content[data-v-14fcd832]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:8px;padding:20px;margin-bottom:20px}.tool-instructions[data-v-14fcd832]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.form-group[data-v-14fcd832]{margin-bottom:15px}.button-group[data-v-14fcd832]{display:flex;gap:12px;margin-bottom:20px}.output-section[data-v-14fcd832]{margin-top:20px}.output-content[data-v-14fcd832]{background:#1e1e1e;border:1px solid #3a3a3a;border-radius:6px;padding:15px;color:#e0e0e0;font-size:13px;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;max-height:300px;overflow-y:auto}.output-actions[data-v-14fcd832]{margin-top:12px;display:flex;gap:12px}.process-button[data-v-14fcd832],.clear-button[data-v-14fcd832],.generate-button[data-v-14fcd832],.copy-button[data-v-14fcd832]{position:relative;overflow:hidden;transition:all 0.3s ease}.process-button[data-v-14fcd832]:hover:not(:disabled),.clear-button[data-v-14fcd832]:hover:not(:disabled),.generate-button[data-v-14fcd832]:hover:not(:disabled),.copy-button[data-v-14fcd832]:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.3)}.copy-button[data-v-14fcd832]:hover{background:#218838 !important}.tool-instructions[data-v-14fcd832]{background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:12px;color:#ccc;font-size:12px;margin-bottom:15px}.process-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.clear-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.generate-button:hover:not(:disabled) .shimmer-effect[data-v-14fcd832],.copy-button:hover .shimmer-effect[data-v-14fcd832]{left:100%}.process-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,0.4)}.clear-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(255,107,107,0.4)}.generate-button[data-v-14fcd832]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(23,162,184,0.4)}.copy-button[data-v-14fcd832]:hover{transform:translateY(-1px);box-shadow:0 5px 15px rgba(40,167,69,0.4)}.process-button[data-v-14fcd832]:disabled,.clear-button[data-v-14fcd832]:disabled,.generate-button[data-v-14fcd832]:disabled{opacity:0.6;cursor:not-allowed;transform:none}.process-button[data-v-14fcd832]:disabled:hover,.clear-button[data-v-14fcd832]:disabled:hover,.generate-button[data-v-14fcd832]:disabled:hover{transform:none;box-shadow:none}.output-content[data-v-14fcd832]::-webkit-scrollbar{width:6px}.output-content[data-v-14fcd832]::-webkit-scrollbar-track{background:#1a1a1a;border-radius:3px}.output-content[data-v-14fcd832]::-webkit-scrollbar-thumb{background:#3a3a3a;border-radius:3px}.output-content[data-v-14fcd832]::-webkit-scrollbar-thumb:hover{background:#4a4a4a}@media (max-width:768px){.button-group[data-v-14fcd832]{flex-direction:column}.output-actions[data-v-14fcd832]{flex-direction:column}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ToolsTab.vue\"],\"names\":[],\"mappings\":\"AAqqHA,4BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,iBAAkB,CAClB,0DAA6D,CAC7D,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,kBAAmB,CACnB,wBACF,CAEA,uCACE,0DAA6D,CAC7D,0BAA2B,CAC3B,qCACF,CAGA,6CACE,6FAAsG,CACtG,iDAAqD,CACrD,qFAEqD,CACrD,0BACF,CAEA,mDACE,+FAAwG,CACxG,6CAAiD,CACjD,4FAEqD,CACrD,qCACF,CAGA,2CACE,6FAAsG,CACtG,+CAAmD,CACnD,mFAEmD,CACnD,0BACF,CAEA,iDACE,6FAAsG,CACtG,2CAA+C,CAC/C,wFAEmD,CACnD,qCACF,CAGA,2CACE,6FAAsG,CACtG,gDAAoD,CACpD,oFAEoD,CACpD,0BACF,CAEA,iDACE,+FAAwG,CACxG,4CAAgD,CAChD,0FAEoD,CACpD,qCACF,CAGA,6HAGE,kBAAmB,CACnB,kBAAmB,CACnB,eAAgB,CAChB,6BAAiC,CACjC,yBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,kBACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAEA,6BACE,kBACF,CAEA,+BACE,YAAa,CACb,QAAS,CACT,kBACF,CAEA,iCACE,eACF,CAEA,iCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,oBAAqB,CACrB,gBAAiB,CACjB,eACF,CAEA,iCACE,eAAgB,CAChB,YAAa,CACb,QACF,CAGA,gIAIE,iBAAkB,CAClB,eAAgB,CAChB,wBACF,CAEA,qMAIE,0BAA2B,CAC3B,qCACF,CAEA,oCACE,6BACF,CAEA,oCACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,YAAa,CACb,UAAW,CACX,cAAe,CACf,kBACF,CAGA,qQAIE,SACF,CAEA,sDACE,0BAA2B,CAC3B,2CACF,CAEA,oDACE,0BAA2B,CAC3B,2CACF,CAEA,uDACE,0BAA2B,CAC3B,0CACF,CAEA,oCACE,0BAA2B,CAC3B,yCACF,CAEA,6HAGE,WAAY,CACZ,kBAAmB,CACnB,cACF,CAEA,+IAGE,cAAe,CACf,eACF,CAGA,oDACE,SACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,0DACE,kBAAmB,CACnB,iBACF,CAEA,gEACE,kBACF,CAGA,yBACE,+BACE,qBACF,CAEA,iCACE,qBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"tools-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('antiCliche')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-broom\\\" style=\\\"color: #ff6b6b; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('antiCliche')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            //<strong style=\\\"color: #10b981\\\"></strong>\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 8px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n            \\n            <strong></strong\\n            >\\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #10b981;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #10b981;\\n            \\\"\\n          >\\n             <strong></strong> - \\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"antiClicheInput\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableAntiClicheStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isProcessingAntiCliche && antiClicheProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: antiClicheProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableAntiClicheStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #667eea; font-size: 12px; font-weight: 500\\\">\\n            ... {{ antiClicheProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"process-button\\\"\\n            :disabled=\\\"isProcessingAntiCliche || !antiClicheInput.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(102, 126, 234, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleAntiClicheProcess\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isProcessingAntiCliche ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearAntiClicheForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"antiClicheOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ antiClicheOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyAntiClicheResult\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"margin-top: 20px; padding-top: 20px; border-top: 1px solid #3a3a3a\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px; color: #ffc107\\\"></i>\\n              AI \\n            </h5>\\n            <div class=\\\"form-group\\\" style=\\\"margin-bottom: 12px\\\">\\n              <textarea\\n                v-model=\\\"antiClicheModifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <div style=\\\"display: flex; gap: 10px\\\">\\n              <button\\n                :disabled=\\\"isModifyingAntiCliche || !antiClicheModifyRequest.trim()\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: #1a1a1a;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\\n                  opacity: 1;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 0.5 : 1,\\n                  cursor: isModifyingAntiCliche || !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                @click=\\\"handleModifyAntiCliche\\\"\\n              >\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n                {{ isModifyingAntiCliche ? '...' : 'AI ' }}\\n              </button>\\n              <button\\n                :disabled=\\\"!antiClicheModifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: #dc3545;\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                \\\"\\n                :style=\\\"{\\n                  opacity: !antiClicheModifyRequest.trim() ? 0.5 : 1,\\n                  cursor: !antiClicheModifyRequest.trim() ? 'not-allowed' : 'pointer',\\n                }\\\"\\n                @click=\\\"clearAntiClicheModifyRequest\\\"\\n              >\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('worldbookEntry')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-book-atlas\\\" style=\\\"color: #ffc107; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('worldbookEntry') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('worldbookEntry')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #ffc107\\\"></i>\\n            AI \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffc107;\\n            \\\"\\n          >\\n             \\\"\\\"\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"worldbookDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableWorldbookStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isGeneratingWorldbook && worldbookProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: worldbookProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #ffc107; font-size: 12px; font-weight: 500\\\">\\n            ... {{ worldbookProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingWorldbook || !worldbookDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 193, 7, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateWorldbookEntry\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingWorldbook ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearWorldbookForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"worldbookEntryOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n\\n          <!--  -->\\n          <div\\n            class=\\\"entry-preview\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              margin-bottom: 15px;\\n            \\\"\\n          >\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">{{ worldbookEntryOutput.name || '' }}</div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">\\n                {{ worldbookEntryOutput.strategy?.keys?.join(', ') || '' }}\\n              </div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\" style=\\\"margin-bottom: 10px\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div\\n                style=\\\"\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  line-height: 1.6;\\n                  white-space: pre-wrap;\\n                  max-height: 200px;\\n                  overflow-y: auto;\\n                \\\"\\n              >\\n                {{ worldbookEntryOutput.content }}\\n              </div>\\n            </div>\\n\\n            <div class=\\\"entry-field\\\">\\n              <label style=\\\"color: #ffc107; font-size: 12px; font-weight: 600; display: block; margin-bottom: 4px\\\"\\n                ></label\\n              >\\n              <div style=\\\"color: #e0e0e0; font-size: 13px\\\">\\n                {{\\n                  worldbookEntryOutput.strategy?.type === 'constant'\\n                    ? '  ()'\\n                    : worldbookEntryOutput.strategy?.type === 'selective'\\n                      ? '  ()'\\n                      : ' '\\n                }}\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  JSON </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"worldbookModifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isModifyingWorldbook && worldbookProgressPercent > 0\\\"\\n              class=\\\"progress-bar-container\\\"\\n              style=\\\"margin: 12px 0\\\"\\n            >\\n              <div\\n                class=\\\"progress-bar\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 8px;\\n                  background: #2a2a2a;\\n                  border-radius: 4px;\\n                  overflow: hidden;\\n                  position: relative;\\n                \\\"\\n              >\\n                <div\\n                  class=\\\"progress-fill\\\"\\n                  :style=\\\"{\\n                    width: worldbookProgressPercent + '%',\\n                    height: '100%',\\n                    background: 'linear-gradient(90deg, #ffa500 0%, #ff8c00 50%, #ffa500 100%)',\\n                    backgroundSize: '200% 100%',\\n                    animation: enableWorldbookStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                    transition: 'width 0.3s ease',\\n                  }\\\"\\n                ></div>\\n              </div>\\n              <div style=\\\"text-align: center; margin-top: 8px; color: #ffa500; font-size: 12px; font-weight: 500\\\">\\n                ... {{ worldbookProgressPercent.toFixed(0) }}%\\n              </div>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingWorldbook || !worldbookModifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyWorldbookEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingWorldbook ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearWorldbookModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"insert-section\\\" style=\\\"background: #1a1a1a; padding: 15px; border-radius: 6px; margin-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-file-import\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n              \\n            </h5>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin-bottom: 12px\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <select\\n                v-model=\\\"selectedWorldbook\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 10px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                \\\"\\n              >\\n                <option value=\\\"\\\" disabled></option>\\n                <option v-for=\\\"wb in availableWorldbooks\\\" :key=\\\"wb\\\" :value=\\\"wb\\\">{{ wb }}</option>\\n              </select>\\n            </div>\\n\\n            <div class=\\\"output-actions\\\" style=\\\"display: flex; gap: 12px\\\">\\n              <button\\n                class=\\\"insert-button\\\"\\n                :disabled=\\\"!selectedWorldbook || isInsertingEntry\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 8px;\\n                  box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleInsertEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-plus-circle\\\" style=\\\"font-size: 14px\\\"></i>\\n                {{ isInsertingEntry ? '...' : '' }}\\n              </button>\\n\\n              <button\\n                class=\\\"copy-button\\\"\\n                style=\\\"\\n                  padding: 10px 20px;\\n                  background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 8px;\\n                  box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"copyWorldbookEntry\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i>  JSON\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header viewer-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('worldbookViewer')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-list\\\" style=\\\"color: #20c997; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('worldbookViewer') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #888; font-size: 14px; transition: transform 0.3s ease\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('worldbookViewer')\\\" class=\\\"tool-content\\\">\\n        <div\\n          class=\\\"tool-instructions\\\"\\n          style=\\\"\\n            background: rgba(32, 201, 151, 0.1);\\n            border-left: 3px solid #20c997;\\n            padding: 12px 15px;\\n            border-radius: 6px;\\n            margin-bottom: 20px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #a0f0e0; font-size: 13px; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"color: #20c997\\\"></i>\\n            \\n          </p>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin-bottom: 20px\\\">\\n          <label\\n            style=\\\"\\n              display: block;\\n              margin-bottom: 10px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              font-weight: 500;\\n              letter-spacing: 0.3px;\\n            \\\"\\n          >\\n            \\n          </label>\\n          <select\\n            v-model=\\\"selectedViewerWorldbook\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px 15px;\\n              background: #2a2a2a;\\n              border: 1px solid rgba(255, 255, 255, 0.1);\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            @change=\\\"loadWorldbookEntries\\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#20c997')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\\\"\\n          >\\n            <option value=\\\"\\\"></option>\\n            <option v-for=\\\"wb in availableWorldbooks\\\" :key=\\\"wb\\\" :value=\\\"wb\\\">\\n              {{ wb }}\\n            </option>\\n          </select>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"selectedViewerWorldbook\\\" class=\\\"form-group\\\" style=\\\"margin-bottom: 20px\\\">\\n          <label\\n            style=\\\"\\n              display: block;\\n              margin-bottom: 10px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              font-weight: 500;\\n              letter-spacing: 0.3px;\\n            \\\"\\n          >\\n            \\n          </label>\\n          <input\\n            v-model=\\\"viewerSearchQuery\\\"\\n            type=\\\"text\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              padding: 12px 15px;\\n              background: #2a2a2a;\\n              border: 1px solid rgba(255, 255, 255, 0.1);\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 14px;\\n              transition: all 0.3s ease;\\n              box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);\\n            \\\"\\n            @focus=\\\"(e: any) => (e.target.style.borderColor = '#20c997')\\\"\\n            @blur=\\\"(e: any) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)')\\\"\\n          />\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"selectedViewerWorldbook && worldbookEntries.length > 0\\\"\\n          style=\\\"display: flex; gap: 10px; margin-bottom: 15px\\\"\\n        >\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'original' ? '#20c997' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'original'\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'enabled' ? '#28a745' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'enabled'\\\"\\n          >\\n             \\n          </button>\\n          <button\\n            :style=\\\"{\\n              padding: '8px 16px',\\n              background: viewerSortBy === 'disabled' ? '#dc3545' : '#444',\\n              border: 'none',\\n              borderRadius: '6px',\\n              color: 'white',\\n              fontSize: '12px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s',\\n            }\\\"\\n            @click=\\\"viewerSortBy = 'disabled'\\\"\\n          >\\n             \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"selectedViewerWorldbook\\\" style=\\\"margin-bottom: 15px; color: #888; font-size: 12px\\\">\\n          <span v-if=\\\"filteredWorldbookEntries.length > 0\\\">  {{ filteredWorldbookEntries.length }}  </span>\\n          <span v-else style=\\\"color: #ff6b6b\\\"></span>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"filteredWorldbookEntries.length > 0\\\" style=\\\"display: flex; flex-direction: column; gap: 12px\\\">\\n          <div\\n            v-for=\\\"(entry, index) in filteredWorldbookEntries\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              transition: all 0.3s ease;\\n            \\\"\\n          >\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: flex-start;\\n                cursor: pointer;\\n                user-select: none;\\n              \\\"\\n              @click=\\\"toggleEntryExpanded(index)\\\"\\n            >\\n              <!--  -->\\n              <div style=\\\"flex: 1; line-height: 1.6\\\">\\n                <!--  +  -->\\n                <div style=\\\"display: flex; align-items: center; gap: 6px; margin-bottom: 8px\\\">\\n                  <span v-if=\\\"entry.strategy?.type === 'constant'\\\" style=\\\"font-size: 14px\\\"></span>\\n                  <span v-else-if=\\\"entry.strategy?.type === 'selective'\\\" style=\\\"font-size: 14px\\\"></span>\\n                  <span v-else style=\\\"font-size: 14px\\\"></span>\\n                  <span style=\\\"color: #fff; font-weight: 600; font-size: 14px\\\">\\n                    {{ entry.name || '()' }}\\n                  </span>\\n                </div>\\n\\n                <!--  |  |  -->\\n                <div style=\\\"padding-left: 20px; margin-bottom: 6px; font-size: 12px; color: #ccc\\\">\\n                  <span v-if=\\\"entry.strategy?.keys && entry.strategy.keys.length > 0\\\">\\n                    :\\n                    {{ entry.strategy.keys.map((k: any) => (typeof k === 'string' ? k : String(k))).join(', ') }}\\n                  </span>\\n                  <span v-else>: ()</span>\\n\\n                  <span v-if=\\\"entry.position?.order && entry.position.order !== 0\\\">\\n                    <span style=\\\"color: #666\\\"> | </span>\\n                    : {{ entry.position.order }}\\n                  </span>\\n\\n                  <span\\n                    v-if=\\\"entry.position?.type === 'at_depth' && entry.position.depth && entry.position.depth !== 0\\\"\\n                  >\\n                    <span style=\\\"color: #666\\\"> | </span>\\n                    : {{ entry.position.depth }}\\n                  </span>\\n                </div>\\n\\n                <!--  -->\\n                <div style=\\\"padding-left: 20px; font-size: 12px; color: #999; font-style: italic\\\">\\n                  {{\\n                    entry.content\\n                      ? entry.content.length > 50\\n                        ? entry.content.substring(0, 50) + '...'\\n                        : entry.content\\n                      : '()'\\n                  }}\\n                </div>\\n              </div>\\n\\n              <i\\n                :class=\\\"isEntryExpanded(index) ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n                style=\\\"color: #888; font-size: 12px; margin-top: 2px\\\"\\n              ></i>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isEntryExpanded(index)\\\"\\n              style=\\\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\\\"\\n            >\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                </span>\\n                <div style=\\\"display: flex; align-items: center; gap: 8px\\\">\\n                  <span\\n                    v-if=\\\"entry.strategy?.type === 'constant'\\\"\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #4a9eff;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     - \\n                  </span>\\n                  <span\\n                    v-else-if=\\\"entry.strategy?.type === 'selective'\\\"\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #28a745;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     - \\n                  </span>\\n                  <span\\n                    v-else\\n                    style=\\\"\\n                      padding: 4px 10px;\\n                      background: #888;\\n                      color: white;\\n                      border-radius: 12px;\\n                      font-size: 11px;\\n                      font-weight: bold;\\n                    \\\"\\n                  >\\n                     \\n                  </span>\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                  <span\\n                    v-if=\\\"entry.strategy?.type === 'constant'\\\"\\n                    style=\\\"color: #ffa500; font-size: 10px; margin-left: 6px\\\"\\n                  >\\n                    ()\\n                  </span>\\n                </span>\\n                <div style=\\\"display: flex; flex-wrap: wrap; gap: 6px\\\">\\n                  <span\\n                    v-for=\\\"(key, ki) in entry.strategy?.keys || []\\\"\\n                    :key=\\\"ki\\\"\\n                    style=\\\"padding: 4px 10px; background: #667eea; color: white; border-radius: 12px; font-size: 11px\\\"\\n                  >\\n                    {{ typeof key === 'string' ? key : String(key) }}\\n                  </span>\\n                  <span\\n                    v-if=\\\"!entry.strategy?.keys || entry.strategy.keys.length === 0\\\"\\n                    style=\\\"color: #888; font-size: 11px\\\"\\n                  >\\n                    {{ entry.strategy?.type === 'constant' ? '()' : '()' }}\\n                  </span>\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"margin-bottom: 12px\\\">\\n                <span style=\\\"color: #888; font-size: 12px; font-weight: 600; display: block; margin-bottom: 6px\\\">\\n                   \\n                </span>\\n                <div\\n                  style=\\\"\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border: 1px solid #3a3a3a;\\n                    border-radius: 6px;\\n                    color: #ccc;\\n                    font-size: 12px;\\n                    line-height: 1.6;\\n                    max-height: 200px;\\n                    overflow-y: auto;\\n                    white-space: pre-wrap;\\n                  \\\"\\n                >\\n                  {{ entry.content || '()' }}\\n                </div>\\n              </div>\\n\\n              <!--  -->\\n              <div style=\\\"display: flex; gap: 10px; margin-top: 12px\\\">\\n                <button\\n                  style=\\\"\\n                    padding: 8px 16px;\\n                    background: #4a9eff;\\n                    border: none;\\n                    border-radius: 6px;\\n                    color: white;\\n                    font-size: 12px;\\n                    cursor: pointer;\\n                    transition: all 0.2s;\\n                  \\\"\\n                  @click=\\\"editWorldbookEntry(entry)\\\"\\n                >\\n                  <i class=\\\"fa-solid fa-edit\\\"></i> \\n                </button>\\n                <button\\n                  style=\\\"\\n                    padding: 8px 16px;\\n                    background: #ff6b6b;\\n                    border: none;\\n                    border-radius: 6px;\\n                    color: white;\\n                    font-size: 12px;\\n                    cursor: pointer;\\n                    transition: all 0.2s;\\n                  \\\"\\n                  @click=\\\"deleteWorldbookEntry(entry)\\\"\\n                >\\n                  <i class=\\\"fa-solid fa-trash\\\"></i> \\n                </button>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showEditDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        backdrop-filter: blur(4px);\\n      \\\"\\n      @click.self=\\\"showEditDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid rgba(255, 255, 255, 0.1);\\n          border-radius: 12px;\\n          padding: 25px;\\n          max-width: 700px;\\n          width: 90%;\\n          max-height: 85vh;\\n          overflow-y: auto;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px\\\">\\n          <h3 style=\\\"margin: 0; color: #fff; font-size: 18px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: #888;\\n              font-size: 20px;\\n              cursor: pointer;\\n              padding: 5px 10px;\\n              transition: color 0.2s;\\n            \\\"\\n            @click=\\\"showEditDialog = false\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.color = '#fff')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.color = '#888')\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <div style=\\\"display: flex; flex-direction: column; gap: 15px\\\">\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <input\\n              v-model=\\\"editingEntry.name\\\"\\n              type=\\\"text\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n              \\\"\\n            />\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n            <input\\n              id=\\\"entry-enabled\\\"\\n              v-model=\\\"editingEntry.enabled\\\"\\n              type=\\\"checkbox\\\"\\n              style=\\\"width: 18px; height: 18px; cursor: pointer\\\"\\n            />\\n            <label for=\\\"entry-enabled\\\" style=\\\"color: #e0e0e0; font-size: 14px; cursor: pointer\\\">  </label>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <input\\n              :value=\\\"\\n                (editingEntry.strategy?.keys || []).map((k: any) => (typeof k === 'string' ? k : String(k))).join(',')\\n              \\\"\\n              type=\\\"text\\\"\\n              placeholder=\\\",Aria,,{{char}}\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n              \\\"\\n              @input=\\\"\\n                (e: any) => {\\n                  const keys = e.target.value\\n                    .split(',')\\n                    .filter((k: string) => k.trim())\\n                    .map((k: string) => k.trim());\\n                  editingEntry.strategy = {\\n                    ...editingEntry.strategy,\\n                    keys: keys,\\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\\n                    type: editingEntry.strategy?.type || 'selective',\\n                  };\\n                }\\n              \\\"\\n            />\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <select\\n              :value=\\\"editingEntry.strategy?.type || 'selective'\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                cursor: pointer;\\n              \\\"\\n              @change=\\\"\\n                (e: any) =>\\n                  (editingEntry.strategy = {\\n                    ...editingEntry.strategy,\\n                    type: e.target.value,\\n                    keys: editingEntry.strategy?.keys || [],\\n                    keys_secondary: editingEntry.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\\n                    scan_depth: editingEntry.strategy?.scan_depth || 'same_as_global',\\n                  })\\n              \\\"\\n            >\\n              <option value=\\\"selective\\\"> ()</option>\\n              <option value=\\\"constant\\\"> ()</option>\\n            </select>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <select\\n              :value=\\\"editingEntry.position?.type || 'before_character_definition'\\\"\\n              style=\\\"\\n                width: 100%;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                cursor: pointer;\\n              \\\"\\n              @change=\\\"\\n                (e: any) =>\\n                  (editingEntry.position = {\\n                    ...editingEntry.position,\\n                    type: e.target.value,\\n                    role: editingEntry.position?.role || 'system',\\n                    depth: editingEntry.position?.depth || 0,\\n                    order: editingEntry.position?.order || 0,\\n                  })\\n              \\\"\\n            >\\n              <option value=\\\"before_character_definition\\\"></option>\\n              <option value=\\\"after_character_definition\\\"></option>\\n              <option value=\\\"before_example_messages\\\"></option>\\n              <option value=\\\"after_example_messages\\\"></option>\\n              <option value=\\\"before_author_note\\\"></option>\\n              <option value=\\\"after_author_note\\\"></option>\\n              <option value=\\\"at_depth\\\"></option>\\n            </select>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: grid; grid-template-columns: 1fr 1fr; gap: 10px\\\">\\n            <div>\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n                \\n              </label>\\n              <input\\n                :value=\\\"editingEntry.position?.depth || 0\\\"\\n                type=\\\"number\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 12px;\\n                  background: #1a1a1a;\\n                  border: 1px solid rgba(255, 255, 255, 0.1);\\n                  border-radius: 8px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                @input=\\\"\\n                  (e: any) =>\\n                    (editingEntry.position = {\\n                      ...editingEntry.position,\\n                      depth: Number(e.target.value) || 0,\\n                      role: editingEntry.position?.role || 'system',\\n                      order: editingEntry.position?.order || 0,\\n                      type: editingEntry.position?.type || 'before_character_definition',\\n                    })\\n                \\\"\\n              />\\n            </div>\\n            <div>\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n                \\n              </label>\\n              <input\\n                :value=\\\"editingEntry.position?.order || 0\\\"\\n                type=\\\"number\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  padding: 12px;\\n                  background: #1a1a1a;\\n                  border: 1px solid rgba(255, 255, 255, 0.1);\\n                  border-radius: 8px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                @input=\\\"\\n                  (e: any) =>\\n                    (editingEntry.position = {\\n                      ...editingEntry.position,\\n                      order: Number(e.target.value) || 0,\\n                      type: editingEntry.position?.type || 'before_character_definition',\\n                      role: editingEntry.position?.role || 'system',\\n                      depth: editingEntry.position?.depth || 0,\\n                    })\\n                \\\"\\n              />\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div\\n            style=\\\"background: #1a1a1a; padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1)\\\"\\n          >\\n            <label style=\\\"display: block; margin-bottom: 12px; color: #e0e0e0; font-size: 14px; font-weight: 600\\\">\\n              \\n            </label>\\n            <div style=\\\"display: flex; flex-direction: column; gap: 10px\\\">\\n              <label\\n                style=\\\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\\\"\\n              >\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  :checked=\\\"editingEntry.recursion?.prevent_incoming || false\\\"\\n                  @change=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        prevent_incoming: e.target.checked,\\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\\n                        delay_until: editingEntry.recursion?.delay_until || null,\\n                      })\\n                  \\\"\\n                />\\n                \\n              </label>\\n              <label\\n                style=\\\"color: #ccc; font-size: 13px; display: flex; align-items: center; gap: 10px; cursor: pointer\\\"\\n              >\\n                <input\\n                  type=\\\"checkbox\\\"\\n                  :checked=\\\"editingEntry.recursion?.prevent_outgoing || false\\\"\\n                  @change=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        prevent_outgoing: e.target.checked,\\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\\n                        delay_until: editingEntry.recursion?.delay_until || null,\\n                      })\\n                  \\\"\\n                />\\n                \\n              </label>\\n              <div>\\n                <label style=\\\"color: #ccc; font-size: 13px; display: block; margin-bottom: 5px\\\">\\n                   n \\n                </label>\\n                <input\\n                  :value=\\\"editingEntry.recursion?.delay_until || ''\\\"\\n                  type=\\\"number\\\"\\n                  placeholder=\\\"\\\"\\n                  style=\\\"\\n                    width: 100%;\\n                    padding: 8px;\\n                    background: #2a2a2a;\\n                    border: 1px solid rgba(255, 255, 255, 0.1);\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-size: 13px;\\n                  \\\"\\n                  @input=\\\"\\n                    (e: any) =>\\n                      (editingEntry.recursion = {\\n                        ...editingEntry.recursion,\\n                        delay_until: e.target.value === '' ? null : Number(e.target.value),\\n                        prevent_incoming: editingEntry.recursion?.prevent_incoming || false,\\n                        prevent_outgoing: editingEntry.recursion?.prevent_outgoing || false,\\n                      })\\n                  \\\"\\n                />\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div>\\n            <label style=\\\"display: block; margin-bottom: 8px; color: #e0e0e0; font-size: 14px; font-weight: 500\\\">\\n              \\n            </label>\\n            <textarea\\n              v-model=\\\"editingEntry.content\\\"\\n              style=\\\"\\n                width: 100%;\\n                min-height: 200px;\\n                padding: 12px;\\n                background: #1a1a1a;\\n                border: 1px solid rgba(255, 255, 255, 0.1);\\n                border-radius: 8px;\\n                color: #e0e0e0;\\n                font-size: 14px;\\n                resize: vertical;\\n                font-family: inherit;\\n              \\\"\\n            ></textarea>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"display: flex; gap: 10px; margin-top: 20px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #444;\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showEditDialog = false\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.background = '#555')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.background = '#444')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 10px 20px;\\n              background: #4a9eff;\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"saveEditedEntry\\\"\\n            @mouseenter=\\\"(e: any) => (e.target.style.background = '#5ba8ff')\\\"\\n            @mouseleave=\\\"(e: any) => (e.target.style.background = '#4a9eff')\\\"\\n          >\\n            <i class=\\\"fa-solid fa-save\\\" style=\\\"margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tool-section\\\">\\n      <div\\n        class=\\\"section-header\\\"\\n        style=\\\"\\n          display: flex;\\n          justify-content: space-between;\\n          align-items: center;\\n          padding: 15px 20px;\\n          background: linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          );\\n          backdrop-filter: blur(12px);\\n          border-radius: 12px;\\n          margin-bottom: 15px;\\n          border: 1px solid rgba(255, 255, 255, 0.06);\\n          box-shadow:\\n            0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2);\\n          cursor: pointer;\\n          transition: all 0.3s ease;\\n        \\\"\\n        @click=\\\"toggleToolExpanded('characterCard')\\\"\\n        @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n        @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n      >\\n        <h4\\n          style=\\\"\\n            margin: 0;\\n            color: #fff;\\n            font-size: 16px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-user-plus\\\" style=\\\"color: #17a2b8; font-size: 18px\\\"></i>\\n          \\n        </h4>\\n        <i\\n          :class=\\\"isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'\\\"\\n          style=\\\"color: #ccc; transition: transform 0.3s ease; font-size: 14px\\\"\\n        ></i>\\n      </div>\\n\\n      <div v-if=\\\"isToolExpanded('characterCard')\\\" class=\\\"tool-content\\\">\\n        <div class=\\\"tool-instructions\\\">\\n          <p style=\\\"margin: 0 0 8px 0; color: #ccc; font-size: 12px\\\">\\n            <i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right: 6px; color: #17a2b8\\\"></i>\\n            AIYAML \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #4a9eff;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #17a2b8;\\n            \\\"\\n          >\\n             \\n          </p>\\n          <p\\n            style=\\\"\\n              margin: 0 0 6px 0;\\n              color: #ffa500;\\n              font-size: 11px;\\n              background: #1a1a1a;\\n              padding: 6px;\\n              border-radius: 4px;\\n              border-left: 3px solid #ffa500;\\n            \\\"\\n          >\\n             \\\"\\\"AI\\n          </p>\\n        </div>\\n\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"characterDescription\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              padding: 12px;\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              resize: vertical;\\n              font-family: inherit;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n          <label style=\\\"display: flex; align-items: center; gap: 8px; color: #ccc; font-size: 13px; cursor: pointer\\\">\\n            <input v-model=\\\"enableCharacterStreaming\\\" type=\\\"checkbox\\\" style=\\\"cursor: pointer\\\" />\\n            \\n          </label>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"isGeneratingCharacter && characterProgressPercent > 0\\\"\\n          class=\\\"progress-bar-container\\\"\\n          style=\\\"margin: 15px 0\\\"\\n        >\\n          <div\\n            class=\\\"progress-bar\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 8px;\\n              background: #2a2a2a;\\n              border-radius: 4px;\\n              overflow: hidden;\\n              position: relative;\\n            \\\"\\n          >\\n            <div\\n              class=\\\"progress-fill\\\"\\n              :style=\\\"{\\n                width: characterProgressPercent + '%',\\n                height: '100%',\\n                background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\\n                backgroundSize: '200% 100%',\\n                animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                transition: 'width 0.3s ease',\\n              }\\\"\\n            ></div>\\n          </div>\\n          <div style=\\\"text-align: center; margin-top: 8px; color: #17a2b8; font-size: 12px; font-weight: 500\\\">\\n            ... {{ characterProgressPercent.toFixed(0) }}%\\n          </div>\\n        </div>\\n\\n        <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 20px\\\">\\n          <button\\n            class=\\\"generate-button\\\"\\n            :disabled=\\\"isGeneratingCharacter || !characterDescription.trim()\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(23, 162, 184, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"handleGenerateCharacterCard\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-magic\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            {{ isGeneratingCharacter ? '...' : '' }}\\n          </button>\\n\\n          <button\\n            class=\\\"clear-button\\\"\\n            style=\\\"\\n              padding: 12px 24px;\\n              background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\\n              border: none;\\n              border-radius: 8px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              box-shadow: 0 3px 12px rgba(255, 107, 107, 0.3);\\n              position: relative;\\n              overflow: hidden;\\n            \\\"\\n            @click=\\\"clearCharacterForm\\\"\\n          >\\n            <div\\n              style=\\\"\\n                position: absolute;\\n                top: 0;\\n                left: -100%;\\n                width: 100%;\\n                height: 100%;\\n                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                transition: left 0.5s;\\n              \\\"\\n              class=\\\"shimmer-effect\\\"\\n            ></div>\\n            <i class=\\\"fa-solid fa-trash\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div v-if=\\\"characterCardOutput\\\" class=\\\"output-section\\\">\\n          <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-check-circle\\\" style=\\\"margin-right: 6px; color: #28a745\\\"></i>\\n            \\n          </h5>\\n          <div\\n            class=\\\"output-content\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 6px;\\n              padding: 15px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              max-height: 300px;\\n              overflow-y: auto;\\n            \\\"\\n          >\\n            {{ characterCardOutput }}\\n          </div>\\n\\n          <div class=\\\"output-actions\\\" style=\\\"margin-top: 12px; display: flex; gap: 12px\\\">\\n            <button\\n              class=\\\"copy-button\\\"\\n              style=\\\"\\n                padding: 10px 20px;\\n                background: linear-gradient(135deg, #28a745 0%, #20c997 100%);\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 600;\\n                cursor: pointer;\\n                transition: all 0.3s ease;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n                box-shadow: 0 3px 12px rgba(40, 167, 69, 0.3);\\n                position: relative;\\n                overflow: hidden;\\n              \\\"\\n              @click=\\\"copyCharacterCard\\\"\\n            >\\n              <div\\n                style=\\\"\\n                  position: absolute;\\n                  top: 0;\\n                  left: -100%;\\n                  width: 100%;\\n                  height: 100%;\\n                  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                  transition: left 0.5s;\\n                \\\"\\n                class=\\\"shimmer-effect\\\"\\n              ></div>\\n              <i class=\\\"fa-solid fa-copy\\\" style=\\\"font-size: 14px\\\"></i> \\n            </button>\\n          </div>\\n\\n          <!--  -->\\n          <div class=\\\"modify-section\\\" style=\\\"margin-top: 25px; border-top: 2px dashed #3a3a3a; padding-top: 20px\\\">\\n            <h5 style=\\\"margin: 0 0 12px 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n              <i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n              \\n            </h5>\\n            <div\\n              class=\\\"modify-instructions\\\"\\n              style=\\\"\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                margin-bottom: 15px;\\n              \\\"\\n            >\\n              <p style=\\\"margin: 0 0 6px 0; color: #ccc; font-size: 12px\\\">\\n                <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px; color: #ffa500\\\"></i>\\n                AI\\\"\\\"\\\"\\\"\\\"\\\"\\n              </p>\\n              <p style=\\\"margin: 0; color: #ffa500; font-size: 11px\\\">  YAML </p>\\n            </div>\\n\\n            <div class=\\\"form-group\\\" style=\\\"margin: 15px 0\\\">\\n              <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 500\\\">\\n                \\n              </label>\\n              <textarea\\n                v-model=\\\"modifyRequest\\\"\\n                placeholder=\\\"...\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 80px;\\n                  padding: 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #e0e0e0;\\n                  font-size: 13px;\\n                  resize: vertical;\\n                  font-family: inherit;\\n                \\\"\\n              ></textarea>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              v-if=\\\"isModifyingCharacter && characterProgressPercent > 0\\\"\\n              class=\\\"progress-bar-container\\\"\\n              style=\\\"margin: 15px 0\\\"\\n            >\\n              <div\\n                class=\\\"progress-bar\\\"\\n                style=\\\"\\n                  width: 100%;\\n                  height: 8px;\\n                  background: #2a2a2a;\\n                  border-radius: 4px;\\n                  overflow: hidden;\\n                  position: relative;\\n                \\\"\\n              >\\n                <div\\n                  class=\\\"progress-fill\\\"\\n                  :style=\\\"{\\n                    width: characterProgressPercent + '%',\\n                    height: '100%',\\n                    background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\\n                    backgroundSize: '200% 100%',\\n                    animation: enableCharacterStreaming ? 'progress-slide 2s linear infinite' : 'none',\\n                    transition: 'width 0.3s ease',\\n                  }\\\"\\n                ></div>\\n              </div>\\n              <div style=\\\"text-align: center; margin-top: 8px; color: #17a2b8; font-size: 12px; font-weight: 500\\\">\\n                ... {{ characterProgressPercent.toFixed(0) }}%\\n              </div>\\n            </div>\\n\\n            <div class=\\\"button-group\\\" style=\\\"display: flex; gap: 12px; margin-bottom: 15px\\\">\\n              <button\\n                class=\\\"modify-button\\\"\\n                :disabled=\\\"isModifyingCharacter || !modifyRequest.trim()\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #ffa500 0%, #ff8c00 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(255, 165, 0, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"handleModifyCharacterCard\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                {{ isModifyingCharacter ? '...' : 'AI' }}\\n              </button>\\n\\n              <button\\n                class=\\\"clear-modify-button\\\"\\n                style=\\\"\\n                  padding: 12px 24px;\\n                  background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);\\n                  border: none;\\n                  border-radius: 8px;\\n                  color: white;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.3s ease;\\n                  box-shadow: 0 3px 12px rgba(108, 117, 125, 0.3);\\n                  position: relative;\\n                  overflow: hidden;\\n                \\\"\\n                @click=\\\"clearModifyRequest\\\"\\n              >\\n                <div\\n                  style=\\\"\\n                    position: absolute;\\n                    top: 0;\\n                    left: -100%;\\n                    width: 100%;\\n                    height: 100%;\\n                    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\\n                    transition: left 0.5s;\\n                  \\\"\\n                  class=\\\"shimmer-effect\\\"\\n                ></div>\\n                <i class=\\\"fa-solid fa-eraser\\\" style=\\\"font-size: 14px; margin-right: 6px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { debounce } from 'lodash';\\nimport { storeToRefs } from 'pinia';\\nimport { onBeforeUnmount, onMounted, ref, Ref, watch } from 'vue';\\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\\n\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst toolExpandedState = ref(new Map<string, boolean>());\\nconst antiClicheInput = ref('');\\nconst antiClicheOutput = ref('');\\nconst isProcessingAntiCliche = ref(false);\\nconst enableAntiClicheStreaming = ref(false); // \\nconst antiClicheProgressPercent = ref(0); // \\nconst antiClicheModifyRequest = ref(''); // \\nconst isModifyingAntiCliche = ref(false); // \\nconst characterDescription = ref('');\\nconst characterCardOutput = ref('');\\nconst isGeneratingCharacter = ref(false);\\nconst modifyRequest = ref('');\\nconst isModifyingCharacter = ref(false);\\nconst enableCharacterStreaming = ref(false); // \\nconst characterProgressPercent = ref(0); // \\n\\n// \\nconst worldbookDescription = ref('');\\nconst worldbookEntryOutput = ref<Partial<WorldbookEntry> | null>(null);\\nconst isGeneratingWorldbook = ref(false);\\nconst availableWorldbooks = ref<string[]>([]);\\nconst selectedWorldbook = ref('');\\nconst isInsertingEntry = ref(false);\\nconst worldbookModifyRequest = ref('');\\nconst isModifyingWorldbook = ref(false);\\nconst enableWorldbookStreaming = ref(false); // \\nconst worldbookProgressPercent = ref(0); // \\n\\n// \\nconst selectedViewerWorldbook = ref('');\\nconst worldbookEntries = ref<WorldbookEntry[]>([]);\\nconst viewerSearchQuery = ref('');\\nconst viewerSortBy = ref<'original' | 'enabled' | 'disabled'>('original');\\nconst entryExpandedState = ref(new Map<number, boolean>());\\n\\n// \\nconst showEditDialog = ref(false);\\nconst editingEntry = ref<Partial<WorldbookEntry>>({});\\nconst editingEntryUid = ref<number | null>(null);\\n\\n// \\nconst isDataLoaded = ref(false);\\n\\n// \\nconst loadAvailableWorldbooks = () => {\\n  try {\\n    availableWorldbooks.value = getWorldbookNames();\\n    console.log(' :', availableWorldbooks.value);\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst loadToolsData = () => {\\n  try {\\n    isDataLoaded.value = false; // \\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      isDataLoaded.value = true;\\n      return;\\n    }\\n    const savedData = getVariables({ type: 'script', script_id });\\n\\n    console.log(' :', savedData);\\n\\n    // \\n    if (savedData.tools_antiCliche) {\\n      antiClicheInput.value = savedData.tools_antiCliche.input || '';\\n      antiClicheOutput.value = savedData.tools_antiCliche.output || '';\\n      enableAntiClicheStreaming.value = savedData.tools_antiCliche.enableStreaming || false;\\n      antiClicheModifyRequest.value = savedData.tools_antiCliche.modifyRequest || '';\\n      console.log(' :', {\\n        input: antiClicheInput.value.substring(0, 50),\\n        output: antiClicheOutput.value.substring(0, 50),\\n        enableStreaming: enableAntiClicheStreaming.value,\\n        modifyRequest: antiClicheModifyRequest.value.substring(0, 30),\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_characterCard) {\\n      characterDescription.value = savedData.tools_characterCard.description || '';\\n      characterCardOutput.value = savedData.tools_characterCard.output || '';\\n      modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\\n      enableCharacterStreaming.value = savedData.tools_characterCard.enableStreaming || false;\\n      console.log(' :', {\\n        description: characterDescription.value.substring(0, 50),\\n        output: characterCardOutput.value.substring(0, 50),\\n        modifyRequest: modifyRequest.value.substring(0, 50),\\n        enableStreaming: enableCharacterStreaming.value,\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_worldbookEntry) {\\n      worldbookDescription.value = savedData.tools_worldbookEntry.description || '';\\n      worldbookEntryOutput.value = savedData.tools_worldbookEntry.output || null;\\n      selectedWorldbook.value = savedData.tools_worldbookEntry.selectedWorldbook || '';\\n      worldbookModifyRequest.value = savedData.tools_worldbookEntry.modifyRequest || '';\\n      enableWorldbookStreaming.value = savedData.tools_worldbookEntry.enableStreaming || false;\\n      console.log(' :', {\\n        description: worldbookDescription.value.substring(0, 50),\\n        output: worldbookEntryOutput.value ? '' : '',\\n        selectedWorldbook: selectedWorldbook.value,\\n        modifyRequest: worldbookModifyRequest.value.substring(0, 50),\\n        enableStreaming: enableWorldbookStreaming.value,\\n      });\\n    }\\n\\n    // \\n    if (savedData.tools_expandedState) {\\n      toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\\n      console.log(' :', Object.fromEntries(toolExpandedState.value));\\n    }\\n\\n    // \\n    if (savedData.tools_worldbookViewer) {\\n      selectedViewerWorldbook.value = savedData.tools_worldbookViewer.selectedWorldbook || '';\\n      viewerSearchQuery.value = savedData.tools_worldbookViewer.searchQuery || '';\\n      viewerSortBy.value = savedData.tools_worldbookViewer.sortBy || 'original';\\n      console.log(' :', {\\n        selectedWorldbook: selectedViewerWorldbook.value,\\n        searchQuery: viewerSearchQuery.value,\\n        sortBy: viewerSortBy.value,\\n      });\\n\\n      // \\n      if (selectedViewerWorldbook.value) {\\n        console.log(' ...');\\n        setTimeout(() => {\\n          loadWorldbookEntries();\\n        }, 200);\\n      }\\n    }\\n\\n    // \\n    setTimeout(() => {\\n      isDataLoaded.value = true;\\n      console.log(' ');\\n    }, 100);\\n  } catch (error) {\\n    console.error(' :', error);\\n    isDataLoaded.value = true;\\n  }\\n};\\n\\n// \\nconst saveToolsDataImmediate = () => {\\n  // \\n  if (!isDataLoaded.value) {\\n    console.log(' ');\\n    return;\\n  }\\n\\n  try {\\n    const script_id = getScriptIdSafe();\\n    if (!script_id) {\\n      console.warn(' script_id ');\\n      return;\\n    }\\n\\n    const dataToSave = {\\n      tools_antiCliche: {\\n        input: antiClicheInput.value,\\n        output: antiClicheOutput.value,\\n        enableStreaming: enableAntiClicheStreaming.value,\\n        modifyRequest: antiClicheModifyRequest.value,\\n      },\\n      tools_characterCard: {\\n        description: characterDescription.value,\\n        output: characterCardOutput.value,\\n        modifyRequest: modifyRequest.value,\\n        enableStreaming: enableCharacterStreaming.value,\\n      },\\n      tools_worldbookEntry: {\\n        description: worldbookDescription.value,\\n        output: worldbookEntryOutput.value,\\n        selectedWorldbook: selectedWorldbook.value,\\n        modifyRequest: worldbookModifyRequest.value,\\n        enableStreaming: enableWorldbookStreaming.value,\\n      },\\n      tools_worldbookViewer: {\\n        selectedWorldbook: selectedViewerWorldbook.value,\\n        searchQuery: viewerSearchQuery.value,\\n        sortBy: viewerSortBy.value,\\n      },\\n      tools_expandedState: Object.fromEntries(toolExpandedState.value),\\n    };\\n\\n    insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id });\\n    console.log(' :', {\\n      antiCliche_input_length: antiClicheInput.value.length,\\n      antiCliche_output_length: antiClicheOutput.value.length,\\n      character_desc_length: characterDescription.value.length,\\n      character_output_length: characterCardOutput.value.length,\\n    });\\n  } catch (error) {\\n    console.error(' :', error);\\n  }\\n};\\n\\n// 300ms\\nconst saveToolsData = debounce(saveToolsDataImmediate, 300);\\n\\n// \\nwatch(\\n  [\\n    antiClicheInput,\\n    antiClicheOutput,\\n    enableAntiClicheStreaming,\\n    antiClicheModifyRequest,\\n    characterDescription,\\n    characterCardOutput,\\n    modifyRequest,\\n    enableCharacterStreaming,\\n    worldbookDescription,\\n    worldbookEntryOutput,\\n    selectedWorldbook,\\n    worldbookModifyRequest,\\n    enableWorldbookStreaming,\\n    selectedViewerWorldbook,\\n    viewerSearchQuery,\\n    viewerSortBy,\\n    toolExpandedState,\\n  ],\\n  () => {\\n    if (isDataLoaded.value) {\\n      console.log(' ...');\\n      saveToolsData();\\n    }\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonMounted(() => {\\n  console.log(' ToolsTab ...');\\n  loadToolsData();\\n  loadAvailableWorldbooks();\\n});\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log(' ToolsTab ...');\\n  // \\n  saveToolsData.cancel();\\n  saveToolsDataImmediate();\\n});\\n\\n// \\nconst toggleToolExpanded = (toolName: string) => {\\n  console.log('toggleToolExpanded :', toolName);\\n  const current = toolExpandedState.value.get(toolName) || false;\\n  console.log(':', current);\\n  toolExpandedState.value.set(toolName, !current);\\n  console.log(':', !current);\\n};\\n\\n// \\nconst isToolExpanded = (toolName: string) => {\\n  return toolExpandedState.value.get(toolName) || false;\\n};\\n\\n// copyToClipboard  utils.ts \\n\\n// \\nconst handleAntiClicheProcess = async () => {\\n  if (!antiClicheInput.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isProcessingAntiCliche.value = true;\\n    antiClicheProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model,\\n      max_tokens: settings.value.max_tokens || 8000,\\n      temperature: 0.7,\\n      stream: enableAntiClicheStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: `****\\n\\n##  \\n\\n ****\\n ****\\n ****\\n **\\\"\\\"\\\"\\\"\\\"\\\"**\\n\\n## \\n\\n###  \\n\\n#### 1. \\n- ****\\n- ****\\n- ****\\\"......\\\"\\\"...\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"xx\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n- **\\\"\\\"+**\\n- ****168cm/50kgC\\\"\\\"\\\"\\\"\\\"\\\"\\n\\n#### 2. \\n-  **//**\\\"xxx\\\"\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"\\\"\\\"\\\"\\n-  ****\\\"\\\"\\\"...\\\"\\\"...\\\"///\\n-  ****\\n\\n#### 3. \\n-  \\\"\\\"\\\"\\\"\\\"\\\"\\n-  \\n\\n#### 4. \\n-  ****\\n-  \\\"\\\"\\n-  \\\"\\\"\\n\\n#### 5. /\\n-  ****\\n-  \\\"\\\"\\n-  \\\"\\\"\\\"\\\"\\n\\n#### 6. \\n-  \\\"\\\"\\n-  \\n-  \\n\\n#### 7. \\n-  168cm50kgC\\n-  \\n-  \\n-  \\n\\n###  3\\n1. ****\\n2. ****\\n3. ****\\n4. ****\\n\\n##  \\n\\n****\\n \\n \\n \\n \\n \\n\\n****\\n /\\n ****\\n ****\\n ****\\\"......\\\"\\n \\n \\n \\n\\n##  \\n\\n****\\n\\n###  \\n1. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n2. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n3. ****\\n   -  \\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\n\\n4. ****\\n   -  \\\"\\\"\\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\\"\\\"\\n\\n5. ****\\n   -  \\\"\\\"\\\"\\\"\\n   -  \\\"\\\"\\\"\\\"\\\"\\\"\\n\\n###  \\n- ****\\n- ****\\n- ****\\n\\n###  \\n1. ****\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\n2. ****\\\"......\\\"\\\"\\\"\\\"\\\"\\n3. ****\\\"\\\"\\\"\\\"\\n4. ****\\\"\\\"\\\"\\\"\\n5. ****\\\"\\\"\\\"\\\"\\n\\n##  \\n\\n### 1\\n\\n****\\nA\\\"\\\"\\n\\nA168cmC\\n\\n\\n\\n\\n\\n\\\"\\\"\\n\\n** **\\nA\\\"\\\"\\nA\\n\\\"\\\"\\n\\n** **\\nA\\\"\\\"\\n\\nA\\n\\nA\\n\\nA\\n\\n\\\"\\\"\\n\\n****\\n1. \\\"\\\"  \\\"\\\"\\n2. \\\"\\\"  \\n3. \\\"\\\"  \\n4. \\\"\\\"\\\"\\\"  \\n5. \\\"......\\\"  \\\"A\\\"\\n6. \\\"\\\"\\\"\\\"  \\n7. \\\"168cm\\\"\\\"C\\\"  \\\"\\\"\\n8. \\\"\\\"  \\n\\n### 2\\n\\n****\\n\\n\\n** **\\n\\n\\n****\\n1. \\\"......\\\"  \\n2. \\\"\\\"  \\n3. \\\"\\\"  \\\"\\\"\\n4. \\\"\\\"\\\"\\\"  \\n5. \\\"\\\"  \\n6. \\\"\\\"  \\\"\\\"\\\"\\\"+\\n\\n\\n##  \\n\\n1. ****\\n2. ****\\n3. ****\\n   - \\n   - \\n   - \\\"\\\"\\\"\\\"\\n   - \\n   - \\n4. ****\\n5. ****\\n6. ****\\n\\n****`,\\n        },\\n        {\\n          role: 'user',\\n          content: antiClicheInput.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableAntiClicheStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      antiClicheProgressPercent.value = 100;\\n    }\\n\\n    antiClicheOutput.value = generatedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isProcessingAntiCliche.value = false;\\n    antiClicheProgressPercent.value = 0;\\n  }\\n};\\n\\nconst copyAntiClicheResult = () => {\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(antiClicheOutput.value, '');\\n};\\n\\n// \\nconst handleModifyAntiCliche = async () => {\\n  if (!antiClicheModifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!antiClicheOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingAntiCliche.value = true;\\n    antiClicheProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model,\\n      max_tokens: settings.value.max_tokens || 8000,\\n      temperature: 0.7,\\n      stream: enableAntiClicheStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content:\\n            '',\\n        },\\n        {\\n          role: 'user',\\n          content: `\\\\n${antiClicheOutput.value}\\\\n\\\\n${antiClicheModifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let modifiedText: string;\\n\\n    if (enableAntiClicheStreaming.value) {\\n      // \\n      modifiedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      modifiedText = data.choices[0].message.content.trim();\\n      antiClicheProgressPercent.value = 100;\\n    }\\n\\n    antiClicheOutput.value = modifiedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingAntiCliche.value = false;\\n    antiClicheProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearAntiClicheModifyRequest = () => {\\n  antiClicheModifyRequest.value = '';\\n  saveToolsDataImmediate();\\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleGenerateCharacterCard = async () => {\\n  if (!characterDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingCharacter.value = true;\\n    characterProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 16000,\\n      temperature: 0.8,\\n      stream: enableCharacterStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: `\\n\\n****\\n-  YAML \\n- \\n- AI\\n- AI\\n\\n****\\n\\\\`\\\\`\\\\`yaml\\n:\\n  : \\\"\\\"\\n  : \\n  : \\\"YYYYMM\\\"\\n  : \\\"//\\\"\\n  : \\\"Alpha/Beta/Omega/\\\"\\n  : \\\"////\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    - 1: \\\"\\\"\\n    - 2: \\\"\\\"\\n    - 3: \\\"\\\"\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"\\\"\\n\\n:\\n  : \\\"\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n    : \\\"\\\"\\n  : \\\"/\\\"\\n  : [\\\"1\\\", \\\"2\\\"]\\n\\n:\\n  : \\\"\\\"\\n  : \\\"\\\"\\n  : [\\\"1\\\", \\\"2\\\", \\\"3\\\"]\\n  : \\\"TA\\\"\\n  : \\\"\\\"\\n  : \\\"TA\\\"\\n\\n:\\n  : \\\"{{user}}\\\"\\n  : \\\"\\\"\\n  : \\\"//\\\"\\n  : \\\"\\\"\\n\\n:\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"\\\"\\n  : \\\"TA\\\"\\n  :\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n    : \\\"TA\\\"\\n  :\\n    : \\\"\\\"\\n    : \\\"\\\"\\n\\\\`\\\\`\\\\`\\n\\n\\n1. \\n2. \\n3. TA\\n4. `,\\n        },\\n        {\\n          role: 'user',\\n          content: characterDescription.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableCharacterStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, characterProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      characterProgressPercent.value = 100;\\n    }\\n\\n    characterCardOutput.value = generatedText;\\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingCharacter.value = false;\\n    characterProgressPercent.value = 0;\\n  }\\n};\\n\\nconst clearCharacterForm = () => {\\n  characterDescription.value = '';\\n  characterCardOutput.value = '';\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\nconst copyCharacterCard = () => {\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  // \\n  copyToClipboard(characterCardOutput.value, '');\\n};\\n\\n// \\nconst clearAntiClicheForm = () => {\\n  antiClicheInput.value = '';\\n  antiClicheOutput.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleModifyCharacterCard = async () => {\\n  if (!modifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!characterCardOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingCharacter.value = true;\\n    characterProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 16000,\\n      temperature: 0.8,\\n      stream: enableCharacterStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` YAML \\n\\n****\\n1.  YAML \\n2. \\n3. \\n4. \\n5. \\n6. \\n\\n****\\n- ////\\n- \\n- \\n- AI\\n\\n YAML `,\\n        },\\n        {\\n          role: 'user',\\n          content: `\\n\\n${characterCardOutput.value}\\n\\n---\\n\\n\\n${modifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let modifiedCard: string;\\n\\n    if (enableCharacterStreaming.value) {\\n      // \\n      modifiedCard = await generateWithStreaming(requestPayload, characterProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      modifiedCard = data.choices[0].message.content.trim();\\n      characterProgressPercent.value = 100;\\n    }\\n\\n    characterCardOutput.value = modifiedCard;\\n    modifyRequest.value = ''; // \\n    saveToolsDataImmediate(); // \\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingCharacter.value = false;\\n    characterProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearModifyRequest = () => {\\n  modifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst extractStreamContent = (chunk: any): string | null => {\\n  // OpenAI \\n  if (chunk.choices?.[0]?.delta?.content) {\\n    return chunk.choices[0].delta.content;\\n  }\\n  // Claude \\n  if (chunk.delta?.text) {\\n    return chunk.delta.text;\\n  }\\n  // \\n  if (typeof chunk.content === 'string') {\\n    return chunk.content;\\n  }\\n  if (typeof chunk.text === 'string') {\\n    return chunk.text;\\n  }\\n  if (typeof chunk.response === 'string') {\\n    return chunk.response;\\n  }\\n  return null;\\n};\\n\\n// \\nconst generateWithStreaming = async (\\n  requestPayload: Record<string, any>,\\n  progressRef: Ref<number>,\\n): Promise<string> => {\\n  const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n  const response = await fetch(apiUrl, {\\n    method: 'POST',\\n    headers: {\\n      'Content-Type': 'application/json',\\n      Authorization: `Bearer ${settings.value.api_key}`,\\n    },\\n    body: JSON.stringify(requestPayload),\\n  });\\n\\n  if (!response.ok) {\\n    const errorText = await response.text();\\n    throw new Error(`${response.status} ${response.statusText}\\\\n${errorText.slice(0, 400)}`);\\n  }\\n\\n  if (!response.body) {\\n    throw new Error(' API ');\\n  }\\n\\n  const reader = response.body.getReader();\\n  const decoder = new TextDecoder('utf-8');\\n  let buffer = '';\\n  let done = false;\\n  let result = '';\\n\\n  progressRef.value = 0;\\n\\n  const processLine = (line: string): boolean => {\\n    const trimmed = line.trim();\\n    if (!trimmed) {\\n      return false;\\n    }\\n\\n    if (trimmed === 'data: [DONE]' || trimmed === '[DONE]') {\\n      return true;\\n    }\\n\\n    const payloadText = trimmed.startsWith('data:') ? trimmed.slice(5).trim() : trimmed;\\n    if (!payloadText || payloadText === '[DONE]') {\\n      return false;\\n    }\\n\\n    try {\\n      const payloadJson = JSON.parse(payloadText);\\n      const deltaText = extractStreamContent(payloadJson);\\n      if (deltaText) {\\n        result += deltaText;\\n        progressRef.value = Math.min(progressRef.value + 2, 98);\\n      }\\n    } catch (parseError) {\\n      console.warn(':', payloadText.slice(0, 100), parseError);\\n    }\\n\\n    return false;\\n  };\\n\\n  while (!done) {\\n    const { value, done: readerDone } = await reader.read();\\n    if (value) {\\n      buffer += decoder.decode(value, { stream: true });\\n      const lines = buffer.split('\\\\n');\\n      buffer = lines.pop() ?? '';\\n      for (const line of lines) {\\n        if (processLine(line)) {\\n          done = true;\\n          break;\\n        }\\n      }\\n    }\\n\\n    if (readerDone) {\\n      done = true;\\n    }\\n  }\\n\\n  if (buffer && !done) {\\n    processLine(buffer);\\n  }\\n\\n  progressRef.value = 100;\\n  return result;\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst handleGenerateWorldbookEntry = async () => {\\n  if (!worldbookDescription.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isGeneratingWorldbook.value = true;\\n    worldbookProgressPercent.value = 0;\\n    window.toastr.info('AI...', '', { timeOut: 15000 });\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 4000,\\n      temperature: 0.7,\\n      stream: enableWorldbookStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` SillyTavern  JSON \\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",  // \\\"constant\\\"(-)  \\\"selective\\\"(-)\\n    \\\"keys\\\": [\\\"1\\\", \\\"2\\\"],  // \\n    \\\"keys_secondary\\\": {\\n      \\\"logic\\\": \\\"and_any\\\",  // \\\"and_any\\\" | \\\"and_all\\\" | \\\"not_all\\\" | \\\"not_any\\\"\\n      \\\"keys\\\": []  // \\n    },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"  //  10\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",  // : \\\"after_character_definition\\\" | \\\"at_depth\\\"\\n    \\\"role\\\": \\\"system\\\",  // \\\"system\\\" | \\\"assistant\\\" | \\\"user\\\"\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"\\\",\\n  \\\"probability\\\": 100,  //  100\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n1. ** (name)**\\n2. ** (strategy.type)**\\n   -  \\\"selective\\\" ()\\n   -  \\\"constant\\\" ()\\n3. ** (strategy.keys)**\\n   - \\n   - \\n   -  3-6 \\n4. ** (content)**\\n   - ****\\n   - \\n   - \\n   - ** content **\\n   - ****\\n5. ** (position.type)**\\n   -  \\\"after_character_definition\\\"\\n   -  \\\"at_depth\\\" \\n6. ****\\n\\n** 1**\\n\\\"16\\\"\\n\\n\\\\`\\\\`\\\\`json\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",\\n    \\\"keys\\\": [\\\"\\\", \\\"\\\", \\\"\\\"],\\n    \\\"keys_secondary\\\": { \\\"logic\\\": \\\"and_any\\\", \\\"keys\\\": [] },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",\\n    \\\"role\\\": \\\"system\\\",\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"16\\\",\\n  \\\"probability\\\": 100,\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n** 2**\\n\\\"\\\"\\n\\n\\\\`\\\\`\\\\`json\\n{\\n  \\\"name\\\": \\\"\\\",\\n  \\\"enabled\\\": true,\\n  \\\"strategy\\\": {\\n    \\\"type\\\": \\\"selective\\\",\\n    \\\"keys\\\": [\\\"\\\", \\\"\\\", \\\"\\\", \\\"\\\"],\\n    \\\"keys_secondary\\\": { \\\"logic\\\": \\\"and_any\\\", \\\"keys\\\": [] },\\n    \\\"scan_depth\\\": \\\"same_as_global\\\"\\n  },\\n  \\\"position\\\": {\\n    \\\"type\\\": \\\"after_character_definition\\\",\\n    \\\"role\\\": \\\"system\\\",\\n    \\\"depth\\\": 4,\\n    \\\"order\\\": 100\\n  },\\n  \\\"content\\\": \\\"\\\",\\n  \\\"probability\\\": 100,\\n  \\\"recursion\\\": {\\n    \\\"prevent_incoming\\\": false,\\n    \\\"prevent_outgoing\\\": false,\\n    \\\"delay_until\\\": null\\n  },\\n  \\\"effect\\\": {\\n    \\\"sticky\\\": null,\\n    \\\"cooldown\\\": null,\\n    \\\"delay\\\": null\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n-  JSON \\n-  JSON \\n- **content **\\n-  content \\n-  strategy.type`,\\n        },\\n        {\\n          role: 'user',\\n          content: worldbookDescription.value,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableWorldbookStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      worldbookProgressPercent.value = 100;\\n    }\\n\\n    //  JSON\\n    try {\\n      //  JSON \\n      const jsonMatch = generatedText.match(/```(?:json)?\\\\s*([\\\\s\\\\S]*?)```/) || [null, generatedText];\\n      const jsonText = jsonMatch[1] || generatedText;\\n\\n      const parsedEntry = JSON.parse(jsonText);\\n      worldbookEntryOutput.value = parsedEntry;\\n      saveToolsDataImmediate(); // \\n\\n      window.toastr.success('');\\n    } catch (parseError) {\\n      console.error('JSON :', parseError);\\n      console.log(':', generatedText);\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isGeneratingWorldbook.value = false;\\n    worldbookProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearWorldbookForm = () => {\\n  worldbookDescription.value = '';\\n  worldbookEntryOutput.value = null;\\n  selectedWorldbook.value = '';\\n  worldbookModifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// \\nconst handleInsertEntry = async () => {\\n  if (!selectedWorldbook.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isInsertingEntry.value = true;\\n    window.toastr.info(`${selectedWorldbook.value}...`);\\n\\n    //  createWorldbookEntries \\n    await createWorldbookEntries(selectedWorldbook.value, [worldbookEntryOutput.value], { render: 'immediate' });\\n\\n    window.toastr.success(` ${selectedWorldbook.value}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isInsertingEntry.value = false;\\n  }\\n};\\n\\n//  JSON\\nconst copyWorldbookEntry = () => {\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  const jsonText = JSON.stringify(worldbookEntryOutput.value, null, 2);\\n  copyToClipboard(jsonText, ' JSON ');\\n};\\n\\n// \\nconst handleModifyWorldbookEntry = async () => {\\n  if (!worldbookModifyRequest.value.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!worldbookEntryOutput.value) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  try {\\n    isModifyingWorldbook.value = true;\\n    worldbookProgressPercent.value = 0;\\n    window.toastr.info('AI...');\\n\\n    const requestPayload = {\\n      model: settings.value.model || 'gpt-3.5-turbo',\\n      max_tokens: settings.value.max_tokens || 4000,\\n      temperature: 0.7,\\n      stream: enableWorldbookStreaming.value,\\n      messages: [\\n        {\\n          role: 'system',\\n          content: ` JSON \\n\\n****\\n1.  JSON \\n2. \\n3. \\n4. \\n5.  JSON\\n6. \\n\\n****\\n-  (content)\\n-  (keys)\\n-  (strategy.type) \\n-  JSON \\n\\n JSON `,\\n        },\\n        {\\n          role: 'user',\\n          content: `\\n\\n${JSON.stringify(worldbookEntryOutput.value, null, 2)}\\n\\n---\\n\\n\\n${worldbookModifyRequest.value}`,\\n        },\\n      ],\\n    };\\n\\n    let generatedText: string;\\n\\n    if (enableWorldbookStreaming.value) {\\n      // \\n      generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\\n    } else {\\n      // \\n      const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\\n      const response = await fetch(apiUrl, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${settings.value.api_key}`,\\n        },\\n        body: JSON.stringify(requestPayload),\\n      });\\n\\n      if (!response.ok) {\\n        throw new Error(`HTTP error! status: ${response.status}`);\\n      }\\n\\n      const data = await response.json();\\n      generatedText = data.choices[0].message.content.trim();\\n      worldbookProgressPercent.value = 100;\\n    }\\n\\n    //  JSON\\n    try {\\n      //  JSON \\n      const jsonMatch = generatedText.match(/```(?:json)?\\\\s*([\\\\s\\\\S]*?)```/) || [null, generatedText];\\n      const jsonText = jsonMatch[1] || generatedText;\\n\\n      const parsedEntry = JSON.parse(jsonText);\\n      worldbookEntryOutput.value = parsedEntry;\\n      worldbookModifyRequest.value = ''; // \\n      saveToolsDataImmediate(); // \\n\\n      window.toastr.success('');\\n    } catch (parseError) {\\n      console.error('JSON :', parseError);\\n      console.log(':', generatedText);\\n      window.toastr.error('');\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  } finally {\\n    isModifyingWorldbook.value = false;\\n    worldbookProgressPercent.value = 0;\\n  }\\n};\\n\\n// \\nconst clearWorldbookModifyRequest = () => {\\n  worldbookModifyRequest.value = '';\\n  saveToolsDataImmediate(); // \\n  window.toastr.success('');\\n};\\n\\n// ====================  ====================\\n\\n// \\nconst loadWorldbookEntries = async () => {\\n  if (!selectedViewerWorldbook.value) {\\n    worldbookEntries.value = [];\\n    return;\\n  }\\n\\n  try {\\n    const worldbook = await getWorldbook(selectedViewerWorldbook.value);\\n    if (worldbook && Array.isArray(worldbook) && worldbook.length > 0) {\\n      worldbookEntries.value = worldbook;\\n      console.log(`  \\\"${selectedViewerWorldbook.value}\\\"  ${worldbookEntries.value.length} `);\\n      window.toastr.success(` ${worldbookEntries.value.length} `);\\n    } else {\\n      worldbookEntries.value = [];\\n      window.toastr.info('');\\n    }\\n  } catch (error) {\\n    console.error(' :', error);\\n    window.toastr.error('' + (error as Error).message);\\n    worldbookEntries.value = [];\\n  }\\n};\\n\\n// \\nconst filteredWorldbookEntries = computed(() => {\\n  let entries = [...worldbookEntries.value];\\n\\n  // \\n  if (viewerSearchQuery.value.trim()) {\\n    const query = viewerSearchQuery.value.toLowerCase();\\n    entries = entries.filter(entry => {\\n      const nameMatch = entry.name?.toLowerCase().includes(query);\\n      const contentMatch = entry.content?.toLowerCase().includes(query);\\n      const keysMatch = entry.strategy?.keys?.some(key => {\\n        if (typeof key === 'string') {\\n          return key.toLowerCase().includes(query);\\n        } else if (key instanceof RegExp) {\\n          return key.toString().toLowerCase().includes(query);\\n        }\\n        return false;\\n      });\\n      return nameMatch || contentMatch || keysMatch;\\n    });\\n  }\\n\\n  // \\n  if (viewerSortBy.value === 'enabled') {\\n    entries = entries.filter(entry => entry.enabled);\\n  } else if (viewerSortBy.value === 'disabled') {\\n    entries = entries.filter(entry => !entry.enabled);\\n  }\\n\\n  return entries;\\n});\\n\\n// \\nconst toggleEntryExpanded = (index: number) => {\\n  const current = entryExpandedState.value.get(index) || false;\\n  entryExpandedState.value.set(index, !current);\\n};\\n\\n// \\nconst isEntryExpanded = (index: number) => {\\n  return entryExpandedState.value.get(index) || false;\\n};\\n\\n// \\nconst editWorldbookEntry = (entry: WorldbookEntry) => {\\n  try {\\n    // \\n    editingEntry.value = {\\n      uid: entry.uid,\\n      name: entry.name || '',\\n      enabled: entry.enabled ?? true,\\n      content: entry.content || '',\\n      strategy: {\\n        type: entry.strategy?.type || 'selective',\\n        keys: [...(entry.strategy?.keys || [])],\\n        keys_secondary: {\\n          logic: entry.strategy?.keys_secondary?.logic || 'and_any',\\n          keys: [...(entry.strategy?.keys_secondary?.keys || [])],\\n        },\\n        scan_depth: entry.strategy?.scan_depth || 'same_as_global',\\n      },\\n      position: entry.position\\n        ? {\\n            type: entry.position.type || 'before_character_definition',\\n            role: entry.position.role || 'system',\\n            depth: entry.position.depth ?? 0,\\n            order: entry.position.order ?? 0,\\n          }\\n        : {\\n            type: 'before_character_definition',\\n            role: 'system',\\n            depth: 0,\\n            order: 0,\\n          },\\n      probability: entry.probability ?? 100,\\n      recursion: entry.recursion\\n        ? {\\n            prevent_incoming: entry.recursion.prevent_incoming ?? false,\\n            prevent_outgoing: entry.recursion.prevent_outgoing ?? false,\\n            delay_until: entry.recursion.delay_until ?? null,\\n          }\\n        : {\\n            prevent_incoming: false,\\n            prevent_outgoing: false,\\n            delay_until: null,\\n          },\\n      effect: entry.effect\\n        ? {\\n            sticky: entry.effect.sticky ?? null,\\n            cooldown: entry.effect.cooldown ?? null,\\n            delay: entry.effect.delay ?? null,\\n          }\\n        : {\\n            sticky: null,\\n            cooldown: null,\\n            delay: null,\\n          },\\n    };\\n    editingEntryUid.value = entry.uid;\\n    showEditDialog.value = true;\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst saveEditedEntry = async () => {\\n  if (!editingEntry.value.name?.trim()) {\\n    window.toastr.warning('');\\n    return;\\n  }\\n\\n  if (!editingEntryUid.value) {\\n    window.toastr.error('ID');\\n    return;\\n  }\\n\\n  try {\\n    //  updateWorldbookWith API \\n    const updatedWorldbook = await updateWorldbookWith(selectedViewerWorldbook.value, worldbook => {\\n      const entryIndex = worldbook.findIndex(e => e.uid === editingEntryUid.value);\\n      if (entryIndex !== -1) {\\n        // \\n        worldbook[entryIndex] = {\\n          ...worldbook[entryIndex],\\n          ...editingEntry.value,\\n          uid: editingEntryUid.value, //  UID \\n        } as WorldbookEntry;\\n      }\\n      return worldbook;\\n    });\\n\\n    // \\n    worldbookEntries.value = updatedWorldbook;\\n\\n    // \\n    showEditDialog.value = false;\\n    editingEntry.value = {};\\n    editingEntryUid.value = null;\\n\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst deleteWorldbookEntry = async (entry: WorldbookEntry) => {\\n  if (!confirm(` \\\"${entry.name}\\\" `)) {\\n    return;\\n  }\\n\\n  try {\\n    //  deleteWorldbookEntries API\\n    const { worldbook } = await deleteWorldbookEntries(selectedViewerWorldbook.value, e => e.uid === entry.uid);\\n\\n    // \\n    worldbookEntries.value = worldbook;\\n\\n    window.toastr.success(` \\\"${entry.name}\\\"`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error('' + (error as Error).message);\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n.tools-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 15px 20px;\\n  background: linear-gradient(135deg, #2a2a2a 0%, #3a3a3a 100%);\\n  border-radius: 8px;\\n  cursor: pointer;\\n  transition: all 0.3s ease;\\n  margin-bottom: 15px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\n.section-header:hover {\\n  background: linear-gradient(135deg, #3a3a3a 0%, #4a4a4a 100%);\\n  transform: translateY(-1px);\\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n}\\n\\n/*  */\\n.section-header-anti-cliche {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(255, 107, 107, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(255, 107, 107, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-anti-cliche:hover {\\n  background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(238, 90, 36, 0.2) 100%) !important;\\n  border-color: rgba(255, 107, 107, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(255, 107, 107, 0.3),\\n    0 0 0 1px rgba(255, 107, 107, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.section-header-worldbook {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(255, 193, 7, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(255, 193, 7, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-worldbook:hover {\\n  background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%) !important;\\n  border-color: rgba(255, 193, 7, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(255, 193, 7, 0.3),\\n    0 0 0 1px rgba(255, 193, 7, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.section-header-character {\\n  background: linear-gradient(135deg, rgba(42, 42, 42, 0.95) 0%, rgba(58, 58, 58, 0.95) 100%) !important;\\n  border: 1px solid rgba(23, 162, 184, 0.3) !important;\\n  box-shadow:\\n    0 2px 8px rgba(0, 0, 0, 0.2),\\n    0 0 0 1px rgba(23, 162, 184, 0.1) inset !important;\\n  backdrop-filter: blur(10px);\\n}\\n\\n.section-header-character:hover {\\n  background: linear-gradient(135deg, rgba(23, 162, 184, 0.2) 0%, rgba(19, 132, 150, 0.2) 100%) !important;\\n  border-color: rgba(23, 162, 184, 0.5) !important;\\n  box-shadow:\\n    0 4px 16px rgba(23, 162, 184, 0.3),\\n    0 0 0 1px rgba(23, 162, 184, 0.2) inset !important;\\n  transform: translateY(-2px) !important;\\n}\\n\\n/*  */\\n.tool-section-anti-cliche,\\n.tool-section-worldbook,\\n.tool-section-character {\\n  margin-bottom: 20px;\\n  border-radius: 12px;\\n  overflow: hidden;\\n  background: rgba(26, 26, 26, 0.5);\\n  backdrop-filter: blur(5px);\\n}\\n\\n.tool-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 8px;\\n  padding: 20px;\\n  margin-bottom: 20px;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n.form-group {\\n  margin-bottom: 15px;\\n}\\n\\n.button-group {\\n  display: flex;\\n  gap: 12px;\\n  margin-bottom: 20px;\\n}\\n\\n.output-section {\\n  margin-top: 20px;\\n}\\n\\n.output-content {\\n  background: #1e1e1e;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 15px;\\n  color: #e0e0e0;\\n  font-size: 13px;\\n  line-height: 1.6;\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  max-height: 300px;\\n  overflow-y: auto;\\n}\\n\\n.output-actions {\\n  margin-top: 12px;\\n  display: flex;\\n  gap: 12px;\\n}\\n\\n/*  */\\n.process-button,\\n.clear-button,\\n.generate-button,\\n.copy-button {\\n  position: relative;\\n  overflow: hidden;\\n  transition: all 0.3s ease;\\n}\\n\\n.process-button:hover:not(:disabled),\\n.clear-button:hover:not(:disabled),\\n.generate-button:hover:not(:disabled),\\n.copy-button:hover {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);\\n}\\n\\n.copy-button:hover {\\n  background: #218838 !important;\\n}\\n\\n.tool-instructions {\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  padding: 12px;\\n  color: #ccc;\\n  font-size: 12px;\\n  margin-bottom: 15px;\\n}\\n\\n/*  */\\n.process-button:hover:not(:disabled) .shimmer-effect,\\n.clear-button:hover:not(:disabled) .shimmer-effect,\\n.generate-button:hover:not(:disabled) .shimmer-effect,\\n.copy-button:hover .shimmer-effect {\\n  left: 100%;\\n}\\n\\n.process-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);\\n}\\n\\n.clear-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);\\n}\\n\\n.generate-button:hover:not(:disabled) {\\n  transform: translateY(-2px);\\n  box-shadow: 0 6px 20px rgba(23, 162, 184, 0.4);\\n}\\n\\n.copy-button:hover {\\n  transform: translateY(-1px);\\n  box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);\\n}\\n\\n.process-button:disabled,\\n.clear-button:disabled,\\n.generate-button:disabled {\\n  opacity: 0.6;\\n  cursor: not-allowed;\\n  transform: none;\\n}\\n\\n.process-button:disabled:hover,\\n.clear-button:disabled:hover,\\n.generate-button:disabled:hover {\\n  transform: none;\\n  box-shadow: none;\\n}\\n\\n/*  */\\n.output-content::-webkit-scrollbar {\\n  width: 6px;\\n}\\n\\n.output-content::-webkit-scrollbar-track {\\n  background: #1a1a1a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb {\\n  background: #3a3a3a;\\n  border-radius: 3px;\\n}\\n\\n.output-content::-webkit-scrollbar-thumb:hover {\\n  background: #4a4a4a;\\n}\\n\\n/*  */\\n@media (max-width: 768px) {\\n  .button-group {\\n    flex-direction: column;\\n  }\\n\\n  .output-actions {\\n    flex-direction: column;\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes fadeIn-3100a601{from{opacity:0}to{opacity:1}}@keyframes slideUp-3100a601{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/GreetingsTab.vue\"],\"names\":[],\"mappings\":\"AAm5DA,2BACE,KACE,SACF,CACA,GACE,SACF,CACF,CAEA,4BACE,KACE,SAAU,CACV,0BACF,CACA,GACE,SAAU,CACV,uBACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div\\n    class=\\\"greetings-tab\\\"\\n    style=\\\"display: flex; flex-direction: column; height: 100%; background: #1a1a1a !important\\\"\\n  >\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-comments\\\" style=\\\"color: #667eea\\\"></i>\\n        \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #667eea; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n        >\\n          {{ greetings.length }} \\n        </span>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          :style=\\\"{ color: showHelp ? '#667eea' : '#e0e0e0', borderColor: showHelp ? '#667eea' : '#3a3a3a' }\\\"\\n          @click=\\\"showHelp = !showHelp\\\"\\n        >\\n          <i class=\\\"fa-solid fa-circle-question\\\"></i> {{ showHelp ? '' : '' }}\\n        </button>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #dc2626;\\n            border: none;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"clearAllConfig\\\"\\n          @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n          @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n        >\\n          <i class=\\\"fa-solid fa-eraser\\\"></i> \\n        </button>\\n        <button\\n          v-if=\\\"greetings.length > 0\\\"\\n          class=\\\"mini-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\n            border: none;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            font-weight: 600;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showAiStyleDialog = true\\\"\\n          @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n          @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i> AI\\n        </button>\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"loadConfig\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div style=\\\"flex: 1; display: flex; gap: 20px; padding: 20px; overflow: hidden\\\">\\n      <!--  -->\\n      <div style=\\\"flex: 1; overflow-y: auto; padding-right: 10px\\\">\\n        <!--  /  -->\\n        <div\\n          v-if=\\\"greetings.length === 0\\\"\\n          style=\\\"\\n            display: flex;\\n            flex-direction: column;\\n            align-items: center;\\n            justify-content: center;\\n            padding: 60px 20px;\\n            text-align: center;\\n            color: #888;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-comment-dots\\\" style=\\\"font-size: 64px; margin-bottom: 20px; opacity: 0.3\\\"></i>\\n          <div style=\\\"font-size: 18px; font-weight: 600; color: #e0e0e0; margin-bottom: 10px\\\"></div>\\n          <div style=\\\"font-size: 14px; color: #888; max-width: 400px; line-height: 1.6\\\">\\n            \\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-else-if=\\\"showHelp\\\"\\n          style=\\\"background: #2a2a2a; border: 1px solid #667eea; border-radius: 8px; padding: 20px; margin-bottom: 20px\\\"\\n        >\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\\\">\\n            <h4 style=\\\"color: #667eea; margin: 0; display: flex; align-items: center; gap: 8px\\\">\\n              <i class=\\\"fa-solid fa-circle-info\\\"></i>\\n              \\n            </h4>\\n            <button\\n              style=\\\"background: transparent; border: none; color: #888; cursor: pointer; font-size: 18px; padding: 4px\\\"\\n              @click=\\\"showHelp = false\\\"\\n            >\\n              <i class=\\\"fa-solid fa-times\\\"></i>\\n            </button>\\n          </div>\\n          <ol style=\\\"color: #ccc; margin: 0; padding-left: 20px; line-height: 1.8\\\">\\n            <li></li>\\n            <li></li>\\n            <li>AI</li>\\n            <li>\\\"AI\\\"</li>\\n            <li>AIHTML</li>\\n            <li></li>\\n            <li>\\\"\\\"</li>\\n            <li>\\\"STScript JSON\\\"</li>\\n            <li>JSON / </li>\\n          </ol>\\n          <div style=\\\"margin-top: 15px; padding-top: 15px; border-top: 1px solid #3a3a3a\\\">\\n            <p style=\\\"color: #888; font-size: 13px; margin: 0\\\">\\n              <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color: #ffc107\\\"></i>\\n              <strong></strong>0\\n            </p>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div v-else style=\\\"display: flex; flex-direction: column; gap: 15px\\\">\\n          <div\\n            v-for=\\\"(greeting, index) in greetings\\\"\\n            :key=\\\"index\\\"\\n            class=\\\"greeting-item\\\"\\n            style=\\\"\\n              background: #2a2a2a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              transition: all 0.3s ease;\\n            \\\"\\n          >\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                display: flex;\\n                align-items: center;\\n                gap: 10px;\\n                margin-bottom: 12px;\\n                padding-bottom: 10px;\\n                border-bottom: 1px solid #3a3a3a;\\n              \\\"\\n            >\\n              <span\\n                style=\\\"\\n                  background: #667eea;\\n                  color: white;\\n                  padding: 4px 10px;\\n                  border-radius: 6px;\\n                  font-size: 12px;\\n                  font-weight: bold;\\n                  min-width: 35px;\\n                  text-align: center;\\n                \\\"\\n              >\\n                #{{ index }}\\n              </span>\\n              <input\\n                v-model=\\\"greeting.icon\\\"\\n                style=\\\"\\n                  width: 60px;\\n                  text-align: center;\\n                  font-size: 20px;\\n                  background: #1a1a1a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  padding: 6px;\\n                  color: #e0e0e0;\\n                \\\"\\n                placeholder=\\\"\\\"\\n                maxlength=\\\"4\\\"\\n                @input=\\\"saveConfig\\\"\\n              />\\n              <input\\n                v-model=\\\"greeting.title\\\"\\n                style=\\\"\\n                  flex: 1;\\n                  background: #1a1a1a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  padding: 8px 12px;\\n                  color: #e0e0e0;\\n                  font-size: 14px;\\n                \\\"\\n                :placeholder=\\\"index === 0 ? '' : ` ${index}`\\\"\\n                @input=\\\"saveConfig\\\"\\n              />\\n              <button\\n                style=\\\"\\n                  background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);\\n                  border: none;\\n                  color: white;\\n                  padding: 8px 16px;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 6px;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  box-shadow: 0 2px 8px rgba(251, 191, 36, 0.3);\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"generateDescription(index)\\\"\\n                @mouseenter=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\\n                \\\"\\n                @mouseleave=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.3)';\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-wand-magic-sparkles\\\"></i>\\n                <span>AI </span>\\n              </button>\\n              <button\\n                v-if=\\\"greeting.description\\\"\\n                style=\\\"\\n                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\\n                  border: none;\\n                  color: white;\\n                  padding: 8px 16px;\\n                  border-radius: 6px;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 6px;\\n                  font-size: 13px;\\n                  font-weight: 600;\\n                  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"editDescription(index)\\\"\\n                @mouseenter=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.5)';\\n                \\\"\\n                @mouseleave=\\\"\\n                  ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n                  ($event.currentTarget as HTMLElement).style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\\n                \\\"\\n              >\\n                <i class=\\\"fa-solid fa-edit\\\"></i>\\n                <span>AI </span>\\n              </button>\\n            </div>\\n\\n            <!--  -->\\n            <textarea\\n              v-model=\\\"greeting.description\\\"\\n              style=\\\"\\n                width: 100%;\\n                background: #1a1a1a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 6px;\\n                padding: 10px;\\n                color: #e0e0e0;\\n                font-size: 13px;\\n                font-family: inherit;\\n                resize: vertical;\\n                min-height: 60px;\\n              \\\"\\n              placeholder=\\\"...\\\"\\n              @input=\\\"saveConfig\\\"\\n            >\\n            </textarea>\\n\\n            <!--  -->\\n            <button\\n              style=\\\"\\n                width: 100%;\\n                padding: 10px;\\n                background: transparent;\\n                border: 1px solid #667eea;\\n                border-radius: 6px;\\n                color: #667eea;\\n                font-size: 13px;\\n                cursor: pointer;\\n                transition: all 0.2s ease;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n                margin-top: 10px;\\n              \\\"\\n              @click=\\\"viewOriginalGreeting(index)\\\"\\n              @mouseenter=\\\"($event.currentTarget as HTMLElement).style.background = 'rgba(102, 126, 234, 0.1)'\\\"\\n              @mouseleave=\\\"($event.currentTarget as HTMLElement).style.background = 'transparent'\\\"\\n            >\\n              <i class=\\\"fa-solid fa-file-lines\\\"></i>\\n              <span></span>\\n            </button>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"greetings.length > 0\\\"\\n          style=\\\"\\n            position: sticky;\\n            bottom: 0;\\n            padding: 20px;\\n            background: linear-gradient(to top, #1a1a1a 80%, transparent);\\n            border-top: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: center;\\n            gap: 15px;\\n            margin-top: 20px;\\n          \\\"\\n        >\\n          <button\\n            style=\\\"\\n              padding: 15px 35px;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              border: none;\\n              border-radius: 10px;\\n              color: white;\\n              font-size: 15px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);\\n            \\\"\\n            @click=\\\"generateFrontendCode\\\"\\n            @mouseenter=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';\\n            \\\"\\n            @mouseleave=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-code\\\" style=\\\"font-size: 16px\\\"></i>\\n            HTML\\n          </button>\\n          <button\\n            style=\\\"\\n              padding: 15px 35px;\\n              background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n              border: none;\\n              border-radius: 10px;\\n              color: white;\\n              font-size: 15px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n              box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);\\n            \\\"\\n            @click=\\\"downloadAsJson\\\"\\n            @mouseenter=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(-3px)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 6px 20px rgba(16, 185, 129, 0.6)';\\n            \\\"\\n            @mouseleave=\\\"\\n              ($event.currentTarget as HTMLElement).style.transform = 'translateY(0)';\\n              ($event.currentTarget as HTMLElement).style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-download\\\" style=\\\"font-size: 16px\\\"></i>\\n            STScript JSON\\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          flex: 1;\\n          display: flex;\\n          flex-direction: column;\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          overflow: hidden;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\\n        \\\"\\n      >\\n        <div\\n          style=\\\"\\n            padding: 15px 20px;\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h4\\n            style=\\\"\\n              margin: 0;\\n              color: white;\\n              font-size: 14px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-eye\\\"></i>\\n            \\n          </h4>\\n          <button\\n            v-if=\\\"previewHtml\\\"\\n            title=\\\"\\\"\\n            style=\\\"\\n              width: 32px;\\n              height: 32px;\\n              background: rgba(255, 255, 255, 0.2);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 14px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n            \\\"\\n            @click=\\\"openPreviewInNewWindow\\\"\\n          >\\n            <i class=\\\"fa-solid fa-external-link-alt\\\"></i>\\n          </button>\\n        </div>\\n        <div style=\\\"flex: 1; position: relative; overflow: hidden; background: #1e1e1e\\\">\\n          <iframe\\n            v-if=\\\"previewHtml\\\"\\n            :srcdoc=\\\"previewHtml\\\"\\n            sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n          <div\\n            v-else\\n            style=\\\"\\n              width: 100%;\\n              height: 100%;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              color: #666;\\n              font-size: 14px;\\n              padding: 20px;\\n              text-align: center;\\n              line-height: 1.8;\\n            \\\"\\n          >\\n            <div>\\n              <i class=\\\"fa-solid fa-eye-slash\\\" style=\\\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\\\"></i>\\n              <p style=\\\"margin: 0\\\"></p>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI -->\\n    <AIGenerateDialog\\n      :show=\\\"showAiGenerateDialog\\\"\\n      :is-generating=\\\"isGeneratingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI 20-50...\\\"\\n      :show-input=\\\"false\\\"\\n      @close=\\\"closeAiGenerateDialog\\\"\\n      @confirm=\\\"() => {}\\\"\\n    />\\n\\n    <!-- AI -->\\n    <AIModifyDialog\\n      :show=\\\"showAiEditDialog\\\"\\n      :is-modifying=\\\"isEditingAi\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI \\\"\\n      :examples=\\\"['', '', '', '']\\\"\\n      @close=\\\"showAiEditDialog = false\\\"\\n      @confirm=\\\"confirmEditDescription\\\"\\n    />\\n\\n    <!-- AI -->\\n    <AIModifyDialog\\n      :show=\\\"showAiStyleDialog\\\"\\n      :is-modifying=\\\"isGeneratingStyle\\\"\\n      title=\\\"AI \\\"\\n      description=\\\"AI HTML\\\"\\n      :examples=\\\"[\\n        '',\\n        '',\\n        '',\\n        '',\\n        '',\\n      ]\\\"\\n      @close=\\\"showAiStyleDialog = false\\\"\\n      @confirm=\\\"generateStyleWithAI\\\"\\n    />\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showOriginalDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showOriginalDialog = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);\\n          border-radius: 12px;\\n          padding: 24px;\\n          max-width: 700px;\\n          width: 100%;\\n          max-height: 80vh;\\n          display: flex;\\n          flex-direction: column;\\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\\n        \\\"\\n        @click.stop\\n      >\\n        <!--  -->\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px\\\">\\n          <h3 style=\\\"margin: 0; color: white; display: flex; align-items: center; gap: 8px\\\">\\n            <i class=\\\"fa-solid fa-file-lines\\\"></i>\\n            <span></span>\\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: rgba(255, 255, 255, 0.7);\\n              cursor: pointer;\\n              font-size: 20px;\\n              padding: 4px 8px;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showOriginalDialog = false\\\"\\n            @mouseenter=\\\"($event.currentTarget as HTMLElement).style.color = 'white'\\\"\\n            @mouseleave=\\\"($event.currentTarget as HTMLElement).style.color = 'rgba(255, 255, 255, 0.7)'\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            background: #1a1a1a;\\n            border-radius: 8px;\\n            padding: 16px;\\n            color: #e0e0e0;\\n            font-size: 14px;\\n            line-height: 1.6;\\n            overflow-y: auto;\\n            flex: 1;\\n            white-space: pre-wrap;\\n            word-wrap: break-word;\\n          \\\"\\n        >\\n          {{ originalGreetingContent }}\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"display: flex; justify-content: flex-end; margin-top: 16px\\\">\\n          <button\\n            style=\\\"\\n              padding: 10px 24px;\\n              background: white;\\n              border: none;\\n              border-radius: 6px;\\n              color: #1e3a8a;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n            \\\"\\n            @click=\\\"showOriginalDialog = false\\\"\\n            @mouseenter=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(-2px)'\\\"\\n            @mouseleave=\\\"($event.currentTarget as HTMLElement).style.transform = 'translateY(0)'\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showCodeDialog\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.7);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        backdrop-filter: blur(5px);\\n      \\\"\\n      @click=\\\"closeCodeDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 15px;\\n          max-width: 800px;\\n          width: 90%;\\n          max-height: 80vh;\\n          display: flex;\\n          flex-direction: column;\\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\\n        \\\"\\n        @click.stop\\n      >\\n        <div\\n          style=\\\"\\n            padding: 20px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3 style=\\\"color: #e0e0e0; font-size: 18px; margin: 0; display: flex; align-items: center; gap: 10px\\\">\\n            <i class=\\\"fa-solid fa-code\\\"></i>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              background: transparent;\\n              border: none;\\n              color: #888;\\n              font-size: 20px;\\n              cursor: pointer;\\n              padding: 5px 10px;\\n              transition: color 0.2s ease;\\n            \\\"\\n            @click=\\\"closeCodeDialog\\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n        <div style=\\\"padding: 20px; overflow-y: auto; flex: 1\\\">\\n          <div\\n            style=\\\"\\n              background: #1a1a1a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              margin-bottom: 20px;\\n              color: #e0e0e0;\\n            \\\"\\n          >\\n            <p style=\\\"margin-bottom: 10px; font-weight: 600\\\"><strong></strong></p>\\n            <ol style=\\\"margin-left: 20px; color: #aaa; line-height: 1.8\\\">\\n              <li></li>\\n              <li>\\n                \\n                <code style=\\\"background: #2a2a2a; padding: 2px 6px; border-radius: 4px; color: #667eea\\\"></code\\n                >\\n              </li>\\n              <li></li>\\n            </ol>\\n          </div>\\n          <div\\n            style=\\\"\\n              background: #1a1a1a;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              padding: 15px;\\n              max-height: 400px;\\n              overflow-y: auto;\\n              margin-bottom: 15px;\\n            \\\"\\n          >\\n            <pre\\n              style=\\\"margin: 0; white-space: pre-wrap; word-wrap: break-word\\\"\\n            ><code style=\\\"color: #e0e0e0; font-family: 'Consolas', 'Monaco', monospace; font-size: 12px; line-height: 1.6\\\">{{ generatedCode }}</code></pre>\\n          </div>\\n          <button\\n            style=\\\"\\n              width: 100%;\\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n              color: white;\\n              border: none;\\n              padding: 12px;\\n              border-radius: 8px;\\n              font-size: 14px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.3s ease;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              gap: 8px;\\n            \\\"\\n            @click=\\\"copyCode\\\"\\n          >\\n            <i class=\\\"fa-solid fa-copy\\\"></i>\\n            {{ copyButtonText }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { klona } from 'klona';\\nimport { storeToRefs } from 'pinia';\\nimport toastr from 'toastr';\\nimport { onMounted, ref } from 'vue';\\nimport { z } from 'zod';\\nimport { useSettingsStore } from '../settings';\\nimport { copyToClipboard } from '../utils';\\nimport { normalizeApiEndpoint } from '../utils/api';\\nimport AIGenerateDialog from './AIGenerateDialog.vue';\\nimport AIModifyDialog from './AIModifyDialog.vue';\\n\\n// \\nconst GreetingConfig = z.object({\\n  icon: z.string().default(''),\\n  title: z.string().default(''),\\n  description: z.string().default(''),\\n});\\n\\ntype GreetingConfig = z.infer<typeof GreetingConfig>;\\n\\n// UIHTML\\nconst UIConfig = z.object({\\n  customHtml: z.string().default(''), // AIHTML\\n});\\n\\ntype UIConfig = z.infer<typeof UIConfig>;\\n\\n// settings store\\nconst settingsStore = useSettingsStore();\\nconst { settings } = storeToRefs(settingsStore);\\n\\n// \\nconst greetings = ref<GreetingConfig[]>([]);\\nconst uiConfig = ref<UIConfig>(UIConfig.parse({})); // UI\\nconst showCodeDialog = ref(false);\\nconst generatedCode = ref('');\\nconst copyButtonText = ref('');\\nconst showAiGenerateDialog = ref(false);\\nconst showAiEditDialog = ref(false);\\nconst isGeneratingAi = ref(false);\\nconst isEditingAi = ref(false);\\nconst currentEditingIndex = ref(-1);\\nconst showHelp = ref(false); // \\nconst previewHtml = ref('');\\nconst currentCharacter = ref<any>(null);\\nconst showOriginalDialog = ref(false);\\nconst originalGreetingContent = ref('');\\nconst showAiStyleDialog = ref(false); // AI\\nconst isGeneratingStyle = ref(false); // \\n\\n// \\nfunction getCurrentCharacter() {\\n  try {\\n    const char = getCharData('current');\\n    if (char) {\\n      console.log(':', char.name);\\n    } else {\\n      console.log('');\\n    }\\n    return char;\\n  } catch (error) {\\n    console.error(':', error);\\n    return null;\\n  }\\n}\\n\\n// \\nasync function loadConfig() {\\n  try {\\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      greetings.value = [];\\n      console.log('');\\n      return;\\n    }\\n\\n    console.log(':', character.name);\\n\\n    // \\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    console.log('', allGreetings.length, '');\\n\\n    // \\n    const savedConfig = getVariables({ type: 'character' });\\n    const configs = savedConfig?.greetings_config || [];\\n    const savedUIConfig = savedConfig?.ui_config;\\n\\n    // \\n    greetings.value = allGreetings.map((_, index) => {\\n      const saved = configs[index];\\n      return GreetingConfig.parse(saved || {});\\n    });\\n\\n    // UI\\n    uiConfig.value = UIConfig.parse(savedUIConfig || {});\\n\\n    console.log(':', greetings.value.length, '');\\n    console.log('UI, HTML:', uiConfig.value.customHtml.length);\\n    currentCharacter.value = character;\\n    updatePreview();\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nfunction saveConfig() {\\n  try {\\n    replaceVariables(\\n      {\\n        greetings_config: klona(greetings.value),\\n        ui_config: klona(uiConfig.value),\\n      },\\n      { type: 'character' },\\n    );\\n    updatePreview(); // \\n  } catch (error) {\\n    console.error(':', error);\\n  }\\n}\\n\\n// \\nfunction clearAllConfig() {\\n  if (\\n    !confirm(\\n      `\\\\n\\\\n ${greetings.value.length} \\\\n\\\\n `,\\n    )\\n  ) {\\n    return;\\n  }\\n\\n  try {\\n    // \\n    greetings.value = greetings.value.map(() => {\\n      return GreetingConfig.parse({\\n        icon: '',\\n        title: '',\\n        description: '',\\n      });\\n    });\\n\\n    // UI\\n    uiConfig.value.customHtml = '';\\n\\n    // \\n    saveConfig();\\n\\n    // \\n    updatePreview();\\n\\n    toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nfunction viewOriginalGreeting(index: number) {\\n  try {\\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      toastr.error('');\\n      return;\\n    }\\n\\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    const greetingContent = allGreetings[index] || '';\\n\\n    if (!greetingContent.trim()) {\\n      toastr.warning('');\\n      return;\\n    }\\n\\n    originalGreetingContent.value = greetingContent;\\n    showOriginalDialog.value = true;\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// AI\\nfunction closeAiGenerateDialog() {\\n  if (!isGeneratingAi.value) {\\n    showAiGenerateDialog.value = false;\\n  }\\n}\\n\\n// AI\\nasync function generateDescription(index: number) {\\n  currentEditingIndex.value = index;\\n\\n  // \\n  showAiGenerateDialog.value = true;\\n  isGeneratingAi.value = true;\\n\\n  const idx = index;\\n  if (idx < 0 || idx >= greetings.value.length) {\\n    isGeneratingAi.value = false;\\n    showAiGenerateDialog.value = false;\\n    return;\\n  }\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      toastr.error(' API  API Key');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const character = getCurrentCharacter();\\n    if (!character) {\\n      toastr.error('');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\\n    const greetingContent = allGreetings[idx] || '';\\n\\n    if (!greetingContent.trim()) {\\n      toastr.warning('');\\n      showAiGenerateDialog.value = false;\\n      isGeneratingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const systemPrompt = `\\n\\n\\n1.  20-50 \\n2. \\n3. \\n4. \\\"...\\\"\\\"...\\\"\\n5. `;\\n\\n    const userPrompt = `\\n\\n${greetingContent}\\n\\n`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    if (!aiDescription) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      // \\n      if (!result.choices || result.choices.length === 0) {\\n        throw new Error('API  choices  API ');\\n      }\\n\\n      throw new Error('AI \\\\n1. API Key \\\\n2. \\\\n3. ');\\n    }\\n\\n    // AI\\n    // \\n    aiDescription = aiDescription.replace(/^[\\\"']|[\\\"']$/g, '');\\n    // markdown\\n    aiDescription = aiDescription.replace(/^```.*?\\\\n?|```$/g, '').trim();\\n\\n    if (!aiDescription) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    // \\n    greetings.value[idx].description = aiDescription;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiGenerateDialog.value = false;\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    const errorMsg = ': ' + (error as Error).message;\\n    toastr.error(errorMsg);\\n    // \\n    setTimeout(() => {}, 5000);\\n  } finally {\\n    isGeneratingAi.value = false;\\n  }\\n}\\n\\n// AI\\nfunction editDescription(index: number) {\\n  currentEditingIndex.value = index;\\n  showAiEditDialog.value = true;\\n}\\n\\n// AI\\nasync function confirmEditDescription(requirement: string) {\\n  const index = currentEditingIndex.value;\\n  if (index < 0 || index >= greetings.value.length) return;\\n\\n  isEditingAi.value = true;\\n\\n  try {\\n    //  API \\n    if (!settings.value.api_endpoint || !settings.value.api_key) {\\n      toastr.error(' API  API Key');\\n      showAiEditDialog.value = false;\\n      isEditingAi.value = false;\\n      return;\\n    }\\n\\n    const currentDesc = greetings.value[index].description;\\n\\n    if (!currentDesc.trim()) {\\n      toastr.warning(' AI ');\\n      showAiEditDialog.value = false;\\n      isEditingAi.value = false;\\n      return;\\n    }\\n\\n    // \\n    const systemPrompt = `\\n\\n\\n1. \\n2.  20-50 \\n3. \\n4. `;\\n\\n    const userPrompt = `\\n${currentDesc}\\n\\n\\n${requirement}\\n\\n`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    if (!aiDescription) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      // \\n      if (!result.choices || result.choices.length === 0) {\\n        throw new Error('API  choices  API ');\\n      }\\n\\n      throw new Error('AI \\\\n1. API Key \\\\n2. \\\\n3. ');\\n    }\\n\\n    // AI\\n    // \\n    aiDescription = aiDescription.replace(/^[\\\"']|[\\\"']$/g, '');\\n    // markdown\\n    aiDescription = aiDescription.replace(/^```.*?\\\\n?|```$/g, '').trim();\\n\\n    if (!aiDescription) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI :', aiDescription);\\n\\n    // \\n    greetings.value[index].description = aiDescription;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiEditDialog.value = false;\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    const errorMsg = ': ' + (error as Error).message;\\n    toastr.error(errorMsg);\\n  } finally {\\n    isEditingAi.value = false;\\n  }\\n}\\n\\n// AI\\nasync function generateStyleWithAI(styleDescription: string) {\\n  if (!styleDescription.trim()) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  //  API \\n  if (!settings.value.api_endpoint || !settings.value.api_key) {\\n    toastr.error(' API  API Key');\\n    showAiStyleDialog.value = false;\\n    return;\\n  }\\n\\n  isGeneratingStyle.value = true;\\n\\n  try {\\n    // HTML\\n    const cards = greetings.value\\n      .map((g, index) => {\\n        const icon = g.icon || '';\\n        const title = g.title || (index === 0 ? '' : ` ${index}`);\\n        const desc = g.description || '';\\n        const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n        return (\\n          '      <' +\\n          'div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(' +\\n          index +\\n          ')\\\">' +\\n          '<' +\\n          'div class=\\\"card-badge\\\">' +\\n          badge +\\n          '<' +\\n          '/div>' +\\n          '<' +\\n          'div class=\\\"card-icon\\\">' +\\n          icon +\\n          '<' +\\n          '/div>' +\\n          '<' +\\n          'div class=\\\"card-title\\\">' +\\n          title +\\n          '<' +\\n          '/div>' +\\n          '<' +\\n          'div class=\\\"card-desc\\\">' +\\n          desc +\\n          '<' +\\n          '/div>' +\\n          '<' +\\n          '/div>'\\n        );\\n      })\\n      .join('\\\\n');\\n\\n    const systemPrompt =\\n      `HTML/CSS\\n\\nHTML\\n\\n\\n1.  HTML ` +\\n      '<' +\\n      `html>` +\\n      '<' +\\n      `head>` +\\n      '<' +\\n      `body>\\n2.  ` +\\n      '<' +\\n      `head>  Font Awesome ` +\\n      '<' +\\n      `link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">\\n3.  ` +\\n      '<' +\\n      `style>  CSS \\n4. HTML\\n   - body\\n   - .container\\n   - .header\\n     - h1\\n     - p\\n   - .scene-grid\\n   - .scene-card onclick \\n   - .card-badge\\n   - .card-icon\\n   - .card-title\\n   - .card-desc\\n   - .loading\\n5.  switchGreeting(id)  JavaScript \\n6. \\n7. \\n8. HTMLmarkdown\\n\\n\\n- body  \\\"min-height: 100vh; height: auto;\\\" \\n- body  \\\"display: flex; align-items: center; justify-content: center;\\\" \\n- .container  \\\"height: auto;\\\" \\n- \\n\\nHTML\\n-  class=\\\"scene-grid\\\" div\\n-  scene-grid \\n- scene-gridgrid-containercards-grid`;\\n\\n    //  switchGreeting \\n    const switchGreetingCode = `async function switchGreeting(id) {\\n      try {\\n        const loading = document.getElementById(\\\"loading\\\");\\n        const mainContainer = document.getElementById(\\\"mainContainer\\\");\\n        if (loading) loading.classList.add(\\\"active\\\");\\n        if (mainContainer) mainContainer.style.display = \\\"none\\\";\\n        \\n        if (typeof window.getChatMessages !== \\\"function\\\") {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        const messages = await window.getChatMessages(0, { include_swipe: true });\\n        if (!messages || messages.length === 0) {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        const content = messages[0].swipes[id];\\n        if (!content) {\\n          alert(\\\"\\\");\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n          return;\\n        }\\n        \\n        await window.setChatMessage(content, 0, { swipe_id: id, refresh: \\\"display_and_render_current\\\" });\\n        \\n        setTimeout(() => {\\n          if (loading) loading.classList.remove(\\\"active\\\");\\n          if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n        }, 500);\\n      } catch (err) {\\n        console.error(\\\":\\\", err);\\n        alert(\\\": \\\" + err.message);\\n        const loading = document.getElementById(\\\"loading\\\");\\n        const mainContainer = document.getElementById(\\\"mainContainer\\\");\\n        if (loading) loading.classList.remove(\\\"active\\\");\\n        if (mainContainer) mainContainer.style.display = \\\"block\\\";\\n      }\\n    }`;\\n\\n    const userPrompt =\\n      `${styleDescription}\\n\\n onclick=\\\"switchGreeting()\\\" \\n${cards}\\n\\n ` +\\n      '<' +\\n      `/body>  JavaScript \\n` +\\n      '<' +\\n      `script>\\n${switchGreetingCode}\\n` +\\n      '<' +\\n      `/script>\\n\\n .scene-card  onclick=\\\"switchGreeting()\\\" \\n` +\\n      '<' +\\n      `div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(0)\\\">\\n\\n loading \\n` +\\n      '<' +\\n      `div class=\\\"loading\\\" id=\\\"loading\\\" style=\\\"display: none; text-align: center; padding: 40px;\\\">\\n  ` +\\n      '<' +\\n      `p style=\\\"color: #888; font-size: 18px;\\\">...` +\\n      '<' +\\n      `/p>\\n` +\\n      '<' +\\n      `/div>\\n\\nHTML`;\\n\\n    console.log(' AI ...');\\n\\n    //  API \\n    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\\n    console.log(' :', apiUrl);\\n\\n    //  AI API\\n    const response = await fetch(apiUrl, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${settings.value.api_key}`,\\n      },\\n      body: JSON.stringify({\\n        model: settings.value.model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: settings.value.temperature,\\n        max_tokens: settings.value.max_tokens,\\n        top_p: settings.value.top_p,\\n        presence_penalty: settings.value.presence_penalty,\\n        frequency_penalty: settings.value.frequency_penalty,\\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API : ${response.status} ${response.statusText}\\\\n${errorText}`);\\n    }\\n\\n    const result = await response.json();\\n\\n    console.log(' [] API :', result);\\n\\n    let generatedHtml = result.choices?.[0]?.message?.content?.trim() || '';\\n\\n    console.log(' [] AI :', generatedHtml ? generatedHtml.substring(0, 500) : '()');\\n\\n    if (!generatedHtml) {\\n      console.error(' [] AI ');\\n      console.error(':', JSON.stringify(result, null, 2));\\n\\n      // \\n      if (result.error) {\\n        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\\n      }\\n\\n      throw new Error('AI  API ');\\n    }\\n\\n    // AI\\n    // markdown\\n    generatedHtml = generatedHtml.replace(/^```html\\\\n?|^```\\\\n?|```$/gm, '').trim();\\n\\n    if (!generatedHtml) {\\n      throw new Error('AI ');\\n    }\\n\\n    console.log(' [] AI HTML:', generatedHtml.length);\\n\\n    // HTML\\n    uiConfig.value.customHtml = generatedHtml;\\n    saveConfig();\\n\\n    toastr.success('');\\n    showAiStyleDialog.value = false;\\n\\n    // \\n    updatePreview();\\n  } catch (error) {\\n    console.error(' [] AI :', error);\\n    toastr.error(': ' + (error as Error).message, '', { timeOut: 5000 });\\n  } finally {\\n    isGeneratingStyle.value = false;\\n  }\\n}\\n\\n// \\nasync function generateFrontendCode() {\\n  const character = getCurrentCharacter();\\n  if (!character) {\\n    toastr.warning('');\\n    return;\\n  }\\n\\n  // AIHTML\\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\\n    generatedCode.value = uiConfig.value.customHtml;\\n    showCodeDialog.value = true;\\n    return;\\n  }\\n\\n  // \\n  // \\n  const cards = greetings.value\\n    .map((g, index) => {\\n      const icon = g.icon || '<' + 'i class=\\\"fa-solid fa-comment\\\"><' + '/i>';\\n      const title = g.title || (index === 0 ? '' : ` ${index}`);\\n      const desc = g.description || '';\\n      const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n\\n      return (\\n        '        <' +\\n        'div class=\\\"scene-card\\\" onclick=\\\"switchGreeting(' +\\n        index +\\n        ')\\\">' +\\n        '<' +\\n        'div class=\\\"card-badge\\\">' +\\n        badge +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-icon\\\">' +\\n        icon +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-title\\\">' +\\n        title +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-desc\\\">' +\\n        desc +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        '/div>'\\n      );\\n    })\\n    .join('\\\\n\\\\n');\\n\\n  // HTML\\n  const htmlCode = [\\n    '<' + 'html>',\\n    '<' + 'head>',\\n    '  <' + 'meta charset=\\\"UTF-8\\\">',\\n    '  <' + 'link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">',\\n    '  <' + 'style>',\\n    '    * { margin: 0; padding: 0; box-sizing: border-box; }',\\n    '    html, body { height: 100%; }',\\n    '    body {',\\n    '      font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, sans-serif;',\\n    '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\\n    '      padding: 20px; min-height: 100%; height: auto; display: flex; align-items: center; justify-content: center;',\\n    '      overflow-y: auto;',\\n    '    }',\\n    '    .container { max-width: 900px; width: 100%; height: auto; background: rgba(255, 255, 255, 0.95);',\\n    '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); margin: 20px auto; }',\\n    '    .header { text-align: center; margin-bottom: 40px; }',\\n    '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\\n    '    .header p { color: #666; font-size: 16px; }',\\n    '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\\n    '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\\n    '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\\n    '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\\n    '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\\n    '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\\n    '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\\n    '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\\n    '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\\n    '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\\n    '    .loading { display: none; text-align: center; padding: 40px; }',\\n    '    .loading.active { display: block; }',\\n    '  <' + '/style>',\\n    '<' + '/head>',\\n    '<' + 'body>',\\n    '  <' + 'div class=\\\"container\\\" id=\\\"mainContainer\\\">',\\n    '    <' + 'div class=\\\"header\\\">',\\n    '      <' + 'h1><' + '/h1>',\\n    '      <' + 'p><' + '/p>',\\n    '    <' + '/div>',\\n    '    <' + 'div class=\\\"scene-grid\\\" id=\\\"sceneGrid\\\">',\\n    cards,\\n    '    <' + '/div>',\\n    '  <' + '/div>',\\n    '  <' + 'div class=\\\"loading\\\" id=\\\"loading\\\"><' + 'p>...<' + '/p><' + '/div>',\\n    '  <' + 'script>',\\n    '    async function switchGreeting(id) {',\\n    '      try {',\\n    '        const loading = document.getElementById(\\\"loading\\\");',\\n    '        const mainContainer = document.getElementById(\\\"mainContainer\\\");',\\n    '        loading.classList.add(\\\"active\\\"); mainContainer.style.display = \\\"none\\\";',\\n    '        const messages = await getChatMessages(0, { include_swipe: true });',\\n    '        if (!messages || messages.length === 0) { alert(\\\"\\\"); return; }',\\n    '        const content = messages[0].swipes[id];',\\n    '        if (!content) { alert(\\\"\\\"); return; }',\\n    '        await setChatMessage(content, 0, { swipe_id: id, refresh: \\\"display_and_render_current\\\" });',\\n    '        setTimeout(() => { loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; }, 500);',\\n    '      } catch (err) { console.error(\\\":\\\", err); alert(\\\": \\\" + err.message); }',\\n    '    }',\\n    '  </' + 'script>',\\n    '<' + '/body>',\\n    '<' + '/html>',\\n  ].join('\\\\n');\\n\\n  // API\\n  const fixedHtmlCode = htmlCode\\n    .replace(\\n      'const messages = await getChatMessages',\\n      'if (typeof window.getChatMessages !== \\\"function\\\") { alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return; }\\\\n        const messages = await window.getChatMessages',\\n    )\\n    .replace('await setChatMessage', 'await window.setChatMessage')\\n    .replace(\\n      'alert(\\\"\\\"); return;',\\n      'alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return;',\\n    )\\n    .replace(\\n      'alert(\\\"\\\"); return;',\\n      'alert(\\\"\\\"); loading.classList.remove(\\\"active\\\"); mainContainer.style.display = \\\"block\\\"; return;',\\n    );\\n\\n  generatedCode.value = fixedHtmlCode;\\n\\n  showCodeDialog.value = true;\\n  copyButtonText.value = '';\\n}\\n\\n// \\nasync function copyCode() {\\n  const success = await copyToClipboard(generatedCode.value, ' ');\\n  if (success) {\\n    copyButtonText.value = ' ';\\n    setTimeout(() => {\\n      copyButtonText.value = '';\\n    }, 2000);\\n  }\\n}\\n\\n// \\nfunction closeCodeDialog() {\\n  showCodeDialog.value = false;\\n}\\n\\n// API\\nfunction updatePreview() {\\n  if (greetings.value.length === 0) {\\n    previewHtml.value = '';\\n    return;\\n  }\\n\\n  const character = getCurrentCharacter();\\n  const characterName = character?.name || '';\\n\\n  // AIHTML\\n  if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\\n    console.log(' AIHTML');\\n\\n    try {\\n      // HTML\\n      const cardsHtml = greetings.value\\n        .map((g, index) => {\\n          const icon = g.icon || '';\\n          const title = g.title || (index === 0 ? '' : ` ${index}`);\\n          const desc = g.description || '';\\n          const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n\\n          return `\\n        <div class=\\\"scene-card\\\">\\n          <div class=\\\"card-badge\\\">${badge}</div>\\n          <div class=\\\"card-icon\\\">${icon}</div>\\n          <div class=\\\"card-title\\\">${title}</div>\\n          <div class=\\\"card-desc\\\">${desc}</div>\\n        </div>`;\\n        })\\n        .join('\\\\n');\\n\\n      //  scene-grid \\n      let customHtml = uiConfig.value.customHtml;\\n\\n      // \\n      const possiblePatterns = [\\n        /(<div[^>]*class=\\\"scene-grid\\\"[^>]*>)([\\\\s\\\\S]*?)(<\\\\/div>)/i,\\n        /(<div[^>]*class=\\\"[^\\\"]*grid[^\\\"]*\\\"[^>]*>)([\\\\s\\\\S]*?)(<\\\\/div>)/i,\\n        /(<div[^>]*class=\\\"[^\\\"]*cards[^\\\"]*\\\"[^>]*>)([\\\\s\\\\S]*?)(<\\\\/div>)/i,\\n        /(<div[^>]*class=\\\"[^\\\"]*container[^\\\"]*\\\"[^>]*>[\\\\s\\\\S]*?<div[^>]*class=\\\"[^\\\"]*grid[^\\\"]*\\\"[^>]*>)([\\\\s\\\\S]*?)(<\\\\/div>)/i,\\n      ];\\n\\n      for (const pattern of possiblePatterns) {\\n        const match = customHtml.match(pattern);\\n        if (match) {\\n          // \\n          customHtml = customHtml.replace(pattern, `$1\\\\n${cardsHtml}\\\\n      $3`);\\n          previewHtml.value = customHtml;\\n          console.log(' HTML');\\n          return;\\n        }\\n      }\\n\\n      // body\\n      console.warn(' body');\\n      const bodyPattern = /(<body[^>]*>)([\\\\s\\\\S]*?)(<\\\\/body>)/i;\\n      const bodyMatch = customHtml.match(bodyPattern);\\n      if (bodyMatch) {\\n        customHtml = customHtml.replace(bodyPattern, `$1$2\\\\n<div class=\\\"scene-grid\\\">\\\\n${cardsHtml}\\\\n</div>\\\\n$3`);\\n        previewHtml.value = customHtml;\\n        console.log(' body');\\n        return;\\n      }\\n\\n      console.warn(' HTMLHTML');\\n      previewHtml.value = uiConfig.value.customHtml;\\n    } catch (error) {\\n      console.error(' HTML:', error);\\n      toastr.warning('HTML');\\n      // \\n    }\\n  }\\n\\n  console.log(' ');\\n\\n  //  - \\n  const cards = greetings.value\\n    .map((g, index) => {\\n      const icon = g.icon || '<' + 'i class=\\\"fa-solid fa-comment\\\"><' + '/i>';\\n      const title = g.title || (index === 0 ? '' : ` ${index}`);\\n      const desc = g.description || '';\\n      const badge = index === 0 ? '' : String(index).padStart(2, '0');\\n\\n      return (\\n        '        <' +\\n        'div class=\\\"scene-card\\\">' +\\n        '<' +\\n        'div class=\\\"card-badge\\\">' +\\n        badge +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-icon\\\">' +\\n        icon +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-title\\\">' +\\n        title +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        'div class=\\\"card-desc\\\">' +\\n        desc +\\n        '<' +\\n        '/div>' +\\n        '<' +\\n        '/div>'\\n      );\\n    })\\n    .join('\\\\n\\\\n');\\n\\n  // HTML\\n  const htmlCode = [\\n    '<' + 'html>',\\n    '<' + 'head>',\\n    '  <' + 'meta charset=\\\"UTF-8\\\">',\\n    '  <' + 'link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\\\">',\\n    '  <' + 'style>',\\n    '    * { margin: 0; padding: 0; box-sizing: border-box; }',\\n    '    html, body { height: 100%; }',\\n    '    body {',\\n    '      font-family: -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, sans-serif;',\\n    '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\\n    '      padding: 20px; min-height: 100%; height: auto; display: flex; align-items: center; justify-content: center;',\\n    '      overflow-y: auto;',\\n    '    }',\\n    '    .container { max-width: 900px; width: 100%; height: auto; background: rgba(255, 255, 255, 0.95);',\\n    '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); margin: 20px auto; }',\\n    '    .header { text-align: center; margin-bottom: 40px; }',\\n    '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\\n    '    .header p { color: #666; font-size: 16px; }',\\n    '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\\n    '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\\n    '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\\n    '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\\n    '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\\n    '    .scene-card:active { transform: translateY(-2px); }',\\n    '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\\n    '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\\n    '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\\n    '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\\n    '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\\n    '  <' + '/style>',\\n    '<' + '/head>',\\n    '<' + 'body>',\\n    '  <' + 'div class=\\\"container\\\">',\\n    '    <' + 'div class=\\\"header\\\">',\\n    `      <` + `h1>${characterName} <` + '/h1>',\\n    '      <' + 'p><' + '/p>',\\n    '    <' + '/div>',\\n    '    <' + 'div class=\\\"scene-grid\\\">',\\n    cards,\\n    '    <' + '/div>',\\n    '  <' + '/div>',\\n    '<' + '/body>',\\n    '<' + '/html>',\\n  ].join('\\\\n');\\n\\n  previewHtml.value = htmlCode;\\n}\\n\\n// \\nfunction openPreviewInNewWindow() {\\n  if (!previewHtml.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const character = getCurrentCharacter();\\n  const windowTitle = character ? `${character.name} - ` : '';\\n\\n  // \\n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\\n  if (newWindow) {\\n    newWindow.document.write(previewHtml.value);\\n    newWindow.document.close();\\n    newWindow.document.title = windowTitle;\\n    toastr.success('');\\n  } else {\\n    toastr.error('');\\n  }\\n}\\n\\n// STScript JSON\\nasync function downloadAsJson() {\\n  try {\\n    await generateFrontendCode();\\n\\n    if (!generatedCode.value) {\\n      toastr.error('');\\n      return;\\n    }\\n\\n    const character = getCurrentCharacter();\\n    const characterName = character?.name || '';\\n\\n    // UUID\\n    const uuid = crypto.randomUUID();\\n\\n    // STScript JSON\\n    const stscriptJson = {\\n      id: uuid,\\n      scriptName: `${characterName}-`,\\n      disabled: false,\\n      runOnEdit: true,\\n      findRegex: '//g',\\n      replaceString: '```html\\\\n' + generatedCode.value + '\\\\n```',\\n      trimStrings: [],\\n      placement: [1, 2],\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n      markdownOnly: true,\\n      promptOnly: false,\\n    };\\n\\n    // JSON\\n    const jsonString = JSON.stringify(stscriptJson, null, 4);\\n\\n    // Blob\\n    const blob = new Blob([jsonString], { type: 'application/json' });\\n\\n    // \\n    const url = URL.createObjectURL(blob);\\n    const link = document.createElement('a');\\n    link.href = url;\\n    link.download = `${characterName}-.json`;\\n\\n    // \\n    document.body.appendChild(link);\\n    link.click();\\n\\n    // \\n    document.body.removeChild(link);\\n    URL.revokeObjectURL(url);\\n\\n    toastr.success('JSON');\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\n// \\nonMounted(() => {\\n  loadConfig();\\n});\\n</script>\\n\\n<style scoped>\\n@keyframes fadeIn {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes slideUp {\\n  from {\\n    opacity: 0;\\n    transform: translateY(30px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `@keyframes blink-434cf372{0%,50%{opacity:1}51%,100%{opacity:0}}.project-tab[data-v-434cf372]{padding:25px !important;background:#1a1a1a !important}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/ProjectManager.vue\"],\"names\":[],\"mappings\":\"AAqhMA,0BACE,OAEE,SACF,CACA,SAEE,SACF,CACF,CAEA,8BACE,uBAAwB,CACxB,6BACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"project-tab\\\">\\n    <!--  -->\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 28px;\\n        background: #2a2a2a;\\n        backdrop-filter: blur(12px);\\n        border-radius: 14px;\\n        margin-bottom: 20px;\\n        border: 1px solid #333;\\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 16px !important;\\n          font-weight: 600;\\n          display: flex;\\n          align-items: center;\\n          gap: 12px;\\n          letter-spacing: 0.5px;\\n          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <i class=\\\"fa-solid fa-laptop-code\\\" style=\\\"color: #4a9eff; font-size: 18px\\\"></i>\\n        \\n      </h3>\\n      <div class=\\\"project-action-buttons\\\" style=\\\"display: flex; gap: 10px\\\">\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"exportToRegex\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-download\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showHistoryDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-history\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #8b5cf6;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showAIDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#7c3aed')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#8b5cf6')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n          AI \\n        </button>\\n        <button\\n          v-if=\\\"currentId\\\"\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #ef4444;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showBugFixDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#dc2626')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#ef4444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\" style=\\\"margin-right: 6px\\\"></i>\\n          Bug \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"showProjectTemplateDialog\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-file-lines\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #444;\\n            border: none;\\n            border-radius: 8px;\\n            color: #e0e0e0;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"triggerFolderImport\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-folder-open\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n        <button\\n          style=\\\"\\n            padding: 8px 16px;\\n            background: #10b981;\\n            border: none;\\n            border-radius: 8px;\\n            color: white;\\n            font-size: 13px;\\n            font-weight: 500;\\n            cursor: pointer;\\n            transition: all 0.2s;\\n          \\\"\\n          @click=\\\"createProject\\\"\\n          @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n          @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\" style=\\\"margin-right: 6px\\\"></i>\\n          \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <input\\n      ref=\\\"folderInputRef\\\"\\n      type=\\\"file\\\"\\n      webkitdirectory\\n      directory\\n      multiple\\n      style=\\\"display: none\\\"\\n      @change=\\\"handleFolderImport\\\"\\n    />\\n\\n    <!--  -->\\n    <div style=\\\"display: grid; grid-template-columns: 220px 1fr 650px; gap: 20px; min-height: 500px\\\">\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <h4 style=\\\"margin: 0 0 15px 0; color: #fff; font-size: 14px; font-weight: 600\\\"></h4>\\n        <div v-if=\\\"projects.length === 0\\\" style=\\\"text-align: center; color: #666; font-size: 12px; padding: 20px 10px\\\">\\n          <br />\\n          \\\"\\\"\\n        </div>\\n        <div\\n          v-for=\\\"proj in projects\\\"\\n          :key=\\\"proj.id\\\"\\n          :style=\\\"{\\n            padding: '10px 12px',\\n            marginBottom: '8px',\\n            background: currentId === proj.id ? '#4a9eff' : '#1e1e1e',\\n            borderRadius: '8px',\\n            cursor: 'pointer',\\n            transition: 'all 0.2s ease',\\n            display: 'flex',\\n            justifyContent: 'space-between',\\n            alignItems: 'center',\\n            color: currentId === proj.id ? '#fff' : '#e0e0e0',\\n          }\\\"\\n          @click=\\\"selectProject(proj.id)\\\"\\n          @mouseenter=\\\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          @mouseleave=\\\"(e: any) => currentId !== proj.id && (e.currentTarget.style.background = '#1e1e1e')\\\"\\n        >\\n          <span style=\\\"font-size: 13px; flex: 1\\\">{{ proj.name }}</span>\\n          <button\\n            style=\\\"\\n              width: 20px;\\n              height: 20px;\\n              background: rgba(239, 68, 68, 0.2);\\n              border: none;\\n              border-radius: 4px;\\n              color: #ff4444;\\n              font-size: 14px;\\n              line-height: 1;\\n              cursor: pointer;\\n              opacity: 0.6;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click.stop=\\\"deleteProject(proj.id)\\\"\\n            @mouseenter=\\\"\\n              (e: any) => (\\n                (e.currentTarget.style.opacity = '1'),\\n                (e.currentTarget.style.background = '#ef4444'),\\n                (e.currentTarget.style.color = '#fff')\\n              )\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => (\\n                (e.currentTarget.style.opacity = '0.6'),\\n                (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\\n                (e.currentTarget.style.color = '#ff4444')\\n              )\\n            \\\"\\n          >\\n            \\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"currentId && currentProject\\\"\\n          style=\\\"margin-top: 20px; border-top: 1px solid #3a3a3a; padding-top: 15px\\\"\\n        >\\n          <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px\\\">\\n            <h4 style=\\\"margin: 0; color: #fff; font-size: 13px; font-weight: 600\\\"></h4>\\n            <div style=\\\"display: flex; gap: 5px\\\">\\n              <button\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: #444;\\n                  border: none;\\n                  border-radius: 5px;\\n                  color: #e0e0e0;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 4px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"createNewFolder\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#555')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#444')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-folder-plus\\\" style=\\\"font-size: 10px\\\"></i>\\n              </button>\\n              <button\\n                style=\\\"\\n                  padding: 4px 8px;\\n                  background: #10b981;\\n                  border: none;\\n                  border-radius: 5px;\\n                  color: white;\\n                  font-size: 11px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                  display: flex;\\n                  align-items: center;\\n                  gap: 4px;\\n                \\\"\\n                title=\\\"\\\"\\n                @click=\\\"showNewFileDialog\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-plus\\\" style=\\\"font-size: 10px\\\"></i>\\n              </button>\\n            </div>\\n          </div>\\n          <div\\n            v-for=\\\"file in currentProject.files\\\"\\n            :key=\\\"file.path\\\"\\n            :style=\\\"{\\n              padding: '8px 10px',\\n              marginBottom: '5px',\\n              background: currentFile === file.path ? '#10b981' : '#1e1e1e',\\n              borderRadius: '6px',\\n              cursor: 'pointer',\\n              transition: 'all 0.2s ease',\\n              color: currentFile === file.path ? '#fff' : '#e0e0e0',\\n              fontSize: '12px',\\n              display: 'flex',\\n              justifyContent: 'space-between',\\n              alignItems: 'center',\\n            }\\\"\\n            @click=\\\"selectFile(file.path)\\\"\\n            @mouseenter=\\\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#3a3a3a')\\\"\\n            @mouseleave=\\\"(e: any) => currentFile !== file.path && (e.currentTarget.style.background = '#1e1e1e')\\\"\\n          >\\n            <span>\\n              <i :class=\\\"getFileIcon(file.path)\\\" style=\\\"margin-right: 6px\\\"></i>\\n              {{ file.name }}\\n            </span>\\n            <button\\n              style=\\\"\\n                width: 18px;\\n                height: 18px;\\n                background: rgba(239, 68, 68, 0.2);\\n                border: none;\\n                border-radius: 3px;\\n                color: #ff4444;\\n                font-size: 12px;\\n                line-height: 1;\\n                cursor: pointer;\\n                opacity: 0;\\n                transition: all 0.2s ease;\\n              \\\"\\n              title=\\\"\\\"\\n              @click.stop=\\\"deleteFile(file.path)\\\"\\n              @mouseenter=\\\"\\n                (e: any) => (\\n                  (e.currentTarget.style.opacity = '1'),\\n                  (e.currentTarget.style.background = '#ef4444'),\\n                  (e.currentTarget.style.color = '#fff')\\n                )\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => (\\n                  (e.currentTarget.style.opacity = '0.6'),\\n                  (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\\n                  (e.currentTarget.style.color = '#ff4444')\\n                )\\n              \\\"\\n            >\\n              \\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div\\n          v-if=\\\"!currentId\\\"\\n          style=\\\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\\\"\\n        >\\n           \\n        </div>\\n        <div\\n          v-else-if=\\\"!currentFile\\\"\\n          style=\\\"flex: 1; display: flex; align-items: center; justify-content: center; color: #666; font-size: 14px\\\"\\n        >\\n           \\n        </div>\\n        <div v-else style=\\\"display: flex; flex-direction: column; height: 100%\\\">\\n          <div style=\\\"margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center\\\">\\n            <div style=\\\"display: flex; align-items: center; gap: 8px\\\">\\n              <i :class=\\\"getFileIcon(currentFile)\\\" style=\\\"color: #4a9eff\\\"></i>\\n              <span style=\\\"color: #fff; font-size: 14px; font-weight: 500\\\">{{ currentFile }}</span>\\n            </div>\\n            <div style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n              <span style=\\\"color: #888; font-size: 11px\\\">\\n                <i class=\\\"fa-solid fa-circle-check\\\" style=\\\"color: #10b981; margin-right: 4px\\\"></i>\\n                \\n              </span>\\n              <button\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 12px;\\n                  font-weight: 600;\\n                  cursor: pointer;\\n                  transition: all 0.2s ease;\\n                \\\"\\n                @click=\\\"saveCode\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(-1px)')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.transform = 'translateY(0)')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-floppy-disk\\\" style=\\\"margin-right: 4px\\\"></i>\\n                \\n              </button>\\n            </div>\\n          </div>\\n          <textarea\\n            v-model=\\\"code\\\"\\n            :placeholder=\\\"` ${currentFile.split('.').pop()?.toUpperCase()} ...`\\\"\\n            style=\\\"\\n              flex: 1;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-family: 'Consolas', 'Monaco', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 15px;\\n              resize: none;\\n              outline: none;\\n              min-height: 400px;\\n            \\\"\\n          ></textarea>\\n        </div>\\n      </div>\\n\\n      <!--  -->\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 15px;\\n          border: 1px solid #3a3a3a;\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div style=\\\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px\\\">\\n          <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-eye\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n            \\n          </h4>\\n          <div style=\\\"display: flex; gap: 8px\\\">\\n            <button\\n              v-if=\\\"previewHtml\\\"\\n              title=\\\"\\\"\\n              style=\\\"\\n                width: 28px;\\n                height: 28px;\\n                padding: 0;\\n                background: #3a3a3a;\\n                border: none;\\n                border-radius: 6px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @click=\\\"openInNewWindow\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-external-link-alt\\\" style=\\\"font-size: 12px\\\"></i>\\n            </button>\\n          </div>\\n        </div>\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            background: #1e1e1e;\\n            border-radius: 8px;\\n            overflow: auto;\\n            position: relative;\\n            min-height: 400px;\\n          \\\"\\n        >\\n          <iframe\\n            v-if=\\\"previewHtml\\\"\\n            :srcdoc=\\\"previewHtml\\\"\\n            sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n            style=\\\"width: 100%; height: 100%; border: none; background: white\\\"\\n          ></iframe>\\n          <div\\n            v-else\\n            style=\\\"\\n              position: absolute;\\n              top: 50%;\\n              left: 50%;\\n              transform: translate(-50%, -50%);\\n              color: #666;\\n              font-size: 12px;\\n              text-align: center;\\n            \\\"\\n          >\\n            \\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showAI\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"closeAIDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 25px;\\n          width: 90%;\\n          max-width: 600px;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            margin: 0 0 20px 0;\\n            color: #fff;\\n            font-size: 18px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"color: #8b5cf6\\\"></i>\\n          AI \\n        </h3>\\n\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px\\\">\\n            <i class=\\\"fa-solid fa-pencil\\\" style=\\\"color: #8b5cf6; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <div\\n            style=\\\"\\n              margin-bottom: 10px;\\n              padding: 10px 12px;\\n              background: rgba(139, 92, 246, 0.1);\\n              border-left: 3px solid #8b5cf6;\\n              border-radius: 4px;\\n              font-size: 12px;\\n              color: #ccc;\\n              line-height: 1.6;\\n            \\\"\\n          >\\n            <strong style=\\\"color: #8b5cf6\\\"> </strong>\\n            \\\"\\\"\\\"\\\"\\n          </div>\\n          <textarea\\n            v-model=\\\"aiPrompt\\\"\\n            placeholder=\\\"...\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 120px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n\\n          <!--  -->\\n          <div style=\\\"margin-top: 12px\\\">\\n            <div style=\\\"color: #888; font-size: 12px; margin-bottom: 8px\\\">\\n              <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color: #fbbf24; margin-right: 4px\\\"></i>\\n              \\n            </div>\\n            <div style=\\\"display: flex; flex-wrap: wrap; gap: 8px\\\">\\n              <button\\n                v-for=\\\"suggestion in quickSuggestions\\\"\\n                :key=\\\"suggestion\\\"\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: #2a2a2a;\\n                  border: 1px solid #3a3a3a;\\n                  border-radius: 6px;\\n                  color: #ccc;\\n                  font-size: 12px;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"aiPrompt = suggestion\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#2a2a2a')\\\"\\n              >\\n                {{ suggestion }}\\n              </button>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n            margin-bottom: 15px;\\n            padding: 10px;\\n            background: #252525;\\n            border-radius: 6px;\\n          \\\"\\n        >\\n          <label\\n            style=\\\"\\n              display: flex;\\n              align-items: center;\\n              gap: 8px;\\n              cursor: pointer;\\n              color: #ccc;\\n              font-size: 13px;\\n              user-select: none;\\n            \\\"\\n          >\\n            <input v-model=\\\"enableStream\\\" type=\\\"checkbox\\\" style=\\\"width: 16px; height: 16px; cursor: pointer\\\" />\\n            <i class=\\\"fa-solid fa-water\\\" style=\\\"color: #4a9eff\\\"></i>\\n            \\n          </label>\\n          <span style=\\\"color: #888; font-size: 12px\\\">  </span>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          v-if=\\\"aiGenerating && enableStream && streamingText\\\"\\n          style=\\\"\\n            margin-bottom: 15px;\\n            padding: 15px;\\n            background: #1e1e1e;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 6px;\\n            max-height: 200px;\\n            overflow-y: auto;\\n            font-family: 'Consolas', monospace;\\n            font-size: 12px;\\n            color: #e0e0e0;\\n            line-height: 1.5;\\n            white-space: pre-wrap;\\n          \\\"\\n        >\\n          {{ streamingText }}\\n          <span style=\\\"animation: blink 1s infinite\\\"></span>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeAIDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :disabled=\\\"aiGenerating || !aiPrompt.trim()\\\"\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            :style=\\\"{\\n              opacity: aiGenerating || !aiPrompt.trim() ? 0.5 : 1,\\n              cursor: aiGenerating || !aiPrompt.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"generateWithAI\\\"\\n          >\\n            <i v-if=\\\"!aiGenerating\\\" class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ aiGenerating ? '...' : '' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- Bug  -->\\n    <div\\n      v-if=\\\"showBugFix\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n      \\\"\\n      @click.self=\\\"closeBugFixDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          padding: 25px;\\n          width: 90%;\\n          max-width: 650px;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n        \\\"\\n      >\\n        <h3\\n          style=\\\"\\n            margin: 0 0 20px 0;\\n            color: #fff;\\n            font-size: 18px;\\n            font-weight: 600;\\n            display: flex;\\n            align-items: center;\\n            gap: 10px;\\n          \\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\" style=\\\"color: #ef4444\\\"></i>\\n          Bug \\n        </h3>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-circle-exclamation\\\" style=\\\"color: #f59e0b; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <textarea\\n            v-model=\\\"bugDescription\\\"\\n            placeholder=\\\"&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 90px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!-- Console  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-terminal\\\" style=\\\"color: #ef4444; margin-right: 6px\\\"></i>\\n             Console  F12 \\n          </label>\\n          <textarea\\n            v-model=\\\"consoleError\\\"\\n            placeholder=\\\" Console &#10;Uncaught TypeError: xxx is not a function&#10;&#10;\\\"\\n            style=\\\"\\n              width: 100%;\\n              height: 80px;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #ff6b6b;\\n              font-size: 12px;\\n              font-family: 'Consolas', monospace;\\n              line-height: 1.5;\\n              padding: 12px;\\n              resize: none;\\n              outline: none;\\n            \\\"\\n          ></textarea>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"margin-bottom: 15px\\\">\\n          <label style=\\\"display: block; margin-bottom: 8px; color: #ccc; font-size: 13px; font-weight: 600\\\">\\n            <i class=\\\"fa-solid fa-file-code\\\" style=\\\"color: #4a9eff; margin-right: 6px\\\"></i>\\n            \\n          </label>\\n          <select\\n            v-model=\\\"bugFile\\\"\\n            style=\\\"\\n              width: 100%;\\n              background: #1e1e1e;\\n              border: 1px solid #3a3a3a;\\n              border-radius: 8px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              padding: 10px 12px;\\n              outline: none;\\n              cursor: pointer;\\n            \\\"\\n          >\\n            <option value=\\\"\\\"> AI </option>\\n            <option value=\\\"index.html\\\">HTML index.html</option>\\n            <option value=\\\"style.css\\\">CSS style.css</option>\\n            <option value=\\\"script.js\\\">JavaScript script.js</option>\\n          </select>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 12px;\\n            background: rgba(74, 158, 255, 0.1);\\n            border: 1px solid rgba(74, 158, 255, 0.3);\\n            border-radius: 6px;\\n            margin-bottom: 15px;\\n          \\\"\\n        >\\n          <p style=\\\"margin: 0; color: #4a9eff; font-size: 12px; line-height: 1.6\\\">\\n            <i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <strong></strong>AI  bug Console\\n            \\n          </p>\\n        </div>\\n\\n        <div style=\\\"display: flex; gap: 10px; justify-content: flex-end\\\">\\n          <button\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              font-size: 13px;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeBugFixDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n          <button\\n            :disabled=\\\"aiGenerating || !bugDescription.trim()\\\"\\n            style=\\\"\\n              padding: 8px 16px;\\n              background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\\n              border: none;\\n              border-radius: 6px;\\n              color: white;\\n              font-size: 13px;\\n              font-weight: 600;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            :style=\\\"{\\n              opacity: aiGenerating || !bugDescription.trim() ? 0.5 : 1,\\n              cursor: aiGenerating || !bugDescription.trim() ? 'not-allowed' : 'pointer',\\n            }\\\"\\n            @click=\\\"fixBugWithAI\\\"\\n          >\\n            <i v-if=\\\"!aiGenerating\\\" class=\\\"fa-solid fa-wrench\\\" style=\\\"margin-right: 6px\\\"></i>\\n            <i v-else class=\\\"fa-solid fa-spinner fa-spin\\\" style=\\\"margin-right: 6px\\\"></i>\\n            {{ aiGenerating ? '...' : '' }}\\n          </button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!-- AI  -->\\n    <div\\n      v-if=\\\"showComparison\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.9);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10001;\\n        padding: 20px;\\n      \\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          width: 95%;\\n          height: 90%;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 20px 25px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 18px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-code-compare\\\" style=\\\"color: #8b5cf6\\\"></i>\\n            AI \\n          </h3>\\n          <div style=\\\"display: flex; gap: 10px\\\">\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: #ef4444;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                cursor: pointer;\\n                transition: all 0.2s ease;\\n              \\\"\\n              @click=\\\"rejectChanges\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#dc2626')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#ef4444')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-xmark\\\" style=\\\"margin-right: 6px\\\"></i>\\n              \\n            </button>\\n            <button\\n              style=\\\"\\n                padding: 8px 16px;\\n                background: #10b981;\\n                border: none;\\n                border-radius: 6px;\\n                color: white;\\n                font-size: 13px;\\n                font-weight: 500;\\n                cursor: pointer;\\n                transition: all 0.2s;\\n              \\\"\\n              @click=\\\"acceptChanges\\\"\\n              @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#059669')\\\"\\n              @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#10b981')\\\"\\n            >\\n              <i class=\\\"fa-solid fa-check\\\" style=\\\"margin-right: 6px\\\"></i>\\n              \\n            </button>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            flex: 1;\\n            display: grid;\\n            grid-template-columns: 1fr 1fr 1.5fr;\\n            gap: 15px;\\n            padding: 20px;\\n            overflow: hidden;\\n          \\\"\\n        >\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div style=\\\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\\\">\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-file-code\\\" style=\\\"margin-right: 8px; color: #ef4444\\\"></i>\\n                \\n              </h4>\\n            </div>\\n            <div style=\\\"flex: 1; overflow-y: auto; padding: 15px\\\">\\n              <div v-for=\\\"change in aiChanges\\\" :key=\\\"change.path\\\" style=\\\"margin-bottom: 20px\\\">\\n                <div\\n                  style=\\\"\\n                    color: #4a9eff;\\n                    font-size: 12px;\\n                    font-weight: 600;\\n                    margin-bottom: 8px;\\n                    display: flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </div>\\n                <pre\\n                  style=\\\"\\n                    margin: 0;\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-family: 'Consolas', 'Monaco', monospace;\\n                    font-size: 12px;\\n                    line-height: 1.5;\\n                    overflow-x: auto;\\n                    border: 1px solid #3a3a3a;\\n                  \\\"\\n                  >{{ change.oldContent }}</pre\\n                >\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div style=\\\"padding: 12px 15px; background: #2a2a2a; border-bottom: 1px solid #3a3a3a\\\">\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-file-code\\\" style=\\\"margin-right: 8px; color: #10b981\\\"></i>\\n                \\n              </h4>\\n            </div>\\n            <div style=\\\"flex: 1; overflow-y: auto; padding: 15px\\\">\\n              <div v-for=\\\"change in aiChanges\\\" :key=\\\"change.path\\\" style=\\\"margin-bottom: 20px\\\">\\n                <div\\n                  style=\\\"\\n                    color: #4a9eff;\\n                    font-size: 12px;\\n                    font-weight: 600;\\n                    margin-bottom: 8px;\\n                    display: flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </div>\\n                <pre\\n                  style=\\\"\\n                    margin: 0;\\n                    padding: 12px;\\n                    background: #1a1a1a;\\n                    border-radius: 6px;\\n                    color: #e0e0e0;\\n                    font-family: 'Consolas', 'Monaco', monospace;\\n                    font-size: 12px;\\n                    line-height: 1.5;\\n                    overflow-x: auto;\\n                    border: 1px solid #3a3a3a;\\n                  \\\"\\n                  >{{ change.newContent }}</pre\\n                >\\n              </div>\\n            </div>\\n          </div>\\n\\n          <!--  -->\\n          <div style=\\\"display: flex; flex-direction: column; background: #1e1e1e; border-radius: 8px; overflow: hidden\\\">\\n            <div\\n              style=\\\"\\n                padding: 12px 15px;\\n                background: #2a2a2a;\\n                border-bottom: 1px solid #3a3a3a;\\n                display: flex;\\n                justify-content: space-between;\\n                align-items: center;\\n              \\\"\\n            >\\n              <h4 style=\\\"margin: 0; color: #fff; font-size: 14px; font-weight: 600\\\">\\n                <i class=\\\"fa-solid fa-eye\\\" style=\\\"margin-right: 8px; color: #4a9eff\\\"></i>\\n                \\n              </h4>\\n              <div style=\\\"display: flex; gap: 8px\\\">\\n                <button\\n                  :style=\\\"{\\n                    padding: '4px 10px',\\n                    background: previewMode === 'before' ? '#ef4444' : '#3a3a3a',\\n                    border: 'none',\\n                    borderRadius: '4px',\\n                    color: 'white',\\n                    fontSize: '11px',\\n                    cursor: 'pointer',\\n                    transition: 'all 0.2s ease',\\n                  }\\\"\\n                  @click=\\\"previewMode = 'before'\\\"\\n                >\\n                  \\n                </button>\\n                <button\\n                  :style=\\\"{\\n                    padding: '4px 10px',\\n                    background: previewMode === 'after' ? '#10b981' : '#3a3a3a',\\n                    border: 'none',\\n                    borderRadius: '4px',\\n                    color: 'white',\\n                    fontSize: '11px',\\n                    cursor: 'pointer',\\n                    transition: 'all 0.2s ease',\\n                  }\\\"\\n                  @click=\\\"previewMode = 'after'\\\"\\n                >\\n                  \\n                </button>\\n              </div>\\n            </div>\\n            <div style=\\\"flex: 1; background: white; overflow: hidden\\\">\\n              <iframe\\n                :srcdoc=\\\"comparisonPreviewHtml\\\"\\n                sandbox=\\\"allow-scripts allow-same-origin allow-modals allow-forms\\\"\\n                style=\\\"width: 100%; height: 100%; border: none\\\"\\n              ></iframe>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showHistory\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"closeHistoryDialog\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #2a2a2a;\\n          border-radius: 12px;\\n          width: 90%;\\n          max-width: 900px;\\n          max-height: 80%;\\n          border: 1px solid #3a3a3a;\\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\\n          display: flex;\\n          flex-direction: column;\\n        \\\"\\n      >\\n        <div\\n          style=\\\"\\n            padding: 20px 25px;\\n            border-bottom: 1px solid #3a3a3a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 18px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 10px;\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-history\\\" style=\\\"color: #f59e0b\\\"></i>\\n            AI \\n          </h3>\\n          <button\\n            style=\\\"\\n              width: 28px;\\n              height: 28px;\\n              background: #3a3a3a;\\n              border: none;\\n              border-radius: 6px;\\n              color: #e0e0e0;\\n              cursor: pointer;\\n              transition: all 0.2s ease;\\n            \\\"\\n            @click=\\\"closeHistoryDialog\\\"\\n            @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#4a4a4a')\\\"\\n            @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#3a3a3a')\\\"\\n          >\\n            \\n          </button>\\n        </div>\\n        <div style=\\\"flex: 1; overflow-y: auto; padding: 20px\\\">\\n          <div v-if=\\\"currentProjectHistory.length === 0\\\" style=\\\"text-align: center; color: #666; padding: 40px 20px\\\">\\n            <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 15px; opacity: 0.3\\\"></i>\\n            <p></p>\\n          </div>\\n          <div\\n            v-for=\\\"(record, index) in currentProjectHistory\\\"\\n            :key=\\\"index\\\"\\n            style=\\\"\\n              background: #1e1e1e;\\n              border-radius: 8px;\\n              padding: 15px;\\n              margin-bottom: 15px;\\n              border: 1px solid #3a3a3a;\\n            \\\"\\n          >\\n            <div style=\\\"display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px\\\">\\n              <div>\\n                <div style=\\\"color: #fff; font-size: 14px; font-weight: 600; margin-bottom: 5px\\\">\\n                  {{ record.prompt }}\\n                </div>\\n                <div style=\\\"color: #888; font-size: 12px\\\">\\n                  {{ new Date(record.timestamp).toLocaleString('zh-CN') }}\\n                </div>\\n              </div>\\n              <button\\n                style=\\\"\\n                  padding: 6px 12px;\\n                  background: #4a9eff;\\n                  border: none;\\n                  border-radius: 6px;\\n                  color: white;\\n                  font-size: 12px;\\n                  font-weight: 500;\\n                  cursor: pointer;\\n                  transition: all 0.2s;\\n                \\\"\\n                @click=\\\"restoreHistory(record)\\\"\\n                @mouseenter=\\\"(e: any) => (e.currentTarget.style.background = '#3b82f6')\\\"\\n                @mouseleave=\\\"(e: any) => (e.currentTarget.style.background = '#4a9eff')\\\"\\n              >\\n                <i class=\\\"fa-solid fa-undo\\\" style=\\\"margin-right: 4px\\\"></i>\\n                \\n              </button>\\n            </div>\\n            <div style=\\\"color: #ccc; font-size: 13px; margin-top: 10px\\\">\\n              <strong></strong>\\n              <div style=\\\"margin-top: 5px; display: flex; flex-wrap: wrap; gap: 8px\\\">\\n                <span\\n                  v-for=\\\"change in record.changes\\\"\\n                  :key=\\\"change.path\\\"\\n                  style=\\\"\\n                    background: #2a2a2a;\\n                    padding: 4px 10px;\\n                    border-radius: 4px;\\n                    font-size: 12px;\\n                    display: inline-flex;\\n                    align-items: center;\\n                    gap: 6px;\\n                  \\\"\\n                >\\n                  <i :class=\\\"getFileIcon(change.path)\\\"></i>\\n                  {{ change.path }}\\n                </span>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <div\\n      v-if=\\\"showProjectTemplate\\\"\\n      style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        right: 0;\\n        bottom: 0;\\n        background: rgba(0, 0, 0, 0.8);\\n        display: flex;\\n        align-items: center;\\n        justify-content: center;\\n        z-index: 10000;\\n        padding: 20px;\\n      \\\"\\n      @click.self=\\\"showProjectTemplate = false\\\"\\n    >\\n      <div\\n        style=\\\"\\n          background: #1e1e1e;\\n          border-radius: 16px;\\n          max-width: 850px;\\n          width: 100%;\\n          max-height: 90vh;\\n          overflow-y: auto;\\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);\\n          border: 1px solid #333;\\n        \\\"\\n      >\\n        <!--  -->\\n        <div\\n          style=\\\"\\n            padding: 24px 28px;\\n            border-bottom: 1px solid #2a2a2a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n          \\\"\\n        >\\n          <h3\\n            style=\\\"\\n              margin: 0;\\n              color: #fff;\\n              font-size: 20px;\\n              font-weight: 600;\\n              display: flex;\\n              align-items: center;\\n              gap: 12px;\\n            \\\"\\n          >\\n            <span\\n              style=\\\"\\n                width: 40px;\\n                height: 40px;\\n                background: #2a2a2a;\\n                border-radius: 10px;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                font-size: 20px;\\n              \\\"\\n            >\\n              \\n            </span>\\n            \\n          </h3>\\n          <button\\n            style=\\\"\\n              width: 36px;\\n              height: 36px;\\n              background: #2a2a2a;\\n              border: none;\\n              border-radius: 8px;\\n              color: #888;\\n              font-size: 18px;\\n              cursor: pointer;\\n              transition: all 0.2s;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n            \\\"\\n            @click=\\\"showProjectTemplate = false\\\"\\n            @mouseenter=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#333';\\n                e.currentTarget.style.color = '#fff';\\n              }\\n            \\\"\\n            @mouseleave=\\\"\\n              (e: any) => {\\n                e.currentTarget.style.background = '#2a2a2a';\\n                e.currentTarget.style.color = '#888';\\n              }\\n            \\\"\\n          >\\n            <i class=\\\"fa-solid fa-times\\\"></i>\\n          </button>\\n        </div>\\n\\n        <!--  -->\\n        <div style=\\\"padding: 28px\\\">\\n          <div style=\\\"display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px\\\">\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\"></p>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\">HP/MP/</p>\\n            </div>\\n\\n            <!--  -->\\n            <div\\n              style=\\\"\\n                background: #252525;\\n                border: 1px solid transparent;\\n                border-radius: 12px;\\n                padding: 24px;\\n                cursor: pointer;\\n                transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\\n              \\\"\\n              @click=\\\"createProjectFromTemplate('')\\\"\\n              @mouseenter=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(-4px)';\\n                  e.currentTarget.style.borderColor = '#555';\\n                  e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\\n                }\\n              \\\"\\n              @mouseleave=\\\"\\n                (e: any) => {\\n                  e.currentTarget.style.transform = 'translateY(0)';\\n                  e.currentTarget.style.borderColor = 'transparent';\\n                  e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\\n                }\\n              \\\"\\n            >\\n              <div\\n                style=\\\"\\n                  width: 56px;\\n                  height: 56px;\\n                  background: #2a2a2a;\\n                  border-radius: 12px;\\n                  display: flex;\\n                  align-items: center;\\n                  justify-content: center;\\n                  font-size: 28px;\\n                  margin-bottom: 16px;\\n                \\\"\\n              >\\n                \\n              </div>\\n              <h4 style=\\\"margin: 0 0 8px 0; color: #fff; font-size: 17px; font-weight: 600\\\"></h4>\\n              <p style=\\\"margin: 0; color: #999; font-size: 13px; line-height: 1.6\\\"></p>\\n            </div>\\n          </div>\\n\\n          <div\\n            style=\\\"\\n              margin-top: 24px;\\n              padding: 16px 18px;\\n              background: #252525;\\n              border: 1px solid #333;\\n              border-radius: 10px;\\n            \\\"\\n          >\\n            <div\\n              style=\\\"\\n                color: #ccc;\\n                font-weight: 500;\\n                margin-bottom: 6px;\\n                font-size: 13px;\\n                display: flex;\\n                align-items: center;\\n                gap: 8px;\\n              \\\"\\n            >\\n              <span style=\\\"color: #fbbf24; font-size: 16px\\\"></span>\\n              \\n            </div>\\n            <p style=\\\"margin: 0; color: #888; font-size: 13px; line-height: 1.7\\\">\\n              \\n            </p>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <ProgressDialog ref=\\\"progressDialogRef\\\" :show=\\\"showProgress\\\" title=\\\"AI \\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, onBeforeUnmount, ref, watch, watchEffect } from 'vue';\\nimport { normalizeApiEndpoint } from '../settings';\\nimport { getScriptIdSafe } from '../utils';\\nimport ProgressDialog from './ProgressDialog.vue';\\n\\ninterface ProjectFile {\\n  path: string;\\n  name: string;\\n  content: string;\\n}\\n\\ninterface Project {\\n  id: string;\\n  name: string;\\n  files: ProjectFile[];\\n}\\n\\ninterface AIChange {\\n  path: string;\\n  oldContent: string;\\n  newContent: string;\\n}\\n\\ninterface AIHistoryRecord {\\n  timestamp: string;\\n  prompt: string;\\n  changes: AIChange[];\\n}\\n\\nconst projects = ref<Project[]>([]);\\nconst currentId = ref('');\\nconst currentFile = ref('');\\nconst code = ref('');\\nconst previewHtml = ref('');\\nconst showAI = ref(false);\\nconst aiPrompt = ref('');\\nconst aiGenerating = ref(false);\\nconst enableStream = ref(false); // \\nconst streamingText = ref(''); // \\nconst showComparison = ref(false);\\nconst aiChanges = ref<AIChange[]>([]);\\nconst previewMode = ref<'before' | 'after'>('after');\\nconst showHistory = ref(false);\\nconst aiHistory = ref<Record<string, AIHistoryRecord[]>>({});\\n\\n// AI \\nconst quickSuggestions = [\\n  '',\\n  '/',\\n  '',\\n  '',\\n  '',\\n  '',\\n  '',\\n  'ARIA',\\n];\\n\\n// \\nconst showProgress = ref(false);\\nconst progressDialogRef = ref<InstanceType<typeof ProgressDialog> | null>(null);\\n\\n// \\nconst showProjectTemplate = ref(false);\\n\\n// Bug \\nconst showBugFix = ref(false);\\nconst bugDescription = ref('');\\nconst consoleError = ref('');\\nconst bugFile = ref('');\\n\\n// \\nconst folderInputRef = ref<HTMLInputElement | null>(null);\\n\\nconst currentProject = computed(() => {\\n  return projects.value.find(p => p.id === currentId.value);\\n});\\n\\nconst currentProjectHistory = computed(() => {\\n  return aiHistory.value[currentId.value] || [];\\n});\\n\\nconst comparisonPreviewHtml = computed(() => {\\n  if (aiChanges.value.length === 0) return '';\\n\\n  const proj = currentProject.value;\\n  if (!proj) return '';\\n\\n  // \\n  const tempFiles: ProjectFile[] = proj.files.map(f => {\\n    const change = aiChanges.value.find(c => c.path === f.path);\\n    return {\\n      ...f,\\n      content: change ? (previewMode.value === 'after' ? change.newContent : change.oldContent) : f.content,\\n    };\\n  });\\n\\n  return buildPreviewFromFiles(tempFiles);\\n});\\n\\n// \\nconst projectTemplates = {\\n  : {\\n    name: '',\\n    description: '',\\n    icon: '',\\n    color: '#4a9eff',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"chat-container\\\">\\n      <div class=\\\"message-list\\\" id=\\\"messageList\\\"></div>\\n      <div class=\\\"input-area\\\">\\n        <textarea id=\\\"userInput\\\" placeholder=\\\"...\\\"></textarea>\\n        <button id=\\\"sendBtn\\\"></button>\\n      </div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js\\\"></${'script'}>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n}\\n\\n.chat-container {\\n  max-width: 800px;\\n  margin: 20px auto;\\n  height: calc(100vh - 40px);\\n  display: flex;\\n  flex-direction: column;\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  overflow: hidden;\\n}\\n\\n.message-list {\\n  flex: 1;\\n  padding: 20px;\\n  overflow-y: auto;\\n}\\n\\n.message {\\n  margin-bottom: 15px;\\n  padding: 10px 15px;\\n  border-radius: 8px;\\n  max-width: 70%;\\n}\\n\\n.message.user {\\n  background: #4a9eff;\\n  margin-left: auto;\\n  text-align: right;\\n}\\n\\n.message.assistant {\\n  background: #3a3a3a;\\n}\\n\\n.input-area {\\n  padding: 15px;\\n  background: #2a2a2a;\\n  border-top: 1px solid #3a3a3a;\\n  display: flex;\\n  gap: 10px;\\n}\\n\\n#userInput {\\n  flex: 1;\\n  padding: 10px;\\n  background: #1a1a1a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  color: #e0e0e0;\\n  resize: none;\\n  height: 60px;\\n}\\n\\n#sendBtn {\\n  padding: 10px 20px;\\n  background: #4a9eff;\\n  border: none;\\n  border-radius: 6px;\\n  color: white;\\n  cursor: pointer;\\n  font-weight: 600;\\n}\\n\\n#sendBtn:hover {\\n  background: #357abd;\\n}`,\\n      'script.js': `// \\nlet chatHistory = [];\\n\\n// \\nfunction loadHistory() {\\n  const saved = getVariables({ type: 'chat' });\\n  chatHistory = saved.chatHistory || [];\\n  renderMessages();\\n}\\n\\n// \\nfunction saveHistory() {\\n  insertOrAssignVariables({ chatHistory }, { type: 'chat' });\\n}\\n\\n// \\nfunction renderMessages() {\\n  const list = document.getElementById('messageList');\\n  list.innerHTML = '';\\n  chatHistory.forEach(msg => {\\n    const div = document.createElement('div');\\n    div.className = 'message ' + msg.sender;\\n    div.textContent = msg.content;\\n    list.appendChild(div);\\n  });\\n  list.scrollTop = list.scrollHeight;\\n}\\n\\n// \\nasync function sendMessage() {\\n  const input = document.getElementById('userInput');\\n  const text = input.value.trim();\\n  if (!text) return;\\n\\n  // \\n  chatHistory.push({\\n    id: Date.now(),\\n    sender: 'user',\\n    content: text,\\n    timestamp: new Date().toLocaleTimeString()\\n  });\\n  input.value = '';\\n  renderMessages();\\n  saveHistory();\\n\\n  //  AI\\n  const prompt = '\\\\\\\\n' + chatHistory.map(m => m.sender + ': ' + m.content).join('\\\\\\\\n');\\n\\n  let aiText = '';\\n  await generate({\\n    should_stream: true,\\n    prompt: prompt,\\n    on_stream_chunk: (chunk) => {\\n      aiText += chunk;\\n      // \\n      const tempMsg = { id: 'temp', sender: 'assistant', content: aiText };\\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\\n      if (tempIndex >= 0) {\\n        chatHistory[tempIndex] = tempMsg;\\n      } else {\\n        chatHistory.push(tempMsg);\\n      }\\n      renderMessages();\\n    },\\n    on_stream_end: () => {\\n      // \\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\\n      if (tempIndex >= 0) {\\n        chatHistory[tempIndex] = {\\n          id: Date.now(),\\n          sender: 'assistant',\\n          content: aiText,\\n          timestamp: new Date().toLocaleTimeString()\\n        };\\n      }\\n      renderMessages();\\n      saveHistory();\\n    }\\n  });\\n}\\n\\n// \\n$(() => {\\n  loadHistory();\\n  document.getElementById('sendBtn').addEventListener('click', sendMessage);\\n  document.getElementById('userInput').addEventListener('keydown', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      sendMessage();\\n    }\\n  });\\n});`,\\n    },\\n  },\\n  : {\\n    name: '',\\n    description: 'HP/MP/',\\n    icon: '',\\n    color: '#10b981',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"status-panel\\\">\\n      <h2></h2>\\n      <div class=\\\"stat-item\\\">\\n        <label> (HP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill hp\\\" id=\\\"hpBar\\\"></div>\\n        </div>\\n        <span id=\\\"hpText\\\">0/0</span>\\n      </div>\\n      <div class=\\\"stat-item\\\">\\n        <label> (MP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill mp\\\" id=\\\"mpBar\\\"></div>\\n        </div>\\n        <span id=\\\"mpText\\\">0/0</span>\\n      </div>\\n      <div class=\\\"stat-item\\\">\\n        <label> (EXP)</label>\\n        <div class=\\\"progress-bar\\\">\\n          <div class=\\\"progress-fill exp\\\" id=\\\"expBar\\\"></div>\\n        </div>\\n        <span id=\\\"expText\\\">0/0</span>\\n      </div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n  padding: 20px;\\n}\\n\\n.status-panel {\\n  max-width: 500px;\\n  margin: 0 auto;\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  padding: 25px;\\n  border: 1px solid #3a3a3a;\\n}\\n\\nh2 {\\n  margin-bottom: 20px;\\n  color: #4a9eff;\\n}\\n\\n.stat-item {\\n  margin-bottom: 20px;\\n}\\n\\n.stat-item label {\\n  display: block;\\n  margin-bottom: 8px;\\n  font-weight: 600;\\n  font-size: 14px;\\n}\\n\\n.progress-bar {\\n  width: 100%;\\n  height: 24px;\\n  background: #1a1a1a;\\n  border-radius: 12px;\\n  overflow: hidden;\\n  margin-bottom: 5px;\\n}\\n\\n.progress-fill {\\n  height: 100%;\\n  transition: width 0.5s ease;\\n  border-radius: 12px;\\n}\\n\\n.progress-fill.hp {\\n  background: linear-gradient(90deg, #ef4444, #10b981);\\n}\\n\\n.progress-fill.mp {\\n  background: linear-gradient(90deg, #3b82f6, #06b6d4);\\n}\\n\\n.progress-fill.exp {\\n  background: linear-gradient(90deg, #fbbf24, #f59e0b);\\n}\\n\\n.stat-item span {\\n  font-size: 13px;\\n  color: #94a3b8;\\n}`,\\n      'script.js': `// \\nfunction loadStats() {\\n  const data = getVariables({ type: 'chat' });\\n\\n  const hp = data.hp || 850;\\n  const maxHp = data.maxHp || 1000;\\n  const mp = data.mp || 340;\\n  const maxMp = data.maxMp || 500;\\n  const exp = data.exp || 1250;\\n  const maxExp = data.maxExp || 2000;\\n\\n  // \\n  updateBar('hp', hp, maxHp);\\n  updateBar('mp', mp, maxMp);\\n  updateBar('exp', exp, maxExp);\\n}\\n\\nfunction updateBar(type, current, max) {\\n  const percent = (current / max) * 100;\\n  document.getElementById(type + 'Bar').style.width = percent + '%';\\n  document.getElementById(type + 'Text').textContent = current + '/' + max;\\n}\\n\\n// \\ndocument.addEventListener('DOMContentLoaded', loadStats);`,\\n    },\\n  },\\n  : {\\n    name: '',\\n    description: '',\\n    icon: '',\\n    color: '#ec4899',\\n    files: {\\n      'index.html': `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title></title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div id=\\\"app\\\">\\n    <div class=\\\"affection-container\\\">\\n      <h2></h2>\\n      <div class=\\\"character-grid\\\" id=\\\"characterGrid\\\"></div>\\n    </div>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`,\\n      'style.css': `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', sans-serif;\\n  background: #1a1a1a;\\n  color: #e0e0e0;\\n  padding: 20px;\\n}\\n\\n.affection-container {\\n  max-width: 900px;\\n  margin: 0 auto;\\n}\\n\\nh2 {\\n  margin-bottom: 25px;\\n  color: #ec4899;\\n  text-align: center;\\n}\\n\\n.character-grid {\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\\n  gap: 20px;\\n}\\n\\n.character-card {\\n  background: #2a2a2a;\\n  border-radius: 12px;\\n  padding: 20px;\\n  border: 2px solid #3a3a3a;\\n  transition: all 0.3s ease;\\n}\\n\\n.character-card:hover {\\n  transform: translateY(-5px);\\n  border-color: #ec4899;\\n  box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);\\n}\\n\\n.character-name {\\n  font-size: 18px;\\n  font-weight: 600;\\n  margin-bottom: 15px;\\n  color: #e0e0e0;\\n}\\n\\n.affection-bar {\\n  width: 100%;\\n  height: 20px;\\n  background: #1a1a1a;\\n  border-radius: 10px;\\n  overflow: hidden;\\n  margin-bottom: 8px;\\n}\\n\\n.affection-fill {\\n  height: 100%;\\n  background: linear-gradient(90deg, #ec4899, #f472b6);\\n  transition: width 0.5s ease;\\n  border-radius: 10px;\\n}\\n\\n.affection-text {\\n  font-size: 13px;\\n  color: #94a3b8;\\n}`,\\n      'script.js': `// \\nfunction loadCharacters() {\\n  const data = getVariables({ type: 'chat' });\\n  const characters = data.characters || [\\n    { name: ' A', affection: 75 },\\n    { name: ' B', affection: 50 },\\n    { name: ' C', affection: 90 }\\n  ];\\n\\n  const grid = document.getElementById('characterGrid');\\n  grid.innerHTML = '';\\n\\n  characters.forEach(char => {\\n    const card = document.createElement('div');\\n    card.className = 'character-card';\\n    card.innerHTML = \\\\`\\n      <div class=\\\"character-name\\\">\\\\${char.name}</div>\\n      <div class=\\\"affection-bar\\\">\\n        <div class=\\\"affection-fill\\\" style=\\\"width: \\\\${char.affection}%\\\"></div>\\n      </div>\\n      <div class=\\\"affection-text\\\">: \\\\${char.affection}/100</div>\\n    \\\\`;\\n    grid.appendChild(card);\\n  });\\n}\\n\\n// \\ndocument.addEventListener('DOMContentLoaded', loadCharacters);`,\\n    },\\n  },\\n};\\n\\n// \\nfunction showProjectTemplateDialog() {\\n  showProjectTemplate.value = true;\\n}\\n\\n// \\nfunction createProjectFromTemplate(templateKey: string) {\\n  const template = projectTemplates[templateKey as keyof typeof projectTemplates];\\n  if (!template) return;\\n\\n  const name = prompt(':', template.name);\\n  if (!name || !name.trim()) return;\\n\\n  const newProj: Project = {\\n    id: Date.now().toString(),\\n    name: name.trim(),\\n    files: Object.entries(template.files).map(([filename, content]) => ({\\n      path: filename,\\n      name: filename,\\n      content: content,\\n    })),\\n  };\\n\\n  projects.value.push(newProj);\\n  currentId.value = newProj.id;\\n  currentFile.value = newProj.files[0]?.name || '';\\n  code.value = newProj.files[0]?.content || '';\\n  saveToChatVar();\\n\\n  showProjectTemplate.value = false;\\n  window.toastr.success(' \\\"' + name.trim() + '\\\"');\\n}\\n\\n// \\nfunction triggerFolderImport() {\\n  if (folderInputRef.value) {\\n    folderInputRef.value.value = ''; // \\n    folderInputRef.value.click();\\n  }\\n}\\n\\nasync function handleFolderImport(event: Event) {\\n  const input = event.target as HTMLInputElement;\\n  const files = input.files;\\n\\n  if (!files || files.length === 0) {\\n    return;\\n  }\\n\\n  try {\\n    // \\n    const firstFile = files[0];\\n    const pathParts = firstFile.webkitRelativePath.split('/');\\n    const folderName = pathParts[0] || '';\\n\\n    // \\n    const projectName = prompt(':', folderName);\\n    if (!projectName || !projectName.trim()) {\\n      return;\\n    }\\n\\n    // \\n    const supportedExtensions = ['.html', '.css', '.js', '.ts', '.scss', '.sass', '.json', '.txt', '.md'];\\n\\n    // \\n    const projectFiles: ProjectFile[] = [];\\n    const fileReadPromises: Promise<void>[] = [];\\n\\n    for (let i = 0; i < files.length; i++) {\\n      const file = files[i];\\n      const relativePath = file.webkitRelativePath.split('/').slice(1).join('/'); // \\n\\n      // /\\n      if (!relativePath || relativePath.startsWith('.') || relativePath.includes('/.')) {\\n        continue;\\n      }\\n\\n      //  node_modulesdist \\n      if (\\n        relativePath.includes('node_modules/') ||\\n        relativePath.includes('dist/') ||\\n        relativePath.includes('.git/') ||\\n        relativePath.includes('build/')\\n      ) {\\n        continue;\\n      }\\n\\n      // \\n      const extension = '.' + relativePath.split('.').pop()?.toLowerCase();\\n      if (!supportedExtensions.includes(extension)) {\\n        continue;\\n      }\\n\\n      // \\n      const readPromise = new Promise<void>((resolve, reject) => {\\n        const reader = new FileReader();\\n        reader.onload = e => {\\n          const content = e.target?.result as string;\\n          const fileName = relativePath.split('/').pop() || relativePath;\\n          projectFiles.push({\\n            path: relativePath,\\n            name: fileName,\\n            content: content || '',\\n          });\\n          resolve();\\n        };\\n        reader.onerror = () => reject(new Error(`: ${relativePath}`));\\n        reader.readAsText(file);\\n      });\\n\\n      fileReadPromises.push(readPromise);\\n    }\\n\\n    // \\n    await Promise.all(fileReadPromises);\\n\\n    if (projectFiles.length === 0) {\\n      window.toastr.warning('HTMLCSSJSTSSCSS ');\\n      return;\\n    }\\n\\n    // \\n    const newProj: Project = {\\n      id: Date.now().toString(),\\n      name: projectName.trim(),\\n      files: projectFiles,\\n    };\\n\\n    projects.value.push(newProj);\\n    currentId.value = newProj.id;\\n    currentFile.value = newProj.files[0]?.path || '';\\n    code.value = newProj.files[0]?.content || '';\\n\\n    saveToChatVar();\\n    updatePreview();\\n\\n    window.toastr.success(`\\\"${projectName}\\\" ${projectFiles.length} `);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n}\\n\\nfunction createProject() {\\n  const name = prompt(':');\\n  if (!name || !name.trim()) return;\\n\\n  const htmlContent = `<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title>${name.trim()}</title>\\n  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\n</head>\\n<body>\\n  <div class=\\\"container\\\">\\n    <h1> ${name.trim()}!</h1>\\n    <p></p>\\n  </div>\\n  <${'script'} src=\\\"script.js\\\"></${'script'}>\\n</body>\\n</html>`;\\n\\n  const cssContent = `* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n\\nbody {\\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  color: #333;\\n  min-height: 100vh;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.container {\\n  background: white;\\n  padding: 60px 40px;\\n  border-radius: 20px;\\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\\n  text-align: center;\\n  max-width: 600px;\\n}\\n\\nh1 {\\n  font-size: 2.5em;\\n  color: #667eea;\\n  margin-bottom: 20px;\\n}\\n\\np {\\n  font-size: 1.2em;\\n  color: #666;\\n  line-height: 1.6;\\n}`;\\n\\n  const jsContent = `console.log('');\\n\\n//  jQuery  DOM \\n$(function() {\\n  console.log('');\\n\\n  // ==========  ==========\\n  const isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\\n\\n  if (!isInTavern) {\\n    console.log(' API ');\\n    //  localStorage \\n  }\\n\\n  // ========== ==========\\n  const storageKey = 'my_project_data'; // \\n\\n  // \\n  function loadData() {\\n    if (isInTavern) {\\n      const data = getVariables({ type: 'chat' });\\n      return data[storageKey] || { count: 0 };\\n    } else {\\n      //  localStorage\\n      const stored = localStorage.getItem(storageKey);\\n      return stored ? JSON.parse(stored) : { count: 0 };\\n    }\\n  }\\n\\n  // \\n  function saveData(data) {\\n    if (isInTavern) {\\n      insertOrAssignVariables({ [storageKey]: data }, { type: 'chat' });\\n      console.log(':', data);\\n    } else {\\n      //  localStorage\\n      localStorage.setItem(storageKey, JSON.stringify(data));\\n      console.log(' localStorage:', data);\\n    }\\n  }\\n\\n  // \\n  let myData = loadData();\\n  console.log(':', myData);\\n\\n  // ==========  ==========\\n  const container = $('.container');\\n  if (container.length) {\\n    container.on('click', function() {\\n      myData.count++;\\n      saveData(myData);\\n      if (typeof toastr !== 'undefined') {\\n        toastr.success(\\\\`: \\\\${myData.count}\\\\`);\\n      } else {\\n        alert(\\\\`: \\\\${myData.count}\\\\`);\\n      }\\n    });\\n  }\\n\\n  // \\n  $(window).on('pagehide', function() {\\n    saveData(myData);\\n  });\\n});`;\\n\\n  const newProj: Project = {\\n    id: Date.now().toString(),\\n    name: name.trim(),\\n    files: [\\n      { path: 'index.html', name: 'index.html', content: htmlContent },\\n      { path: 'style.css', name: 'style.css', content: cssContent },\\n      { path: 'script.js', name: 'script.js', content: jsContent },\\n    ],\\n  };\\n\\n  projects.value.push(newProj);\\n  console.log(':', newProj.name, ':', projects.value.length);\\n\\n  // \\n  saveToChatVar();\\n\\n  currentId.value = newProj.id;\\n  currentFile.value = 'index.html';\\n  code.value = htmlContent;\\n  updatePreview();\\n  toastr.success(` \\\"${newProj.name}\\\" `);\\n}\\n\\nfunction selectProject(id: string) {\\n  currentId.value = id;\\n  const proj = currentProject.value;\\n  if (proj && proj.files.length > 0) {\\n    currentFile.value = proj.files[0].path;\\n    code.value = proj.files[0].content;\\n    updatePreview();\\n  } else {\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  }\\n}\\n\\nfunction selectFile(path: string) {\\n  currentFile.value = path;\\n  const proj = currentProject.value;\\n  if (proj) {\\n    const file = proj.files.find(f => f.path === path);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n}\\n\\nfunction saveCode() {\\n  const proj = currentProject.value;\\n  if (!proj || !currentFile.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const file = proj.files.find(f => f.path === currentFile.value);\\n  if (file) {\\n    file.content = code.value;\\n\\n    // \\n    if (autoSaveTimer) {\\n      clearTimeout(autoSaveTimer);\\n      autoSaveTimer = null;\\n    }\\n\\n    saveToChatVar();\\n    updatePreview();\\n    toastr.success('');\\n  }\\n}\\n\\nfunction deleteProject(id: string) {\\n  const proj = projects.value.find(p => p.id === id);\\n  if (!proj) return;\\n\\n  if (!confirm(` \\\"${proj.name}\\\" `)) return;\\n\\n  projects.value = projects.value.filter(p => p.id !== id);\\n  console.log(':', projects.value.length);\\n\\n  if (currentId.value === id) {\\n    currentId.value = '';\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  }\\n\\n  // \\n  saveToChatVar();\\n  toastr.success(` \\\"${proj.name}\\\" `);\\n}\\n\\n// \\nfunction createNewFolder() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  const folderPath = prompt('\\\\ncss  js/utils', '');\\n  if (!folderPath || !folderPath.trim()) return;\\n\\n  const trimmedPath = folderPath.trim().replace(/\\\\/$/, ''); // \\n\\n  //  .gitkeep \\n  const gitkeepPath = `${trimmedPath}/.gitkeep`;\\n\\n  // \\n  if (proj.files.some(f => f.path.startsWith(`${trimmedPath}/`))) {\\n    window.toastr.warning(` \\\"${trimmedPath}\\\" `);\\n    return;\\n  }\\n\\n  // \\n  const newFile: ProjectFile = {\\n    path: gitkeepPath,\\n    name: '.gitkeep',\\n    content: '# \\\\n',\\n  };\\n\\n  proj.files.push(newFile);\\n  saveToChatVar();\\n\\n  window.toastr.success(` \\\"${trimmedPath}\\\" `);\\n}\\n\\n// \\nfunction showNewFileDialog() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  const folders = new Set<string>();\\n  folders.add(''); // \\n\\n  proj.files.forEach(file => {\\n    const parts = file.path.split('/');\\n    if (parts.length > 1) {\\n      // \\n      for (let i = 1; i < parts.length; i++) {\\n        const folderPath = parts.slice(0, i).join('/');\\n        if (folderPath) folders.add(folderPath);\\n      }\\n    }\\n  });\\n\\n  const folderList = Array.from(folders).sort();\\n\\n  // 1. \\n  const fileTypes = [\\n    { name: 'HTML ', ext: '.html', icon: '' },\\n    { name: 'CSS ', ext: '.css', icon: '' },\\n    { name: 'JavaScript ', ext: '.js', icon: '' },\\n    { name: 'TypeScript ', ext: '.ts', icon: '' },\\n    { name: 'JSON ', ext: '.json', icon: '' },\\n    { name: 'Markdown ', ext: '.md', icon: '' },\\n    { name: '', ext: '', icon: '' },\\n  ];\\n\\n  const typeOptions = fileTypes.map((t, i) => `${i + 1}. ${t.icon} ${t.name} (${t.ext || ''})`).join('\\\\n');\\n  const typeChoice = prompt(` 1-${fileTypes.length}\\\\n\\\\n${typeOptions}`, '1');\\n\\n  if (!typeChoice) return;\\n\\n  const typeIndex = parseInt(typeChoice) - 1;\\n  if (typeIndex < 0 || typeIndex >= fileTypes.length) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  const selectedType = fileTypes[typeIndex];\\n\\n  // 2. \\n  let targetFolder = '';\\n  if (folderList.length > 1) {\\n    const folderOptions =\\n      folderList.length > 5\\n        ? ''\\n        : `\\\\n\\\\n${folderList.map((f, i) => `${i + 1}. ${f || ''}`).join('\\\\n')}\\\\n\\\\n`;\\n\\n    const folderChoice = prompt(folderOptions, '1');\\n    if (!folderChoice) return;\\n\\n    // \\n    const folderIndex = parseInt(folderChoice) - 1;\\n    if (folderIndex >= 0 && folderIndex < folderList.length) {\\n      targetFolder = folderList[folderIndex];\\n    } else {\\n      // \\n      targetFolder = folderChoice.trim().replace(/\\\\/$/, '');\\n    }\\n  }\\n\\n  // 3. \\n  const fileName = prompt(\\n    `${selectedType.ext ? ` ${selectedType.ext}` : ''}`,\\n    selectedType.ext ? `new-file` : 'newfile.txt',\\n  );\\n\\n  if (!fileName || !fileName.trim()) return;\\n\\n  let trimmedName = fileName.trim();\\n\\n  // \\n  if (selectedType.ext && !trimmedName.endsWith(selectedType.ext)) {\\n    trimmedName += selectedType.ext;\\n  }\\n\\n  // \\n  const fullPath = targetFolder ? `${targetFolder}/${trimmedName}` : trimmedName;\\n\\n  // \\n  if (proj.files.some(f => f.path === fullPath)) {\\n    window.toastr.error(` \\\"${fullPath}\\\" `);\\n    return;\\n  }\\n\\n  // \\n  const extension = trimmedName.split('.').pop()?.toLowerCase();\\n  let defaultContent = '';\\n\\n  switch (extension) {\\n    case 'html':\\n      defaultContent =\\n        '<!DOCTYPE html>\\\\n' +\\n        '<html lang=\\\"zh-CN\\\">\\\\n' +\\n        '<head>\\\\n' +\\n        '  <meta charset=\\\"UTF-8\\\">\\\\n' +\\n        '  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\\\n' +\\n        '  <title>' +\\n        trimmedName.replace('.html', '') +\\n        '</title>\\\\n' +\\n        '  <link rel=\\\"stylesheet\\\" href=\\\"style.css\\\">\\\\n' +\\n        '</head>\\\\n' +\\n        '<body>\\\\n' +\\n        '  <div class=\\\"container\\\">\\\\n' +\\n        '    <h1></h1>\\\\n' +\\n        '  </div>\\\\n' +\\n        '  <' +\\n        'script src=\\\"script.js\\\"></' +\\n        'script>\\\\n' +\\n        '</body>\\\\n' +\\n        '</html>';\\n      break;\\n    case 'css':\\n    case 'scss':\\n    case 'sass':\\n      defaultContent = `/* ${trimmedName} */\\\\n\\\\n* {\\\\n  margin: 0;\\\\n  padding: 0;\\\\n  box-sizing: border-box;\\\\n}\\\\n`;\\n      break;\\n    case 'js':\\n    case 'ts':\\n      defaultContent =\\n        `// ${trimmedName}\\\\n\\\\nconsole.log('${trimmedName} ');\\\\n\\\\n$` + `(function() {\\\\n  // \\\\n});\\\\n`;\\n      break;\\n    case 'json':\\n      defaultContent = `{\\\\n  \\\"name\\\": \\\"${trimmedName.replace('.json', '')}\\\",\\\\n  \\\"version\\\": \\\"1.0.0\\\"\\\\n}`;\\n      break;\\n    case 'md':\\n      defaultContent = `# ${trimmedName.replace(/\\\\.md$/, '')}\\\\n\\\\n`;\\n      break;\\n    default:\\n      defaultContent = '';\\n  }\\n\\n  // \\n  const newFile: ProjectFile = {\\n    path: fullPath,\\n    name: trimmedName,\\n    content: defaultContent,\\n  };\\n\\n  proj.files.push(newFile);\\n  currentFile.value = fullPath;\\n  code.value = defaultContent;\\n\\n  saveToChatVar();\\n  updatePreview();\\n\\n  window.toastr.success(` \\\"${fullPath}\\\" `);\\n}\\n\\n// \\nfunction deleteFile(filePath: string) {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  const file = proj.files.find(f => f.path === filePath);\\n  if (!file) return;\\n\\n  if (!confirm(` \\\"${file.path}\\\" `)) return;\\n\\n  proj.files = proj.files.filter(f => f.path !== filePath);\\n\\n  // \\n  if (currentFile.value === filePath) {\\n    if (proj.files.length > 0) {\\n      currentFile.value = proj.files[0].path;\\n      code.value = proj.files[0].content;\\n    } else {\\n      currentFile.value = '';\\n      code.value = '';\\n    }\\n  }\\n\\n  saveToChatVar();\\n  updatePreview();\\n\\n  window.toastr.success(` \\\"${file.path}\\\" `);\\n}\\n\\nfunction getFileIcon(path: string): string {\\n  const ext = path.split('.').pop()?.toLowerCase();\\n  if (ext === 'html') return 'fa-brands fa-html5';\\n  if (ext === 'css') return 'fa-brands fa-css3-alt';\\n  if (ext === 'js') return 'fa-brands fa-js';\\n  return 'fa-solid fa-file-code';\\n}\\n\\nfunction buildPreviewFromFiles(files: ProjectFile[]): string {\\n  const htmlFile = files.find(f => f.path.endsWith('.html'));\\n  const cssFile = files.find(f => f.path.endsWith('.css'));\\n  const jsFile = files.find(f => f.path.endsWith('.js'));\\n\\n  if (!htmlFile) return '';\\n\\n  const html = htmlFile.content;\\n  const headTag = 'head';\\n  const bodyTag = 'body';\\n  const headMatch = html.match(new RegExp(`<${headTag}[^>]*>([\\\\\\\\s\\\\\\\\S]*?)</${headTag}>`, 'i'));\\n  const bodyMatch = html.match(new RegExp(`<${bodyTag}[^>]*>([\\\\\\\\s\\\\\\\\S]*?)</${bodyTag}>`, 'i'));\\n\\n  let headContent = headMatch ? headMatch[1] : '';\\n  let bodyContent = bodyMatch ? bodyMatch[1] : html;\\n\\n  const linkTagRegex = /<link[^>]*rel=[\\\"']stylesheet[\\\"'][^>]*>/gi;\\n  const scriptTagRegex = new RegExp('<' + 'script[^>]*></' + 'script>', 'gi');\\n  headContent = headContent.replace(linkTagRegex, '');\\n  bodyContent = bodyContent.replace(scriptTagRegex, '');\\n\\n  const scriptTag = 'script';\\n  const styleTag = 'style';\\n  return `<!DOCTYPE html>\\n<html>\\n<head>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  ${headContent}\\n  <${styleTag}>\\n    html, body {\\n      margin: 0 !important;\\n      padding: 0 !important;\\n      width: 100% !important;\\n      height: auto !important;\\n      min-height: 800px !important;\\n      overflow: visible !important;\\n    }\\n    ${cssFile?.content || ''}\\n  </${styleTag}>\\n  <${scriptTag} src=\\\"https://code.jquery.com/jquery-3.7.1.min.js\\\"></${scriptTag}>\\n  <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\\\">\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\\\"></${scriptTag}>\\n  <${scriptTag} src=\\\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\\\"></${scriptTag}>\\n</head>\\n<body>\\n  ${bodyContent}\\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\\n</body>\\n</html>`;\\n}\\n\\nfunction updatePreview() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    previewHtml.value = '';\\n    return;\\n  }\\n  previewHtml.value = buildPreviewFromFiles(proj.files);\\n}\\n\\nfunction saveToChatVar() {\\n  try {\\n    const chatId = SillyTavern.getCurrentChatId();\\n    console.log(' ID:', chatId);\\n\\n    const dataToSave = {\\n      frontend_projects_files: projects.value,\\n      frontend_ai_history: aiHistory.value,\\n    };\\n\\n    if (chatId) {\\n      console.log(':', dataToSave.frontend_projects_files.length, '');\\n      insertOrAssignVariables(dataToSave, { type: 'chat' });\\n      console.log('');\\n\\n      // \\n      const verify = getVariables({ type: 'chat' });\\n      if (verify?.frontend_projects_files) {\\n        console.log('', verify.frontend_projects_files.length, '');\\n      } else {\\n        console.error('');\\n      }\\n    } else {\\n      // \\n      console.log(' ID:', dataToSave.frontend_projects_files.length, '');\\n      insertOrAssignVariables(dataToSave, { type: 'global' });\\n      console.log('');\\n      toastr.info('');\\n    }\\n  } catch (e) {\\n    console.error(':', e);\\n  }\\n}\\n\\nfunction loadFromChatVar() {\\n  try {\\n    const chatId = SillyTavern.getCurrentChatId();\\n    console.log(' ID:', chatId);\\n\\n    let data;\\n    if (chatId) {\\n      data = getVariables({ type: 'chat' });\\n      console.log(':', data);\\n    } else {\\n      data = getVariables({ type: 'global' });\\n      console.log(' ID:', data);\\n    }\\n\\n    if (data?.frontend_projects_files && Array.isArray(data.frontend_projects_files)) {\\n      projects.value = data.frontend_projects_files;\\n      console.log(':', projects.value.length, '');\\n    } else {\\n      console.log('');\\n      projects.value = [];\\n    }\\n\\n    if (data?.frontend_ai_history) {\\n      aiHistory.value = data.frontend_ai_history;\\n      console.log('');\\n    } else {\\n      aiHistory.value = {};\\n    }\\n  } catch (e) {\\n    console.error(':', e);\\n  }\\n}\\n\\n// \\nloadFromChatVar();\\n\\nwatch(\\n  () => SillyTavern.getCurrentChatId(),\\n  () => {\\n    loadFromChatVar();\\n    currentId.value = '';\\n    currentFile.value = '';\\n    code.value = '';\\n    previewHtml.value = '';\\n  },\\n);\\n\\n// \\nlet autoSaveTimer: ReturnType<typeof setTimeout> | null = null;\\nwatchEffect(() => {\\n  // \\n  if (currentFile.value && code.value !== undefined) {\\n    const proj = currentProject.value;\\n    if (proj) {\\n      const file = proj.files.find(f => f.path === currentFile.value);\\n      if (file && file.content !== code.value) {\\n        // \\n        file.content = code.value;\\n\\n        // \\n        if (autoSaveTimer) {\\n          clearTimeout(autoSaveTimer);\\n        }\\n\\n        //  1 \\n        autoSaveTimer = setTimeout(() => {\\n          saveToChatVar();\\n          console.log(':', currentFile.value);\\n        }, 1000);\\n      }\\n    }\\n  }\\n});\\n\\n// \\nlet previewTimer: ReturnType<typeof setTimeout> | null = null;\\nwatch(\\n  () => [currentFile.value, code.value],\\n  () => {\\n    if (previewTimer) {\\n      clearTimeout(previewTimer);\\n    }\\n    previewTimer = setTimeout(updatePreview, 500);\\n  },\\n  { deep: true },\\n);\\n\\n// \\nonBeforeUnmount(() => {\\n  console.log('...');\\n\\n  // \\n  if (autoSaveTimer) {\\n    clearTimeout(autoSaveTimer);\\n  }\\n  if (previewTimer) {\\n    clearTimeout(previewTimer);\\n  }\\n\\n  // \\n  if (currentFile.value && code.value !== undefined) {\\n    const proj = currentProject.value;\\n    if (proj) {\\n      const file = proj.files.find(f => f.path === currentFile.value);\\n      if (file) {\\n        file.content = code.value;\\n      }\\n    }\\n  }\\n\\n  // \\n  saveToChatVar();\\n  console.log('');\\n});\\n\\nfunction showAIDialog() {\\n  showAI.value = true;\\n  aiPrompt.value = '';\\n}\\n\\nfunction closeAIDialog() {\\n  showAI.value = false;\\n  aiPrompt.value = '';\\n}\\n\\n// Bug \\nfunction showBugFixDialog() {\\n  showBugFix.value = true;\\n  bugDescription.value = '';\\n  consoleError.value = '';\\n  bugFile.value = '';\\n}\\n\\nfunction closeBugFixDialog() {\\n  showBugFix.value = false;\\n  bugDescription.value = '';\\n  consoleError.value = '';\\n  bugFile.value = '';\\n}\\n\\nasync function fixBugWithAI() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  if (!bugDescription.value.trim()) {\\n    window.toastr.error('');\\n    return;\\n  }\\n\\n  aiGenerating.value = true;\\n  showProgress.value = true;\\n  let normalizedEndpoint = '';\\n\\n  try {\\n    //  1: \\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage(' Bug ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  API \\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      throw new Error(' ID');\\n    }\\n\\n    const vars = getVariables({ type: 'script', script_id: scriptId });\\n    const apiEndpoint = vars?.api_endpoint;\\n    const apiKey = vars?.api_key;\\n    const model = vars?.model || 'gpt-4o-mini';\\n\\n    if (!apiEndpoint || !apiKey) {\\n      throw new Error('\\\"\\\" API');\\n    }\\n\\n    normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage(' Bug ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  Bug \\n    const systemPrompt = ` Bug \\n\\n# \\n\\n1. ****\\n2. ****\\n3. **** Console \\n4. ****\\n\\n#  Bug \\n\\n****\\n- ID \\n-  \\\\`$(function() {})\\\\` \\n-  JavaScript \\n\\n****\\n-  CSS displayvisibilityz-index\\n-  DOM \\n- \\n\\n****\\n-  insertOrAssignVariables \\n- \\n- \\n\\n****\\n- \\n- \\n- \\n\\n# \\n\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: \\n[]\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n`;\\n\\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n\\n    const userPrompt = `# \\n${currentFiles}\\n\\n# Bug \\n${bugDescription.value}\\n\\n${\\n  consoleError.value.trim()\\n    ? `# Console \\n\\\\`\\\\`\\\\`\\n${consoleError.value}\\n\\\\`\\\\`\\\\`\\n`\\n    : ''\\n}\\n\\n${\\n  bugFile.value\\n    ? `# \\n${bugFile.value}\\n`\\n    : ''\\n}\\n\\n# \\n1.  bug\\n2. \\n3. \\n4. \\n\\n system `;\\n\\n    progressDialogRef.value?.setProgress(25);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    progressDialogRef.value?.setProgress(30);\\n    progressDialogRef.value?.setMessage(' AI  bug...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    const response = await fetch(normalizedEndpoint, {\\n      method: 'POST',\\n      headers: {\\n        'Content-Type': 'application/json',\\n        Authorization: `Bearer ${apiKey}`,\\n      },\\n      body: JSON.stringify({\\n        model: model,\\n        messages: [\\n          { role: 'system', content: systemPrompt },\\n          { role: 'user', content: userPrompt },\\n        ],\\n        temperature: 0.3, // \\n      }),\\n    });\\n\\n    if (!response.ok) {\\n      const errorText = await response.text();\\n      throw new Error(`API  (${response.status}): ${errorText}`);\\n    }\\n\\n    progressDialogRef.value?.setProgress(60);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    const data = await response.json();\\n    const resultText = data.choices?.[0]?.message?.content || '';\\n\\n    if (!resultText) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.setProgress(75);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    //  AI \\n    const fileRegex = /FILE_START:\\\\s*(.+?)\\\\s*\\\\n([\\\\s\\\\S]*?)\\\\nFILE_END/g;\\n    const changes: AIChange[] = [];\\n    let match;\\n\\n    while ((match = fileRegex.exec(resultText)) !== null) {\\n      const path = match[1].trim();\\n      const newContent = match[2].trim();\\n      const existingFile = proj.files.find(f => f.path === path);\\n\\n      if (existingFile) {\\n        changes.push({\\n          path,\\n          oldContent: existingFile.content,\\n          newContent,\\n        });\\n      }\\n    }\\n\\n    if (changes.length === 0) {\\n      throw new Error('AI ');\\n    }\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    if (!aiHistory.value[proj.id]) {\\n      aiHistory.value[proj.id] = [];\\n    }\\n    aiHistory.value[proj.id].unshift({\\n      timestamp: new Date().toISOString(),\\n      prompt: `Bug : ${bugDescription.value}`,\\n      changes: klona(changes),\\n    });\\n\\n    // \\n    aiChanges.value = changes;\\n    showComparison.value = true;\\n    previewMode.value = 'after';\\n\\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage(`Bug  (${changes.length} )`);\\n    await new Promise(r => setTimeout(r, 100));\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage('Bug ');\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      showBugFix.value = false;\\n      window.toastr.success(`AI `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('Bug :', error);\\n    window.toastr.error(`Bug : ${error?.message || String(error)}`);\\n    showProgress.value = false;\\n  } finally {\\n    aiGenerating.value = false;\\n  }\\n}\\n\\nasync function generateWithAI() {\\n  if (!aiPrompt.value.trim() || aiGenerating.value) return;\\n\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  const vaguePhrases = ['', '', '', '', '', '', ''];\\n  const prompt = aiPrompt.value.trim();\\n  const isVague = vaguePhrases.some(phrase => {\\n    const regex = new RegExp(`^${phrase}[\\\\\\\\s]*$`, 'i');\\n    return regex.test(prompt);\\n  });\\n\\n  if (isVague) {\\n    toastr.warning(\\n      '\\\\n\\\\n\\\\n' +\\n        ' \\\"\\\"\\\\n' +\\n        ' \\\"\\\"\\\\n\\\\n' +\\n        ' \\\"\\\"\\\\n' +\\n        ' \\\"\\\"',\\n      '',\\n      { timeOut: 6000 },\\n    );\\n    return;\\n  }\\n\\n  aiGenerating.value = true;\\n  showProgress.value = true;\\n  let normalizedEndpoint = ''; // \\n\\n  try {\\n    // 1: \\n    progressDialogRef.value?.setProgress(5);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    const scriptId = getScriptIdSafe();\\n    if (!scriptId) {\\n      toastr.error(' ID');\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    const vars = getVariables({ type: 'script', script_id: scriptId });\\n    const apiEndpoint = vars?.api_endpoint;\\n    const apiKey = vars?.api_key;\\n    const model = vars?.model || 'gpt-4o-mini';\\n    const temperature = vars?.temperature || 0.7;\\n    const maxTokens = vars?.max_tokens || 4000;\\n\\n    if (!apiEndpoint || !apiKey) {\\n      toastr.error('\\\"\\\" API');\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    //  API \\n    try {\\n      normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\\n      console.log(' :', apiEndpoint);\\n      console.log(' :', normalizedEndpoint);\\n    } catch (e) {\\n      toastr.error('API ' + (e as Error).message);\\n      aiGenerating.value = false;\\n      showProgress.value = false;\\n      return;\\n    }\\n\\n    //  max_tokens \\n    if (maxTokens < 2000) {\\n      toastr.warning(` max_tokens  ${maxTokens} AI  4000 `);\\n    }\\n\\n    progressDialogRef.value?.setProgress(15);\\n    progressDialogRef.value?.setMessage('...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    const systemPrompt = ` SillyTavern\\n\\n# \\n${proj.files.map(f => `- ${f.path}`).join('\\\\n')}\\n\\n#  API \\n## \\n- jQuery ($): DOM \\n- toastr: \\n- gsap: \\n- lodash (_): \\n- zod (z): \\n\\n##  API\\n****\\n- \\\\`getVariables({ type: 'chat' })\\\\`: \\n- \\\\`insertOrAssignVariables(data, { type: 'chat' })\\\\`: \\n- \\\\`replaceVariables(data, { type: 'chat' })\\\\`: \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\n//   API \\nconst isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\\n\\n// \\nfunction loadData() {\\n  if (isInTavern) {\\n    const data = getVariables({ type: 'chat' });\\n    return data.my_key || { count: 0 };\\n  } else {\\n    //  localStorage\\n    const stored = localStorage.getItem('my_key');\\n    return stored ? JSON.parse(stored) : { count: 0 };\\n  }\\n}\\n\\n// \\nfunction saveData(data) {\\n  if (isInTavern) {\\n    insertOrAssignVariables({ my_key: data }, { type: 'chat' });\\n  } else {\\n    localStorage.setItem('my_key', JSON.stringify(data));\\n  }\\n}\\n\\n// \\nlet myData = loadData();\\nmyData.count++;\\nsaveData(myData);\\n\\\\`\\\\`\\\\`\\n\\n** API**\\n- getChatMessages(): \\n- getCurrentCharacter(): \\n- getWorldbook(): \\n- replaceWorldbook(data): \\n- eventOn(event, callback): \\n- getIframeName():  iframe \\n- triggerSlash(command):  STScript \\n- SillyTavern.getCurrentChatId():  ID\\n\\n## \\n\\n****  AI \\n\\n****\\n\\n\\\\`\\\\`\\\\`javascript\\n// 1. \\nasync function updateStatusFromMessages() {\\n  if (typeof getChatMessages !== 'function') return; // \\n\\n  const messages = await getChatMessages();\\n  if (!messages || messages.length === 0) return;\\n\\n  //  AI  is_user: false\\n  const latestAIMessage = messages.slice().reverse().find(m => !m.is_user);\\n  if (!latestAIMessage) return;\\n\\n  const content = latestAIMessage.mes; // \\n\\n  // 2. \\n  const statusMatch = content.match(/\\\\`\\\\`\\\\`json([\\\\\\\\s\\\\\\\\S]*?)\\\\`\\\\`\\\\`/);\\n  if (statusMatch) {\\n    try {\\n      const status = JSON.parse(statusMatch[1]);\\n      // 3. \\n      $('#health').text(status.health || 100);\\n      $('#level').text(status.level || 1);\\n    } catch (e) {\\n      console.error(':', e);\\n    }\\n  }\\n\\n  // 80\\n  const healthMatch = content.match(/[:](\\\\\\\\d+)/);\\n  if (healthMatch) {\\n    $('#health').text(healthMatch[1]);\\n  }\\n}\\n\\n// 4. \\n$(function() {\\n  updateStatusFromMessages();\\n});\\n\\n// 5. \\nif (typeof eventOn === 'function') {\\n  eventOn('MESSAGE_RECEIVED', () => {\\n    updateStatusFromMessages();\\n  });\\n}\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##   XML \\n\\n**** AI  XML  \\\\`<state_bar><i></i></state_bar>\\\\`\\n\\n****\\n1.  \\\\`<state_bar>\\\\` \\n2.  XML  HTML\\n3. \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1.  =====\\nfunction extractStateBar(text: string): string | null {\\n  const match = text.match(/<state_bar>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/state_bar>/i);\\n  return match ? match[1].trim() : null;\\n}\\n\\n// ===== 2. XML  HTML=====\\nfunction convertXmlToHtml(xml: string): string {\\n  let html = xml;\\n\\n  // <i><2i><3i> \\n  html = html.replace(/<i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/i>/g, '<div class=\\\"state-item indent-1\\\">$1</div>');\\n  html = html.replace(/<2i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/2i>/g, '<div class=\\\"state-item indent-2\\\">$1</div>');\\n  html = html.replace(/<3i>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/3i>/g, '<div class=\\\"state-item indent-3\\\">$1</div>');\\n\\n  // \\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-date\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-time\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-location\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-physical\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-mental\\\"> $1</div>');\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g, '<div class=\\\"state-current\\\"> $1</div>');\\n\\n  //  <></>\\n  html = html.replace(/<>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/>/g,\\n    '<div class=\\\"state-colored\\\" style=\\\"border-left: 3px solid #ff6b6b; background: rgba(255,107,107,0.1);\\\">$1</div>');\\n\\n  // \\n  html = html.replace(/<([^>\\\\\\\\/\\\\\\\\s]+)>([\\\\\\\\s\\\\\\\\S]*?)<\\\\\\\\/\\\\\\\\1>/g, '<div class=\\\"state-generic\\\">$2</div>');\\n\\n  return html;\\n}\\n\\n// ===== 3.  =====\\nasync function updateStateBar() {\\n  if (typeof getChatMessages !== 'function') return;\\n\\n  const messages = await getChatMessages();\\n  if (!messages || messages.length === 0) return;\\n\\n  //  AI \\n  const latestAI = messages.slice().reverse().find(m => !m.is_user);\\n  if (!latestAI) return;\\n\\n  // \\n  const stateBarXml = extractStateBar(latestAI.mes);\\n  if (stateBarXml) {\\n    const stateBarHtml = convertXmlToHtml(stateBarXml);\\n\\n    // \\n    const container = $('#state-bar-container');\\n    container.fadeOut(200, () => {\\n      container.html(stateBarHtml);\\n      container.fadeIn(200);\\n    });\\n  }\\n}\\n\\n// ===== 4.  =====\\n$(function() {\\n  updateStateBar(); // \\n\\n  // \\n  if (typeof eventOn === 'function') {\\n    eventOn('MESSAGE_RECEIVED', updateStateBar);\\n  }\\n});\\n\\\\`\\\\`\\\\`\\n\\n** CSS **\\n\\n\\\\`\\\\`\\\\`scss\\n#state-bar-container {\\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n  border-radius: 12px;\\n  padding: 16px;\\n  color: white;\\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\\n  margin-bottom: 16px;\\n}\\n\\n.state-item {\\n  padding: 8px 12px;\\n  margin: 6px 0;\\n  background: rgba(255, 255, 255, 0.1);\\n  border-radius: 6px;\\n  backdrop-filter: blur(10px);\\n  transition: all 0.3s ease;\\n\\n  &:hover {\\n    background: rgba(255, 255, 255, 0.15);\\n    transform: translateX(4px);\\n  }\\n}\\n\\n// \\n.indent-1 { margin-left: 20px; }\\n.indent-2 { margin-left: 40px; }\\n.indent-3 { margin-left: 60px; }\\n\\n// \\n.state-date, .state-time, .state-location {\\n  font-weight: 600;\\n  font-size: 14px;\\n  padding: 8px 12px;\\n  margin: 8px 0;\\n  border-radius: 6px;\\n}\\n\\n.state-date { background: rgba(100, 181, 246, 0.2); }\\n.state-time { background: rgba(129, 199, 132, 0.2); }\\n.state-location { background: rgba(255, 167, 38, 0.2); }\\n\\n.state-physical {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  background: rgba(255, 107, 107, 0.15);\\n  border-left: 4px solid #ff6b6b;\\n  border-radius: 4px;\\n}\\n\\n.state-mental {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  background: rgba(149, 117, 205, 0.15);\\n  border-left: 4px solid #9575cd;\\n  border-radius: 4px;\\n}\\n\\n.state-colored {\\n  padding: 10px 14px;\\n  margin: 8px 0;\\n  border-radius: 4px;\\n  backdrop-filter: blur(5px);\\n}\\n\\n.state-generic {\\n  padding: 6px 10px;\\n  margin: 4px 0;\\n  opacity: 0.9;\\n}\\n\\\\`\\\\`\\\\`\\n\\n** GSAP **\\n\\n\\\\`\\\\`\\\\`typescript\\n//  GSAP \\nfunction updateStateBarWithAnimation(stateBarHtml: string) {\\n  const container = $('#state-bar-container');\\n\\n  // \\n  gsap.to(container, {\\n    opacity: 0,\\n    y: -10,\\n    duration: 0.2,\\n    onComplete: () => {\\n      container.html(stateBarHtml);\\n\\n      // \\n      gsap.to(container, {\\n        opacity: 1,\\n        y: 0,\\n        duration: 0.3,\\n        ease: 'power2.out'\\n      });\\n\\n      // \\n      gsap.from('.state-item', {\\n        opacity: 0,\\n        x: -20,\\n        duration: 0.4,\\n        stagger: 0.05,\\n        ease: 'back.out(1.2)'\\n      });\\n    }\\n  });\\n}\\n\\\\`\\\\`\\\\`\\n\\\\`\\\\`\\\\`\\n\\n****\\n-  \\\\`getChatMessages()\\\\` \\n- \\n-  jQuery  DOM \\n-  MESSAGE_RECEIVED \\n\\n## \\n\\n****\\n**** index.html\\n\\n** **\\n\\n\\\\`\\\\`\\\\`javascript\\n//  \\n$(function() {\\n  let chatHistory = [];           //  \\n  function renderMessages() {}    //  \\n  function handleSend() {}        //  \\n\\n  //  \\n});\\n\\n//  \\nlet chatHistory = [];              //  \\nfunction renderMessages() {}       //  \\nfunction handleSend() {}           //  \\n\\n$(function() {\\n  // \\n  loadChatHistory();\\n  setupStreamListeners();\\n});\\n\\\\`\\\\`\\\\`\\n\\n****\\n1. let/const\\n2. function\\n3. \\\\`$(function() {})\\\\` - \\n4. \\\\`$(window).on('pagehide', ...)\\\\` - \\n\\n** generation_id **\\n****** generation_id **\\n-  AI \\n- \\n- \\n\\n****\\n1. ****index.html + index.ts\\n2. \\n3.  \\\\`generate(text)\\\\`** generation_id**\\n4. **** \\\\`id === currentGenerationId\\\\`\\n   - \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\`:  token \\n   - \\\\`iframe_events.STREAM_TOKEN_RECEIVED_FULLY\\\\`: \\n   - \\\\`iframe_events.GENERATION_ENDED\\\\`: \\n5.  \\\\`setChatMessages\\\\`\\\\`createChatMessages\\\\`  \\\\`{ refresh: 'none' }\\\\` \\n\\n**  API generate()**\\n- **\\\\`triggerSlashWithResult(command)\\\\`**:  STScript \\n  - \\\\`Promise<string>\\\\`AI \\n  - \\\\`const result = await triggerSlashWithResult('/gen lock=on \\\"\\\"');\\\\`\\n  - **** \\\\`/gen\\\\` \\n  - **** generation_id\\n- **\\\\`getRegexScripts()\\\\`**: \\n  - \\n  - ** AI **\\n- **** API \\n- **\\\\`triggerSlash(command)\\\\`**:  STScript \\n\\n** AI **\\nAI \\\\`<guide>\\\\`\\\\`<dream>\\\\`\\\\`<plot>\\\\`\\\\`<status>\\\\`\\\\`<think>\\\\` \\n****\\n\\n****\\n1. **** AI  \\\\`<gametxt>\\\\`\\n2. ****\\n3. ****\\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n// \\nfunction extractLastTagContent(tagName: string, text: string, ignoreCase = false): string | null {\\n  if (!text || typeof text !== 'string') return null;\\n\\n  const endTag = \\\\`</\\\\${tagName}>\\\\`;\\n  let searchPool = text;\\n  let endTagPattern = endTag;\\n\\n  if (ignoreCase) {\\n    searchPool = text.toLowerCase();\\n    endTagPattern = endTag.toLowerCase();\\n  }\\n\\n  const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\\n  if (lastEndIndex !== -1) {\\n    const startTag = \\\\`<\\\\${tagName}>\\\\`;\\n    let startTagPattern = startTag;\\n    if (ignoreCase) startTagPattern = startTag.toLowerCase();\\n\\n    const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\\n    if (lastStartIndex !== -1) {\\n      const startIndex = lastStartIndex + startTag.length;\\n      return text.substring(startIndex, lastEndIndex).trim();\\n    }\\n  }\\n  return null;\\n}\\n\\n// \\nfunction applyRegexFilters(text: string): string {\\n  console.log(' :', text.length);\\n\\n  if (!text || typeof text !== 'string') return '';\\n\\n  // =====  0: =====\\n  // \\\"\\\"\\\"\\\"\\n  // \\n  //  dream  gametxt \\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\\n  criticalTags.forEach(tag => {\\n    const openTagRegex = new RegExp(\\\\`<\\\\${tag}([^>]*)>\\\\`, 'gi');\\n    const closeTagRegex = new RegExp(\\\\`</\\\\${tag}>\\\\`, 'gi');\\n\\n    const openMatches = text.match(openTagRegex);\\n    const closeMatches = text.match(closeTagRegex);\\n\\n    const openCount = openMatches ? openMatches.length : 0;\\n    const closeCount = closeMatches ? closeMatches.length : 0;\\n\\n    if (openCount > closeCount) {\\n      // \\n      const missing = openCount - closeCount;\\n      console.log(\\\\`  \\\\${missing}  <\\\\${tag}> \\\\`);\\n      text = text + \\\\`</\\\\${tag}>\\\\`.repeat(missing);\\n    }\\n  });\\n\\n  // =====  1: =====\\n  //  AI \\n  //  dream \\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\\n  for (const tag of gameTextTags) {\\n    const extracted = extractLastTagContent(tag, text);\\n    if (extracted !== null) {\\n      console.log(\\\\`  <\\\\${tag}> :\\\\`, extracted.length);\\n      return extracted; // \\n    }\\n  }\\n\\n  // =====  2:  -  =====\\n  let cleanedText = text;\\n\\n  // dream/gametxt \\n  const tagsToRemove = [\\n    'guide', 'plot', 'status',\\n    'UpdateVariable', '', '', ''\\n  ];\\n\\n  tagsToRemove.forEach(tag => {\\n    //  <tag>...</tag> \\n    const regexWithContent = new RegExp(\\\\`<\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\${tag}>\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regexWithContent, '');\\n\\n    //  <tag/> \\n    const regexSelfClosing = new RegExp(\\\\`<\\\\${tag}\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\/>\\\\`, 'gi');\\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\\n\\n    if (before !== cleanedText) {\\n      console.log(\\\\`    <\\\\${tag}> \\\\`);\\n    }\\n  });\\n\\n  //   think/thinking \\n  //  <xxx_think><thinking_xxx><think><thinking> \\n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi;\\n  const beforeThinking = cleanedText;\\n  cleanedText = cleanedText.replace(thinkingRegex, '');\\n  if (beforeThinking !== cleanedText) {\\n    console.log('    think/thinking ');\\n  }\\n\\n  //  think \\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\\\\\\\\\/>/gi;\\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\\n\\n  //  HTML \\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  2-3: =====\\n  let allRegexScripts: any[] = [];\\n\\n  //  1: \\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegexes = getRegexScripts();\\n      if (globalRegexes && globalRegexes.length > 0) {\\n        console.log(' ', globalRegexes.length, '');\\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\\n      }\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  //  2:  SoliUmbra \\n  try {\\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes: any = null;\\n\\n              if (Array.isArray(data)) {\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break;\\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length > 0) {\\n    console.log(' ', allRegexScripts.length, '');\\n\\n    //  AI placement  2\\n    //   disabled  placement promptOnly\\n    //  promptOnly \\n    const activeScripts = allRegexScripts.filter((script: any) => {\\n      if (script.disabled) return false;\\n      if (!script.placement || !Array.isArray(script.placement)) return false;\\n      if (!script.placement.includes(2)) return false;\\n      return true;\\n    });\\n\\n    console.log(' ', activeScripts.length, '');\\n\\n    let result = text;\\n    activeScripts.forEach((script: any, index: number) => {\\n      try {\\n        const regex = new RegExp(script.findRegex, 'gim');\\n        const beforeLength = result.length;\\n        result = result.replace(regex, script.replaceString || '');\\n\\n        if (beforeLength !== result.length) {\\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\\n        }\\n      } catch (e) {\\n        console.error(' ', index + 1, ':', e);\\n      }\\n    });\\n\\n    text = result;\\n  }\\n\\n  console.log(' :', text.length);\\n  return text;\\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n\\\\`\\\\`\\\\`typescript\\n// \\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\n\\n// \\nasync function handleSend() {\\n  const input = $('#user-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // 1. \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  renderMessages();\\n\\n  // 2. \\n  isGenerating = true;\\n  $('#send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    // 3. \\n    let prompt = '';\\n    chatHistory.slice(-10).forEach(msg => {\\n      prompt += (msg.role === 'user' ? '' : 'AI') + ': ' + msg.content + '\\\\\\\\n';\\n    });\\n\\n    // 4.  AI\\n    const rawResult = await triggerSlashWithResult('/gen lock=on \\\"' + prompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"');\\n\\n    // 5.  \\n    const cleanedResult = applyRegexFilters(rawResult);\\n\\n    // 6. \\n    chatHistory.push({ role: 'assistant', content: cleanedResult });\\n    renderMessages();\\n    saveChatHistory(); // \\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    isGenerating = false;\\n    $('#send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// \\nfunction renderMessages() {\\n  const container = $('#messages');\\n  container.empty();\\n\\n  chatHistory.forEach(msg => {\\n    const div = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .text(msg.content); //  text()  XSS\\n    container.append(div);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// \\nfunction saveChatHistory() {\\n  if (typeof insertOrAssignVariables === 'function') {\\n    insertOrAssignVariables({ chat_history: chatHistory }, { type: 'chat' });\\n  } else {\\n    localStorage.setItem('chat_history', JSON.stringify(chatHistory));\\n  }\\n}\\n\\\\`\\\\`\\\\`\\n\\n** **\\n\\n** **\\n\\n###  \\n-  \\\\`generate({ should_stream: true, generation_id })\\\\` \\n-  \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\` \\n- \\n-   AI \\n-   AI \\n\\n###  \\n-  \\\\`triggerSlashWithResult\\\\`\\n-  \\n-  \\\\`generateRaw\\\\`\\n\\n** **\\n\\n\\\\`\\\\`\\\\`typescript\\n// =====  =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\nlet currentGenerationId: string | null = null;\\n\\n// ===== =====\\nfunction setupStreamListeners() {\\n  //  \\n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\\n    if (!isGenerating || id !== currentGenerationId) return;\\n\\n    //  \\n    const cleanedText = applyRegexFilters(text);\\n\\n    //  DOM\\n    const container = $('#inner-messages');  //  ID \\n    const charName = SillyTavern?.name2 || 'AI';\\n    const lastMsg = container.find('.message:last-child');\\n\\n    if (lastMsg.length && !lastMsg.hasClass('user-message')) {\\n      //  AI \\n      lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\\n    } else {\\n      //  AI \\n      const msgDiv = $('<div>')\\n        .addClass('message ai-message')\\n        .html('<strong>' + charName + ':</strong> ' + cleanedText);\\n      container.append(msgDiv);\\n    }\\n\\n    // \\n    container.scrollTop(container[0].scrollHeight);\\n  });\\n\\n  //  \\n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\\n    if (id === currentGenerationId) {\\n      console.log(' ');\\n\\n      //  \\n      const cleanedText = applyRegexFilters(text);\\n\\n      // \\n      chatHistory.push({ role: 'assistant', content: cleanedText });\\n      saveChatHistory();\\n\\n      // \\n      renderMessages();\\n\\n      // \\n      isGenerating = false;\\n      currentGenerationId = null;\\n      $('#inner-send-btn').prop('disabled', false).text('');  //  ID \\n    }\\n  });\\n}\\n\\n// ===== =====\\nasync function handleSend() {\\n  const input = $('#inner-input');  //  ID \\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // 1. \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  // 2.  ID\\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n\\n  // 3. \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');  //  ID \\n\\n  try {\\n    // 4.   generate \\n    await generate({\\n      user_input: userInput,\\n      should_stream: true,           //  \\n      generation_id: currentGenerationId,  //   ID \\n      overrides: {\\n        chat_history: {\\n          prompts: chatHistory.map(msg => ({\\n            role: msg.role === 'user' ? 'user' : 'assistant',\\n            content: msg.content\\n          }))\\n        }\\n      }\\n    });\\n\\n    // \\n    // GENERATION_ENDED  AI \\n\\n  } catch (error) {\\n    console.error(' :', error);\\n    toastr.error(': ' + error.message);\\n\\n    // \\n    isGenerating = false;\\n    currentGenerationId = null;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// =====  =====\\nfunction renderMessages() {\\n  const container = $('#messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const div = $('<div>')\\n      .attr('id', \\\\\\\\\\\\`message-\\\\\\\\\\\\${index}\\\\\\\\\\\\`)  //   id\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .text(msg.content);\\n    container.append(div);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// =====  =====\\n$(() => {\\n  loadChatHistory();\\n  setupStreamListeners();  //  \\n\\n  $('#send-btn').on('click', handleSend);\\n  $('#user-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n});\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`\\n\\n** CSS **\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`css\\n.streaming {\\n  border-right: 2px solid #165DFF;\\n  animation: blink 1s infinite;\\n}\\n\\n@keyframes blink {\\n  0%, 50% { border-right-color: transparent; }\\n  51%, 100% { border-right-color: #165DFF; }\\n}\\n\\\\\\\\\\\\`\\\\\\\\\\\\`\\\\\\\\\\\\`\\n\\n** **\\n- **** 3\\n- **** triggerSlashWithResult\\n- **** AI \\n- **** \\n\\n** **\\n1.   \\\\`generate({ should_stream: true, generation_id: uniqueId })\\\\`\\n2.  \\\\`setupStreamListeners()\\\\`\\n3.  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\\\`\\n4.   ID \\\\`generation_id\\\\`\\n5.   \\\\`overrides.chat_history.prompts\\\\` \\n\\n**  \\\\`applyRegexFilters\\\\`**\\n1.  **STREAM_TOKEN_RECEIVED_INCREMENTALLY **\\n   \\\\`\\\\`\\\\`typescript\\n   const cleanedText = applyRegexFilters(text);  // \\n   lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\\n   \\\\`\\\\`\\\\`\\n\\n2.  **GENERATION_ENDED **\\n   \\\\`\\\\`\\\\`typescript\\n   const cleanedText = applyRegexFilters(text);  // \\n   chatHistory.push({ role: 'assistant', content: cleanedText });\\n   \\\\`\\\\`\\\\`\\n\\n** \\\\`applyRegexFilters\\\\` **\\n1.  ****\\\"\\\"\\\"\\\"\\n2.  **** \\\\`<dream>\\\\`\\\\`<gametxt>\\\\` \\n3.  **** \\\\`think\\\\` \\n4.  ****\\n\\n** **\\n- ****\\\\`<dream>\\\\`\\\\`<gametxt>\\\\`\\\\`<output>\\\\` \\n- ****\\\\`['dream', 'gametxt', 'output', 'display', 'text', 'content']\\\\`\\n- ****\\n- ****\\n  \\\\`\\\\`\\\\`\\n  <guide></guide><dream></dream><plot></plot>\\n      <dream> \\n  \\\\`\\\\`\\\\`\\n\\n** **\\n-  \\\\`think\\\\`  \\\\`thinking\\\\`\\n- \\\\`/<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi\\\\`\\n- \\\\`<think>\\\\`\\\\`<thinking>\\\\`\\\\`<xxx_think>\\\\`\\\\`<thinking_xxx>\\\\` \\n- \\n\\n****\\n-    \\\\`<thinking>\\\\`    + \\n-    \\\\`<UpdateVariable>\\\\`    + \\n-     \\\\`<UpdateVariable>\\\\`   \\\\`<UpdateVariable>\\\\` \\n\\n** **\\n-  / text \\\\`applyRegexFilters\\\\`\\n-   text\\n-   text\\n-   \\\\`should_stream: true\\\\`\\n-   \\\\`generation_id\\\\`\\n-   ID\\n-  \\n\\n** **\\n**** \\\\`$(function() {})\\\\` \\n\\n\\\\`\\\\`\\\\`javascript\\n//  \\n$(function() {\\n  let chatHistory = [];  //  \\n  function renderMessages() {}  //  \\n});\\n\\n//  \\nlet chatHistory = [];  //  \\nfunction renderMessages() {}  //  \\n\\n$(function() {\\n  // \\n  loadChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n** **\\n\\n\\\\`\\\\`\\\\`javascript\\n// index.ts \\n//\\n// 1  1-10 \\n//    let chatHistory = [];\\n//    let isGenerating = false;\\n//    ...\\n//\\n// 2  10-250 \\n//    function loadChatHistory() { ... }\\n//    function saveChatHistory() { ... }\\n//    function renderMessages() { ... }\\n//    function applyRegexFilters(text) { ... }  //  \\n//    function handleSend() { ... }\\n//\\n// 3 jQuery  250-270 \\n//    $(function() {\\n//      // \\n//      loadChatHistory();\\n//      $('#btn').on('click', handleSend);\\n//    });\\n//\\n// 4  270-275 \\n//    $(window).on('pagehide', () => { ... });\\n\\\\`\\\\`\\\\`\\n\\n** 100% **\\n\\n\\\\`\\\\`\\\\`javascript\\n// =====================================================\\n//   $(function() {}) \\n// =====================================================\\n\\n// ===== 1. =====\\nlet chatHistory = []; // { role: 'user'|'assistant', content: string }\\nlet isGenerating = false;\\n\\n// ===== 2.  =====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    // \\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    // \\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3.  =====\\nfunction renderMessages() {\\n  console.log(' renderMessages :', chatHistory.length, '');\\n\\n  const container = $('#inner-messages');\\n  console.log(' :', container.length > 0 ? ' ' : ' ');\\n\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    // \\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    console.log(' ', index + 1, ':', msg.role, '-', name, '- :', msg.content.length);\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  console.log(' renderMessages :', container.find('.message').length);\\n\\n  // \\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 4.  =====\\n/**\\n *  AI \\n * \\n * 1.  getRegexScripts\\n * 2.  SoliUmbra \\n * 3. \\n */\\nfunction applyRegexFilters(text) {\\n  console.log(' :', text.length);\\n\\n  // =====  0: =====\\n  // <guide><dream><plot><status><think> \\n  let cleanedText = text;\\n  const commonTags = [\\n    'guide', 'dream', 'plot', 'status', 'think', 'thinking',\\n    'thought', 'reasoning', 'analysis', 'plan', 'reflection',\\n    'meta', 'ooc', 'system', 'debug'\\n  ];\\n\\n  commonTags.forEach(tag => {\\n    //  <tag>...</tag> \\n    const regex = new RegExp(\\\\`<\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\${tag}>\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regex, '');\\n    if (before !== cleanedText) {\\n      console.log(\\\\`   :  <\\\\${tag}> \\\\`);\\n    }\\n  });\\n\\n  //  HTML \\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  // \\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  1-2:  =====\\n  let allRegexScripts = [];\\n\\n  //  1: \\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegex = getRegexScripts();\\n      console.log(' ', globalRegex.length, '');\\n      allRegexScripts = allRegexScripts.concat(globalRegex);\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  //  2: SoliUmbra \\n  //   iframe  window.parent.SillyTavern.getContext() \\n  try {\\n    const parentST = window.parent?.SillyTavern || window.SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        //  identifier\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find(p => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes = null;\\n\\n              // \\n              if (Array.isArray(data)) {\\n                //  regexes-bindings\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                //  SPresetSettings.RegexBinding.regexes\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break; // \\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length === 0) {\\n    console.log(' ');\\n    return text;\\n  }\\n\\n  console.log(' ', allRegexScripts.length, '');\\n\\n  //  AI \\n  // placement :\\n  //   0 = \\n  //   1 =  AI \\n  //   2 = AI  \\n  // promptOnly: true = \\n  // promptOnly: false =   \\n  const activeScripts = allRegexScripts.filter(script => {\\n    return !script.disabled &&\\n           !script.promptOnly &&  //  promptOnly  false \\n           script.placement &&\\n           script.placement.includes(2);  //  placement  2 AI \\n  });\\n\\n  console.log(' ', activeScripts.length, '');\\n\\n  let result = text;\\n\\n  // \\n  activeScripts.forEach((script, index) => {\\n    try {\\n      const regex = new RegExp(script.findRegex, 'gim');\\n      const beforeLength = result.length;\\n      result = result.replace(regex, script.replaceString || '');\\n\\n      if (beforeLength !== result.length) {\\n        console.log(' ', index + 1, '(', script.scriptName, ') ', beforeLength - result.length, '');\\n      }\\n    } catch (e) {\\n      console.error(' ', index + 1, '(', script.scriptName, ') :', e);\\n    }\\n  });\\n\\n  console.log(' :', text.length, ':', result.length);\\n\\n  return result;\\n}\\n\\n// ===== 5.  =====\\n//   sendChatMessage\\n//  \\nasync function handleSend() {\\n  const input = $('#inner-user-input');\\n  const text = input.val().trim();\\n\\n  if (!text || isGenerating) return;\\n\\n  // \\n  chatHistory.push({ role: 'user', content: text });\\n  input.val('');\\n  renderMessages();\\n  saveChatHistory();\\n\\n  // \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    //   STScript API \\n    if (typeof triggerSlashWithResult !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    // \\n    const userName = SillyTavern?.name1 || 'You';\\n    const charName = SillyTavern?.name2 || 'AI';\\n\\n    // \\n    let fullPrompt = '';\\n    if (chatHistory.length > 0) {\\n      fullPrompt += '\\\\\\\\n';\\n      chatHistory.forEach((msg) => {\\n        const name = msg.role === 'user' ? userName : charName;\\n        fullPrompt += name + ': ' + msg.content + '\\\\\\\\n';\\n      });\\n      fullPrompt += '\\\\\\\\n';\\n    }\\n    fullPrompt += userName + ': ' + text;\\n\\n    console.log(' :', fullPrompt.length);\\n\\n    //   /gen \\n    const command = '/gen lock=on \\\"' + fullPrompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n    const result = await triggerSlashWithResult(command);\\n\\n    console.log(' AI :', result ? result.length : 0);\\n\\n    if (result && result.length > 0) {\\n      //  \\n      const cleanedResult = applyRegexFilters(result);\\n      console.log(' :', cleanedResult.length);\\n\\n      //  AI \\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\\n      saveChatHistory();\\n      renderMessages();\\n      toastr.success('');\\n    } else {\\n      toastr.warning('AI ');\\n    }\\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    // \\n    isGenerating = false;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// =====================================================\\n//   $(function() {})\\n// =====================================================\\n\\n// ===== 6.  =====\\n//  \\n$(function() {\\n  // \\n  console.log(' ');\\n  console.log(' chatHistory :', typeof chatHistory !== 'undefined');\\n  console.log(' renderMessages :', typeof renderMessages === 'function');\\n  console.log(' handleSend :', typeof handleSend === 'function');\\n\\n  //   false $(function() {}) \\n  if (typeof chatHistory === 'undefined' || typeof renderMessages !== 'function') {\\n    console.error(' /');\\n    console.error(' $(function() {}) ');\\n    toastr.error('');\\n    return;\\n  }\\n\\n  loadChatHistory();\\n\\n  // \\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-user-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  // \\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' ');\\n  console.log(' :', $('#inner-messages').length > 0 ? ' ' : ' ');\\n});\\n\\n// ===== 7.  =====\\n$(window).on('pagehide', () => {\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n**HTML **\\n\\\\`\\\\`\\\\`html\\n<div class=\\\"inner-chat-container\\\">\\n  <div class=\\\"inner-chat-header\\\">\\n    <h3></h3>\\n    <button id=\\\"inner-clear-btn\\\"></button>\\n  </div>\\n\\n  <!--  ID  inner-messages -->\\n  <div id=\\\"inner-messages\\\" class=\\\"inner-messages\\\"></div>\\n\\n  <div class=\\\"inner-input-area\\\">\\n    <!--  ID  inner-user-input -->\\n    <textarea id=\\\"inner-user-input\\\" placeholder=\\\"...\\\"></textarea>\\n    <!--  ID  inner-send-btn -->\\n    <button id=\\\"inner-send-btn\\\"></button>\\n  </div>\\n</div>\\n\\\\`\\\\`\\\\`\\n\\n** HTML **\\n- [ ]  \\\\`id=\\\"inner-messages\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-user-input\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-send-btn\\\"\\\\` \\n- [ ]  \\\\`id=\\\"inner-clear-btn\\\"\\\\` \\n- [ ] ID  JS \\n\\n**CSS **\\n\\\\`\\\\`\\\\`css\\n/*  */\\n.inner-messages {\\n  height: 400px;\\n  overflow-y: auto;\\n  padding: 15px;\\n  display: flex;  /*   flex */\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n/*  */\\n.message {\\n  max-width: 70%;\\n  padding: 10px 15px;\\n  border-radius: 12px;\\n  word-wrap: break-word;\\n}\\n\\n/*   */\\n.user-message {\\n  align-self: flex-end;  /*  */\\n  background: #4a9eff;\\n  color: white;\\n}\\n\\n/*  AI  */\\n.ai-message {\\n  align-self: flex-start;  /*  */\\n  background: #2a2a2a;\\n  color: #e0e0e0;\\n}\\n\\\\`\\\\`\\\\`\\n\\n** **\\n- ID \\\\`inner-\\\\`\\n-  \\\\`display: flex; flex-direction: column\\\\`\\n-  \\\\`align-self: flex-end\\\\` \\n- AI  \\\\`align-self: flex-start\\\\` \\n\\n** API**\\n- **\\\\`generate(prompt)\\\\`**: ** AI **\\n- \\\\`generateRaw(prompt)\\\\`:  AI \\n- \\\\`getVariables({ type: 'message', message_id })\\\\`: \\n- \\\\`insertOrAssignVariables(data, { type: 'message', message_id })\\\\`: \\n- \\\\`getChatMessages()\\\\`: \\n\\n****\\n- **\\\\`generate\\\\`**: \\n- **\\\\`generateRaw\\\\`**: \\n\\n** **\\n1. **80% **\\n   -  **** \\\\`$(function() {})\\\\`  \\\\`let\\\\`/\\\\`const\\\\`/\\\\`function\\\\` \\n   -  ********\\\\`$(function() {})\\\\` \\n   - **** \\\\`console.log(typeof chatHistory)\\\\` \\\\`'object'\\\\`  \\\\`'undefined'\\\\`\\n\\n1.5. **/**\\n   -  ****\\\\`chatHistory.push({ role: 'assistant', content: '' });\\\\`\\n   -  ****\\\\`chatHistory.push({ role: 'assistant', content: ' AI ' });\\\\`\\n   -  **** AI \\n   -  **** \\\\`generate()\\\\`AI  \\\\`STREAM_TOKEN_RECEIVED_FULLY\\\\` \\n   - ****\\\\`generate()\\\\`  AI API\\n\\n2. **generation_id **\\n   -  \\\\`const result = await generate(...); const id = result.generation_id;\\\\`\\n   -  \\n     \\\\`\\\\`\\\\`javascript\\n     const myId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n     await generate({ user_input: text, generation_id: myId });\\n     //  id  myId\\n     \\\\`\\\\`\\\\`\\n   - \\\\`generate()\\\\`  \\\\`Promise<string>\\\\`\\n   -  ID \\n\\n3. ****\\n   -  \\\\`index.html\\\\` + \\\\`index.ts\\\\`\\n   - \\n   -  \\\\`setChatMessages(..., { refresh: 'none' })\\\\` \\n\\n4. ****\\n   -   \\\\`sendChatMessage\\\\`\\n   -   \\\\`generate\\\\`\\\\`getChatMessages\\\\`  API \\n   -  \\\\`handleSend\\\\`\\\\`innerSendMessage\\\\`\\\\`sendInnerMessage\\\\`\\n   - **** \\\\`sk()\\\\` \\n\\n5. ** ID **\\n   -  \\\\`inner-\\\\` \\n   -  \\\\`send-button\\\\`\\\\`user-input\\\\` \\n   - **** \\\\`$('#inner-messages').length\\\\`  1 0\\n\\n6. ****\\n   -  ** \\\\`iframe_events.XXX\\\\` \\\\`'iframe_events.XXX'\\\\`**\\n   -  ** \\\\`(text, id)\\\\` \\\\`(data)\\\\` \\\\`text\\\\`  \\\\`data.text\\\\`**\\n   -  **\\\\`generate({ user_input: text, should_stream: true, generation_id: myId })\\\\`**\\n   -  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => ...)\\\\` \\n   -  \\\\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\\\` \\n\\n7. **API **\\n   -  \\\\`generate(prompt)\\\\`\\n   -  \\\\`generateRaw(prompt)\\\\`\\n   - \\n\\n8. ****\\n   -  \\\\`getVariables({ type: 'chat' })\\\\`  \\\\`insertOrAssignVariables(data, { type: 'chat' })\\\\`\\n   - \\\\`{ type: 'message', message_id }\\\\`\\n   - \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\n// ==========  ==========\\n\\n//  \\n// eventOn('iframe_events.STREAM_TOKEN_RECEIVED_FULLY', (data) => { ... })\\n//   'iframe_events.XXX'\\n//   (data)\\n\\n//  \\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => {\\n  // text \\n  $('#ai-reply').text(text); //   text text.text  data.text\\n  console.log(':', text);\\n});\\n\\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => {\\n  // text \\n  console.log(' :', text); //   text\\n  chatHistory.push({ role: 'assistant', content: text });\\n  saveChatHistory();\\n  isGenerating = false;\\n  $('#send-btn').prop('disabled', false).text('');\\n});\\n\\n//  GENERATION_ENDED\\neventOn(iframe_events.GENERATION_ENDED, (text, id) => {\\n  console.log(' :', text);\\n  chatHistory.push({ role: 'assistant', content: text });\\n  saveChatHistory();\\n  isGenerating = false;\\n  $('#send-btn').prop('disabled', false).text('');\\n});\\n\\n// ==========  ==========\\nasync function handleSend() {\\n  const userInput = $('#user-input').val();\\n  chatHistory.push({ role: 'user', content: userInput });\\n\\n  isGenerating = true;\\n  $('#send-btn').prop('disabled', true).text('...');\\n\\n  //   STScript \\n  const command = '/gen lock=on \\\"' + userInput.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n  const result = await triggerSlashWithResult(command);\\n\\n  if (result) {\\n    chatHistory.push({ role: 'assistant', content: result });\\n    renderMessages();\\n  }\\n\\n  //   generate API\\n  // await generate({ user_input: userInput });  //  \\n}\\n\\\\`\\\\`\\\\`\\n\\n** triggerSlashWithResult**\\n-  \\\\`/gen\\\\` \\n- \\n-  generation_id \\n\\n**\\\\`/gen\\\\` **\\n- \\\\`/gen lock=on \\\"\\\"\\\\`\\n- \\n-  AI \\n\\n---\\n\\n#  AI \\n\\n**\\\"\\\"\\\"\\\"\\\"\\\"\\\"\\\"******B\\n****A\\n\\n##  \\n\\n### 1. \\n-  **** \\\\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\\\`\\n-  **** \\\\`$(function() {})\\\\`  \\\\`loadChatHistory()\\\\`\\n-  **** \\\\`SillyTavern.getCurrentChatId()\\\\` \\n-  **** \\\\`$(window).on('pagehide', ...)\\\\` \\n-  ****/ \\\\`saveChatHistory()\\\\`\\n\\n### 2. \\n-  ****\\\\`display: none\\\\`iframe \\n-  ****\\n-  **** \\\\`chatHistory\\\\`\\n\\n### 3. \\n-  **** \\\\`{ type: 'chat' }\\\\`\\n-  **** \\\\`getCurrentChatId()\\\\` \\n\\n##  triggerSlashWithResult\\n\\n**** \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1. =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\n\\n// ===== 2.  =====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3. =====\\nfunction applyRegexFilters(text: string): string {\\n  console.log(' :', text.length);\\n\\n  if (!text || typeof text !== 'string') return '';\\n\\n  // =====  0:  =====\\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\\n  criticalTags.forEach(tag => {\\n    const openTagRegex = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}([^>]*)>\\\\\\\\\\\\`, 'gi');\\n    const closeTagRegex = new RegExp(\\\\\\\\\\\\`</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`, 'gi');\\n\\n    const openMatches = text.match(openTagRegex);\\n    const closeMatches = text.match(closeTagRegex);\\n\\n    const openCount = openMatches ? openMatches.length : 0;\\n    const closeCount = closeMatches ? closeMatches.length : 0;\\n\\n    if (openCount > closeCount) {\\n      const missing = openCount - closeCount;\\n      console.log(\\\\\\\\\\\\`  \\\\\\\\\\\\${missing}  <\\\\\\\\\\\\${tag}> \\\\\\\\\\\\`);\\n      text = text + \\\\\\\\\\\\`</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`.repeat(missing);\\n    }\\n  });\\n\\n  // =====  1: =====\\n  function extractLastTagContent(tagName: string, text: string): string | null {\\n    if (!text || typeof text !== 'string') return null;\\n\\n    const endTag = \\\\\\\\\\\\`</\\\\\\\\\\\\${tagName}>\\\\\\\\\\\\`;\\n    const searchPool = text.toLowerCase();\\n    const endTagPattern = endTag.toLowerCase();\\n\\n    const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\\n    if (lastEndIndex !== -1) {\\n      const startTag = \\\\\\\\\\\\`<\\\\\\\\\\\\${tagName}>\\\\\\\\\\\\`;\\n      const startTagPattern = startTag.toLowerCase();\\n\\n      const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\\n      if (lastStartIndex !== -1) {\\n        const startIndex = lastStartIndex + startTag.length;\\n        return text.substring(startIndex, lastEndIndex).trim();\\n      }\\n    }\\n    return null;\\n  }\\n\\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\\n  for (const tag of gameTextTags) {\\n    const extracted = extractLastTagContent(tag, text);\\n    if (extracted !== null) {\\n      console.log(\\\\\\\\\\\\`  <\\\\\\\\\\\\${tag}> :\\\\\\\\\\\\`, extracted.length);\\n      return extracted;\\n    }\\n  }\\n\\n  // =====  2:  =====\\n  let cleanedText = text;\\n\\n  const tagsToRemove = [\\n    'guide', 'plot', 'status',\\n    'UpdateVariable', '', '', ''\\n  ];\\n\\n  tagsToRemove.forEach(tag => {\\n    const regexWithContent = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\S]*?</\\\\\\\\\\\\${tag}>\\\\\\\\\\\\`, 'gi');\\n    const before = cleanedText;\\n    cleanedText = cleanedText.replace(regexWithContent, '');\\n\\n    const regexSelfClosing = new RegExp(\\\\\\\\\\\\`<\\\\\\\\\\\\${tag}\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\/>\\\\\\\\\\\\`, 'gi');\\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\\n\\n    if (before !== cleanedText) {\\n      console.log(\\\\\\\\\\\\`    <\\\\\\\\\\\\${tag}> \\\\\\\\\\\\`);\\n    }\\n  });\\n\\n  //  think/thinking \\n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?<\\\\\\\\\\\\\\\\/[^>]*think[^>]*>/gi;\\n  const beforeThinking = cleanedText;\\n  cleanedText = cleanedText.replace(thinkingRegex, '');\\n  if (beforeThinking !== cleanedText) {\\n    console.log('    think/thinking ');\\n  }\\n\\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\\\\\\\\\/>/gi;\\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\\n\\n  cleanedText = cleanedText.replace(/<!--[\\\\\\\\s\\\\\\\\S]*?-->/g, '');\\n\\n  if (cleanedText !== text) {\\n    console.log(' :', cleanedText.length);\\n    text = cleanedText;\\n  }\\n\\n  // =====  3: =====\\n  let allRegexScripts: any[] = [];\\n\\n  if (typeof getRegexScripts === 'function') {\\n    try {\\n      const globalRegexes = getRegexScripts();\\n      if (globalRegexes && globalRegexes.length > 0) {\\n        console.log(' ', globalRegexes.length, '');\\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\\n      }\\n    } catch (e) {\\n      console.warn(' :', e);\\n    }\\n  }\\n\\n  try {\\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\\n    if (parentST && typeof parentST.getContext === 'function') {\\n      const context = parentST.getContext();\\n      const prompts = context?.chatCompletionSettings?.prompts;\\n\\n      if (prompts && Array.isArray(prompts)) {\\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\\n\\n        for (const identifier of possibleIdentifiers) {\\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\\n          if (regexPrompt?.content) {\\n            try {\\n              const data = JSON.parse(regexPrompt.content);\\n              let presetRegexes: any = null;\\n\\n              if (Array.isArray(data)) {\\n                presetRegexes = data;\\n              } else if (data && typeof data === 'object') {\\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\\n                  presetRegexes = data.RegexBinding.regexes;\\n                } else if (data.regexes && Array.isArray(data.regexes)) {\\n                  presetRegexes = data.regexes;\\n                }\\n              }\\n\\n              if (presetRegexes && presetRegexes.length > 0) {\\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\\n                break;\\n              }\\n            } catch (parseError) {\\n              console.warn('  identifier', identifier, ':', parseError);\\n            }\\n          }\\n        }\\n      }\\n    }\\n  } catch (e) {\\n    console.warn(' :', e);\\n  }\\n\\n  if (allRegexScripts.length > 0) {\\n    console.log(' ', allRegexScripts.length, '');\\n\\n    const activeScripts = allRegexScripts.filter((script: any) => {\\n      if (script.disabled) return false;\\n      if (!script.placement || !Array.isArray(script.placement)) return false;\\n      if (!script.placement.includes(2)) return false;\\n      return true;\\n    });\\n\\n    console.log(' ', activeScripts.length, '');\\n\\n    let result = text;\\n    activeScripts.forEach((script: any, index: number) => {\\n      try {\\n        const regex = new RegExp(script.findRegex, 'gim');\\n        const beforeLength = result.length;\\n        result = result.replace(regex, script.replaceString || '');\\n\\n        if (beforeLength !== result.length) {\\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\\n        }\\n      } catch (e) {\\n        console.error(' ', index + 1, ':', e);\\n      }\\n    });\\n\\n    text = result;\\n  }\\n\\n  console.log(' :', text.length);\\n  return text;\\n}\\n\\n// ===== 4.  =====\\nasync function handleSend() {\\n  const input = $('#inner-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    if (typeof triggerSlashWithResult !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    const userName = SillyTavern?.name1 || 'You';\\n    const charName = SillyTavern?.name2 || 'AI';\\n\\n    let fullPrompt = '';\\n    if (chatHistory.length > 1) {\\n      fullPrompt += '\\\\\\\\n';\\n      chatHistory.slice(0, -1).forEach((msg) => {\\n        const name = msg.role === 'user' ? userName : charName;\\n        fullPrompt += name + ': ' + msg.content + '\\\\\\\\n';\\n      });\\n      fullPrompt += '\\\\\\\\n';\\n    }\\n    fullPrompt += userName + ': ' + userInput;\\n\\n    console.log(' :', fullPrompt.length);\\n\\n    const command = '/gen lock=on \\\"' + fullPrompt.replace(/\\\"/g, '\\\\\\\\\\\\\\\\\\\"') + '\\\"';\\n    const result = await triggerSlashWithResult(command);\\n\\n    console.log(' AI :', result ? result.length : 0);\\n\\n    if (result && result.length > 0) {\\n      const cleanedResult = applyRegexFilters(result);\\n      console.log(' :', cleanedResult.length);\\n\\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\\n      saveChatHistory();\\n      renderMessages();\\n      toastr.success('');\\n    } else {\\n      toastr.warning('AI ');\\n    }\\n\\n  } catch (error) {\\n    console.error(':', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n  } finally {\\n    isGenerating = false;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// ===== 5.  =====\\nfunction renderMessages() {\\n  const container = $('#inner-messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 6. =====\\nlet currentChatId = SillyTavern.getCurrentChatId();\\nif (typeof eventOn === 'function') {\\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\\n    if (currentChatId !== newChatId) {\\n      console.log(' :', currentChatId, '->', newChatId);\\n      currentChatId = newChatId;\\n\\n      // \\n      loadChatHistory();\\n\\n      // \\n      if (isGenerating) {\\n        isGenerating = false;\\n        $('#inner-send-btn').prop('disabled', false).text('');\\n        console.log(' ');\\n      }\\n    }\\n  });\\n}\\n\\n// ===== 7.  =====\\n$(function() {\\n  console.log(' A');\\n  console.log('  ID:', currentChatId);\\n\\n  // \\n  loadChatHistory();\\n\\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' A');\\n  console.log(' ', chatHistory.length, '');\\n});\\n\\n// ===== 8.  =====\\n$(window).on('pagehide', () => {\\n  console.log(' ');\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##  generate + \\n\\n****  AI \\n\\n****\\n\\n\\\\`\\\\`\\\\`typescript\\n// ===== 1. =====\\nlet chatHistory: Array<{ role: string; content: string }> = [];\\nlet isGenerating = false;\\nlet currentGenerationId: string | null = null;\\n\\n// ===== 2. A=====\\nfunction loadChatHistory() {\\n  const isInTavern = typeof getVariables === 'function';\\n  if (!isInTavern) {\\n    const saved = localStorage.getItem('inner_chat_history');\\n    chatHistory = saved ? JSON.parse(saved) : [];\\n  } else {\\n    const data = getVariables({ type: 'chat' });\\n    chatHistory = data?.inner_chat_history || [];\\n  }\\n  renderMessages();\\n}\\n\\nfunction saveChatHistory() {\\n  const isInTavern = typeof insertOrAssignVariables === 'function';\\n  if (!isInTavern) {\\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\\n  } else {\\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\\n  }\\n}\\n\\n// ===== 3. A=====\\nfunction applyRegexFilters(text: string): string {\\n  // ... A ...\\n  // A applyRegexFilters \\n  return text;\\n}\\n\\n// ===== 4. =====\\nfunction setupStreamListeners() {\\n  //  \\n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\\n    if (!isGenerating || id !== currentGenerationId) return;\\n\\n    console.log(' :', text.length);\\n\\n    //  \\n    const cleanedText = applyRegexFilters(text);\\n\\n    //  DOM\\n    const container = $('#inner-messages');\\n    const charName = (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n    const lastMsg = container.find('.message:last-child');\\n\\n    if (lastMsg.length && lastMsg.hasClass('ai-message')) {\\n      //  AI \\n      lastMsg.html('<strong>' + charName + ':</strong> <span class=\\\"streaming\\\">' + cleanedText + '</span>');\\n    } else {\\n      //  AI \\n      const msgDiv = $('<div>')\\n        .addClass('message ai-message')\\n        .html('<strong>' + charName + ':</strong> <span class=\\\"streaming\\\">' + cleanedText + '</span>');\\n      container.append(msgDiv);\\n    }\\n\\n    // \\n    container.scrollTop(container[0].scrollHeight);\\n  });\\n\\n  //  \\n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\\n    if (id === currentGenerationId) {\\n      console.log(' :', text.length);\\n\\n      //  \\n      const cleanedText = applyRegexFilters(text);\\n\\n      // \\n      chatHistory.push({ role: 'assistant', content: cleanedText });\\n      saveChatHistory();\\n\\n      // \\n      renderMessages();\\n\\n      // \\n      isGenerating = false;\\n      currentGenerationId = null;\\n      $('#inner-send-btn').prop('disabled', false).text('');\\n\\n      toastr.success('');\\n    }\\n  });\\n}\\n\\n// ===== 5. =====\\nasync function handleSend() {\\n  const input = $('#inner-input');\\n  const userInput = input.val().trim();\\n  if (!userInput || isGenerating) return;\\n\\n  // \\n  chatHistory.push({ role: 'user', content: userInput });\\n  input.val('');\\n  saveChatHistory();\\n  renderMessages();\\n\\n  //  ID\\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\\n\\n  // \\n  isGenerating = true;\\n  $('#inner-send-btn').prop('disabled', true).text('...');\\n\\n  try {\\n    if (typeof generate !== 'function') {\\n      throw new Error('');\\n    }\\n\\n    console.log(' generation_id:', currentGenerationId);\\n\\n    //   generate \\n    await generate({\\n      user_input: userInput,\\n      should_stream: true,           //  \\n      generation_id: currentGenerationId,  //   ID\\n      overrides: {\\n        chat_history: {\\n          prompts: chatHistory.map(msg => ({\\n            role: msg.role === 'user' ? 'user' : 'assistant',\\n            content: msg.content\\n          }))\\n        }\\n      }\\n    });\\n\\n    // \\n    // GENERATION_ENDED  AI \\n\\n  } catch (error) {\\n    console.error(' :', error);\\n    toastr.error(': ' + (error?.message || String(error)));\\n\\n    // \\n    isGenerating = false;\\n    currentGenerationId = null;\\n    $('#inner-send-btn').prop('disabled', false).text('');\\n  }\\n}\\n\\n// ===== 6. A=====\\nfunction renderMessages() {\\n  const container = $('#inner-messages');\\n  container.empty();\\n\\n  chatHistory.forEach((msg, index) => {\\n    const name = msg.role === 'user'\\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\\n\\n    const msgDiv = $('<div>')\\n      .addClass('message')\\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\\n      .html('<strong>' + name + ':</strong> ' + msg.content);\\n    container.append(msgDiv);\\n  });\\n\\n  container.scrollTop(container[0].scrollHeight);\\n}\\n\\n// ===== 7. =====\\nlet currentChatId = SillyTavern.getCurrentChatId();\\nif (typeof eventOn === 'function') {\\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\\n    if (currentChatId !== newChatId) {\\n      console.log(' :', currentChatId, '->', newChatId);\\n      currentChatId = newChatId;\\n\\n      // \\n      loadChatHistory();\\n\\n      // \\n      if (isGenerating) {\\n        isGenerating = false;\\n        currentGenerationId = null;\\n        $('#inner-send-btn').prop('disabled', false).text('');\\n        console.log(' ');\\n      }\\n    }\\n  });\\n}\\n\\n// ===== 8.  =====\\n$(function() {\\n  console.log(' B - ');\\n  console.log('  ID:', currentChatId);\\n\\n  // \\n  loadChatHistory();\\n\\n  //  \\n  setupStreamListeners();\\n\\n  $('#inner-send-btn').on('click', handleSend);\\n  $('#inner-input').on('keypress', (e) => {\\n    if (e.key === 'Enter' && !e.shiftKey) {\\n      e.preventDefault();\\n      handleSend();\\n    }\\n  });\\n\\n  $('#inner-clear-btn').on('click', () => {\\n    if (confirm('')) {\\n      chatHistory = [];\\n      renderMessages();\\n      saveChatHistory();\\n    }\\n  });\\n\\n  console.log(' B');\\n  console.log(' ', chatHistory.length, '');\\n});\\n\\n// ===== 9.  =====\\n$(window).on('pagehide', () => {\\n  console.log(' ');\\n  saveChatHistory();\\n});\\n\\\\`\\\\`\\\\`\\n\\n**CSS B**\\n\\n\\\\`\\\\`\\\\`css\\n.streaming {\\n  border-right: 2px solid #165DFF;\\n  padding-right: 4px;\\n  animation: blink 1s infinite;\\n}\\n\\n@keyframes blink {\\n  0%, 50% { border-right-color: #165DFF; }\\n  51%, 100% { border-right-color: transparent; }\\n}\\n\\\\`\\\\`\\\\`\\n\\n---\\n\\n##  AI \\n\\n****\\n\\n1. ****\\n   - \\\"\\\"\\\"\\\"\\n   - \\\"\\\"\\\"\\\"\\n   - \\\"\\\"\\\"\\\"\\n   - \\n\\n2. ****\\n   - \\n   - \\\"\\\"\\n\\n** ** \\\"\\\"****\\n\\n## \\n\\n****\\n\\n### AI \\n\\n**1**\\n\\n\\n- \\n- /\\n- \\n- \\n\\n**2**\\n\\n### A\\\"\\\"\\\"\\\"\\n\\n****\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: NEED_MORE_INFO\\n\\n\\n-  AI \\n- \\n- \\n\\n\\n\\n**1. **\\n- \\n- \\n- \\n- \\n\\n**2. **\\n- \\n- \\n-  AI \\n\\n**3. **\\n- \\n- \\n- \\n\\n**4. **\\n- \\n- \\n- /\\n- \\n- \\n\\n---\\n\\n****\\n\\n### \\n\\n\\n\\n1. ****\\n2. ****\\n3. ****\\n\\n### \\n\\n****\\n1.    \\\\`generate({ should_stream: true, generation_id })\\\\`\\n2.  \\\\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\\\` \\n3.     \\n4.    \\\\`chatHistory\\\\`  \\n\\n****\\n-  \\\\`generation_id\\\\` \\n- \\\\`applyRegexFilters\\\\`\\n- \\n\\n### \\n\\n****\\n\\\\`\\\\`\\\\`javascript\\nlet chatHistory = [\\n  { role: 'user', content: '', timestamp: '...' },\\n  { role: 'assistant', content: 'AI', timestamp: '...' }\\n];\\n\\\\`\\\\`\\\\`\\n\\n****\\n- \\n- AI \\n\\n****\\n \\\\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\\\` \\n\\n### \\n\\n**\\\\`applyRegexFilters\\\\` **\\n1. \\\"\\\"\\n2. \\\\`<dream>\\\\`\\\\`<gametxt>\\\\` \\n3. \\\\`<think>\\\\`\\\\`<guide>\\\\`\\\\`<plot>\\\\` \\n4. \\n\\n****\\n- \\n- \\n\\n---\\n\\n****\\n\\n\\\"\\\"\\n-  #1a1a1a\\n- #4a9eff\\n- AI #3a3a3a\\n-  + \\n- \\n\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n### B\\n\\n****\\n\\n\\n\\\\`\\\\`\\\\`\\nFILE_START: index.html\\n[ HTML ]\\nFILE_END\\n\\nFILE_START: style.css\\n[ CSS ]\\nFILE_END\\n\\nFILE_START: script.js\\n[ JavaScript ]\\nFILE_END\\n\\\\`\\\\`\\\\`\\n\\n### C\\\"\\\"\\\"\\\"\\n\\n****\\n\\n****\\n-  #1a1a1a #2a2a2a\\n- #4a9eff\\n- AI #3a3a3a\\n- border-radius: 12px\\n- fadeIn/fadeOut\\n- \\n- \\n- \\n\\n---\\n\\n### \\n\\n\\n\\n\\\\`\\\\`\\\\`typescript\\n// \\nconst regexPresets = {\\n  \\\"\\\": [\\n    { pattern: /<tag1>/g, replacement: \\\"\\\" },\\n    { pattern: /\\\\\\\\[tag2\\\\\\\\]/g, replacement: \\\"\\\" },\\n  ],\\n  \\\"\\\": [\\n    { pattern: /\\\\\\\\{\\\\\\\\{some_meta_data\\\\\\\\}\\\\\\\\}/g, replacement: \\\"\\\" },\\n  ]\\n};\\n\\nlet currentPreset = \\\"\\\";\\n\\nfunction applyRegexFilters(text: string, presetName?: string): string {\\n  const preset = presetName || currentPreset;\\n  const rules = regexPresets[preset] || regexPresets[\\\"\\\"];\\n\\n  let cleanedText = text;\\n  rules.forEach(rule => {\\n    cleanedText = cleanedText.replace(rule.pattern, rule.replacement);\\n  });\\n\\n  // \\n  // ...  ...\\n\\n  return cleanedText;\\n}\\n\\nfunction switchPreset(presetName: string) {\\n  currentPreset = presetName;\\n  renderMessages(); // \\n}\\n\\\\`\\\\`\\\\`\\n\\n****\\n\\n---\\n\\n# \\n FILE_START  FILE_END \\n\\n****\\n\\nFILE_START: index.html\\n[ HTML  headbody CSS  JS]\\nFILE_END\\n\\nFILE_START: style.css\\n[ CSS ]\\nFILE_END\\n\\nFILE_START: script.js\\n[ JavaScript  jQuery]\\nFILE_END\\n\\n** **\\n1. **** \\\\`inner\\\\`\\\\`my\\\\`\\n   -  \\\\`sendChatMessage\\\\`\\\\`generate\\\\`\\\\`getChatMessages\\\\`\\n   -  \\\\`innerSendMessage\\\\`\\\\`handleSendMessage\\\\`\\\\`sendInnerMessage\\\\`\\n2. ** ID** \\\\`inner-\\\\`\\\\`my-\\\\`\\n   -  \\\\`#send-button\\\\`\\\\`#user-input\\\\`\\n   -  \\\\`#inner-send-btn\\\\`\\\\`#inner-user-input\\\\`\\n3. ****\\n\\n#  \\n**\\\"\\\"\\\"\\\"\\\"\\\"**\\n\\n-  \\\"\\\"  ** style.css**\\n-  \\\"\\\"  ** script.js**\\n-  \\\"\\\"  ** script.js**\\n-  \\n\\n# \\n## \\n- ///  ** style.css**\\n- / bug  ** script.js**\\n- /  ** index.html**\\n- /  ** index.html**\\n\\n## \\n- /  ** index.htmlstyle.cssscript.js**\\n- /  ****\\n-   ****\\n\\n# \\n1. **  getVariables/insertOrAssignVariables**\\n2. **  \\\\`typeof SillyTavern !== 'undefined'\\\\` localStorage  API**\\n3. \\n4. \\n5. CSS \\n6. JavaScript  \\\\`$(function() { ... })\\\\`  DOM \\n7. \\\\`{ type: 'chat' }\\\\` \\\\`{ type: 'global' }\\\\` \\n8. `;\\n\\n    const currentFiles = proj.files.map(f => `=== ${f.path} ===\\\\n${f.content}`).join('\\\\n\\\\n');\\n    const userPrompt = `# \\n${currentFiles}\\n\\n# \\n${aiPrompt.value}\\n\\n#  \\n1. ****\\n2. **** 1 \\n3. ****\\n4. **** getVariables/insertOrAssignVariables\\n\\n system `;\\n\\n    // \\n    streamingText.value = ''; // \\n    let resultText = '';\\n\\n    progressDialogRef.value?.setProgress(25);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n    await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n    if (enableStream.value) {\\n      // \\n      progressDialogRef.value?.setProgress(30);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n      await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n      const response = await fetch(normalizedEndpoint, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${apiKey}`,\\n        },\\n        body: JSON.stringify({\\n          model: model,\\n          messages: [\\n            { role: 'system', content: systemPrompt },\\n            { role: 'user', content: userPrompt },\\n          ],\\n          temperature: temperature,\\n          max_tokens: maxTokens,\\n          stream: true, // \\n        }),\\n      });\\n\\n      if (!response.ok) {\\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\\n        try {\\n          const errorData = await response.json();\\n          console.error('API :', errorData);\\n          errorMsg += `\\\\n${JSON.stringify(errorData, null, 2)}`;\\n        } catch (e) {\\n          console.error('');\\n        }\\n        throw new Error(errorMsg);\\n      }\\n\\n      // \\n      const reader = response.body?.getReader();\\n      const decoder = new TextDecoder();\\n\\n      if (!reader) {\\n        throw new Error('');\\n      }\\n\\n      let chunkCount = 0;\\n      while (true) {\\n        const { done, value } = await reader.read();\\n        if (done) break;\\n\\n        const chunk = decoder.decode(value, { stream: true });\\n        const lines = chunk.split('\\\\n');\\n\\n        for (const line of lines) {\\n          if (line.startsWith('data: ')) {\\n            const data = line.slice(6);\\n            if (data === '[DONE]') continue;\\n\\n            try {\\n              const json = JSON.parse(data);\\n              const content = json.choices?.[0]?.delta?.content || '';\\n              if (content) {\\n                resultText += content;\\n                streamingText.value += content;\\n                chunkCount++;\\n\\n                // 30%  60%\\n                const progress = Math.min(60, 30 + chunkCount / 10);\\n                progressDialogRef.value?.setProgress(progress);\\n\\n                // 10chunk\\n                if (chunkCount % 10 === 0) {\\n                  progressDialogRef.value?.setMessage(` AI ... (${resultText.length} )`);\\n                }\\n              }\\n            } catch (e) {\\n              // \\n            }\\n          }\\n        }\\n      }\\n    } else {\\n      // \\n      progressDialogRef.value?.setProgress(30);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n      await new Promise(r => setTimeout(r, 100)); //  DOM \\n\\n      const response = await fetch(normalizedEndpoint, {\\n        method: 'POST',\\n        headers: {\\n          'Content-Type': 'application/json',\\n          Authorization: `Bearer ${apiKey}`,\\n        },\\n        body: JSON.stringify({\\n          model: model,\\n          messages: [\\n            { role: 'system', content: systemPrompt },\\n            { role: 'user', content: userPrompt },\\n          ],\\n          temperature: temperature,\\n          max_tokens: maxTokens,\\n        }),\\n      });\\n\\n      if (!response.ok) {\\n        let errorMsg = `API : ${response.status} ${response.statusText}`;\\n        try {\\n          const errorData = await response.json();\\n          console.error('API :', errorData);\\n          errorMsg += `\\\\n${JSON.stringify(errorData, null, 2)}`;\\n        } catch (e) {\\n          console.error('');\\n        }\\n        throw new Error(errorMsg);\\n      }\\n\\n      progressDialogRef.value?.setProgress(60);\\n      progressDialogRef.value?.setMessage(' AI ...');\\n\\n      const data = await response.json();\\n      resultText = data.choices?.[0]?.message?.content || '';\\n    }\\n\\n    progressDialogRef.value?.setProgress(75);\\n    progressDialogRef.value?.setMessage(' AI ...');\\n\\n    console.log('AI :', resultText);\\n    console.log('AI :', resultText.length);\\n\\n    if (!resultText || resultText.trim().length === 0) {\\n      throw new Error('AI  API ');\\n    }\\n\\n    // \\n    const changes: AIChange[] = [];\\n    // FILE_START: filename\\\\n...FILE_END  FILE_START:filename\\\\n...FILE_END\\n    const fileRegex = /FILE_START:\\\\s*(.+?)[\\\\r\\\\n]+([\\\\s\\\\S]*?)FILE_END/gi;\\n    let match;\\n\\n    console.log(' AI ...');\\n\\n    // \\n    const needMoreInfoMatch = resultText.match(/FILE_START:\\\\s*NEED_MORE_INFO\\\\s*[\\\\r\\\\n]+([\\\\s\\\\S]*?)FILE_END/i);\\n    if (needMoreInfoMatch) {\\n      const guideContent = needMoreInfoMatch[1].trim();\\n      console.log(' AI ');\\n\\n      //  AI \\n      closeAIDialog();\\n\\n      // \\n      toastr.info('AI ', '', { timeOut: 3000 });\\n\\n      // alert\\n      alert(guideContent);\\n\\n      // \\n      aiGenerating.value = false;\\n      return;\\n    }\\n\\n    while ((match = fileRegex.exec(resultText)) !== null) {\\n      const path = match[1].trim();\\n      const content = match[2].trim();\\n\\n      console.log(`: ${path}, : ${content.length}`);\\n\\n      const file = proj.files.find(f => f.path === path);\\n      if (file) {\\n        changes.push({\\n          path: path,\\n          oldContent: file.content,\\n          newContent: content,\\n        });\\n      } else {\\n        console.warn(` ${path} `);\\n      }\\n    }\\n\\n    if (changes.length === 0) {\\n      console.error(' AI ');\\n      console.error('AI :', resultText.substring(0, 500));\\n\\n      // \\n      if (resultText.length < 500 || !resultText.includes('FILE_END')) {\\n        throw new Error(\\n          `AI  ${resultText.length} \\\"\\\" max_tokens 4000 `,\\n        );\\n      }\\n\\n      throw new Error('AI  AI  FILE_START  FILE_END ');\\n    }\\n\\n    console.log(':', changes.length, '');\\n\\n    progressDialogRef.value?.setProgress(85);\\n    progressDialogRef.value?.setMessage('...');\\n\\n    // \\n    if (changes.length === 1 && changes[0].path === 'index.html') {\\n      toastr.warning('AI  HTML CSS/JS');\\n    }\\n\\n    //  FILE_END\\n    const lastFile = resultText.trim().split('FILE_START').pop() || '';\\n    if (!lastFile.includes('FILE_END')) {\\n      toastr.error('AI ');\\n    }\\n\\n    const result = { changes };\\n\\n    if (!result.changes || !Array.isArray(result.changes)) {\\n      throw new Error('AI ');\\n    }\\n\\n    // \\n    aiChanges.value = result.changes;\\n\\n    progressDialogRef.value?.setProgress(95);\\n    progressDialogRef.value?.setMessage(`... (${changes.length} )`);\\n\\n    closeAIDialog();\\n    showComparison.value = true;\\n    previewMode.value = 'after';\\n\\n    // \\n    progressDialogRef.value?.setProgress(100);\\n    progressDialogRef.value?.setMessage(' AI ');\\n\\n    setTimeout(() => {\\n      showProgress.value = false;\\n      toastr.success(` AI  ${changes.length} `);\\n    }, 800);\\n  } catch (error: any) {\\n    console.error('AI :', error);\\n    showProgress.value = false;\\n\\n    //  CORS \\n    const errorMessage = error.message || String(error);\\n    if (\\n      errorMessage.includes('CORS') ||\\n      errorMessage.includes('Failed to fetch') ||\\n      errorMessage.includes('Access-Control-Allow-Origin')\\n    ) {\\n      toastr.error(\\n        ` CORS  API\\\\n\\\\n` +\\n          `API ${new URL(normalizedEndpoint).origin} CORS \\\\n\\\\n` +\\n          `\\\\n` +\\n          `1.  API  CORS\\\\n` +\\n          `2.  CORS  API \\\\n` +\\n          `3.  API `,\\n      );\\n    } else if (errorMessage.includes('307') || errorMessage.includes('Temporary Redirect')) {\\n      toastr.error(\\n        ` URL \\\\n\\\\n` +\\n          `${normalizedEndpoint}\\\\n\\\\n` +\\n          `URL \\\\n` +\\n          `https:///v1`,\\n      );\\n    } else {\\n      toastr.error(`AI : ${errorMessage}`);\\n    }\\n  } finally {\\n    aiGenerating.value = false;\\n  }\\n}\\n\\nfunction acceptChanges() {\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  const historyRecord: AIHistoryRecord = {\\n    timestamp: new Date().toISOString(),\\n    prompt: aiPrompt.value,\\n    changes: aiChanges.value,\\n  };\\n\\n  if (!aiHistory.value[currentId.value]) {\\n    aiHistory.value[currentId.value] = [];\\n  }\\n  aiHistory.value[currentId.value].unshift(historyRecord);\\n  console.log(' AI :', aiHistory.value[currentId.value].length);\\n\\n  // \\n  aiChanges.value.forEach(change => {\\n    const file = proj.files.find(f => f.path === change.path);\\n    if (file) {\\n      file.content = change.newContent;\\n    }\\n  });\\n\\n  // \\n  saveToChatVar();\\n  updatePreview();\\n\\n  // \\n  if (currentFile.value) {\\n    const file = proj.files.find(f => f.path === currentFile.value);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n\\n  showComparison.value = false;\\n  aiChanges.value = [];\\n  toastr.success('');\\n}\\n\\nfunction rejectChanges() {\\n  showComparison.value = false;\\n  aiChanges.value = [];\\n  toastr.info('');\\n}\\n\\nfunction showHistoryDialog() {\\n  showHistory.value = true;\\n}\\n\\nfunction closeHistoryDialog() {\\n  showHistory.value = false;\\n}\\n\\nfunction restoreHistory(record: AIHistoryRecord) {\\n  if (!confirm(`\\\\n\\\\n\\\"${record.prompt}\\\"\\\\n\\\\n`)) {\\n    return;\\n  }\\n\\n  const proj = currentProject.value;\\n  if (!proj) return;\\n\\n  // \\n  record.changes.forEach(change => {\\n    const file = proj.files.find(f => f.path === change.path);\\n    if (file) {\\n      file.content = change.newContent;\\n    }\\n  });\\n\\n  console.log(':', record.prompt);\\n\\n  // \\n  saveToChatVar();\\n  updatePreview();\\n\\n  // \\n  if (currentFile.value) {\\n    const file = proj.files.find(f => f.path === currentFile.value);\\n    if (file) {\\n      code.value = file.content;\\n    }\\n  }\\n\\n  closeHistoryDialog();\\n  toastr.success('');\\n}\\n\\nfunction exportToRegex() {\\n  const proj = currentProject.value;\\n  if (!proj) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  // \\n  const fileObj = proj.files.find(f => f.name === currentFile.value);\\n  if (fileObj && code.value !== fileObj.content) {\\n    const shouldContinue = confirm('\\\\n\\\\n');\\n    if (!shouldContinue) {\\n      return;\\n    }\\n  }\\n\\n  // \\n  const triggerWord = prompt(\\n    `${proj.name}\\\\n\\\\n\\\\n  //g`,\\n    `${proj.name}`,\\n  );\\n  if (!triggerWord) {\\n    toastr.info('');\\n    return;\\n  }\\n\\n  try {\\n    //  HTML proj.files \\n    const fullHtml = buildPreviewFromFiles(proj.files);\\n\\n    //  UUID\\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\\n      const r = (Math.random() * 16) | 0;\\n      const v = c === 'x' ? r : (r & 0x3) | 0x8;\\n      return v.toString(16);\\n    });\\n\\n    //  JSON\\n    // 1.  Windows  \\\\r\\n    // 2.  <!DOCTYPE html>\\\\n <html> \\n    // 3. ```html\\\\n\\\\n<html>...</html>\\\\n```\\n    let cleanHtml = fullHtml.replace(/\\\\r/g, '');\\n    cleanHtml = cleanHtml.replace(/^<!DOCTYPE html>\\\\n/, '');\\n\\n    const regexJson = {\\n      id: uuid,\\n      scriptName: proj.name,\\n      findRegex: triggerWord.startsWith('/') ? triggerWord : `/${triggerWord}/g`,\\n      replaceString: '```html\\\\n\\\\n' + cleanHtml + '\\\\n```',\\n      trimStrings: [],\\n      placement: [1, 2],\\n      disabled: false,\\n      markdownOnly: true,\\n      promptOnly: false,\\n      runOnEdit: true,\\n      substituteRegex: 0,\\n      minDepth: null,\\n      maxDepth: null,\\n    };\\n\\n    // \\n    const dataStr = JSON.stringify(regexJson, null, 4);\\n    const dataBlob = new Blob([dataStr], { type: 'application/json' });\\n    const url = URL.createObjectURL(dataBlob);\\n\\n    const link = document.createElement('a');\\n    link.href = url;\\n    link.download = `${proj.name}_regex.json`;\\n    document.body.appendChild(link);\\n    link.click();\\n    document.body.removeChild(link);\\n    URL.revokeObjectURL(url);\\n\\n    console.log(' JSON:', regexJson);\\n    toastr.success(` \\\"${proj.name}\\\"  JSON`);\\n  } catch (error: any) {\\n    console.error(':', error);\\n    toastr.error(`: ${error.message}`);\\n  }\\n}\\n\\nfunction openInNewWindow() {\\n  if (!previewHtml.value) {\\n    toastr.error('');\\n    return;\\n  }\\n\\n  const proj = currentProject.value;\\n  const windowTitle = proj ? proj.name : '';\\n\\n  // \\n  const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\\n\\n  if (newWindow) {\\n    newWindow.document.write(previewHtml.value);\\n    newWindow.document.close();\\n    newWindow.document.title = windowTitle;\\n    toastr.success('');\\n  } else {\\n    toastr.error('');\\n  }\\n}\\n</script>\\n\\n<style scoped>\\n/*  */\\n@keyframes blink {\\n  0%,\\n  50% {\\n    opacity: 1;\\n  }\\n  51%,\\n  100% {\\n    opacity: 0;\\n  }\\n}\\n\\n.project-tab {\\n  padding: 25px !important;\\n  background: #1a1a1a !important;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * \n */\n\n/**\n *  iframe \n * @param text \n * @param successMessage \n * @returns Promise<boolean> \n */\nexport async function copyToClipboard(text: string, successMessage?: string): Promise<boolean> {\n  try {\n    // 1:  execCommand\n    if (window.parent && window.parent.document) {\n      try {\n        const textarea = window.parent.document.createElement('textarea');\n        textarea.value = text;\n        textarea.style.position = 'fixed';\n        textarea.style.opacity = '0';\n        window.parent.document.body.appendChild(textarea);\n        textarea.select();\n        const success = window.parent.document.execCommand('copy');\n        window.parent.document.body.removeChild(textarea);\n\n        if (success) {\n          if (successMessage) {\n            toastr.success(successMessage);\n          }\n          return true;\n        }\n      } catch (e) {\n        console.warn('', e);\n      }\n    }\n\n    // 2:  execCommand\n    try {\n      const textarea = document.createElement('textarea');\n      textarea.value = text;\n      textarea.style.position = 'fixed';\n      textarea.style.opacity = '0';\n      document.body.appendChild(textarea);\n      textarea.select();\n      const success = document.execCommand('copy');\n      document.body.removeChild(textarea);\n\n      if (success) {\n        if (successMessage) {\n          toastr.success(successMessage);\n        }\n        return true;\n      }\n    } catch (e) {\n      console.warn(' Clipboard API', e);\n    }\n\n    // 3:  Clipboard API\n    if (navigator.clipboard && navigator.clipboard.writeText) {\n      await navigator.clipboard.writeText(text);\n      if (successMessage) {\n        toastr.success(successMessage);\n      }\n      return true;\n    }\n\n    throw new Error('');\n  } catch (error) {\n    console.error(':', error);\n    toastr.error('');\n    return false;\n  }\n}\n\n/**\n *  ID\n * IDID\n */\nexport function getScriptIdSafe(): string {\n  // IDID\n  if (globalScriptId) {\n    return globalScriptId;\n  }\n\n  try {\n    const id = getScriptId();\n    // ID\n    if (id && !globalScriptId) {\n      globalScriptId = id;\n    }\n    return id || 'maomao_writing_tool_v1'; // fallback ID\n  } catch (error) {\n    console.error(' ID :', error);\n    return 'maomao_writing_tool_v1'; // fallback ID\n  }\n}\n\n/**\n *  ID\n */\nexport function getChatIdSafe(): string {\n  try {\n    return SillyTavern.getCurrentChatId();\n  } catch (error) {\n    console.error(' ID :', error);\n    return '';\n  }\n}\n\n//  ID iframe \nlet globalScriptId: string | null = null;\n\n/**\n *  ID\n */\nexport function setGlobalScriptId(id: string): void {\n  globalScriptId = id;\n}\n\n/**\n *  ID\n */\nexport function getGlobalScriptId(): string | null {\n  return globalScriptId;\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=1bdea629&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6082e7c9\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=1bdea629&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-14.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsTab.vue?vue&type=style&index=0&id=1bdea629&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.summary-tab[data-v-f8bd87fc]{height:100%;overflow-y:auto;padding:25px !important}.section-header[data-v-f8bd87fc]{display:flex;justify-content:space-between;align-items:center;padding:20px 25px !important;border-bottom:1px solid #3a3a3a;margin-bottom:5px}.section-header h3[data-v-f8bd87fc]{margin:0;color:#fff;font-size:15px !important;font-weight:bold;display:flex;align-items:center;gap:8px}.header-actions[data-v-f8bd87fc]{display:flex;align-items:center;gap:10px}.count-badge[data-v-f8bd87fc]{background:#4a9eff;color:white;padding:4px 8px;border-radius:12px;font-size:12px}.empty-state[data-v-f8bd87fc]{text-align:center;padding:40px 20px;color:#888}.empty-state i[data-v-f8bd87fc]{font-size:48px;margin-bottom:10px;opacity:0.3}.empty-state p[data-v-f8bd87fc]{margin:10px 0;font-size:14px}.empty-state small[data-v-f8bd87fc]{color:#666;font-size:12px}.history-list[data-v-f8bd87fc]{display:flex;flex-direction:column;gap:10px;padding:15px 20px}.history-item[data-v-f8bd87fc]{background:#2a2a2a;border:1px solid #3a3a3a;border-radius:6px;overflow:hidden;transition:border-color 0.2s}.history-item[data-v-f8bd87fc]:hover{border-color:#4a4a4a}.history-header[data-v-f8bd87fc]{padding:12px 15px;background:#1a1a1a;display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background 0.2s}.history-header[data-v-f8bd87fc]:hover{background:#2a2a2a}.history-info[data-v-f8bd87fc]{display:flex;align-items:center;gap:10px;flex:1}.history-number[data-v-f8bd87fc]{color:#4a9eff;font-weight:bold}.history-range[data-v-f8bd87fc]{color:#888;font-size:12px}.expand-icon[data-v-f8bd87fc]{color:#888;font-size:12px}.history-content[data-v-f8bd87fc]{padding:15px;background:#2a2a2a}.history-actions[data-v-f8bd87fc]{display:flex;gap:8px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a}.mini-button[data-v-f8bd87fc]{flex:1;padding:6px 12px;background:#2a2a2a;border:1px solid #3a3a3a;border-radius:4px;color:#e0e0e0;cursor:pointer;font-size:12px;transition:background 0.2s}.mini-button[data-v-f8bd87fc]:hover{background:#3a3a3a}.mini-button.delete-button[data-v-f8bd87fc]:hover{background:#ff4444;border-color:#ff4444;color:white}.mini-button.worldbook-button[data-v-f8bd87fc]{background:#28a745;color:white;border-color:#28a745}.mini-button.worldbook-button[data-v-f8bd87fc]:hover{background:#218838;border-color:#218838;color:white}.mini-button.create-worldbook-button[data-v-f8bd87fc]{background:#17a2b8;color:white;border-color:#17a2b8}.mini-button.create-worldbook-button[data-v-f8bd87fc]:hover{background:#138496;border-color:#138496;color:white}.mini-button.refresh-button[data-v-f8bd87fc]{background:#6c757d;color:white;border-color:#6c757d}.mini-button.refresh-button[data-v-f8bd87fc]:hover{background:#5a6268;border-color:#5a6268;color:white}.mini-button.debug-button[data-v-f8bd87fc]{background:#ffc107;color:#000;border-color:#ffb300}.mini-button.debug-button[data-v-f8bd87fc]:hover{background:#e0a800;border-color:#d39e00;color:#000}.history-text[data-v-f8bd87fc]{white-space:pre-wrap;word-wrap:break-word;line-height:1.6;max-height:400px;overflow-y:auto}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/_with_worldbook/components/SummaryTab.vue\"],\"names\":[],\"mappings\":\"AAqlCA,8BACE,WAAY,CACZ,eAAgB,CAChB,uBACF,CAEA,iCACE,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,4BAA6B,CAC7B,+BAAgC,CAChC,iBACF,CAEA,oCACE,QAAS,CACT,UAAW,CACX,yBAA0B,CAC1B,gBAAiB,CACjB,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,iCACE,YAAa,CACb,kBAAmB,CACnB,QACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,eAAgB,CAChB,kBAAmB,CACnB,cACF,CAEA,8BACE,iBAAkB,CAClB,iBAAkB,CAClB,UACF,CAEA,gCACE,cAAe,CACf,kBAAmB,CACnB,WACF,CAEA,gCACE,aAAc,CACd,cACF,CAEA,oCACE,UAAW,CACX,cACF,CAEA,+BACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,iBACF,CAEA,+BACE,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,eAAgB,CAChB,4BACF,CAEA,qCACE,oBACF,CAEA,iCACE,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,0BACF,CAEA,uCACE,kBACF,CAEA,+BACE,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,MACF,CAEA,iCACE,aAAc,CACd,gBACF,CAEA,gCACE,UAAW,CACX,cACF,CAEA,8BACE,UAAW,CACX,cACF,CAEA,kCACE,YAAa,CACb,kBACF,CAEA,kCACE,YAAa,CACb,OAAQ,CACR,kBAAmB,CACnB,kBAAmB,CACnB,+BACF,CAEA,8BACE,MAAO,CACP,gBAAiB,CACjB,kBAAmB,CACnB,wBAAyB,CACzB,iBAAkB,CAClB,aAAc,CACd,cAAe,CACf,cAAe,CACf,0BACF,CAEA,oCACE,kBACF,CAEA,kDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,+CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,qDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,sDACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,4DACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,6CACE,kBAAmB,CACnB,WAAY,CACZ,oBACF,CAEA,mDACE,kBAAmB,CACnB,oBAAqB,CACrB,WACF,CAEA,2CACE,kBAAmB,CACnB,UAAW,CACX,oBACF,CAEA,iDACE,kBAAmB,CACnB,oBAAqB,CACrB,UACF,CAEA,+BACE,oBAAqB,CACrB,oBAAqB,CACrB,eAAgB,CAChB,gBAAiB,CACjB,eACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"summary-tab\\\" style=\\\"padding: 25px !important; background: #1a1a1a !important\\\">\\n    <div\\n      class=\\\"section-header\\\"\\n      style=\\\"\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n        padding: 20px 25px !important;\\n        border-bottom: 1px solid #3a3a3a;\\n        margin-bottom: 5px;\\n      \\\"\\n    >\\n      <h3\\n        style=\\\"\\n          margin: 0;\\n          color: #fff;\\n          font-size: 15px !important;\\n          font-weight: bold;\\n          display: flex;\\n          align-items: center;\\n          gap: 8px;\\n        \\\"\\n      >\\n         \\n      </h3>\\n      <div class=\\\"header-actions\\\" style=\\\"display: flex; align-items: center; gap: 10px\\\">\\n        <span\\n          v-if=\\\"summary_history.length > 0\\\"\\n          class=\\\"count-badge\\\"\\n          style=\\\"background: #4a9eff; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px\\\"\\n          >{{ summary_history.length }} </span\\n        >\\n        <button\\n          class=\\\"mini-button refresh-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #2a2a2a;\\n            border: 1px solid #3a3a3a;\\n            border-radius: 4px;\\n            color: #e0e0e0;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"handleRefreshData\\\"\\n        >\\n          <i class=\\\"fa-solid fa-refresh\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button create-worldbook-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #51cf66;\\n            border: 1px solid #40c057;\\n            border-radius: 4px;\\n            color: white;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"createSummaryWorldbook\\\"\\n        >\\n          <i class=\\\"fa-solid fa-plus\\\"></i> \\n        </button>\\n        <button\\n          class=\\\"mini-button debug-button\\\"\\n          style=\\\"\\n            padding: 6px 12px;\\n            background: #ffc107;\\n            border: 1px solid #ffb300;\\n            border-radius: 4px;\\n            color: #000;\\n            cursor: pointer;\\n            font-size: 12px;\\n            transition: all 0.2s;\\n            display: flex;\\n            align-items: center;\\n            gap: 6px;\\n          \\\"\\n          @click=\\\"showDebugPanel\\\"\\n        >\\n          <i class=\\\"fa-solid fa-bug\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <div\\n      v-if=\\\"summary_history && summary_history.length > 0\\\"\\n      class=\\\"history-list\\\"\\n      style=\\\"display: flex; flex-direction: column; gap: 15px; margin-top: 20px\\\"\\n    >\\n      <div\\n        v-for=\\\"(item, index) in summary_history\\\"\\n        :key=\\\"index\\\"\\n        class=\\\"history-item\\\"\\n        style=\\\"\\n          background: #2a2a2a;\\n          border: 1px solid #444;\\n          border-radius: 8px;\\n          padding: 15px;\\n          transition: all 0.3s ease;\\n        \\\"\\n      >\\n        <div\\n          class=\\\"history-header\\\"\\n          style=\\\"\\n            padding: 12px 15px;\\n            background: #1a1a1a;\\n            display: flex;\\n            justify-content: space-between;\\n            align-items: center;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background 0.2s;\\n            border-radius: 6px;\\n          \\\"\\n          @click=\\\"toggleExpanded(index)\\\"\\n        >\\n          <div class=\\\"history-info\\\" style=\\\"display: flex; align-items: center; gap: 10px; flex: 1\\\">\\n            <span class=\\\"history-number\\\" style=\\\"color: #4a9eff; font-weight: bold\\\">#{{ index + 1 }}</span>\\n            <span class=\\\"history-range\\\" style=\\\"color: #888; font-size: 12px\\\"\\n              > {{ item.start_id }} - {{ item.end_id }}</span\\n            >\\n          </div>\\n          <span class=\\\"expand-icon\\\" style=\\\"color: #888; font-size: 12px\\\">{{ isExpanded(index) ? '' : '' }}</span>\\n        </div>\\n        <div\\n          v-if=\\\"isExpanded(index)\\\"\\n          class=\\\"history-content\\\"\\n          style=\\\"padding: 15px; background: #2a2a2a; border-radius: 0 0 6px 6px\\\"\\n        >\\n          <div\\n            class=\\\"history-actions\\\"\\n            style=\\\"display: flex; gap: 8px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid #3a3a3a\\\"\\n          >\\n            <button\\n              class=\\\"mini-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #2a2a2a;\\n                border: 1px solid #3a3a3a;\\n                border-radius: 4px;\\n                color: #e0e0e0;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: background 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"copySummary(item.content)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-copy\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button worldbook-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #4a9eff;\\n                border: 1px solid #5aaeff;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"bindToWorldbook(item.content, index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-book\\\"></i> \\n            </button>\\n            <button\\n              class=\\\"mini-button delete-button\\\"\\n              style=\\\"\\n                flex: 1;\\n                padding: 6px 12px;\\n                background: #ff6b6b;\\n                border: 1px solid #ff5252;\\n                border-radius: 4px;\\n                color: white;\\n                cursor: pointer;\\n                font-size: 12px;\\n                transition: all 0.2s;\\n                display: flex;\\n                align-items: center;\\n                justify-content: center;\\n                gap: 6px;\\n              \\\"\\n              @click=\\\"deleteSummary(index)\\\"\\n            >\\n              <i class=\\\"fa-solid fa-trash\\\"></i> \\n            </button>\\n          </div>\\n          <div\\n            class=\\\"history-text\\\"\\n            style=\\\"\\n              font-family: 'Courier New', monospace;\\n              font-size: 13px;\\n              line-height: 1.6;\\n              color: #e0e0e0;\\n              white-space: pre-wrap;\\n              word-wrap: break-word;\\n              user-select: text;\\n              cursor: text;\\n            \\\"\\n          >\\n            {{ item.content }}\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    <div v-else class=\\\"empty-state\\\" style=\\\"text-align: center; padding: 40px 20px; color: #888\\\">\\n      <i class=\\\"fa-solid fa-inbox\\\" style=\\\"font-size: 48px; margin-bottom: 10px; opacity: 0.3\\\"></i>\\n      <p style=\\\"margin: 10px 0; font-size: 16px\\\"></p>\\n      <small style=\\\"font-size: 12px; color: #666\\\">\\\"\\\"</small>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport { useSummaryHistoryStore } from '../settings';\\nimport { getChatIdSafe } from '../utils';\\n\\nconst historyStore = useSummaryHistoryStore();\\n\\n// \\nconst summary_history = ref<Array<{ start_id: number; end_id: number; content: string }>>([]);\\nconst expandedState = ref<Map<number, boolean>>(new Map());\\n\\n// \\nconst refreshSummaryHistory = () => {\\n  try {\\n    summary_history.value = historyStore.getSummaryHistory();\\n    console.log(':', summary_history.value.length);\\n  } catch (e) {\\n    console.error(':', e);\\n    summary_history.value = [];\\n  }\\n};\\n\\n// \\nconst toggleExpanded = (index: number) => {\\n  const current = expandedState.value.get(index) || false;\\n  expandedState.value.set(index, !current);\\n};\\n\\nconst isExpanded = (index: number) => {\\n  return expandedState.value.get(index) || false;\\n};\\n\\n// \\nconst handleRefreshData = async () => {\\n  console.log('');\\n  try {\\n    await refreshSummaryHistory();\\n    window.toastr.success('');\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n//  - iframe\\nconst copyToClipboard = async (text: string, successMessage: string = '') => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // iframe\\n    if (window.parent && window.parent !== window) {\\n      console.log('iframe');\\n      const parentSuccess = await tryParentWindowCopy(text);\\n      if (parentSuccess) {\\n        console.log('');\\n        window.toastr.success(successMessage);\\n        return;\\n      }\\n    }\\n\\n    // 1:  Clipboard API\\n    if (navigator.clipboard && window.isSecureContext) {\\n      console.log(' Clipboard API');\\n      try {\\n        await navigator.clipboard.writeText(text);\\n        console.log('Clipboard API ');\\n        window.toastr.success(successMessage);\\n        return;\\n      } catch (clipboardErr) {\\n        console.warn('Clipboard API :', clipboardErr);\\n        // \\n      }\\n    }\\n\\n    // 2:  execCommand \\n    console.log(' execCommand ');\\n    const success = await execCommandCopy(text);\\n    if (success) {\\n      console.log('execCommand ');\\n      window.toastr.success(successMessage);\\n      return;\\n    }\\n\\n    // 3: \\n    console.log('');\\n    showManualCopyDialog(text);\\n  } catch (err) {\\n    console.error(':', err);\\n    // \\n    showManualCopyDialog(text);\\n  }\\n};\\n\\n// \\nconst tryParentWindowCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      const parentDoc = window.parent.document;\\n      const parentBody = window.parent.document.body;\\n\\n      //  textarea \\n      const textarea = parentDoc.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.cssText = `\\n        position: fixed;\\n        left: -9999px;\\n        top: -9999px;\\n        opacity: 0;\\n        pointer-events: none;\\n        z-index: -1000;\\n      `;\\n      textarea.setAttribute('readonly', '');\\n\\n      parentBody.appendChild(textarea);\\n\\n      // \\n      textarea.focus();\\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = parentDoc.execCommand('copy');\\n\\n      // \\n      parentBody.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error(':', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n// execCommand \\nconst execCommandCopy = async (text: string): Promise<boolean> => {\\n  return new Promise(resolve => {\\n    try {\\n      //  textarea \\n      const textarea = document.createElement('textarea');\\n      textarea.value = text;\\n      textarea.style.position = 'fixed';\\n      textarea.style.left = '-9999px';\\n      textarea.style.top = '-9999px';\\n      textarea.style.opacity = '0';\\n      textarea.style.pointerEvents = 'none';\\n      textarea.setAttribute('readonly', '');\\n\\n      document.body.appendChild(textarea);\\n\\n      // \\n      textarea.select();\\n      textarea.setSelectionRange(0, text.length);\\n\\n      // \\n      const success = document.execCommand('copy');\\n\\n      // \\n      document.body.removeChild(textarea);\\n\\n      resolve(success);\\n    } catch (err) {\\n      console.error('execCommand :', err);\\n      resolve(false);\\n    }\\n  });\\n};\\n\\n//  - \\nconst showManualCopyDialog = (text: string) => {\\n  console.log(':', text.length);\\n\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'manual-copy-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #4a9eff;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 900px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ol style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+A</kbd> </li>\\n          <li> <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Ctrl+C</kbd> </li>\\n          <li>\\\"\\\" <kbd style=\\\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\\\">Esc</kbd> </li>\\n        </ol>\\n      </div>\\n    `;\\n\\n    // \\n    const textarea = parentDoc.createElement('textarea');\\n    textarea.value = text;\\n    textarea.style.cssText = `\\n      width: 100%;\\n      height: 400px;\\n      background: #1a1a1a;\\n      border: 2px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      color: #e0e0e0;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 13px;\\n      line-height: 1.5;\\n      resize: vertical;\\n      white-space: pre-wrap;\\n      word-wrap: break-word;\\n      outline: none;\\n      margin-bottom: 20px;\\n      box-sizing: border-box;\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: flex;\\n      gap: 12px;\\n      justify-content: center;\\n      align-items: center;\\n    `;\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #4a9eff;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    closeButton.onmouseover = () => {\\n      closeButton.style.background = '#5ba8ff';\\n    };\\n    closeButton.onmouseout = () => {\\n      closeButton.style.background = '#4a9eff';\\n    };\\n\\n    // \\n    const copyButton = parentDoc.createElement('button');\\n    copyButton.textContent = '';\\n    copyButton.style.cssText = `\\n      background: #28a745;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n    `;\\n    copyButton.onmouseover = () => {\\n      copyButton.style.background = '#218838';\\n    };\\n    copyButton.onmouseout = () => {\\n      copyButton.style.background = '#28a745';\\n    };\\n\\n    // \\n    buttonContainer.appendChild(copyButton);\\n    buttonContainer.appendChild(closeButton);\\n\\n    container.appendChild(header);\\n    container.appendChild(textarea);\\n    container.appendChild(buttonContainer);\\n    overlay.appendChild(container);\\n\\n    // \\n    parentBody.appendChild(overlay);\\n\\n    // \\n    closeButton.onclick = () => {\\n      console.log('');\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    copyButton.onclick = async () => {\\n      console.log('');\\n      try {\\n        // \\n        textarea.focus();\\n        textarea.select();\\n\\n        // \\n        const success = document.execCommand('copy');\\n        if (success) {\\n          window.toastr.success('');\\n          parentBody.removeChild(overlay);\\n        } else {\\n          window.toastr.warning('');\\n        }\\n      } catch (err) {\\n        console.error(':', err);\\n        window.toastr.warning('');\\n      }\\n    };\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        console.log('');\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        console.log('ESC');\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    // \\n    setTimeout(() => {\\n      console.log('');\\n      textarea.focus();\\n      textarea.select();\\n    }, 200);\\n\\n    // \\n    window.toastr.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr.error('');\\n  }\\n};\\n\\n//  - \\nconst copySummary = (content: string) => {\\n  copyToClipboard(content, '');\\n};\\n\\n// \\nconst deleteSummary = (index: number) => {\\n  if (confirm('')) {\\n    try {\\n      const chat_id = getChatIdSafe();\\n      if (!chat_id) {\\n        window.toastr.error('');\\n        return;\\n      }\\n\\n      summary_history.value.splice(index, 1);\\n      insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\\n      window.toastr.success('');\\n    } catch (error) {\\n      console.error(':', error);\\n      window.toastr.error('');\\n    }\\n  }\\n};\\n\\n// \\nconst createSummaryWorldbook = async () => {\\n  try {\\n    // \\n    let characterName = '';\\n    try {\\n      const currentCharacter = getCharData('current');\\n      if (currentCharacter && currentCharacter.name) {\\n        characterName = currentCharacter.name;\\n        // \\n        characterName = characterName.replace(/[<>:\\\"/\\\\\\\\|?*]/g, '_').trim();\\n      }\\n    } catch (charError) {\\n      console.warn(':', charError);\\n    }\\n\\n    // \\n    const dateStr = new Date().toISOString().slice(0, 10);\\n    const worldbookName = `_${characterName}_${dateStr}`;\\n\\n    console.log(':', worldbookName);\\n\\n    const existingWorldbooks = getWorldbookNames();\\n    if (existingWorldbooks.includes(worldbookName)) {\\n      window.toastr.warning(` \\\"${worldbookName}\\\" `);\\n      return;\\n    }\\n\\n    await createWorldbook(worldbookName, []);\\n\\n    try {\\n      await rebindChatWorldbook('current', worldbookName);\\n      window.toastr.success(` \\\"${worldbookName}\\\" `);\\n    } catch (bindError) {\\n      console.warn(':', bindError);\\n      window.toastr.success(` \\\"${worldbookName}\\\"`);\\n    }\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst bindToWorldbook = async (content: string, summaryIndex: number) => {\\n  try {\\n    const worldbookNames = getWorldbookNames();\\n    if (worldbookNames.length === 0) {\\n      window.toastr.warning('');\\n      return;\\n    }\\n\\n    const selectedWorldbook =\\n      worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\\n    if (!selectedWorldbook) {\\n      return;\\n    }\\n\\n    const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\\n    const newEntry = {\\n      name: entryName,\\n      enabled: true,\\n      strategy: {\\n        type: 'constant' as const,\\n        keys: [],\\n        keys_secondary: { logic: 'and_any' as const, keys: [] },\\n        scan_depth: 'same_as_global' as const,\\n      },\\n      position: {\\n        type: 'before_character_definition' as const,\\n        role: 'system' as const,\\n        depth: 1,\\n      },\\n      content: content,\\n      comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\\n      insertion_order: 0,\\n      case_sensitive: false,\\n      name_is_regex: false,\\n      keys_are_regex: false,\\n      selective_logic: 'and',\\n      secondary_keys_logic: 'and',\\n      activation_threshold: 0,\\n      disabled: false,\\n      order: 0,\\n      group: '',\\n      local_id: 0,\\n      depth_entries: [],\\n      depth_entries_all: false,\\n      search_range: 0,\\n      force_activation: false,\\n      disable: false,\\n      exclude_recursion: false,\\n      hidden: false,\\n      priority: 0,\\n      comment_is_regex: false,\\n      content_is_regex: false,\\n      secondary_keys_are_regex: false,\\n      keys_secondary_are_regex: false,\\n      uid: Date.now(),\\n    };\\n\\n    await createWorldbookEntries(selectedWorldbook, [newEntry]);\\n    window.toastr.success(`: ${selectedWorldbook}`);\\n  } catch (error) {\\n    console.error(':', error);\\n    window.toastr.error(': ' + (error as Error).message);\\n  }\\n};\\n\\n// \\nconst promptForWorldbook = async (worldbookNames: string[]): Promise<string | null> => {\\n  return new Promise<string | null>(resolve => {\\n    const dialog = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 50%;\\n        left: 50%;\\n        transform: translate(-50%, -50%);\\n        background: #2a2a2a;\\n        border: 1px solid #3a3a3a;\\n        border-radius: 8px;\\n        padding: 20px;\\n        z-index: 1000000;\\n        min-width: 300px;\\n      \\\">\\n        <h3 style=\\\"margin: 0 0 15px 0; color: #e0e0e0;\\\"></h3>\\n        <div style=\\\"margin-bottom: 15px;\\\">\\n          ${worldbookNames\\n            .map(\\n              name => `\\n            <label style=\\\"display: block; margin: 5px 0; color: #e0e0e0;\\\">\\n              <input type=\\\"radio\\\" name=\\\"worldbook\\\" value=\\\"${name}\\\" style=\\\"margin-right: 8px;\\\">\\n              ${name}\\n            </label>\\n          `,\\n            )\\n            .join('')}\\n        </div>\\n        <div style=\\\"text-align: right;\\\">\\n          <button id=\\\"cancelWorldbook\\\" style=\\\"\\n            background: #666;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            margin-right: 10px;\\n            cursor: pointer;\\n          \\\"></button>\\n          <button id=\\\"confirmWorldbook\\\" style=\\\"\\n            background: #4a9eff;\\n            color: white;\\n            border: none;\\n            padding: 8px 16px;\\n            border-radius: 4px;\\n            cursor: pointer;\\n          \\\"></button>\\n        </div>\\n      </div>\\n    `);\\n\\n    const overlay = $(`\\n      <div style=\\\"\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 100%;\\n        background: rgba(0, 0, 0, 0.5);\\n        z-index: 999999;\\n      \\\"></div>\\n    `);\\n\\n    $('body').append(overlay).append(dialog);\\n\\n    $('#cancelWorldbook').on('click', () => {\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(null);\\n    });\\n\\n    $('#confirmWorldbook').on('click', () => {\\n      const selected = $('input[name=\\\"worldbook\\\"]:checked').val() as string;\\n      overlay.remove();\\n      dialog.remove();\\n      resolve(selected || null);\\n    });\\n\\n    $('input[name=\\\"worldbook\\\"]:first').prop('checked', true);\\n  });\\n};\\n\\n// \\nconst showDebugPanel = () => {\\n  try {\\n    // document\\n    const parentDoc = window.parent.document;\\n    const parentBody = window.parent.document.body;\\n\\n    // \\n    const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\\n    if (existingOverlay) {\\n      parentBody.removeChild(existingOverlay);\\n    }\\n\\n    // \\n    const overlay = parentDoc.createElement('div');\\n    overlay.id = 'debug-panel-overlay';\\n    overlay.style.cssText = `\\n      position: fixed;\\n      top: 0;\\n      left: 0;\\n      right: 0;\\n      bottom: 0;\\n      background: rgba(0, 0, 0, 0.95);\\n      z-index: 999999;\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\\n    `;\\n\\n    // \\n    const container = parentDoc.createElement('div');\\n    container.style.cssText = `\\n      background: #2a2a2a;\\n      border: 2px solid #ffc107;\\n      border-radius: 12px;\\n      padding: 25px;\\n      max-width: 800px;\\n      width: 95%;\\n      max-height: 85vh;\\n      display: flex;\\n      flex-direction: column;\\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\\n    `;\\n\\n    // \\n    const header = parentDoc.createElement('div');\\n    header.innerHTML = `\\n      <h3 style=\\\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\\\">\\n         \\n      </h3>\\n      <div style=\\\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\\\">\\n        <p style=\\\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\\\">\\n          <strong></strong>\\n        </p>\\n        <ul style=\\\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\\\">\\n          <li></li>\\n          <li>localStorage</li>\\n          <li></li>\\n          <li></li>\\n        </ul>\\n      </div>\\n    `;\\n\\n    // \\n    const buttonContainer = parentDoc.createElement('div');\\n    buttonContainer.style.cssText = `\\n      display: grid;\\n      grid-template-columns: 1fr 1fr;\\n      gap: 12px;\\n      margin-bottom: 20px;\\n    `;\\n\\n    // \\n    const buttons = [\\n      { id: 'testComplete', text: ' ', color: '#4a9eff' },\\n      { id: 'syncData', text: ' ', color: '#28a745' },\\n      { id: 'checkFloor', text: ' ', color: '#17a2b8' },\\n      { id: 'testCalculation', text: ' ', color: '#6f42c1' },\\n      { id: 'showStatus', text: ' ', color: '#fd7e14' },\\n      { id: 'resetStartId', text: ' ', color: '#dc3545' },\\n    ];\\n\\n    buttons.forEach(button => {\\n      const btn = parentDoc.createElement('button');\\n      btn.id = button.id;\\n      btn.textContent = button.text;\\n      btn.style.cssText = `\\n        background: ${button.color};\\n        color: white;\\n        border: none;\\n        padding: 12px 16px;\\n        border-radius: 6px;\\n        cursor: pointer;\\n        font-size: 13px;\\n        font-weight: 500;\\n        transition: background 0.2s;\\n      `;\\n      btn.onmouseover = () => {\\n        btn.style.opacity = '0.8';\\n      };\\n      btn.onmouseout = () => {\\n        btn.style.opacity = '1';\\n      };\\n      buttonContainer.appendChild(btn);\\n    });\\n\\n    // \\n    const outputArea = parentDoc.createElement('div');\\n    outputArea.id = 'debug-output';\\n    outputArea.style.cssText = `\\n      background: #1a1a1a;\\n      border: 1px solid #444;\\n      border-radius: 6px;\\n      padding: 15px;\\n      height: 200px;\\n      overflow-y: auto;\\n      font-family: 'Courier New', 'Consolas', monospace;\\n      font-size: 12px;\\n      color: #e0e0e0;\\n      white-space: pre-wrap;\\n      margin-bottom: 20px;\\n    `;\\n    outputArea.textContent = '...\\\\n';\\n\\n    // \\n    const closeButton = parentDoc.createElement('button');\\n    closeButton.textContent = '';\\n    closeButton.style.cssText = `\\n      background: #6c757d;\\n      color: white;\\n      border: none;\\n      padding: 12px 24px;\\n      border-radius: 6px;\\n      cursor: pointer;\\n      font-size: 14px;\\n      font-weight: 500;\\n      transition: background 0.2s;\\n      align-self: center;\\n    `;\\n\\n    // \\n    container.appendChild(header);\\n    container.appendChild(buttonContainer);\\n    container.appendChild(outputArea);\\n    container.appendChild(closeButton);\\n\\n    overlay.appendChild(container);\\n    parentBody.appendChild(overlay);\\n\\n    // \\n    const log = (message: string) => {\\n      const output = parentDoc.getElementById('debug-output');\\n      if (output) {\\n        output.textContent += message + '\\\\n';\\n        output.scrollTop = output.scrollHeight;\\n      }\\n    };\\n\\n    // \\n    closeButton.onclick = () => {\\n      parentBody.removeChild(overlay);\\n    };\\n\\n    // \\n    parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testCompleteAutoSummary) {\\n          (window as any).testCompleteAutoSummary();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('syncData')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).syncAutoSummaryData) {\\n          (window as any).syncAutoSummaryData();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkCurrentFloor) {\\n          (window as any).checkCurrentFloor();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).testFloorCalculation) {\\n          (window as any).testFloorCalculation();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).checkAutoSummaryStatus) {\\n          (window as any).checkAutoSummaryStatus();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\\n      log(' ...');\\n      try {\\n        if ((window as any).smartResetChat) {\\n          (window as any).smartResetChat();\\n          log(' ');\\n        } else {\\n          log(' ');\\n        }\\n      } catch (error) {\\n        log(' : ' + (error as Error).message);\\n      }\\n    });\\n\\n    // \\n    overlay.onclick = e => {\\n      if (e.target === overlay) {\\n        parentBody.removeChild(overlay);\\n      }\\n    };\\n\\n    // \\n    const handleKeyDown = (e: KeyboardEvent) => {\\n      if (e.key === 'Escape') {\\n        parentBody.removeChild(overlay);\\n        parentDoc.removeEventListener('keydown', handleKeyDown);\\n      }\\n    };\\n    parentDoc.addEventListener('keydown', handleKeyDown);\\n\\n    window.toastr?.info('');\\n  } catch (err) {\\n    console.error(':', err);\\n    window.toastr?.error('');\\n  }\\n};\\n\\n// \\nrefreshSummaryHistory();\\n</script>\\n\\n<style scoped>\\n.summary-tab {\\n  height: 100%;\\n  overflow-y: auto;\\n  padding: 25px !important;\\n}\\n\\n.section-header {\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  padding: 20px 25px !important;\\n  border-bottom: 1px solid #3a3a3a;\\n  margin-bottom: 5px;\\n}\\n\\n.section-header h3 {\\n  margin: 0;\\n  color: #fff;\\n  font-size: 15px !important;\\n  font-weight: bold;\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n}\\n\\n.header-actions {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n}\\n\\n.count-badge {\\n  background: #4a9eff;\\n  color: white;\\n  padding: 4px 8px;\\n  border-radius: 12px;\\n  font-size: 12px;\\n}\\n\\n.empty-state {\\n  text-align: center;\\n  padding: 40px 20px;\\n  color: #888;\\n}\\n\\n.empty-state i {\\n  font-size: 48px;\\n  margin-bottom: 10px;\\n  opacity: 0.3;\\n}\\n\\n.empty-state p {\\n  margin: 10px 0;\\n  font-size: 14px;\\n}\\n\\n.empty-state small {\\n  color: #666;\\n  font-size: 12px;\\n}\\n\\n.history-list {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  padding: 15px 20px;\\n}\\n\\n.history-item {\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 6px;\\n  overflow: hidden;\\n  transition: border-color 0.2s;\\n}\\n\\n.history-item:hover {\\n  border-color: #4a4a4a;\\n}\\n\\n.history-header {\\n  padding: 12px 15px;\\n  background: #1a1a1a;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  cursor: pointer;\\n  user-select: none;\\n  transition: background 0.2s;\\n}\\n\\n.history-header:hover {\\n  background: #2a2a2a;\\n}\\n\\n.history-info {\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  flex: 1;\\n}\\n\\n.history-number {\\n  color: #4a9eff;\\n  font-weight: bold;\\n}\\n\\n.history-range {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.expand-icon {\\n  color: #888;\\n  font-size: 12px;\\n}\\n\\n.history-content {\\n  padding: 15px;\\n  background: #2a2a2a;\\n}\\n\\n.history-actions {\\n  display: flex;\\n  gap: 8px;\\n  margin-bottom: 12px;\\n  padding-bottom: 8px;\\n  border-bottom: 1px solid #3a3a3a;\\n}\\n\\n.mini-button {\\n  flex: 1;\\n  padding: 6px 12px;\\n  background: #2a2a2a;\\n  border: 1px solid #3a3a3a;\\n  border-radius: 4px;\\n  color: #e0e0e0;\\n  cursor: pointer;\\n  font-size: 12px;\\n  transition: background 0.2s;\\n}\\n\\n.mini-button:hover {\\n  background: #3a3a3a;\\n}\\n\\n.mini-button.delete-button:hover {\\n  background: #ff4444;\\n  border-color: #ff4444;\\n  color: white;\\n}\\n\\n.mini-button.worldbook-button {\\n  background: #28a745;\\n  color: white;\\n  border-color: #28a745;\\n}\\n\\n.mini-button.worldbook-button:hover {\\n  background: #218838;\\n  border-color: #218838;\\n  color: white;\\n}\\n\\n.mini-button.create-worldbook-button {\\n  background: #17a2b8;\\n  color: white;\\n  border-color: #17a2b8;\\n}\\n\\n.mini-button.create-worldbook-button:hover {\\n  background: #138496;\\n  border-color: #138496;\\n  color: white;\\n}\\n\\n.mini-button.refresh-button {\\n  background: #6c757d;\\n  color: white;\\n  border-color: #6c757d;\\n}\\n\\n.mini-button.refresh-button:hover {\\n  background: #5a6268;\\n  border-color: #5a6268;\\n  color: white;\\n}\\n\\n.mini-button.debug-button {\\n  background: #ffc107;\\n  color: #000;\\n  border-color: #ffb300;\\n}\\n\\n.mini-button.debug-button:hover {\\n  background: #e0a800;\\n  border-color: #d39e00;\\n  color: #000;\\n}\\n\\n.history-text {\\n  white-space: pre-wrap;\\n  word-wrap: break-word;\\n  line-height: 1.6;\\n  max-height: 400px;\\n  overflow-y: auto;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default {\n  // \n  common: {\n    save: '',\n    cancel: '',\n    confirm: '',\n    delete: '',\n    edit: '',\n    add: '',\n    refresh: '',\n    search: '',\n    loading: '...',\n    success: '',\n    error: '',\n    warning: '',\n    clear: '',\n    export: '',\n    import: '',\n    copy: '',\n    paste: '',\n    generate: '',\n    preview: '',\n  },\n\n  // \n  panel: {\n    title: 'mzrodyu',\n    minimize: '',\n  },\n\n  // \n  tabs: {\n    settings: '',\n    history: '',\n    table: '',\n    greetings: '',\n    regex: '',\n    state: '',\n    projects: '',\n    tools: '',\n    mvu: 'MVU Beta',\n    help: '',\n  },\n\n  // \n  settings: {\n    title: 'API ',\n    provider: 'API ',\n    endpoint: 'API ',\n    endpointPlaceholder: 'https:///v1',\n    endpointHelp: '',\n    apiKey: 'API Key',\n    apiKeyPlaceholder: 'sk-...',\n    model: '',\n    modelPlaceholder: ' gpt-4o-mini',\n    fetchModels: '',\n    saveConfig: '',\n    maxTokens: ' Token ',\n    maxTokensHelp: '4000',\n    temperature: 'Temperature ()',\n    temperatureHelp: ' 0.7',\n    hiddenFloors: '',\n    hiddenFloorsDesc: '',\n    addFloor: '',\n    floorIndex: '',\n    floorIndexPlaceholder: '0, 1, 2',\n    removeFloor: '',\n    columnTemplates: '',\n    columnTemplatesDesc: '',\n    templateName: '',\n    templateNamePlaceholder: '',\n    templateContent: '',\n    templateContentPlaceholder: '||',\n    addTemplate: '',\n    deleteTemplate: '',\n    autoSummary: '',\n    enableAutoSummary: '',\n    summaryInterval: '',\n    summaryIntervalPlaceholder: '20',\n    summaryIntervalHelp: '',\n    currentStatus: '',\n    chatId: 'ID',\n    lastSummaryFloor: '',\n    nextSummaryFloor: '',\n    resetStatus: '',\n    manualSummary: '',\n    configSaved: '',\n    apiConfigSaved: 'API ',\n    fetchError: '',\n  },\n\n  // \n  greetings: {\n    title: '',\n    character: '',\n    noCharacter: '',\n    clearConfig: '',\n    clearConfigConfirm: '',\n    clearSuccess: '',\n    help: '',\n    helpContent: `\n      <h3></h3>\n      <p></p>\n      <h3></h3>\n      <ol>\n        <li></li>\n        <li>emojiURL</li>\n        <li>\"AI\"</li>\n        <li></li>\n      </ol>\n    `,\n    greetingBadge: '',\n    default: '',\n    icon: '',\n    iconPlaceholder: 'emoji URL',\n    title: '',\n    titlePlaceholder: '',\n    description: '',\n    descriptionPlaceholder: '',\n    generateWithAI: 'AI',\n    generating: '...',\n    stylePrompt: '',\n    stylePromptPlaceholder: '',\n    generateStyle: 'AI',\n    generatingStyle: '...',\n    copyCode: '',\n    copySuccess: '',\n    apiFailed: 'API',\n    styleGenerated: '',\n    descGenerated: '',\n    htmlCode: 'HTML',\n    regexConfig: 'JSON',\n  },\n\n  // \n  regex: {\n    title: 'UI ',\n    help: '',\n    helpContent: `\n      <h3></h3>\n      <p> AI  UI </p>\n      <h3></h3>\n      <ol>\n        <li>\"\"#</li>\n        <li>\"UI\"</li>\n        <li>\"UI\"AIHTML</li>\n        <li></li>\n      </ol>\n    `,\n    triggerText: '',\n    triggerTextPlaceholder: '#',\n    uiDescription: 'UI ',\n    uiDescriptionPlaceholder:\n      '',\n    generateUI: ' UI',\n    generating: '...',\n    preview: '',\n    htmlCode: 'HTML',\n    regexConfig: 'JSON',\n    copyCode: '',\n    copySuccess: '',\n    apiFailed: 'API',\n    generated: 'UI',\n  },\n\n  // \n  table: {\n    title: '',\n    help: '',\n    selectTemplate: '',\n    noTemplate: '',\n    floorNumber: '',\n    floorNumberPlaceholder: '1',\n    generateTable: '',\n    updateTable: '',\n    deleteTable: '',\n    clearHistory: '',\n    tableHistory: '',\n    noHistory: '',\n  },\n\n  // \n  history: {\n    title: '',\n    help: '',\n    floorRange: '',\n    startFloor: '',\n    endFloor: '',\n    generate: '',\n    generating: '...',\n    summary: '',\n    copyToClipboard: '',\n    insertToChat: '',\n    noSummary: '',\n  },\n\n  // \n  projects: {\n    title: '',\n    help: '',\n    createProject: '',\n    importProject: '',\n    projectName: '',\n    projectList: '',\n    noProjects: '',\n    openEditor: '',\n    deleteProject: '',\n    exportProject: '',\n  },\n\n  // \n  tools: {\n    title: '',\n    help: '',\n  },\n\n  // MVU\n  mvu: {\n    title: 'MVU Beta',\n    help: '',\n  },\n};\n","export default {\n  // Common\n  common: {\n    save: 'Save',\n    cancel: 'Cancel',\n    confirm: 'Confirm',\n    delete: 'Delete',\n    edit: 'Edit',\n    add: 'Add',\n    refresh: 'Refresh',\n    search: 'Search',\n    loading: 'Loading...',\n    success: 'Success',\n    error: 'Error',\n    warning: 'Warning',\n    clear: 'Clear',\n    export: 'Export',\n    import: 'Import',\n    copy: 'Copy',\n    paste: 'Paste',\n    generate: 'Generate',\n    preview: 'Preview',\n  },\n\n  // Main Panel\n  panel: {\n    title: \"mzrodyu's Tool\",\n    minimize: 'Minimize',\n  },\n\n  // Tabs\n  tabs: {\n    settings: 'Settings',\n    history: 'History Summary',\n    table: 'Table',\n    greetings: 'Greetings',\n    regex: 'UI Generator',\n    state: 'State Bar',\n    projects: 'Projects',\n    tools: 'Tools',\n    mvu: 'MVU Beta',\n    help: 'Help',\n  },\n\n  // Settings Page\n  settings: {\n    title: 'API Configuration',\n    provider: 'API Provider',\n    endpoint: 'API Endpoint',\n    endpointPlaceholder: 'https://your-server/v1',\n    endpointHelp: 'Common formats',\n    apiKey: 'API Key',\n    apiKeyPlaceholder: 'sk-...',\n    model: 'Model Name',\n    modelPlaceholder: 'Leave empty to use name (e.g., gpt-4o-mini)',\n    fetchModels: 'Fetch Models',\n    saveConfig: 'Save Config',\n    maxTokens: 'Max Tokens',\n    maxTokensHelp: 'Recommend 4000+ for detailed summaries',\n    temperature: 'Temperature',\n    temperatureHelp: 'Recommended: 0.7',\n    hiddenFloors: 'Hidden Floors',\n    hiddenFloorsDesc: 'Hide specified message floors in summaries (e.g., status bars, combat info)',\n    addFloor: 'Add Floor',\n    floorIndex: 'Floor Index',\n    floorIndexPlaceholder: 'e.g., 0, 1, 2',\n    removeFloor: 'Remove',\n    columnTemplates: 'Column Templates',\n    columnTemplatesDesc: 'Column header templates for table feature',\n    templateName: 'Template Name',\n    templateNamePlaceholder: 'e.g., Character Template',\n    templateContent: 'Template Content',\n    templateContentPlaceholder: 'e.g., Name|Age|Gender',\n    addTemplate: 'Add Template',\n    deleteTemplate: 'Delete Template',\n    autoSummary: 'Auto Summary',\n    enableAutoSummary: 'Enable Auto Summary',\n    summaryInterval: 'Summary Interval (Floors)',\n    summaryIntervalPlaceholder: 'e.g., 20',\n    summaryIntervalHelp: 'Generate summary every N floors',\n    currentStatus: 'Current Summary Status',\n    chatId: 'Chat ID',\n    lastSummaryFloor: 'Last Summary Floor',\n    nextSummaryFloor: 'Next Summary Floor',\n    resetStatus: 'Reset Status',\n    manualSummary: 'Manual Summary',\n    configSaved: 'Config saved',\n    apiConfigSaved: 'API config saved',\n    fetchError: 'Failed to fetch models',\n  },\n\n  // Greetings Page\n  greetings: {\n    title: 'Greetings Manager',\n    character: 'Current Character',\n    noCharacter: 'No character found',\n    clearConfig: 'Clear Config',\n    clearConfigConfirm: 'Are you sure you want to clear all greeting configurations?',\n    clearSuccess: 'Configuration cleared',\n    help: 'Help',\n    helpContent: `\n      <h3>Features</h3>\n      <p>Set icons, titles, and descriptions for multiple character greetings, and generate a visual selection interface.</p>\n      <h3>How to Use</h3>\n      <ol>\n        <li>Open a character card in SillyTavern</li>\n        <li>Configure icon (emoji or URL), title, and description for each greeting</li>\n        <li>Click \"Generate Style with AI\" and describe your desired style</li>\n        <li>Preview the generated interface, then copy the code to SillyTavern regex</li>\n      </ol>\n    `,\n    greetingBadge: 'Greeting',\n    default: 'Default',\n    icon: 'Icon',\n    iconPlaceholder: 'emoji or image URL',\n    title: 'Title',\n    titlePlaceholder: 'Greeting title',\n    description: 'Description',\n    descriptionPlaceholder: 'Greeting description',\n    generateWithAI: 'Generate with AI',\n    generating: 'Generating...',\n    stylePrompt: 'Style Generation',\n    stylePromptPlaceholder: 'Describe your desired interface style, e.g.: Cyberpunk style, neon lights, dark theme',\n    generateStyle: 'Generate Style with AI',\n    generatingStyle: 'Generating...',\n    copyCode: 'Copy Code',\n    copySuccess: 'Code copied to clipboard',\n    apiFailed: 'API call failed',\n    styleGenerated: 'Style generated successfully',\n    descGenerated: 'Description generated successfully',\n    htmlCode: 'Generated HTML Code',\n    regexConfig: 'Regex Config (JSON)',\n  },\n\n  // Regex Generator Page\n  regex: {\n    title: 'UI Generator',\n    help: 'Help',\n    helpContent: `\n      <h3>Features</h3>\n      <p>Use AI to generate visual UI based on your description, and automatically convert it to SillyTavern regex format.</p>\n      <h3>How to Use</h3>\n      <ol>\n        <li>Enter trigger text (e.g., #status)</li>\n        <li>Describe your desired UI effect in detail</li>\n        <li>Click \"Generate UI\" and AI will create the HTML interface</li>\n        <li>Preview on the right, then copy the code to SillyTavern regex</li>\n      </ol>\n    `,\n    triggerText: 'Trigger Text',\n    triggerTextPlaceholder: 'e.g., #status',\n    uiDescription: 'UI Description',\n    uiDescriptionPlaceholder:\n      'Describe your desired UI in detail, e.g.: Game-style status bar showing HP, MP, EXP with progress bars',\n    generateUI: 'Generate UI',\n    generating: 'Generating...',\n    preview: 'Preview',\n    htmlCode: 'Generated HTML Code',\n    regexConfig: 'Regex Config (JSON)',\n    copyCode: 'Copy Code',\n    copySuccess: 'Code copied',\n    apiFailed: 'API call failed',\n    generated: 'UI generated successfully',\n  },\n\n  // Table Page\n  table: {\n    title: 'Table Manager',\n    help: 'Help',\n    selectTemplate: 'Select Template',\n    noTemplate: 'No Template',\n    floorNumber: 'Floor Number',\n    floorNumberPlaceholder: 'e.g., 1',\n    generateTable: 'Generate Table',\n    updateTable: 'Update Table',\n    deleteTable: 'Delete Table',\n    clearHistory: 'Clear History',\n    tableHistory: 'Table History',\n    noHistory: 'No table history',\n  },\n\n  // History Summary Page\n  history: {\n    title: 'History Summary',\n    help: 'Help',\n    floorRange: 'Floor Range',\n    startFloor: 'Start Floor',\n    endFloor: 'End Floor',\n    generate: 'Generate Summary',\n    generating: 'Generating...',\n    summary: 'Summary',\n    copyToClipboard: 'Copy to Clipboard',\n    insertToChat: 'Insert to Chat',\n    noSummary: 'No summary yet',\n  },\n\n  // Projects Page\n  projects: {\n    title: 'Project Manager',\n    help: 'Help',\n    createProject: 'Create Project',\n    importProject: 'Import Project',\n    projectName: 'Project Name',\n    projectList: 'Project List',\n    noProjects: 'No projects',\n    openEditor: 'Open Editor',\n    deleteProject: 'Delete Project',\n    exportProject: 'Export Project',\n  },\n\n  // Tools Page\n  tools: {\n    title: 'Tool Templates',\n    help: 'Help',\n  },\n\n  // MVU Page\n  mvu: {\n    title: 'MVU Beta',\n    help: 'Help',\n  },\n};\n","import { createI18n } from 'vue-i18n';\nimport zh from './zh-CN';\nimport en from './en-US';\n\n//  localStorage \nconst savedLocale = localStorage.getItem('maomao_tool_locale') || 'zh-CN';\n\nconst i18n = createI18n({\n  legacy: false, //  Composition API \n  locale: savedLocale,\n  fallbackLocale: 'zh-CN',\n  messages: {\n    'zh-CN': zh,\n    'en-US': en,\n  },\n});\n\nexport default i18n;\n","const __WEBPACK_NAMESPACE_OBJECT__ = toastr;","import { APISettings, ChatMessage } from '../types';\n\n// API\nasync function fetchWithProxy(url: string, options: RequestInit = {}) {\n  try {\n    const origin = window.location.origin;\n    console.log(' :', origin);\n\n    const response = await fetch(`${origin}/api/proxy`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        ...(typeof SillyTavern !== 'undefined' && SillyTavern.getRequestHeaders ? SillyTavern.getRequestHeaders() : {}),\n      },\n      body: JSON.stringify({\n        url: url,\n        method: options.method || 'GET',\n        headers: options.headers || {},\n      }),\n    });\n\n    if (response.ok) {\n      console.log(' ');\n      return response;\n    }\n    console.log(' ');\n  } catch (error) {\n    console.log(' :', error);\n  }\n\n  return fetch(url, options);\n}\n\n// API\nexport function normalizeApiEndpoint(endpoint: string, path: string = ''): string {\n  try {\n    const url = new URL(endpoint);\n    if (path && !url.pathname.endsWith('/')) {\n      url.pathname += '/';\n    }\n    if (path) {\n      url.pathname += path.startsWith('/') ? path.slice(1) : path;\n    }\n    return url.toString();\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n}\n\n// \nexport async function fetchAvailableModels(settings: APISettings): Promise<string[]> {\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const endpoint = settings.api_endpoint.trim();\n  let modelEndpoint: string;\n\n  console.log(' :', endpoint);\n\n  try {\n    modelEndpoint = normalizeApiEndpoint(endpoint, '/models');\n    console.log('  models :', modelEndpoint);\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n\n  try {\n    new URL(modelEndpoint);\n  } catch (error) {\n    throw new Error(`API : ${modelEndpoint}`);\n  }\n\n  // \n  const possibleEndpoints = [\n    modelEndpoint,\n    endpoint + (endpoint.endsWith('/') ? 'models' : '/models'),\n    new URL(modelEndpoint).origin + '/v1/models',\n    new URL(modelEndpoint).origin + '/models',\n  ];\n\n  console.log(' :', possibleEndpoints);\n\n  const errors: string[] = [];\n  let hasCorsError = false;\n\n  for (const endpoint of possibleEndpoints) {\n    try {\n      console.log(` : ${endpoint}`);\n\n      const response = await fetchWithProxy(endpoint, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${settings.api_key}`,\n        },\n      });\n\n      console.log(` : ${response.status} ${response.statusText}`);\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        errors.push(`${endpoint}: ${response.status} - ${errorText.substring(0, 100)}`);\n        console.log(` : ${response.status}`);\n        console.log(`: ${errorText.substring(0, 200)}`);\n        continue;\n      }\n\n      const contentType = response.headers.get('content-type');\n      console.log(` : ${contentType}`);\n\n      if (!contentType || !contentType.includes('application/json')) {\n        const errorText = await response.text();\n        errors.push(`${endpoint}:  JSON  - ${errorText.substring(0, 100)}`);\n        console.log('  JSON :', errorText.substring(0, 200));\n        continue;\n      }\n\n      const data = await response.json();\n      console.log(' API :', JSON.stringify(data, null, 2));\n\n      // \n      if (data.data && Array.isArray(data.data)) {\n        const models = data.data.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      if (Array.isArray(data)) {\n        const models = data.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      if (data.models && Array.isArray(data.models)) {\n        const models = data.models.map((item: any) => item.id || item.name || item).filter(Boolean);\n        if (models.length > 0) {\n          console.log(`  ${models.length} :`, models);\n          return models;\n        }\n      }\n\n      errors.push(`${endpoint}:  - ${JSON.stringify(data).substring(0, 100)}`);\n      console.log(' ');\n    } catch (error) {\n      const errorMessage = (error as Error).message;\n      if (errorMessage.includes('Failed to fetch') || errorMessage.includes('CORS')) {\n        hasCorsError = true;\n      }\n      errors.push(`${endpoint}: ${errorMessage}`);\n      console.log(' :', error);\n      continue;\n    }\n  }\n\n  console.error(' :');\n  errors.forEach((error, index) => console.error(`  ${index + 1}. ${error}`));\n\n  let errorMessage = ` API  ${possibleEndpoints.length} \\n\\n\\n${errors.join('\\n\\n')}\\n\\n\\n1. API ${endpoint}\\n2. API Key \\n3.  API  /v1/models \\n`;\n\n  if (hasCorsError) {\n    errorMessage += `\\n  CORS \\n API ${new URL(endpoint).origin} CORS \\n\\n  Zeabur  CORS\\n  API  CORS \\n  API\\n\\n`;\n  }\n\n  errorMessage += ' API ';\n\n  throw new Error(errorMessage);\n}\n\n// \nexport async function summarizeMessages(startId: number, endId: number, settings: APISettings): Promise<string> {\n  if (!settings.api_endpoint || settings.api_endpoint.trim() === '') {\n    throw new Error('API ');\n  }\n\n  const endpoint = settings.api_endpoint.trim();\n  let apiUrl: string;\n\n  try {\n    apiUrl = normalizeApiEndpoint(endpoint);\n    console.log(' :', endpoint);\n    console.log('  API URL:', apiUrl);\n  } catch (error) {\n    throw new Error(`API : ${endpoint}`);\n  }\n\n  try {\n    new URL(apiUrl);\n  } catch (error) {\n    throw new Error(`API : ${apiUrl}`);\n  }\n\n  // \n  const messages: ChatMessage[] = [];\n  for (let messageId = startId; messageId <= endId; messageId++) {\n    const messageList = getChatMessages(messageId);\n    if (messageList.length > 0) {\n      messages.push(...messageList);\n    }\n  }\n\n  if (messages.length === 0) {\n    throw new Error('');\n  }\n\n  const prompt = `****\n\n\n- \n- \n- \n- \n- \n- XML\n- \n-  ${settings.max_tokens / 4} \n- ****\n\n\n\n\n: []\n: []\n\n 1: \n 2: \n 3: \n...\n\n\n${messages.map(msg => `[${msg.role}]: ${msg.message}`).join('\\n\\n')}\n\n`;\n\n  let response: Response;\n\n  console.log(' APIURL:', apiUrl);\n  console.log(':', {\n    model: settings.model,\n    messages: [{ role: 'user', content: prompt }],\n    max_tokens: settings.max_tokens,\n    temperature: settings.temperature,\n  });\n\n  try {\n    response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${settings.api_key}`,\n      },\n      body: JSON.stringify({\n        model: settings.model,\n        messages: [{ role: 'user', content: prompt }],\n        max_tokens: settings.max_tokens,\n        temperature: settings.temperature,\n        top_p: settings.top_p,\n        presence_penalty: settings.presence_penalty,\n        frequency_penalty: settings.frequency_penalty,\n      }),\n    });\n  } catch (error) {\n    console.error('fetch :', error);\n    throw new Error(` API: ${(error as Error).message}`);\n  }\n\n  if (!response.ok) {\n    let errorMessage = `API : ${response.status}`;\n    let errorDetails = '';\n\n    try {\n      const errorData = await response.json();\n      errorMessage = errorData.error?.message || errorData.message || errorMessage;\n      errorDetails = JSON.stringify(errorData, null, 2);\n    } catch (error) {\n      try {\n        errorDetails = await response.text();\n      } catch {\n        // \n      }\n    }\n\n    let userFriendlyMessage = errorMessage;\n\n    if (response.status === 500) {\n      userFriendlyMessage = `API  (500)${errorMessage}\\n\\n\\n API \\n \\n `;\n    } else if (response.status === 429) {\n      userFriendlyMessage = 'API  (429)';\n    } else if (response.status === 401) {\n      userFriendlyMessage = 'API  (401) API ';\n    } else if (response.status === 400) {\n      userFriendlyMessage = `API  (400)${errorMessage}`;\n    }\n\n    console.error(' API :', {\n      status: response.status,\n      statusText: response.statusText,\n      errorMessage,\n      errorDetails: errorDetails.substring(0, 500),\n    });\n\n    throw new Error(userFriendlyMessage);\n  }\n\n  const data = await response.json();\n\n  if (!data.choices || !data.choices[0] || !data.choices[0].message?.content) {\n    throw new Error('API ');\n  }\n\n  return data.choices[0].message.content;\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { style: { \"color\": \"#667eea\", \"margin\": \"0 0 15px 0\" } };\nconst _hoisted_2 = { style: { \"color\": \"#888\", \"margin\": \"0 0 25px 0\", \"line-height\": \"1.6\" } };\nconst _hoisted_3 = [\"placeholder\"];\nconst _hoisted_4 = {\n    key: 1,\n    style: { \"margin-bottom\": \"25px\" }\n};\nconst _hoisted_5 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nimport { ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AIGenerateDialog',\n    props: {\n        show: { type: Boolean },\n        title: {},\n        description: {},\n        placeholder: {},\n        isGenerating: { type: Boolean },\n        showInput: { type: Boolean }\n    },\n    emits: [\"close\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const localInput = ref('');\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                localInput.value = '';\n            }\n        });\n        const handleConfirm = () => {\n            if (!props.isGenerating) {\n                if (props.showInput) {\n                    emit('confirm', localInput.value);\n                }\n                else {\n                    emit('confirm');\n                }\n            }\n        };\n        const handleClose = () => {\n            if (!props.isGenerating) {\n                emit('close');\n            }\n        };\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    onClick: _withModifiers(handleClose, [\"self\"]),\n                    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" }\n                }, [\n                    _createElementVNode(\"div\", {\n                        style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #667eea\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"500px\", \"width\": \"100%\", \"text-align\": \"center\" },\n                        onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"h3\", _hoisted_1, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.title || 'AI '), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"p\", _hoisted_2, _toDisplayString(__props.description || 'AI ...'), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (__props.showInput)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"textarea\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localInput).value = $event)),\n                                placeholder: __props.placeholder || '...',\n                                style: { \"width\": \"100%\", \"min-height\": \"120px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\", \"box-sizing\": \"border-box\" }\n                            }, null, 8 /* PROPS */, _hoisted_3)), [\n                                [_vModelText, localInput.value]\n                            ])\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.isGenerating)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"div\", { style: { \"display\": \"inline-block\", \"width\": \"50px\", \"height\": \"50px\", \"border\": \"4px solid #3a3a3a\", \"border-top-color\": \"#667eea\", \"border-radius\": \"50%\", \"animation\": \"spin 1s linear infinite\" } }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin-top\": \"15px\", \"font-size\": \"14px\" } }, \"...\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            (!__props.isGenerating)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    onClick: handleConfirm,\n                                    disabled: __props.showInput && !localInput.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#667eea\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.showInput && !localInput.value ? 0.5 : 1 }])\n                                }, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-check\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 12 /* STYLE, PROPS */, _hoisted_6))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"button\", {\n                                onClick: handleClose,\n                                disabled: __props.isGenerating,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.isGenerating ? 0.5 : 1 }])\n                            }, _toDisplayString(__props.isGenerating ? '...' : ''), 13 /* TEXT, STYLE, PROPS */, _hoisted_7)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AIGenerateDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AIGenerateDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AIGenerateDialog.vue?vue&type=style&index=0&id=c12ec546&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c12ec546\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { style: { \"color\": \"#ffc107\", \"margin\": \"0 0 20px 0\" } };\nconst _hoisted_2 = { style: { \"color\": \"#888\", \"margin\": \"0 0 15px 0\", \"line-height\": \"1.6\" } };\nconst _hoisted_3 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"margin\": \"0 0 20px 0\", \"padding-left\": \"20px\", \"line-height\": \"1.8\" }\n};\nconst _hoisted_4 = [\"placeholder\"];\nconst _hoisted_5 = {\n    key: 1,\n    style: { \"margin-bottom\": \"20px\", \"background\": \"#1a1a1a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"border\": \"1px solid #444\" }\n};\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nimport { ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AIModifyDialog',\n    props: {\n        show: { type: Boolean },\n        title: {},\n        description: {},\n        examples: {},\n        placeholder: {},\n        isModifying: { type: Boolean }\n    },\n    emits: [\"close\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const localInstruction = ref('');\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                localInstruction.value = '';\n            }\n        });\n        const handleConfirm = () => {\n            if (localInstruction.value && !props.isModifying) {\n                emit('confirm', localInstruction.value);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (_ctx.$emit('close')), [\"self\"])),\n                    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" }\n                }, [\n                    _createElementVNode(\"div\", {\n                        style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #ffc107\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"600px\", \"width\": \"100%\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\" },\n                        onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                    }, [\n                        _createElementVNode(\"h3\", _hoisted_1, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.title || 'AI '), 1 /* TEXT */)\n                        ]),\n                        _createElementVNode(\"p\", _hoisted_2, _toDisplayString(__props.description || 'AI '), 1 /* TEXT */),\n                        (__props.examples && __props.examples.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_3, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.examples, (example, index) => {\n                                    return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(example), 1 /* TEXT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _withDirectives(_createElementVNode(\"textarea\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localInstruction).value = $event)),\n                            placeholder: __props.placeholder || '...',\n                            style: { \"width\": \"100%\", \"min-height\": \"150px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\", \"box-sizing\": \"border-box\" }\n                        }, null, 8 /* PROPS */, _hoisted_4), [\n                            [_vModelText, localInstruction.value]\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (__props.isModifying)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[5] || (_cache[5] = [\n                                    _createStaticVNode(\"<div style=\\\"display:flex;align-items:center;gap:12px;margin-bottom:10px;\\\" data-v-7890f262><i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"color:#ffc107;font-size:18px;animation:pulse 1.5s infinite;\\\" data-v-7890f262></i><span style=\\\"color:#ffc107;font-weight:600;font-size:14px;\\\" data-v-7890f262>AI ...</span></div><div style=\\\"width:100%;height:6px;background:#333;border-radius:3px;overflow:hidden;position:relative;\\\" data-v-7890f262><div class=\\\"progress-bar\\\" data-v-7890f262></div></div><p style=\\\"color:#888;font-size:12px;margin:8px 0 0 0;text-align:center;\\\" data-v-7890f262></p>\", 3)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"button\", {\n                                onClick: handleConfirm,\n                                disabled: !localInstruction.value || __props.isModifying,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"position\": \"relative\", \"overflow\": \"hidden\" }, { opacity: !localInstruction.value || __props.isModifying ? 0.5 : 1 }])\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass([\"fa-solid fa-wand-magic-sparkles\", { 'icon-spin': __props.isModifying }])\n                                }, null, 2 /* CLASS */),\n                                _createTextVNode(\" \" + _toDisplayString(__props.isModifying ? '...' : ''), 1 /* TEXT */)\n                            ], 12 /* STYLE, PROPS */, _hoisted_7),\n                            _createElementVNode(\"button\", {\n                                onClick: _cache[1] || (_cache[1] = ($event) => (_ctx.$emit('close'))),\n                                disabled: __props.isModifying,\n                                style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" }, { opacity: __props.isModifying ? 0.5 : 1 }])\n                            }, \"  \", 12 /* STYLE, PROPS */, _hoisted_8)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AIModifyDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AIModifyDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AIModifyDialog.vue?vue&type=style&index=0&id=7890f262&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7890f262\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, Fragment as _Fragment, renderList as _renderList, vModelText as _vModelText, withDirectives as _withDirectives, createVNode as _createVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"greetings-tab\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#667eea\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"gap\": \"20px\", \"padding\": \"20px\", \"overflow\": \"hidden\" } };\nconst _hoisted_6 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding-right\": \"10px\" } };\nconst _hoisted_7 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"60px 20px\", \"text-align\": \"center\", \"color\": \"#888\" }\n};\nconst _hoisted_8 = { style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #667eea\", \"border-radius\": \"8px\", \"padding\": \"20px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_9 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_10 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\" } };\nconst _hoisted_11 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"10px\", \"border-bottom\": \"1px solid #3a3a3a\" } };\nconst _hoisted_12 = { style: { \"background\": \"#667eea\", \"color\": \"white\", \"padding\": \"4px 10px\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"font-weight\": \"bold\", \"min-width\": \"35px\", \"text-align\": \"center\" } };\nconst _hoisted_13 = [\"onUpdate:modelValue\"];\nconst _hoisted_14 = [\"onUpdate:modelValue\", \"placeholder\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = [\"onUpdate:modelValue\"];\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = {\n    key: 3,\n    style: { \"position\": \"sticky\", \"bottom\": \"0\", \"padding\": \"20px\", \"background\": \"linear-gradient(to top, #1a1a1a 80%, transparent)\", \"border-top\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"center\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_20 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"overflow\": \"hidden\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 4px 12px rgba(0, 0, 0, 0.3)\" } };\nconst _hoisted_21 = { style: { \"padding\": \"15px 20px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_22 = { style: { \"flex\": \"1\", \"position\": \"relative\", \"overflow\": \"hidden\", \"background\": \"#1e1e1e\" } };\nconst _hoisted_23 = [\"srcdoc\"];\nconst _hoisted_24 = {\n    key: 1,\n    style: { \"width\": \"100%\", \"height\": \"100%\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\", \"padding\": \"20px\", \"text-align\": \"center\", \"line-height\": \"1.8\" }\n};\nconst _hoisted_25 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"16px\" } };\nconst _hoisted_26 = { style: { \"background\": \"#1a1a1a\", \"border-radius\": \"8px\", \"padding\": \"16px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"line-height\": \"1.6\", \"overflow-y\": \"auto\", \"flex\": \"1\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_27 = { style: { \"display\": \"flex\", \"justify-content\": \"flex-end\", \"margin-top\": \"16px\" } };\nconst _hoisted_28 = { style: { \"padding\": \"20px\", \"overflow-y\": \"auto\", \"flex\": \"1\" } };\nconst _hoisted_29 = { style: { \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"max-height\": \"400px\", \"overflow-y\": \"auto\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_30 = { style: { \"margin\": \"0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_31 = { style: { \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.6\" } };\nimport { klona } from 'klona';\nimport { storeToRefs } from 'pinia';\nimport toastr from 'toastr';\nimport { onMounted, ref } from 'vue';\nimport { z } from 'zod';\nimport { useSettingsStore } from '../settings';\nimport { copyToClipboard } from '../utils';\nimport { normalizeApiEndpoint } from '../utils/api';\nimport AIGenerateDialog from './AIGenerateDialog.vue';\nimport AIModifyDialog from './AIModifyDialog.vue';\n// settings store\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GreetingsTab',\n    setup(__props) {\n        const GreetingConfig = z.object({\n            icon: z.string().default(''),\n            title: z.string().default(''),\n            description: z.string().default(''),\n        });\n        const UIConfig = z.object({\n            customHtml: z.string().default(''), // AIHTML\n        });\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const greetings = ref([]);\n        const uiConfig = ref(UIConfig.parse({})); // UI\n        const showCodeDialog = ref(false);\n        const generatedCode = ref('');\n        const copyButtonText = ref('');\n        const showAiGenerateDialog = ref(false);\n        const showAiEditDialog = ref(false);\n        const isGeneratingAi = ref(false);\n        const isEditingAi = ref(false);\n        const currentEditingIndex = ref(-1);\n        const showHelp = ref(false); // \n        const previewHtml = ref('');\n        const currentCharacter = ref(null);\n        const showOriginalDialog = ref(false);\n        const originalGreetingContent = ref('');\n        const showAiStyleDialog = ref(false); // AI\n        const isGeneratingStyle = ref(false); // \n        // \n        function getCurrentCharacter() {\n            try {\n                const char = getCharData('current');\n                if (char) {\n                    console.log(':', char.name);\n                }\n                else {\n                    console.log('');\n                }\n                return char;\n            }\n            catch (error) {\n                console.error(':', error);\n                return null;\n            }\n        }\n        // \n        async function loadConfig() {\n            try {\n                const character = getCurrentCharacter();\n                if (!character) {\n                    greetings.value = [];\n                    console.log('');\n                    return;\n                }\n                console.log(':', character.name);\n                // \n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                console.log('', allGreetings.length, '');\n                // \n                const savedConfig = getVariables({ type: 'character' });\n                const configs = savedConfig?.greetings_config || [];\n                const savedUIConfig = savedConfig?.ui_config;\n                // \n                greetings.value = allGreetings.map((_, index) => {\n                    const saved = configs[index];\n                    return GreetingConfig.parse(saved || {});\n                });\n                // UI\n                uiConfig.value = UIConfig.parse(savedUIConfig || {});\n                console.log(':', greetings.value.length, '');\n                console.log('UI, HTML:', uiConfig.value.customHtml.length);\n                currentCharacter.value = character;\n                updatePreview();\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        function saveConfig() {\n            try {\n                replaceVariables({\n                    greetings_config: klona(greetings.value),\n                    ui_config: klona(uiConfig.value),\n                }, { type: 'character' });\n                updatePreview(); // \n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        function clearAllConfig() {\n            if (!confirm(`\\n\\n ${greetings.value.length} \\n\\n `)) {\n                return;\n            }\n            try {\n                // \n                greetings.value = greetings.value.map(() => {\n                    return GreetingConfig.parse({\n                        icon: '',\n                        title: '',\n                        description: '',\n                    });\n                });\n                // UI\n                uiConfig.value.customHtml = '';\n                // \n                saveConfig();\n                // \n                updatePreview();\n                toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        function viewOriginalGreeting(index) {\n            try {\n                const character = getCurrentCharacter();\n                if (!character) {\n                    toastr.error('');\n                    return;\n                }\n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                const greetingContent = allGreetings[index] || '';\n                if (!greetingContent.trim()) {\n                    toastr.warning('');\n                    return;\n                }\n                originalGreetingContent.value = greetingContent;\n                showOriginalDialog.value = true;\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // AI\n        function closeAiGenerateDialog() {\n            if (!isGeneratingAi.value) {\n                showAiGenerateDialog.value = false;\n            }\n        }\n        // AI\n        async function generateDescription(index) {\n            currentEditingIndex.value = index;\n            // \n            showAiGenerateDialog.value = true;\n            isGeneratingAi.value = true;\n            const idx = index;\n            if (idx < 0 || idx >= greetings.value.length) {\n                isGeneratingAi.value = false;\n                showAiGenerateDialog.value = false;\n                return;\n            }\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    toastr.error(' API  API Key');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                // \n                const character = getCurrentCharacter();\n                if (!character) {\n                    toastr.error('');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                const allGreetings = [character.first_mes, ...(character.data?.alternate_greetings || [])];\n                const greetingContent = allGreetings[idx] || '';\n                if (!greetingContent.trim()) {\n                    toastr.warning('');\n                    showAiGenerateDialog.value = false;\n                    isGeneratingAi.value = false;\n                    return;\n                }\n                // \n                const systemPrompt = `\n\n\n1.  20-50 \n2. \n3. \n4. \"...\"\"...\"\n5. `;\n                const userPrompt = `\n\n${greetingContent}\n\n`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', aiDescription);\n                if (!aiDescription) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    // \n                    if (!result.choices || result.choices.length === 0) {\n                        throw new Error('API  choices  API ');\n                    }\n                    throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n                }\n                // AI\n                // \n                aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n                // markdown\n                aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n                if (!aiDescription) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI :', aiDescription);\n                // \n                greetings.value[idx].description = aiDescription;\n                saveConfig();\n                toastr.success('');\n                showAiGenerateDialog.value = false;\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                const errorMsg = ': ' + error.message;\n                toastr.error(errorMsg);\n                // \n                setTimeout(() => { }, 5000);\n            }\n            finally {\n                isGeneratingAi.value = false;\n            }\n        }\n        // AI\n        function editDescription(index) {\n            currentEditingIndex.value = index;\n            showAiEditDialog.value = true;\n        }\n        // AI\n        async function confirmEditDescription(requirement) {\n            const index = currentEditingIndex.value;\n            if (index < 0 || index >= greetings.value.length)\n                return;\n            isEditingAi.value = true;\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    toastr.error(' API  API Key');\n                    showAiEditDialog.value = false;\n                    isEditingAi.value = false;\n                    return;\n                }\n                const currentDesc = greetings.value[index].description;\n                if (!currentDesc.trim()) {\n                    toastr.warning(' AI ');\n                    showAiEditDialog.value = false;\n                    isEditingAi.value = false;\n                    return;\n                }\n                // \n                const systemPrompt = `\n\n\n1. \n2.  20-50 \n3. \n4. `;\n                const userPrompt = `\n${currentDesc}\n\n\n${requirement}\n\n`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let aiDescription = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', aiDescription);\n                if (!aiDescription) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    // \n                    if (!result.choices || result.choices.length === 0) {\n                        throw new Error('API  choices  API ');\n                    }\n                    throw new Error('AI \\n1. API Key \\n2. \\n3. ');\n                }\n                // AI\n                // \n                aiDescription = aiDescription.replace(/^[\"']|[\"']$/g, '');\n                // markdown\n                aiDescription = aiDescription.replace(/^```.*?\\n?|```$/g, '').trim();\n                if (!aiDescription) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI :', aiDescription);\n                // \n                greetings.value[index].description = aiDescription;\n                saveConfig();\n                toastr.success('');\n                showAiEditDialog.value = false;\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                const errorMsg = ': ' + error.message;\n                toastr.error(errorMsg);\n            }\n            finally {\n                isEditingAi.value = false;\n            }\n        }\n        // AI\n        async function generateStyleWithAI(styleDescription) {\n            if (!styleDescription.trim()) {\n                toastr.warning('');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API  API Key');\n                showAiStyleDialog.value = false;\n                return;\n            }\n            isGeneratingStyle.value = true;\n            try {\n                // HTML\n                const cards = greetings.value\n                    .map((g, index) => {\n                    const icon = g.icon || '';\n                    const title = g.title || (index === 0 ? '' : ` ${index}`);\n                    const desc = g.description || '';\n                    const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                    return ('      <' +\n                        'div class=\"scene-card\" onclick=\"switchGreeting(' +\n                        index +\n                        ')\">' +\n                        '<' +\n                        'div class=\"card-badge\">' +\n                        badge +\n                        '<' +\n                        '/div>' +\n                        '<' +\n                        'div class=\"card-icon\">' +\n                        icon +\n                        '<' +\n                        '/div>' +\n                        '<' +\n                        'div class=\"card-title\">' +\n                        title +\n                        '<' +\n                        '/div>' +\n                        '<' +\n                        'div class=\"card-desc\">' +\n                        desc +\n                        '<' +\n                        '/div>' +\n                        '<' +\n                        '/div>');\n                })\n                    .join('\\n');\n                const systemPrompt = `HTML/CSS\n\nHTML\n\n\n1.  HTML ` +\n                    '<' +\n                    `html>` +\n                    '<' +\n                    `head>` +\n                    '<' +\n                    `body>\n2.  ` +\n                    '<' +\n                    `head>  Font Awesome ` +\n                    '<' +\n                    `link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n3.  ` +\n                    '<' +\n                    `style>  CSS \n4. HTML\n   - body\n   - .container\n   - .header\n     - h1\n     - p\n   - .scene-grid\n   - .scene-card onclick \n   - .card-badge\n   - .card-icon\n   - .card-title\n   - .card-desc\n   - .loading\n5.  switchGreeting(id)  JavaScript \n6. \n7. \n8. HTMLmarkdown\n\n\n- body  \"min-height: 100vh; height: auto;\" \n- body  \"display: flex; align-items: center; justify-content: center;\" \n- .container  \"height: auto;\" \n- \n\nHTML\n-  class=\"scene-grid\" div\n-  scene-grid \n- scene-gridgrid-containercards-grid`;\n                //  switchGreeting \n                const switchGreetingCode = `async function switchGreeting(id) {\n      try {\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.add(\"active\");\n        if (mainContainer) mainContainer.style.display = \"none\";\n        \n        if (typeof window.getChatMessages !== \"function\") {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        const messages = await window.getChatMessages(0, { include_swipe: true });\n        if (!messages || messages.length === 0) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        const content = messages[0].swipes[id];\n        if (!content) {\n          alert(\"\");\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n          return;\n        }\n        \n        await window.setChatMessage(content, 0, { swipe_id: id, refresh: \"display_and_render_current\" });\n        \n        setTimeout(() => {\n          if (loading) loading.classList.remove(\"active\");\n          if (mainContainer) mainContainer.style.display = \"block\";\n        }, 500);\n      } catch (err) {\n        console.error(\":\", err);\n        alert(\": \" + err.message);\n        const loading = document.getElementById(\"loading\");\n        const mainContainer = document.getElementById(\"mainContainer\");\n        if (loading) loading.classList.remove(\"active\");\n        if (mainContainer) mainContainer.style.display = \"block\";\n      }\n    }`;\n                const userPrompt = `${styleDescription}\n\n onclick=\"switchGreeting()\" \n${cards}\n\n ` +\n                    '<' +\n                    `/body>  JavaScript \n` +\n                    '<' +\n                    `script>\n${switchGreetingCode}\n` +\n                    '<' +\n                    `/script>\n\n .scene-card  onclick=\"switchGreeting()\" \n` +\n                    '<' +\n                    `div class=\"scene-card\" onclick=\"switchGreeting(0)\">\n\n loading \n` +\n                    '<' +\n                    `div class=\"loading\" id=\"loading\" style=\"display: none; text-align: center; padding: 40px;\">\n  ` +\n                    '<' +\n                    `p style=\"color: #888; font-size: 18px;\">...` +\n                    '<' +\n                    `/p>\n` +\n                    '<' +\n                    `/div>\n\nHTML`;\n                console.log(' AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint, '/chat/completions');\n                console.log(' :', apiUrl);\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature,\n                        max_tokens: settings.value.max_tokens,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API : ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' [] API :', result);\n                let generatedHtml = result.choices?.[0]?.message?.content?.trim() || '';\n                console.log(' [] AI :', generatedHtml ? generatedHtml.substring(0, 500) : '()');\n                if (!generatedHtml) {\n                    console.error(' [] AI ');\n                    console.error(':', JSON.stringify(result, null, 2));\n                    // \n                    if (result.error) {\n                        throw new Error(`API : ${result.error.message || JSON.stringify(result.error)}`);\n                    }\n                    throw new Error('AI  API ');\n                }\n                // AI\n                // markdown\n                generatedHtml = generatedHtml.replace(/^```html\\n?|^```\\n?|```$/gm, '').trim();\n                if (!generatedHtml) {\n                    throw new Error('AI ');\n                }\n                console.log(' [] AI HTML:', generatedHtml.length);\n                // HTML\n                uiConfig.value.customHtml = generatedHtml;\n                saveConfig();\n                toastr.success('');\n                showAiStyleDialog.value = false;\n                // \n                updatePreview();\n            }\n            catch (error) {\n                console.error(' [] AI :', error);\n                toastr.error(': ' + error.message, '', { timeOut: 5000 });\n            }\n            finally {\n                isGeneratingStyle.value = false;\n            }\n        }\n        // \n        async function generateFrontendCode() {\n            const character = getCurrentCharacter();\n            if (!character) {\n                toastr.warning('');\n                return;\n            }\n            // AIHTML\n            if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n                generatedCode.value = uiConfig.value.customHtml;\n                showCodeDialog.value = true;\n                return;\n            }\n            // \n            // \n            const cards = greetings.value\n                .map((g, index) => {\n                const icon = g.icon || '<' + 'i class=\"fa-solid fa-comment\"><' + '/i>';\n                const title = g.title || (index === 0 ? '' : ` ${index}`);\n                const desc = g.description || '';\n                const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                return ('        <' +\n                    'div class=\"scene-card\" onclick=\"switchGreeting(' +\n                    index +\n                    ')\">' +\n                    '<' +\n                    'div class=\"card-badge\">' +\n                    badge +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-icon\">' +\n                    icon +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-title\">' +\n                    title +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-desc\">' +\n                    desc +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    '/div>');\n            })\n                .join('\\n\\n');\n            // HTML\n            const htmlCode = [\n                '<' + 'html>',\n                '<' + 'head>',\n                '  <' + 'meta charset=\"UTF-8\">',\n                '  <' + 'link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">',\n                '  <' + 'style>',\n                '    * { margin: 0; padding: 0; box-sizing: border-box; }',\n                '    html, body { height: 100%; }',\n                '    body {',\n                '      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;',\n                '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\n                '      padding: 20px; min-height: 100%; height: auto; display: flex; align-items: center; justify-content: center;',\n                '      overflow-y: auto;',\n                '    }',\n                '    .container { max-width: 900px; width: 100%; height: auto; background: rgba(255, 255, 255, 0.95);',\n                '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); margin: 20px auto; }',\n                '    .header { text-align: center; margin-bottom: 40px; }',\n                '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\n                '    .header p { color: #666; font-size: 16px; }',\n                '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\n                '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\n                '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\n                '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\n                '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\n                '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\n                '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\n                '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\n                '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\n                '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\n                '    .loading { display: none; text-align: center; padding: 40px; }',\n                '    .loading.active { display: block; }',\n                '  <' + '/style>',\n                '<' + '/head>',\n                '<' + 'body>',\n                '  <' + 'div class=\"container\" id=\"mainContainer\">',\n                '    <' + 'div class=\"header\">',\n                '      <' + 'h1><' + '/h1>',\n                '      <' + 'p><' + '/p>',\n                '    <' + '/div>',\n                '    <' + 'div class=\"scene-grid\" id=\"sceneGrid\">',\n                cards,\n                '    <' + '/div>',\n                '  <' + '/div>',\n                '  <' + 'div class=\"loading\" id=\"loading\"><' + 'p>...<' + '/p><' + '/div>',\n                '  <' + 'script>',\n                '    async function switchGreeting(id) {',\n                '      try {',\n                '        const loading = document.getElementById(\"loading\");',\n                '        const mainContainer = document.getElementById(\"mainContainer\");',\n                '        loading.classList.add(\"active\"); mainContainer.style.display = \"none\";',\n                '        const messages = await getChatMessages(0, { include_swipe: true });',\n                '        if (!messages || messages.length === 0) { alert(\"\"); return; }',\n                '        const content = messages[0].swipes[id];',\n                '        if (!content) { alert(\"\"); return; }',\n                '        await setChatMessage(content, 0, { swipe_id: id, refresh: \"display_and_render_current\" });',\n                '        setTimeout(() => { loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; }, 500);',\n                '      } catch (err) { console.error(\":\", err); alert(\": \" + err.message); }',\n                '    }',\n                '  </' + 'script>',\n                '<' + '/body>',\n                '<' + '/html>',\n            ].join('\\n');\n            // API\n            const fixedHtmlCode = htmlCode\n                .replace('const messages = await getChatMessages', 'if (typeof window.getChatMessages !== \"function\") { alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return; }\\n        const messages = await window.getChatMessages')\n                .replace('await setChatMessage', 'await window.setChatMessage')\n                .replace('alert(\"\"); return;', 'alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return;')\n                .replace('alert(\"\"); return;', 'alert(\"\"); loading.classList.remove(\"active\"); mainContainer.style.display = \"block\"; return;');\n            generatedCode.value = fixedHtmlCode;\n            showCodeDialog.value = true;\n            copyButtonText.value = '';\n        }\n        // \n        async function copyCode() {\n            const success = await copyToClipboard(generatedCode.value, ' ');\n            if (success) {\n                copyButtonText.value = ' ';\n                setTimeout(() => {\n                    copyButtonText.value = '';\n                }, 2000);\n            }\n        }\n        // \n        function closeCodeDialog() {\n            showCodeDialog.value = false;\n        }\n        // API\n        function updatePreview() {\n            if (greetings.value.length === 0) {\n                previewHtml.value = '';\n                return;\n            }\n            const character = getCurrentCharacter();\n            const characterName = character?.name || '';\n            // AIHTML\n            if (uiConfig.value.customHtml && uiConfig.value.customHtml.trim()) {\n                console.log(' AIHTML');\n                try {\n                    // HTML\n                    const cardsHtml = greetings.value\n                        .map((g, index) => {\n                        const icon = g.icon || '';\n                        const title = g.title || (index === 0 ? '' : ` ${index}`);\n                        const desc = g.description || '';\n                        const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                        return `\n        <div class=\"scene-card\">\n          <div class=\"card-badge\">${badge}</div>\n          <div class=\"card-icon\">${icon}</div>\n          <div class=\"card-title\">${title}</div>\n          <div class=\"card-desc\">${desc}</div>\n        </div>`;\n                    })\n                        .join('\\n');\n                    //  scene-grid \n                    let customHtml = uiConfig.value.customHtml;\n                    // \n                    const possiblePatterns = [\n                        /(<div[^>]*class=\"scene-grid\"[^>]*>)([\\s\\S]*?)(<\\/div>)/i,\n                        /(<div[^>]*class=\"[^\"]*grid[^\"]*\"[^>]*>)([\\s\\S]*?)(<\\/div>)/i,\n                        /(<div[^>]*class=\"[^\"]*cards[^\"]*\"[^>]*>)([\\s\\S]*?)(<\\/div>)/i,\n                        /(<div[^>]*class=\"[^\"]*container[^\"]*\"[^>]*>[\\s\\S]*?<div[^>]*class=\"[^\"]*grid[^\"]*\"[^>]*>)([\\s\\S]*?)(<\\/div>)/i,\n                    ];\n                    for (const pattern of possiblePatterns) {\n                        const match = customHtml.match(pattern);\n                        if (match) {\n                            // \n                            customHtml = customHtml.replace(pattern, `$1\\n${cardsHtml}\\n      $3`);\n                            previewHtml.value = customHtml;\n                            console.log(' HTML');\n                            return;\n                        }\n                    }\n                    // body\n                    console.warn(' body');\n                    const bodyPattern = /(<body[^>]*>)([\\s\\S]*?)(<\\/body>)/i;\n                    const bodyMatch = customHtml.match(bodyPattern);\n                    if (bodyMatch) {\n                        customHtml = customHtml.replace(bodyPattern, `$1$2\\n<div class=\"scene-grid\">\\n${cardsHtml}\\n</div>\\n$3`);\n                        previewHtml.value = customHtml;\n                        console.log(' body');\n                        return;\n                    }\n                    console.warn(' HTMLHTML');\n                    previewHtml.value = uiConfig.value.customHtml;\n                }\n                catch (error) {\n                    console.error(' HTML:', error);\n                    toastr.warning('HTML');\n                    // \n                }\n            }\n            console.log(' ');\n            //  - \n            const cards = greetings.value\n                .map((g, index) => {\n                const icon = g.icon || '<' + 'i class=\"fa-solid fa-comment\"><' + '/i>';\n                const title = g.title || (index === 0 ? '' : ` ${index}`);\n                const desc = g.description || '';\n                const badge = index === 0 ? '' : String(index).padStart(2, '0');\n                return ('        <' +\n                    'div class=\"scene-card\">' +\n                    '<' +\n                    'div class=\"card-badge\">' +\n                    badge +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-icon\">' +\n                    icon +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-title\">' +\n                    title +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    'div class=\"card-desc\">' +\n                    desc +\n                    '<' +\n                    '/div>' +\n                    '<' +\n                    '/div>');\n            })\n                .join('\\n\\n');\n            // HTML\n            const htmlCode = [\n                '<' + 'html>',\n                '<' + 'head>',\n                '  <' + 'meta charset=\"UTF-8\">',\n                '  <' + 'link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">',\n                '  <' + 'style>',\n                '    * { margin: 0; padding: 0; box-sizing: border-box; }',\n                '    html, body { height: 100%; }',\n                '    body {',\n                '      font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;',\n                '      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);',\n                '      padding: 20px; min-height: 100%; height: auto; display: flex; align-items: center; justify-content: center;',\n                '      overflow-y: auto;',\n                '    }',\n                '    .container { max-width: 900px; width: 100%; height: auto; background: rgba(255, 255, 255, 0.95);',\n                '      border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); margin: 20px auto; }',\n                '    .header { text-align: center; margin-bottom: 40px; }',\n                '    .header h1 { font-size: 32px; color: #333; margin-bottom: 10px; }',\n                '    .header p { color: #666; font-size: 16px; }',\n                '    .scene-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }',\n                '    .scene-card { background: white; border: 2px solid #e0e0e0; border-radius: 15px;',\n                '      padding: 25px; cursor: pointer; transition: all 0.3s ease; position: relative; overflow: hidden; }',\n                '    .scene-card:hover { transform: translateY(-5px); border-color: #667eea;',\n                '      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3); }',\n                '    .scene-card:active { transform: translateY(-2px); }',\n                '    .card-badge { position: absolute; top: 10px; right: 10px; background: #667eea;',\n                '      color: white; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: bold; }',\n                '    .card-icon { font-size: 48px; margin-bottom: 15px; text-align: center; }',\n                '    .card-title { font-size: 20px; font-weight: 600; color: #333; margin-bottom: 10px; }',\n                '    .card-desc { font-size: 14px; color: #666; line-height: 1.5; }',\n                '  <' + '/style>',\n                '<' + '/head>',\n                '<' + 'body>',\n                '  <' + 'div class=\"container\">',\n                '    <' + 'div class=\"header\">',\n                `      <` + `h1>${characterName} <` + '/h1>',\n                '      <' + 'p><' + '/p>',\n                '    <' + '/div>',\n                '    <' + 'div class=\"scene-grid\">',\n                cards,\n                '    <' + '/div>',\n                '  <' + '/div>',\n                '<' + '/body>',\n                '<' + '/html>',\n            ].join('\\n');\n            previewHtml.value = htmlCode;\n        }\n        // \n        function openPreviewInNewWindow() {\n            if (!previewHtml.value) {\n                toastr.error('');\n                return;\n            }\n            const character = getCurrentCharacter();\n            const windowTitle = character ? `${character.name} - ` : '';\n            // \n            const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n            if (newWindow) {\n                newWindow.document.write(previewHtml.value);\n                newWindow.document.close();\n                newWindow.document.title = windowTitle;\n                toastr.success('');\n            }\n            else {\n                toastr.error('');\n            }\n        }\n        // STScript JSON\n        async function downloadAsJson() {\n            try {\n                await generateFrontendCode();\n                if (!generatedCode.value) {\n                    toastr.error('');\n                    return;\n                }\n                const character = getCurrentCharacter();\n                const characterName = character?.name || '';\n                // UUID\n                const uuid = crypto.randomUUID();\n                // STScript JSON\n                const stscriptJson = {\n                    id: uuid,\n                    scriptName: `${characterName}-`,\n                    disabled: false,\n                    runOnEdit: true,\n                    findRegex: '//g',\n                    replaceString: '```html\\n' + generatedCode.value + '\\n```',\n                    trimStrings: [],\n                    placement: [1, 2],\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                    markdownOnly: true,\n                    promptOnly: false,\n                };\n                // JSON\n                const jsonString = JSON.stringify(stscriptJson, null, 4);\n                // Blob\n                const blob = new Blob([jsonString], { type: 'application/json' });\n                // \n                const url = URL.createObjectURL(blob);\n                const link = document.createElement('a');\n                link.href = url;\n                link.download = `${characterName}-.json`;\n                // \n                document.body.appendChild(link);\n                link.click();\n                // \n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                toastr.success('JSON');\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(': ' + error.message);\n            }\n        }\n        // \n        onMounted(() => {\n            loadConfig();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[32] || (_cache[32] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-comments\",\n                            style: { \"color\": \"#667eea\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(greetings.value.length) + \"  \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                class: \"mini-button\",\n                                style: _normalizeStyle([{ \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" }, { color: showHelp.value ? '#667eea' : '#e0e0e0', borderColor: showHelp.value ? '#667eea' : '#3a3a3a' }]),\n                                onClick: _cache[0] || (_cache[0] = ($event) => (showHelp.value = !showHelp.value))\n                            }, [\n                                _cache[28] || (_cache[28] = _createElementVNode(\"i\", { class: \"fa-solid fa-circle-question\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\" \" + _toDisplayString(showHelp.value ? '' : ''), 1 /* TEXT */)\n                            ], 4 /* STYLE */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 2,\n                                class: \"mini-button\",\n                                style: { \"padding\": \"6px 12px\", \"background\": \"#dc2626\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                                onClick: clearAllConfig,\n                                onMouseenter: _cache[1] || (_cache[1] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                onMouseleave: _cache[2] || (_cache[2] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                            }, [...(_cache[29] || (_cache[29] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eraser\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                class: \"mini-button\",\n                                style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                                onClick: _cache[3] || (_cache[3] = ($event) => (showAiStyleDialog.value = true)),\n                                onMouseenter: _cache[4] || (_cache[4] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                onMouseleave: _cache[5] || (_cache[5] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                            }, [...(_cache[30] || (_cache[30] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" AI \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: loadConfig\n                        }, [...(_cache[31] || (_cache[31] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createCommentVNode(\"  /  \"),\n                        (greetings.value.length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [...(_cache[33] || (_cache[33] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-comment-dots\",\n                                        style: { \"font-size\": \"64px\", \"margin-bottom\": \"20px\", \"opacity\": \"0.3\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"div\", { style: { \"font-size\": \"18px\", \"font-weight\": \"600\", \"color\": \"#e0e0e0\", \"margin-bottom\": \"10px\" } }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"div\", { style: { \"font-size\": \"14px\", \"color\": \"#888\", \"max-width\": \"400px\", \"line-height\": \"1.6\" } }, \"  \", -1 /* CACHED */)\n                                ]))]))\n                            : (showHelp.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            _cache[35] || (_cache[35] = _createElementVNode(\"h4\", { style: { \"color\": \"#667eea\", \"margin\": \"0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-circle-info\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"cursor\": \"pointer\", \"font-size\": \"18px\", \"padding\": \"4px\" },\n                                                onClick: _cache[6] || (_cache[6] = ($event) => (showHelp.value = false))\n                                            }, [...(_cache[34] || (_cache[34] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ]),\n                                        _cache[36] || (_cache[36] = _createStaticVNode(\"<ol style=\\\"color:#ccc;margin:0;padding-left:20px;line-height:1.8;\\\" data-v-3100a601><li data-v-3100a601></li><li data-v-3100a601></li><li data-v-3100a601>AI</li><li data-v-3100a601>&quot;AI&quot;</li><li data-v-3100a601>AIHTML</li><li data-v-3100a601></li><li data-v-3100a601>&quot;&quot;</li><li data-v-3100a601>&quot;STScript JSON&quot;</li><li data-v-3100a601>JSON / </li></ol><div style=\\\"margin-top:15px;padding-top:15px;border-top:1px solid #3a3a3a;\\\" data-v-3100a601><p style=\\\"color:#888;font-size:13px;margin:0;\\\" data-v-3100a601><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"color:#ffc107;\\\" data-v-3100a601></i><strong data-v-3100a601></strong>0 </p></div>\", 2))\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_10, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(greetings.value, (greeting, index) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: index,\n                                                class: \"greeting-item\",\n                                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                                            }, [\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_11, [\n                                                    _createElementVNode(\"span\", _hoisted_12, \" #\" + _toDisplayString(index), 1 /* TEXT */),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": ($event) => ((greeting.icon) = $event),\n                                                        style: { \"width\": \"60px\", \"text-align\": \"center\", \"font-size\": \"20px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"6px\", \"color\": \"#e0e0e0\" },\n                                                        placeholder: \"\",\n                                                        maxlength: \"4\",\n                                                        onInput: saveConfig\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_13), [\n                                                        [_vModelText, greeting.icon]\n                                                    ]),\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": ($event) => ((greeting.title) = $event),\n                                                        style: { \"flex\": \"1\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"8px 12px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                                        placeholder: index === 0 ? '' : ` ${index}`,\n                                                        onInput: saveConfig\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), [\n                                                        [_vModelText, greeting.title]\n                                                    ]),\n                                                    _createElementVNode(\"button\", {\n                                                        style: { \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"color\": \"white\", \"padding\": \"8px 16px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.3)\" },\n                                                        title: \"\",\n                                                        onClick: ($event) => (generateDescription(index)),\n                                                        onMouseenter: _cache[7] || (_cache[7] = ($event) => {\n                                                            $event.currentTarget.style.transform = 'translateY(-2px)';\n                                                            $event.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.5)';\n                                                        }),\n                                                        onMouseleave: _cache[8] || (_cache[8] = ($event) => {\n                                                            $event.currentTarget.style.transform = 'translateY(0)';\n                                                            $event.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.3)';\n                                                        })\n                                                    }, [...(_cache[37] || (_cache[37] = [\n                                                            _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */),\n                                                            _createElementVNode(\"span\", null, \"AI \", -1 /* CACHED */)\n                                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_15),\n                                                    (greeting.description)\n                                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: 0,\n                                                            style: { \"background\": \"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)\", \"border\": \"none\", \"color\": \"white\", \"padding\": \"8px 16px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"box-shadow\": \"0 2px 8px rgba(59, 130, 246, 0.3)\" },\n                                                            title: \"\",\n                                                            onClick: ($event) => (editDescription(index)),\n                                                            onMouseenter: _cache[9] || (_cache[9] = ($event) => {\n                                                                $event.currentTarget.style.transform = 'translateY(-2px)';\n                                                                $event.currentTarget.style.boxShadow = '0 4px 12px rgba(59, 130, 246, 0.5)';\n                                                            }),\n                                                            onMouseleave: _cache[10] || (_cache[10] = ($event) => {\n                                                                $event.currentTarget.style.transform = 'translateY(0)';\n                                                                $event.currentTarget.style.boxShadow = '0 2px 8px rgba(59, 130, 246, 0.3)';\n                                                            })\n                                                        }, [...(_cache[38] || (_cache[38] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */),\n                                                                _createElementVNode(\"span\", null, \"AI \", -1 /* CACHED */)\n                                                            ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_16))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _withDirectives(_createElementVNode(\"textarea\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((greeting.description) = $event),\n                                                    style: { \"width\": \"100%\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-family\": \"inherit\", \"resize\": \"vertical\", \"min-height\": \"60px\" },\n                                                    placeholder: \"...\",\n                                                    onInput: saveConfig\n                                                }, \"            \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_17), [\n                                                    [_vModelText, greeting.description]\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"width\": \"100%\", \"padding\": \"10px\", \"background\": \"transparent\", \"border\": \"1px solid #667eea\", \"border-radius\": \"6px\", \"color\": \"#667eea\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"margin-top\": \"10px\" },\n                                                    onClick: ($event) => (viewOriginalGreeting(index)),\n                                                    onMouseenter: _cache[11] || (_cache[11] = ($event) => ($event.currentTarget.style.background = 'rgba(102, 126, 234, 0.1)')),\n                                                    onMouseleave: _cache[12] || (_cache[12] = ($event) => ($event.currentTarget.style.background = 'transparent'))\n                                                }, [...(_cache[39] || (_cache[39] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-file-lines\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_18)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (greetings.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"15px 35px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"10px\", \"color\": \"white\", \"font-size\": \"15px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"box-shadow\": \"0 4px 15px rgba(102, 126, 234, 0.4)\" },\n                                    onClick: generateFrontendCode,\n                                    onMouseenter: _cache[13] || (_cache[13] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(-3px)';\n                                        $event.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';\n                                    }),\n                                    onMouseleave: _cache[14] || (_cache[14] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(0)';\n                                        $event.currentTarget.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';\n                                    })\n                                }, [...(_cache[40] || (_cache[40] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-code\",\n                                            style: { \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\" HTML \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"15px 35px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"10px\", \"color\": \"white\", \"font-size\": \"15px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"box-shadow\": \"0 4px 15px rgba(16, 185, 129, 0.4)\" },\n                                    onClick: downloadAsJson,\n                                    onMouseenter: _cache[15] || (_cache[15] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(-3px)';\n                                        $event.currentTarget.style.boxShadow = '0 6px 20px rgba(16, 185, 129, 0.6)';\n                                    }),\n                                    onMouseleave: _cache[16] || (_cache[16] = ($event) => {\n                                        $event.currentTarget.style.transform = 'translateY(0)';\n                                        $event.currentTarget.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.4)';\n                                    })\n                                }, [...(_cache[41] || (_cache[41] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-download\",\n                                            style: { \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\" STScript JSON \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _cache[43] || (_cache[43] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"white\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    title: \"\",\n                                    style: { \"width\": \"32px\", \"height\": \"32px\", \"background\": \"rgba(255, 255, 255, 0.2)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\" },\n                                    onClick: openPreviewInNewWindow\n                                }, [...(_cache[42] || (_cache[42] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-external-link-alt\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 0,\n                                    srcdoc: previewHtml.value,\n                                    sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_23))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [...(_cache[44] || (_cache[44] = [\n                                        _createElementVNode(\"div\", null, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-eye-slash\",\n                                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"15px\", \"opacity\": \"0.3\" }\n                                            }),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\" } }, \"\")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIGenerateDialog, {\n                    show: showAiGenerateDialog.value,\n                    \"is-generating\": isGeneratingAi.value,\n                    title: \"AI \",\n                    description: \"AI 20-50...\",\n                    \"show-input\": false,\n                    onClose: closeAiGenerateDialog,\n                    onConfirm: () => { }\n                }, null, 8 /* PROPS */, [\"show\", \"is-generating\"]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiEditDialog.value,\n                    \"is-modifying\": isEditingAi.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: ['', '', '', ''],\n                    onClose: _cache[17] || (_cache[17] = ($event) => (showAiEditDialog.value = false)),\n                    onConfirm: confirmEditDescription\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiStyleDialog.value,\n                    \"is-modifying\": isGeneratingStyle.value,\n                    title: \"AI \",\n                    description: \"AI HTML\",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        '',\n                        '',\n                    ],\n                    onClose: _cache[18] || (_cache[18] = ($event) => (showAiStyleDialog.value = false)),\n                    onConfirm: generateStyleWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\"  \"),\n                (showOriginalDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _cache[26] || (_cache[26] = _withModifiers(($event) => (showOriginalDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"max-width\": \"700px\", \"width\": \"100%\", \"max-height\": \"80vh\", \"display\": \"flex\", \"flex-direction\": \"column\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" },\n                            onClick: _cache[25] || (_cache[25] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                _cache[46] || (_cache[46] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"white\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-file-lines\" }),\n                                    _createElementVNode(\"span\", null, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"rgba(255, 255, 255, 0.7)\", \"cursor\": \"pointer\", \"font-size\": \"20px\", \"padding\": \"4px 8px\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[19] || (_cache[19] = ($event) => (showOriginalDialog.value = false)),\n                                    onMouseenter: _cache[20] || (_cache[20] = ($event) => ($event.currentTarget.style.color = 'white')),\n                                    onMouseleave: _cache[21] || (_cache[21] = ($event) => ($event.currentTarget.style.color = 'rgba(255, 255, 255, 0.7)'))\n                                }, [...(_cache[45] || (_cache[45] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_26, _toDisplayString(originalGreetingContent.value), 1 /* TEXT */),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 24px\", \"background\": \"white\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#1e3a8a\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[22] || (_cache[22] = ($event) => (showOriginalDialog.value = false)),\n                                    onMouseenter: _cache[23] || (_cache[23] = ($event) => ($event.currentTarget.style.transform = 'translateY(-2px)')),\n                                    onMouseleave: _cache[24] || (_cache[24] = ($event) => ($event.currentTarget.style.transform = 'translateY(0)'))\n                                }, \"  \", 32 /* NEED_HYDRATION */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showCodeDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"backdrop-filter\": \"blur(5px)\" },\n                        onClick: closeCodeDialog\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"#2a2a2a\", \"border-radius\": \"15px\", \"max-width\": \"800px\", \"width\": \"90%\", \"max-height\": \"80vh\", \"display\": \"flex\", \"flex-direction\": \"column\", \"box-shadow\": \"0 20px 60px rgba(0, 0, 0, 0.5)\" },\n                            onClick: _cache[27] || (_cache[27] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", { style: { \"padding\": \"20px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } }, [\n                                _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"color\": \"#e0e0e0\", \"font-size\": \"18px\", \"margin\": \"0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-code\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"font-size\": \"20px\", \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"transition\": \"color 0.2s ease\" },\n                                    onClick: closeCodeDialog\n                                }, [...(_cache[47] || (_cache[47] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_28, [\n                                _cache[50] || (_cache[50] = _createElementVNode(\"div\", { style: { \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\", \"color\": \"#e0e0e0\" } }, [\n                                    _createElementVNode(\"p\", { style: { \"margin-bottom\": \"10px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"strong\", null, \"\")\n                                    ]),\n                                    _createElementVNode(\"ol\", { style: { \"margin-left\": \"20px\", \"color\": \"#aaa\", \"line-height\": \"1.8\" } }, [\n                                        _createElementVNode(\"li\", null, \"\"),\n                                        _createElementVNode(\"li\", null, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"code\", { style: { \"background\": \"#2a2a2a\", \"padding\": \"2px 6px\", \"border-radius\": \"4px\", \"color\": \"#667eea\" } }, \"\"),\n                                            _createTextVNode(\" \")\n                                        ]),\n                                        _createElementVNode(\"li\", null, \"\")\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                    _createElementVNode(\"pre\", _hoisted_30, [\n                                        _createElementVNode(\"code\", _hoisted_31, _toDisplayString(generatedCode.value), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"100%\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px\", \"border-radius\": \"8px\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"8px\" },\n                                    onClick: copyCode\n                                }, [\n                                    _cache[49] || (_cache[49] = _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(copyButtonText.value), 1 /* TEXT */)\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GreetingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GreetingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GreetingsTab.vue?vue&type=style&index=0&id=3100a601&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3100a601\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vShow as _vShow, withDirectives as _withDirectives, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"help-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { style: { \"padding\": \"0 10px 20px 10px\" } };\nconst _hoisted_3 = { style: { \"padding\": \"0 10px 20px 10px\" } };\nimport { ref } from 'vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HelpTab',\n    setup(__props) {\n        const expandedSections = ref({\n            usage: false,\n            changelog: false,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[10] || (_cache[10] = _createStaticVNode(\"<div style=\\\"padding:20px 28px;background:linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        );backdrop-filter:blur(12px);border-radius:14px;margin-bottom:20px;border:1px solid rgba(255, 255, 255, 0.06);box-shadow:0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2);text-align:center;\\\" data-v-69c7c08e><div style=\\\"font-size:48px;margin-bottom:10px;\\\" data-v-69c7c08e></div><h2 style=\\\"margin:0 0 10px 0;color:#4a9eff;font-size:24px;font-weight:600;\\\" data-v-69c7c08e>mzrodyu</h2><div style=\\\"color:#888;font-size:14px;margin-bottom:15px;\\\" data-v-69c7c08e> v1.33</div><!--  --><div style=\\\"margin-top:20px;padding:15px 20px;background:rgba(220, 53, 69, 0.1);border:1px solid rgba(220, 53, 69, 0.3);border-radius:8px;text-align:left;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:8px;margin-bottom:10px;\\\" data-v-69c7c08e><i class=\\\"fa-solid fa-shield-halved\\\" style=\\\"color:#dc3545;font-size:16px;\\\" data-v-69c7c08e></i><span style=\\\"color:#dc3545;font-weight:600;font-size:14px;\\\" data-v-69c7c08e></span></div><div style=\\\"color:#e0e0e0;font-size:13px;line-height:1.6;\\\" data-v-69c7c08e><div style=\\\"margin-bottom:5px;\\\" data-v-69c7c08e> <strong style=\\\"color:#ffc107;\\\" data-v-69c7c08e>/</strong></div><div style=\\\"margin-bottom:5px;\\\" data-v-69c7c08e> <strong style=\\\"color:#dc3545;\\\" data-v-69c7c08e></strong></div><div style=\\\"margin-bottom:5px;\\\" data-v-69c7c08e> </div><div data-v-69c7c08e> <strong style=\\\"color:#dc3545;\\\" data-v-69c7c08e></strong></div></div></div></div>\", 1)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                    onClick: _cache[0] || (_cache[0] = ($event) => (expandedSections.value.usage = !expandedSections.value.usage)),\n                    onMouseenter: _cache[1] || (_cache[1] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                        $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                        $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                    }),\n                    onMouseleave: _cache[2] || (_cache[2] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                        $event.currentTarget.style.transform = 'none';\n                        $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                    })\n                }, [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-book-open\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([expandedSections.value.usage ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                        style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                    }, null, 2 /* CLASS */)\n                ], 32 /* NEED_HYDRATION */),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_2, [...(_cache[7] || (_cache[7] = [\n                        _createStaticVNode(\"<div style=\\\"background:#2a2a2a;border:1px solid #3a3a3a;border-radius:8px;padding:20px;color:#e0e0e0;line-height:1.8;\\\" data-v-69c7c08e><h4 style=\\\"color:#4a9eff;margin-top:0;margin-bottom:15px;font-size:16px;\\\" data-v-69c7c08e> </h4><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-69c7c08e><li data-v-69c7c08e><strong data-v-69c7c08e></strong>/</li><li data-v-69c7c08e><strong data-v-69c7c08e></strong> AI </li><li data-v-69c7c08e><strong data-v-69c7c08e></strong> JSON </li><li data-v-69c7c08e><strong data-v-69c7c08e>MVU Beta</strong>$meta </li><li data-v-69c7c08e><strong data-v-69c7c08e></strong></li></ul><h4 style=\\\"color:#4a9eff;margin-top:25px;margin-bottom:15px;font-size:16px;\\\" data-v-69c7c08e> </h4><div style=\\\"margin-bottom:15px;padding:12px 15px;background:rgba(220, 53, 69, 0.1);border-left:3px solid #dc3545;border-radius:4px;\\\" data-v-69c7c08e><div style=\\\"color:#dc3545;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> API </div><div style=\\\"font-size:13px;color:#e0e0e0;line-height:1.6;\\\" data-v-69c7c08e><div style=\\\"margin-bottom:8px;\\\" data-v-69c7c08e><strong data-v-69c7c08e></strong><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-69c7c08e><li data-v-69c7c08e><code data-v-69c7c08e>https://api.openai.com</code>   <code data-v-69c7c08e>/v1</code></li><li data-v-69c7c08e><code data-v-69c7c08e>https://api.openai.com/v1</code>  </li><li data-v-69c7c08e><code data-v-69c7c08e>https://your-proxy.com/v1/chat/completions</code>  </li></ul></div><div style=\\\"margin-bottom:5px;\\\" data-v-69c7c08e><strong data-v-69c7c08e>OpenAI </strong><code style=\\\"background:rgba(220, 53, 69, 0.2);padding:2px 6px;border-radius:4px;\\\" data-v-69c7c08e>https://api.openai.com</code></div><div data-v-69c7c08e><strong data-v-69c7c08e>Gemini AI Studio</strong><code style=\\\"background:rgba(220, 53, 69, 0.2);padding:2px 6px;border-radius:4px;\\\" data-v-69c7c08e>https://generativelanguage.googleapis.com/v1beta/openai/</code></div></div></div><ul style=\\\"margin:5px 0;padding-left:20px;\\\" data-v-69c7c08e><li data-v-69c7c08e><strong data-v-69c7c08e></strong>      </li><li data-v-69c7c08e><strong data-v-69c7c08e></strong>&quot;&quot; API</li><li data-v-69c7c08e><strong data-v-69c7c08e></strong> 20-30 </li></ul></div>\", 1)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, expandedSections.value.usage]\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                    onClick: _cache[3] || (_cache[3] = ($event) => (expandedSections.value.changelog = !expandedSections.value.changelog)),\n                    onMouseenter: _cache[4] || (_cache[4] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                        $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                        $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                    }),\n                    onMouseleave: _cache[5] || (_cache[5] = ($event) => {\n                        $event.currentTarget.style.background =\n                            'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                        $event.currentTarget.style.transform = 'none';\n                        $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                    })\n                }, [\n                    _cache[8] || (_cache[8] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-clock-rotate-left\",\n                            style: { \"color\": \"#28a745\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([expandedSections.value.changelog ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                        style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                    }, null, 2 /* CLASS */)\n                ], 32 /* NEED_HYDRATION */),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_3, [...(_cache[9] || (_cache[9] = [\n                        _createStaticVNode(\"<div style=\\\"background:#2a2a2a;border:1px solid #3a3a3a;border-radius:8px;padding:20px;color:#e0e0e0;line-height:1.8;\\\" data-v-69c7c08e><!-- v1.33 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.33</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-06</span></div><ul class=\\\"update-list\\\" data-v-69c7c08e><li class=\\\"update-item\\\" data-v-69c7c08e></li><li class=\\\"update-item\\\" data-v-69c7c08e></li><li class=\\\"update-item\\\" data-v-69c7c08e></li><li class=\\\"update-item\\\" data-v-69c7c08e>AI </li><li class=\\\"update-item\\\" data-v-69c7c08e>AI </li><li class=\\\"update-item\\\" data-v-69c7c08e> AI AIHTML</li><li class=\\\"update-item\\\" data-v-69c7c08e></li><li class=\\\"update-item\\\" data-v-69c7c08e> STScript JSON </li><li class=\\\"update-item\\\" data-v-69c7c08e></li></ul></div><!-- v1.32 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.32</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-06</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e></li></ul></div></div><!-- v1.31 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.31</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-05</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e>AI </li><li data-v-69c7c08e> AI  XML </li></ul></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e></li><li data-v-69c7c08e> AI  API </li></ul></div></div><!-- v1.27 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.27</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-05</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e> MVU Beta $meta </li><li data-v-69c7c08e> JSON </li><li data-v-69c7c08e> ABO </li></ul></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#6366f1;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e> AI  max_tokens  temperature</li><li data-v-69c7c08e>MVU Beta </li></ul></div></div><!-- v1.26 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #64748b 0%, #475569 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.26</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-02</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e></li></ul></div></div><!-- v1.23 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #10b981 0%, #059669 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.23</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-11-02</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#10b981;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e> AI </li><li data-v-69c7c08e> 50 </li><li data-v-69c7c08e></li></ul></div></div><!-- v1.15 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.15</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-10-31</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e> AI </li><li data-v-69c7c08e></li><li data-v-69c7c08e> AI </li></ul></div></div><!-- v1.2 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:linear-gradient(135deg, #a855f7 0%, #9333ea 100%);color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.2</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-10-30</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e>AI </li><li data-v-69c7c08e></li></ul></div></div><!-- v1.05 --><div style=\\\"margin-bottom:25px;\\\" data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:#4a9eff;color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.05</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-10-30</span></div><div style=\\\"margin-bottom:15px;\\\" data-v-69c7c08e><div style=\\\"color:#28a745;font-weight:600;margin-bottom:8px;\\\" data-v-69c7c08e> </div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e></li></ul></div></div><!-- v1.00 --><div data-v-69c7c08e><div style=\\\"display:flex;align-items:center;gap:10px;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #3a3a3a;\\\" data-v-69c7c08e><span style=\\\"background:#888;color:white;padding:4px 10px;border-radius:12px;font-size:13px;font-weight:600;\\\" data-v-69c7c08e>v1.00</span><span style=\\\"color:#888;font-size:13px;\\\" data-v-69c7c08e>2025-10-29</span></div><ul style=\\\"margin:5px 0;padding-left:20px;font-size:14px;\\\" data-v-69c7c08e><li data-v-69c7c08e> </li><li data-v-69c7c08e>//</li></ul></div></div>\", 1)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, expandedSections.value.changelog]\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[11] || (_cache[11] = _createStaticVNode(\"<div style=\\\"padding:15px 20px;background:rgba(30, 30, 30, 0.5);border:1px solid #3a3a3a;border-radius:8px;text-align:center;color:#888;font-size:13px;\\\" data-v-69c7c08e><div style=\\\"margin-bottom:8px;\\\" data-v-69c7c08e>Made with <span style=\\\"color:#dc3545;\\\" data-v-69c7c08e></span> by mzrodyu</div><div style=\\\"font-size:12px;\\\" data-v-69c7c08e>  <a href=\\\"https://github.com/SillyTavern/SillyTavern\\\" target=\\\"_blank\\\" style=\\\"color:#4a9eff;text-decoration:none;\\\" data-v-69c7c08e>SillyTavern</a>  <a href=\\\"https://n0vi028.github.io/JS-Slash-Runner-Doc/\\\" target=\\\"_blank\\\" style=\\\"color:#4a9eff;text-decoration:none;\\\" data-v-69c7c08e>Tavern Helper</a></div></div>\", 1))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HelpTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HelpTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HelpTab.vue?vue&type=style&index=0&id=69c7c08e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-69c7c08e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, createStaticVNode as _createStaticVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = { style: { \"background\": \"linear-gradient(135deg, rgba(102, 126, 234, 0.08), rgba(118, 75, 162, 0.08))\", \"border\": \"1px solid rgba(102, 126, 234, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin\": \"0 0 12px 0\" }\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = { style: { \"position\": \"relative\", \"z-index\": \"1\" } };\nconst _hoisted_8 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_9 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"output-section\"\n};\nconst _hoisted_11 = { class: \"code-output\" };\nconst _hoisted_12 = { style: { \"margin-top\": \"15px\", \"padding\": \"12px\", \"background\": \"rgba(74, 158, 255, 0.05)\", \"border\": \"1px solid rgba(74, 158, 255, 0.2)\", \"border-radius\": \"8px\" } };\nconst _hoisted_13 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"flex-wrap\": \"wrap\" } };\nconst _hoisted_14 = { class: \"tool-section\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_16 = { style: { \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.08), rgba(245, 158, 11, 0.08))\", \"border\": \"1px solid rgba(251, 191, 36, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin\": \"0 0 12px 0\" }\n};\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = { style: { \"position\": \"relative\", \"z-index\": \"1\" } };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_21 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_22 = { class: \"code-output\" };\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { getScriptIdSafe } from '../utils';\nimport AIModifyDialog from './AIModifyDialog.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MvuBetaTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        const expanded = ref({\n            structure: true,\n            prompt: false,\n        });\n        function toggleExpanded(key) {\n            expanded.value[key] = !expanded.value[key];\n        }\n        // AI\n        const aiStructurePrompt = ref('');\n        const isGeneratingAI = ref(false);\n        const aiPromptDescription = ref('');\n        const isGeneratingPrompt = ref(false);\n        // \n        const originalStructurePrompt = ref('');\n        const originalPromptDescription = ref('');\n        // \n        const showStructureModifyDialog = ref(false);\n        const isModifyingStructure = ref(false);\n        const showPromptModifyDialog = ref(false);\n        const isModifyingPrompt = ref(false);\n        // \n        const varName = ref('');\n        const subFields = ref('');\n        const generatedStructure = ref('');\n        const variableCategories = ref('');\n        const generatedPrompt = ref('');\n        function copyToClipboard(text) {\n            navigator.clipboard.writeText(text).then(() => {\n                window.toastr.success('');\n            });\n        }\n        function generateStructure() {\n            if (!varName.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            const result = {\n                $meta: {\n                    extensible: false,\n                    strictSet: true,\n                },\n            };\n            result[varName.value] = parseSubFields();\n            generatedStructure.value = JSON.stringify(result, null, 2);\n        }\n        function parseSubFields() {\n            const lines = subFields.value.split('\\n').filter(l => l.trim());\n            const obj = {};\n            lines.forEach(line => {\n                const parts = line.split(':').map(s => s.trim());\n                const name = parts[0];\n                const type = parts[1] || 'string';\n                const desc = parts[2] || '...';\n                if (!name)\n                    return;\n                if (type === 'number') {\n                    obj[name] = [0, desc];\n                }\n                else if (type === 'string') {\n                    obj[name] = ['', desc];\n                }\n                else if (type === 'array') {\n                    obj[name] = [[], desc];\n                }\n                else if (type === 'object') {\n                    obj[name] = [{}, desc];\n                }\n                else {\n                    obj[name] = [null, desc];\n                }\n            });\n            return obj;\n        }\n        function copyGenerated() {\n            copyToClipboard(generatedStructure.value);\n        }\n        // AI\n        async function handleAIGenerateStructure() {\n            if (!aiStructurePrompt.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                window.toastr.error(' API  API Key');\n                return;\n            }\n            // \n            originalStructurePrompt.value = aiStructurePrompt.value;\n            isGeneratingAI.value = true;\n            try {\n                const systemPrompt = ` MVU Beta  [InitVar] JSON\n\n\n1.  \"stat_data\" \n2. : [, \"\"]\n3. $meta \n4. \n5. 20\n\n\n{\n  \"$meta\": {\"extensible\": false, \"strictSet\": true},\n  \"\": {\n    \"\": [, \"\"]\n  }\n}\n\n JSON`;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: `${aiStructurePrompt.value}\\n\\n [InitVar] JSON` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }),\n                });\n                // \n                const responseText = await response.text();\n                if (!response.ok) {\n                    // \n                    let errorMessage = `API : ${response.status}`;\n                    try {\n                        const errorData = JSON.parse(responseText);\n                        if (errorData.error) {\n                            errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n                        }\n                        else if (errorData.message) {\n                            errorMessage = `${errorMessage} - ${errorData.message}`;\n                        }\n                        else {\n                            errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n                        }\n                    }\n                    catch (e) {\n                        errorMessage = `${errorMessage} - ${responseText.slice(0, 200)}`;\n                    }\n                    console.error('API :', errorMessage);\n                    console.error(' URL:', settings.value.api_endpoint);\n                    console.error(':', JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n                            { role: 'user', content: `${aiStructurePrompt.value.substring(0, 100)}...` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }, null, 2));\n                    throw new Error(errorMessage);\n                }\n                // \n                const data = JSON.parse(responseText);\n                // \n                let result = '';\n                if (data.choices && data.choices[0] && data.choices[0].message) {\n                    result = data.choices[0].message.content || '';\n                }\n                else if (data.data && data.data.choices && data.data.choices[0]) {\n                    //  API  data.data.choices \n                    result = data.data.choices[0].message?.content || '';\n                }\n                else if (data.content) {\n                    result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n                }\n                console.log('AI :', result);\n                //  JSON\n                let jsonText = result;\n                // \n                jsonText = jsonText.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n                //  JSON \n                const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n                if (!jsonMatch) {\n                    throw new Error(' JSON ');\n                }\n                jsonText = jsonMatch[0];\n                //  JSON\n                let bracketCount = 0;\n                let inString = false;\n                let escapeNext = false;\n                let lastValidPos = jsonText.length;\n                for (let i = 0; i < jsonText.length; i++) {\n                    const char = jsonText[i];\n                    if (escapeNext) {\n                        escapeNext = false;\n                        continue;\n                    }\n                    if (char === '\\\\') {\n                        escapeNext = true;\n                        continue;\n                    }\n                    if (char === '\"' && !inString) {\n                        inString = true;\n                        continue;\n                    }\n                    else if (char === '\"' && inString) {\n                        inString = false;\n                        continue;\n                    }\n                    if (inString)\n                        continue;\n                    if (char === '{')\n                        bracketCount++;\n                    else if (char === '}')\n                        bracketCount--;\n                    if (bracketCount === 0) {\n                        lastValidPos = i + 1;\n                        break;\n                    }\n                }\n                jsonText = jsonText.substring(0, lastValidPos);\n                // \n                if (bracketCount > 0) {\n                    console.warn(`JSON  ${bracketCount} ...`);\n                    jsonText += '}'.repeat(bracketCount);\n                }\n                //  JSON\n                // \n                jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n                // \n                jsonText = jsonText.replace(/\\/\\/[^\\n]*/g, '');\n                jsonText = jsonText.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n                let parsed;\n                try {\n                    parsed = JSON.parse(jsonText);\n                }\n                catch (e) {\n                    console.error('JSON :', jsonText);\n                    throw new Error(`JSON : ${e.message} AI  JSON`);\n                }\n                const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n                varName.value = varNameParsed;\n                const varData = parsed[varNameParsed] || {};\n                const fields = [];\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    const value = varData[key];\n                    if (Array.isArray(value) && value.length === 2) {\n                        const val = value[0];\n                        const type = typeof val === 'number'\n                            ? 'number'\n                            : typeof val === 'string'\n                                ? 'string'\n                                : Array.isArray(val)\n                                    ? 'array'\n                                    : 'object';\n                        const desc = value[1] || '...';\n                        fields.push(`${key}:${type}:${desc}`);\n                    }\n                }\n                subFields.value = fields.join('\\n');\n                generatedStructure.value = JSON.stringify(parsed, null, 2);\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI:', error);\n                window.toastr.error(`AI: ${error.message}`);\n            }\n            finally {\n                isGeneratingAI.value = false;\n            }\n        }\n        function autoGeneratePrompt() {\n            if (!generatedStructure.value) {\n                window.toastr.error(' [InitVar] ');\n                return;\n            }\n            try {\n                const structure = JSON.parse(generatedStructure.value);\n                const varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n                const varData = structure[varNameParsed] || {};\n                let fieldCount = 0;\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    fieldCount++;\n                }\n                variableCategories.value = `${varNameParsed} - ${fieldCount} fields`;\n                expanded.value.prompt = true;\n                generatePrompt();\n                window.toastr.success(' COT ');\n                setTimeout(() => {\n                    const promptSection = document.querySelector('.tool-section:nth-child(2)');\n                    promptSection?.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        }\n        function generatePrompt() {\n            const categories = variableCategories.value.trim() || ' - X fields';\n            const promptTemplate = `<%_ setLocalVar('initialized_lorebooks.-YourLorebook[0]', true); _%>\n\n\n\n\n\n<status_current_variables>\n{{get_message_variable::stat_data}}\n</status_current_variables>\n\n\n\nrule:\n  description:\n    - Output update analysis at the end of response\n    - Variable updates are omitted in context but you must still add them\n    - **CRITICAL**: For MVU format [value, description], ALWAYS use [0] suffix to access the value part\n    - 4 commands available: \\\\\\`_.set\\\\\\` (2-3 args), \\\\\\`_.insert\\\\\\` (2-3 args), \\\\\\`_.remove\\\\\\` (1-2 args), \\\\\\`_.add\\\\\\` (2 args)\n    - **RECOMMENDED**: Use \\\\\\`_.insert\\\\\\` instead of \\\\\\`_.assign\\\\\\`\n    - strictSet enabled: [0] suffix is mandatory for all value access\n\n  command_usage:\n    - \\\\\\`_.set('path[0]', old?, new);//reason\\\\\\` - Replace value\n    - \\\\\\`_.add('path[0]', delta);//reason\\\\\\` - Add/subtract numbers only\n    - \\\\\\`_.insert('path[0]', value);//reason\\\\\\` - Add to array end\n    - \\\\\\`_.insert('path[0]', index, value);//reason\\\\\\` - Insert to array at position\n    - \\\\\\`_.insert('path', key, value);//reason\\\\\\` - Add key-value to object\n    - \\\\\\`_.remove('path[0]', value);//reason\\\\\\` - Remove from array/object\n\n  analysis:\n    You MUST follow this Chain-of-Thought (COT) analysis process step by step:\n\n    **STEP 1: Scene Analysis (50 words max, IN ENGLISH)**\n    - Identify current scene/stage/phase\n    - Describe what happened\n    - Determine what changes occurred (time/location/status/progress)\n\n    **STEP 2: Time & Key Status Check**\n    - Extract current time/status from story context\n    - Read key variables from <status_current_variables>\n    - Calculate changes\n    - Decision: What needs to be updated?\n\n    **STEP 3: Systematic Variable Review (check EVERY variable category)**\n    Go through each variable category systematically and mark Y or N:\n\n    ${categories}:\n      - 1[0]: [Y/N] - explain\n      - 2[0]: [Y/N] - explain\n\n    **STEP 4: Command Selection**\n    For each variable marked Y, determine which command to use\n\n    **STEP 5: Analyze Other Variable Systems**\n    - stat_data detailed COT: COMPLETED\n    - Other variable groups? [YES/NO]\n\n    **STEP 6: Final Validation Checklist**\n    - All [0] suffixes present? [YES/NO]\n    - All Y variables have corresponding commands? [YES/NO]\n    - All commands have clear Chinese comments? [YES/NO]\n\n  format: |-\n    <UpdateVariable>\n        <ThinkingProcess>\n            **STEP 1: Scene Analysis**\n            [50 words]\n\n            **STEP 2: Time & Key Status Check**\n            - Current status: ...\n            - Stored variable[0]: ...\n            - Changes: ...\n            - Update decision: ...\n\n            **STEP 3: Variable Review (stat_data)**\n            [List categories with Y/N]\n\n            **STEP 4: Command Selection**\n            [For each Y variable, state which command]\n\n            **STEP 5: Other Systems**\n            - stat_data COT: COMPLETED\n            - Other groups? NO\n\n            **STEP 6: Final Check**\n            - [0] suffixes? YES\n            - All Y have commands? YES\n            - Chinese comments? YES\n        </ThinkingProcess>\n\n        _.set('path[0]', old?, new);//reason\n        _.add('path[0]', delta);//reason\n        _.insert('path[0]', value);//reason\n        _.remove('path[0]', value);//reason\n    </UpdateVariable>\n\n  example: |-\n    <UpdateVariable>\n        <ThinkingProcess>\n            **STEP 1: Scene Analysis**\n            User and character had conversation at library. User helped find a book. Time advanced from 10:00 to 10:30. Character's impression improved.\n\n            **STEP 2: Time & Key Status Check**\n            - Current time: 10:30\n            - Stored [0]: \"10:00\"\n            - Time passed: 30 minutes\n            - Update decision: Time, Favor\n\n            **STEP 3: Variable Review (stat_data)**\n             - 3 fields:\n              - [0]: Y - Time advanced\n              - [0]: N - Same day\n              - [0]: N - Still at library\n\n             - 1 field:\n              - [0]: Y - Positive interaction\n\n            **STEP 4: Command Selection**\n            - : use _.set\n            - : use _.add\n\n            **STEP 5: Other Systems**\n            - stat_data COT: COMPLETED\n            - Other groups? NO\n\n            **STEP 6: Final Check**\n            - [0] suffixes? YES\n            - All Y have commands? YES\n            - Chinese comments? YES\n        </ThinkingProcess>\n\n        _.set('[0]', '10:00', '10:30');//30\n        _.add('.[0]', 3);//\n    </UpdateVariable>\n\n  specific_rules:\n    -  _.set \n    - /\n    -  _.add \n    -  _.insert _.remove\n    - [0][0]\n    -  $__META_EXTENSIBLE__$  _.insert \n    -  _.insert('', , ) `;\n            generatedPrompt.value = promptTemplate;\n        }\n        function copyPrompt() {\n            copyToClipboard(generatedPrompt.value);\n        }\n        // AI\n        async function handleAIGeneratePrompt() {\n            if (!aiPromptDescription.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                window.toastr.error(' API  API Key');\n                return;\n            }\n            // \n            originalPromptDescription.value = aiPromptDescription.value;\n            isGeneratingPrompt.value = true;\n            try {\n                const systemPrompt = ` MVU Beta COT  6 \n\n## \n1.  {{get_message_variable::stat_data}}\n2.  _.insert  _.assign\n3.  [0] \n4. 6  COT \n\n EJS `;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: `${aiPromptDescription.value}\\n\\n COT ` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }),\n                });\n                // \n                const responseText2 = await response.text();\n                if (!response.ok) {\n                    // \n                    let errorMessage = `API : ${response.status}`;\n                    try {\n                        const errorData = JSON.parse(responseText2);\n                        if (errorData.error) {\n                            errorMessage = `${errorMessage} - ${errorData.error.message || JSON.stringify(errorData.error)}`;\n                        }\n                        else if (errorData.message) {\n                            errorMessage = `${errorMessage} - ${errorData.message}`;\n                        }\n                        else {\n                            errorMessage = `${errorMessage} - ${JSON.stringify(errorData)}`;\n                        }\n                    }\n                    catch (e) {\n                        errorMessage = `${errorMessage} - ${responseText2.slice(0, 200)}`;\n                    }\n                    console.error('API :', errorMessage);\n                    console.error(' URL:', settings.value.api_endpoint);\n                    console.error(':', JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt.substring(0, 100) + '...' },\n                            { role: 'user', content: `${aiPromptDescription.value.substring(0, 100)}...` },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }, null, 2));\n                    throw new Error(errorMessage);\n                }\n                // \n                const data = JSON.parse(responseText2);\n                // \n                let result = '';\n                if (data.choices && data.choices[0] && data.choices[0].message) {\n                    result = data.choices[0].message.content || '';\n                }\n                else if (data.data && data.data.choices && data.data.choices[0]) {\n                    //  API  data.data.choices \n                    result = data.data.choices[0].message?.content || '';\n                }\n                else if (data.content) {\n                    result = typeof data.content === 'string' ? data.content : JSON.stringify(data.content);\n                }\n                generatedPrompt.value = result.trim();\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI:', error);\n                window.toastr.error(`AI: ${error.message}`);\n            }\n            finally {\n                isGeneratingPrompt.value = false;\n            }\n        }\n        // AI \n        async function modifyStructureWithAI(modifyInstruction) {\n            if (!originalStructurePrompt.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingStructure.value = true;\n            try {\n                window.toastr.info('AI ...');\n                const systemPrompt = ` MVU Beta  [InitVar] JSON\n\n\n1.  \"stat_data\" \n2. : [, \"\"]\n3. $meta \n4. \n5. 20\n\n JSON`;\n                const userPrompt = `# \n${originalStructurePrompt.value}\n\n# \n${modifyInstruction}\n\n [InitVar] JSON`;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                //  JSON\n                let jsonText = result.replace(/```json\\s*/gi, '').replace(/```\\s*$/g, '');\n                const jsonMatch = jsonText.match(/\\{[\\s\\S]*$/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                // \n                jsonText = jsonText.replace(/,(\\s*[}\\]])/g, '$1');\n                const parsed = JSON.parse(jsonText);\n                const varNameParsed = Object.keys(parsed).find(k => k !== '$meta') || 'myVar';\n                varName.value = varNameParsed;\n                const varData = parsed[varNameParsed] || {};\n                const fields = [];\n                for (const key in varData) {\n                    if (key === '$meta')\n                        continue;\n                    const value = varData[key];\n                    if (Array.isArray(value) && value.length === 2) {\n                        const val = value[0];\n                        const type = typeof val === 'number'\n                            ? 'number'\n                            : typeof val === 'string'\n                                ? 'string'\n                                : Array.isArray(val)\n                                    ? 'array'\n                                    : 'object';\n                        const desc = value[1] || '...';\n                        fields.push(`${key}:${type}:${desc}`);\n                    }\n                }\n                subFields.value = fields.join('\\n');\n                generatedStructure.value = JSON.stringify(parsed, null, 2);\n                // \n                originalStructurePrompt.value += `\\n\\n${modifyInstruction}`;\n                window.toastr.success(' AI ');\n                showStructureModifyDialog.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingStructure.value = false;\n            }\n        }\n        // AI \n        async function modifyPromptWithAI(modifyInstruction) {\n            if (!originalPromptDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingPrompt.value = true;\n            try {\n                window.toastr.info('AI ...');\n                const systemPrompt = ` MVU Beta COT  6 \n\n## \n1.  {{get_message_variable::stat_data}}\n2.  _.insert  _.assign\n3.  [0] \n4. 6  COT \n\n EJS `;\n                const userPrompt = `# \n${originalPromptDescription.value}\n\n# \n${modifyInstruction}\n\n COT `;\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 3000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                generatedPrompt.value = result.trim();\n                // \n                originalPromptDescription.value += `\\n\\n${modifyInstruction}`;\n                window.toastr.success(' AI ');\n                showPromptModifyDialog.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingPrompt.value = false;\n            }\n        }\n        function exportWorldbook() {\n            if (!generatedStructure.value) {\n                window.toastr.error(' [InitVar] ');\n                return;\n            }\n            if (!generatedPrompt.value) {\n                autoGeneratePrompt();\n            }\n            setTimeout(() => {\n                exportAsWorldbook();\n            }, 100);\n        }\n        function exportAsWorldbook() {\n            if (!generatedStructure.value || !generatedPrompt.value) {\n                window.toastr.error(' [InitVar]  COT ');\n                return;\n            }\n            let varNameParsed = 'myVar';\n            try {\n                const structure = JSON.parse(generatedStructure.value);\n                varNameParsed = Object.keys(structure).find(k => k !== '$meta') || 'myVar';\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n            const worldbookEntries = [\n                {\n                    uid: generateUID(),\n                    key: [],\n                    keysecondary: [],\n                    comment: '[InitVar]',\n                    content: generatedStructure.value,\n                    constant: false,\n                    vectorized: false,\n                    selective: true,\n                    selectiveLogic: 0,\n                    addMemo: false,\n                    order: 100,\n                    position: 0,\n                    disable: false,\n                    excludeRecursion: false,\n                    delayUntilRecursion: false,\n                    probability: 100,\n                    useProbability: true,\n                    depth: 4,\n                    group: '',\n                    groupOverride: false,\n                    groupWeight: 100,\n                    scanDepth: null,\n                    caseSensitive: null,\n                    matchWholeWords: null,\n                    useGroupScoring: false,\n                    automationId: '',\n                    role: 0,\n                    sticky: 0,\n                    cooldown: 0,\n                    delay: 0,\n                },\n                {\n                    uid: generateUID(),\n                    key: [],\n                    keysecondary: [],\n                    comment: '',\n                    content: generatedPrompt.value,\n                    constant: true,\n                    vectorized: false,\n                    selective: false,\n                    selectiveLogic: 0,\n                    addMemo: false,\n                    order: 100,\n                    position: 1,\n                    disable: false,\n                    excludeRecursion: false,\n                    delayUntilRecursion: false,\n                    probability: 100,\n                    useProbability: true,\n                    depth: 0,\n                    group: '',\n                    groupOverride: false,\n                    groupWeight: 100,\n                    scanDepth: null,\n                    caseSensitive: null,\n                    matchWholeWords: null,\n                    useGroupScoring: false,\n                    automationId: '',\n                    role: 0,\n                    sticky: 0,\n                    cooldown: 0,\n                    delay: 0,\n                },\n            ];\n            const jsonStr = JSON.stringify(worldbookEntries, null, 2);\n            const blob = new Blob([jsonStr], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `${varNameParsed}_MVU_worldbook.json`;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n            window.toastr.success(`  JSON[InitVar] + `);\n        }\n        function generateUID() {\n            return Date.now() + Math.floor(Math.random() * 1000);\n        }\n        // ====================  ====================\n        // \n        function loadSavedData() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id  MVU ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const savedData = scriptVars.mvu_beta_config;\n                if (savedData) {\n                    if (savedData.varName)\n                        varName.value = savedData.varName;\n                    if (savedData.subFields)\n                        subFields.value = savedData.subFields;\n                    if (savedData.generatedStructure)\n                        generatedStructure.value = savedData.generatedStructure;\n                    if (savedData.variableCategories)\n                        variableCategories.value = savedData.variableCategories;\n                    if (savedData.generatedPrompt)\n                        generatedPrompt.value = savedData.generatedPrompt;\n                    console.log('  MVU Beta ');\n                }\n            }\n            catch (error) {\n                console.error(' MVU Beta :', error);\n            }\n        }\n        // \n        function saveData() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id  MVU ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    mvu_beta_config: {\n                        varName: varName.value,\n                        subFields: subFields.value,\n                        generatedStructure: generatedStructure.value,\n                        variableCategories: variableCategories.value,\n                        generatedPrompt: generatedPrompt.value,\n                    },\n                }, { type: 'script', script_id: scriptId });\n            }\n            catch (error) {\n                console.error(' MVU Beta :', error);\n            }\n        }\n        // \n        onMounted(() => {\n            loadSavedData();\n        });\n        // \n        let saveTimer = null;\n        watch([varName, subFields, generatedStructure, variableCategories, generatedPrompt], () => {\n            if (saveTimer)\n                clearTimeout(saveTimer);\n            saveTimer = window.setTimeout(() => {\n                saveData();\n            }, 1000); // 1\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"div\", {\n                            class: \"section-header\",\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[0] || (_cache[0] = ($event) => (toggleExpanded('structure'))),\n                            onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                            onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [\n                            _cache[41] || (_cache[41] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-database\",\n                                    style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                                }),\n                                _createTextVNode(\" [InitVar]  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(expanded.value.structure ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                            }, null, 2 /* CLASS */)\n                        ], 32 /* NEED_HYDRATION */),\n                        (expanded.value.structure)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                _cache[57] || (_cache[57] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" style=\\\"margin-bottom:15px;\\\" data-v-6329201c><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-6329201c><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-6329201c></i>  MVU Beta  <strong style=\\\"color:#4a9eff;\\\" data-v-6329201c>[InitVar]</strong>  </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-6329201c>  InitVar JSON <strong data-v-6329201c> &quot;stat_data&quot; </strong> </p></div>\", 1)),\n                                _createCommentVNode(\" AI \"),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _cache[46] || (_cache[46] = _createElementVNode(\"h4\", { style: { \"color\": \"#667eea\", \"font-size\": \"14px\", \"margin\": \"0 0 12px 0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }),\n                                        _createTextVNode(\" AI  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _cache[42] || (_cache[42] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((aiStructurePrompt).value = $event)),\n                                            placeholder: \"1-30100\",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[4] || (_cache[4] = (e) => (e.target.style.borderColor = '#667eea')),\n                                            onBlur: _cache[5] || (_cache[5] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, aiStructurePrompt.value]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"ai-generate-btn\",\n                                        disabled: isGeneratingAI.value || !aiStructurePrompt.value.trim(),\n                                        style: _normalizeStyle([{ \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" }, {\n                                                opacity: isGeneratingAI.value || !aiStructurePrompt.value.trim() ? 0.6 : 1,\n                                                cursor: isGeneratingAI.value || !aiStructurePrompt.value.trim() ? 'not-allowed' : 'pointer',\n                                            }]),\n                                        onClick: handleAIGenerateStructure,\n                                        onMouseenter: _cache[6] || (_cache[6] =\n                                            (e) => {\n                                                if (!isGeneratingAI.value && aiStructurePrompt.value.trim()) {\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                                }\n                                            }),\n                                        onMouseleave: _cache[7] || (_cache[7] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                            })\n                                    }, [\n                                        _cache[43] || (_cache[43] = _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[44] || (_cache[44] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_7, _toDisplayString(isGeneratingAI.value ? 'AI ...' : 'AI '), 1 /* TEXT */)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_6),\n                                    _createCommentVNode(\" AI  \"),\n                                    (generatedStructure.value && originalStructurePrompt.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            style: { \"margin-left\": \"12px\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))\", \"border\": \"1px solid rgba(251, 191, 36, 0.4)\", \"border-radius\": \"8px\", \"color\": \"#fbbf24\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.2)\" },\n                                            onClick: _cache[8] || (_cache[8] = ($event) => (showStructureModifyDialog.value = true)),\n                                            onMouseenter: _cache[9] || (_cache[9] =\n                                                (e) => {\n                                                    e.currentTarget.style.background =\n                                                        'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n                                                }),\n                                            onMouseleave: _cache[10] || (_cache[10] =\n                                                (e) => {\n                                                    e.currentTarget.style.background =\n                                                        'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                                                    e.currentTarget.style.transform = 'translateY(0)';\n                                                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n                                                })\n                                        }, [...(_cache[45] || (_cache[45] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-edit\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[47] || (_cache[47] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"8px 0 0 0\" } }, \"  AI  $meta \", -1 /* CACHED */))\n                                ]),\n                                _cache[58] || (_cache[58] = _createElementVNode(\"div\", { style: { \"text-align\": \"center\", \"margin\": \"20px 0\", \"position\": \"relative\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"background\": \"#1a1a1a\", \"padding\": \"0 12px\", \"color\": \"#666\", \"font-size\": \"12px\", \"position\": \"relative\", \"z-index\": \"1\" } }, \"\"),\n                                    _createElementVNode(\"div\", { style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"0\", \"right\": \"0\", \"height\": \"1px\", \"background\": \"rgba(255, 255, 255, 0.1)\", \"z-index\": \"0\" } })\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _cache[48] || (_cache[48] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((varName).value = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"all 0.2s ease\" },\n                                        onFocus: _cache[12] || (_cache[12] = (e) => (e.target.style.borderColor = '#4a9eff')),\n                                        onBlur: _cache[13] || (_cache[13] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, varName.value]\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_9, [\n                                    _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \" :: \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((subFields).value = $event)),\n                                        placeholder: \"\\n:number:[-30,100]\\n:string:\\n:array:\",\n                                        rows: \"5\",\n                                        style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"'Courier New', monospace\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                        onFocus: _cache[15] || (_cache[15] = (e) => (e.target.style.borderColor = '#4a9eff')),\n                                        onBlur: _cache[16] || (_cache[16] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, subFields.value]\n                                    ]),\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"6px 0 0 0\" } }, \" numberstringarrayobject\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-btn\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: generateStructure,\n                                    onMouseenter: _cache[17] || (_cache[17] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(-2px)';\n                                            e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                        }),\n                                    onMouseleave: _cache[18] || (_cache[18] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(0)';\n                                            e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                        })\n                                }, [...(_cache[51] || (_cache[51] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-magic\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { style: { \"position\": \"relative\", \"z-index\": \"1\" } }, \" [InitVar] \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                (generatedStructure.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _cache[56] || (_cache[56] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"font-size\": \"14px\", \"margin-bottom\": \"10px\" } }, \" [InitVar] \", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"pre\", null, _toDisplayString(generatedStructure.value), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-btn-abs\",\n                                                onClick: copyGenerated\n                                            }, [...(_cache[52] || (_cache[52] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _cache[55] || (_cache[55] = _createElementVNode(\"p\", { style: { \"margin\": \"0 0 10px 0\", \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\" } }, [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-link\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_13, [\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"flex\": \"1\", \"min-width\": \"140px\", \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.3))\", \"color\": \"#10b981\", \"border\": \"1px solid rgba(16, 185, 129, 0.4)\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                    onClick: autoGeneratePrompt,\n                                                    onMouseenter: _cache[19] || (_cache[19] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(-1px)';\n                                                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(16, 185, 129, 0.3)';\n                                                        }),\n                                                    onMouseleave: _cache[20] || (_cache[20] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(0)';\n                                                            e.currentTarget.style.boxShadow = 'none';\n                                                        })\n                                                }, [...(_cache[53] || (_cache[53] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-file-alt\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  COT  \", -1 /* CACHED */)\n                                                    ]))], 32 /* NEED_HYDRATION */),\n                                                _createElementVNode(\"button\", {\n                                                    style: { \"flex\": \"1\", \"min-width\": \"140px\", \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(217, 119, 6, 0.3))\", \"color\": \"#f59e0b\", \"border\": \"1px solid rgba(245, 158, 11, 0.4)\", \"border-radius\": \"6px\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                    onClick: exportWorldbook,\n                                                    onMouseenter: _cache[21] || (_cache[21] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(-1px)';\n                                                            e.currentTarget.style.boxShadow = '0 4px 12px rgba(245, 158, 11, 0.3)';\n                                                        }),\n                                                    onMouseleave: _cache[22] || (_cache[22] =\n                                                        (e) => {\n                                                            e.currentTarget.style.transform = 'translateY(0)';\n                                                            e.currentTarget.style.boxShadow = 'none';\n                                                        })\n                                                }, [...(_cache[54] || (_cache[54] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                                                    ]))], 32 /* NEED_HYDRATION */)\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\" COT  \"),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                        _createElementVNode(\"div\", {\n                            class: \"section-header\",\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[23] || (_cache[23] = ($event) => (toggleExpanded('prompt'))),\n                            onMouseenter: _cache[24] || (_cache[24] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                            onMouseleave: _cache[25] || (_cache[25] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [\n                            _cache[59] || (_cache[59] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-file-code\",\n                                    style: { \"color\": \"#fbbf24\", \"font-size\": \"18px\" }\n                                }),\n                                _createTextVNode(\" COT 6  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(expanded.value.prompt ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                            }, null, 2 /* CLASS */)\n                        ], 32 /* NEED_HYDRATION */),\n                        (expanded.value.prompt)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                _cache[71] || (_cache[71] = _createElementVNode(\"div\", {\n                                    class: \"tool-instructions\",\n                                    style: { \"margin-bottom\": \"15px\" }\n                                }, [\n                                    _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-info-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                        }),\n                                        _createTextVNode(\"  MVU Beta  \"),\n                                        _createElementVNode(\"strong\", { style: { \"color\": \"#fbbf24\" } }, \"COT\"),\n                                        _createTextVNode(\" 6  \")\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\" AI \"),\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _cache[64] || (_cache[64] = _createElementVNode(\"h4\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"14px\", \"margin\": \"0 0 12px 0\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }),\n                                        _createTextVNode(\" AI  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => ((aiPromptDescription).value = $event)),\n                                            placeholder: \" AI \",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[27] || (_cache[27] = (e) => (e.target.style.borderColor = '#fbbf24')),\n                                            onBlur: _cache[28] || (_cache[28] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, aiPromptDescription.value]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"ai-generate-btn\",\n                                        disabled: isGeneratingPrompt.value || !aiPromptDescription.value.trim(),\n                                        style: _normalizeStyle([{ \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(251, 191, 36, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" }, {\n                                                opacity: isGeneratingPrompt.value || !aiPromptDescription.value.trim() ? 0.6 : 1,\n                                                cursor: isGeneratingPrompt.value || !aiPromptDescription.value.trim() ? 'not-allowed' : 'pointer',\n                                            }]),\n                                        onClick: handleAIGeneratePrompt,\n                                        onMouseenter: _cache[29] || (_cache[29] =\n                                            (e) => {\n                                                if (!isGeneratingPrompt.value && aiPromptDescription.value.trim()) {\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 6px 20px rgba(251, 191, 36, 0.4)';\n                                                }\n                                            }),\n                                        onMouseleave: _cache[30] || (_cache[30] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.boxShadow = '0 3px 12px rgba(251, 191, 36, 0.3)';\n                                            })\n                                    }, [\n                                        _cache[61] || (_cache[61] = _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */)),\n                                        _cache[62] || (_cache[62] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_19, _toDisplayString(isGeneratingPrompt.value ? 'AI ...' : 'AI '), 1 /* TEXT */)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_18),\n                                    _createCommentVNode(\" AI  \"),\n                                    (generatedPrompt.value && originalPromptDescription.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            style: { \"margin-left\": \"12px\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))\", \"border\": \"1px solid rgba(251, 191, 36, 0.4)\", \"border-radius\": \"8px\", \"color\": \"#fbbf24\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 8px rgba(251, 191, 36, 0.2)\" },\n                                            onClick: _cache[31] || (_cache[31] = ($event) => (showPromptModifyDialog.value = true)),\n                                            onMouseenter: _cache[32] || (_cache[32] =\n                                                (e) => {\n                                                    e.currentTarget.style.background =\n                                                        'linear-gradient(135deg, rgba(251, 191, 36, 0.35), rgba(245, 158, 11, 0.45))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.6)';\n                                                    e.currentTarget.style.transform = 'translateY(-2px)';\n                                                    e.currentTarget.style.boxShadow = '0 4px 12px rgba(251, 191, 36, 0.35)';\n                                                }),\n                                            onMouseleave: _cache[33] || (_cache[33] =\n                                                (e) => {\n                                                    e.currentTarget.style.background =\n                                                        'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.3))';\n                                                    e.currentTarget.style.borderColor = 'rgba(251, 191, 36, 0.4)';\n                                                    e.currentTarget.style.transform = 'translateY(0)';\n                                                    e.currentTarget.style.boxShadow = '0 2px 8px rgba(251, 191, 36, 0.2)';\n                                                })\n                                        }, [...(_cache[63] || (_cache[63] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-edit\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[65] || (_cache[65] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"8px 0 0 0\" } }, \"  AI  6  COT  \", -1 /* CACHED */))\n                                ]),\n                                _cache[72] || (_cache[72] = _createElementVNode(\"div\", { style: { \"text-align\": \"center\", \"margin\": \"20px 0\", \"position\": \"relative\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"background\": \"#1a1a1a\", \"padding\": \"0 12px\", \"color\": \"#666\", \"font-size\": \"12px\", \"position\": \"relative\", \"z-index\": \"1\" } }, \"\"),\n                                    _createElementVNode(\"div\", { style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"0\", \"right\": \"0\", \"height\": \"1px\", \"background\": \"rgba(255, 255, 255, 0.1)\", \"z-index\": \"0\" } })\n                                ], -1 /* CACHED */)),\n                                (generatedStructure.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                                        _cache[66] || (_cache[66] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  STEP 3 \", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((variableCategories).value = $event)),\n                                            placeholder: \"\\n - 3 fields\\n - 2 fields\\n - 1 field\",\n                                            rows: \"4\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"'Courier New', monospace\", \"line-height\": \"1.5\", \"transition\": \"all 0.2s ease\" },\n                                            onFocus: _cache[35] || (_cache[35] = (e) => (e.target.style.borderColor = '#fbbf24')),\n                                            onBlur: _cache[36] || (_cache[36] = (e) => (e.target.style.borderColor = '#3a3a3a'))\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [_vModelText, variableCategories.value]\n                                        ]),\n                                        _cache[67] || (_cache[67] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin\": \"6px 0 0 0\" } }, \" AI  STEP 3 \", -1 /* CACHED */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-btn\",\n                                    style: { \"margin-top\": \"10px\", \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: generatePrompt,\n                                    onMouseenter: _cache[37] || (_cache[37] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(-2px)';\n                                            e.currentTarget.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.4)';\n                                        }),\n                                    onMouseleave: _cache[38] || (_cache[38] =\n                                        (e) => {\n                                            e.currentTarget.style.transform = 'translateY(0)';\n                                            e.currentTarget.style.boxShadow = '0 3px 12px rgba(102, 126, 234, 0.3)';\n                                        })\n                                }, [...(_cache[68] || (_cache[68] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-magic\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\", \"position\": \"relative\", \"z-index\": \"1\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { style: { \"position\": \"relative\", \"z-index\": \"1\" } }, \" COT \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */),\n                                (generatedPrompt.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                        _cache[70] || (_cache[70] = _createElementVNode(\"h4\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"14px\", \"margin-bottom\": \"10px\" } }, \" COT \", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_22, [\n                                            _createElementVNode(\"pre\", null, _toDisplayString(generatedPrompt.value), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-btn-abs\",\n                                                onClick: copyPrompt\n                                            }, [...(_cache[69] || (_cache[69] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\" AI  -  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showStructureModifyDialog.value,\n                    \"is-modifying\": isModifyingStructure.value,\n                    title: \"AI  [InitVar] \",\n                    description: \" AI  MVU \",\n                    examples: [\n                        ' number',\n                        '',\n                        '',\n                        '',\n                    ],\n                    onClose: _cache[39] || (_cache[39] = ($event) => (showStructureModifyDialog.value = false)),\n                    onConfirm: modifyStructureWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI  -  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showPromptModifyDialog.value,\n                    \"is-modifying\": isModifyingPrompt.value,\n                    title: \"AI  COT \",\n                    description: \" AI \",\n                    examples: [\n                        ' STEP 2 ',\n                        '',\n                        '',\n                        ' STEP 3 ',\n                    ],\n                    onClose: _cache[40] || (_cache[40] = ($event) => (showPromptModifyDialog.value = false)),\n                    onConfirm: modifyPromptWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"])\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MvuBetaTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MvuBetaTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MvuBetaTab.vue?vue&type=style&index=0&id=6329201c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6329201c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"progress-overlay\",\n    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.85)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"999999\", \"animation\": \"fadeIn 0.2s ease\" }\n};\nconst _hoisted_2 = {\n    class: \"progress-card\",\n    style: { \"background\": \"linear-gradient(145deg, #2a2a2a, #1e1e1e)\", \"border-radius\": \"16px\", \"padding\": \"35px\", \"width\": \"520px\", \"max-width\": \"90vw\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"border\": \"1px solid #3a3a3a\", \"animation\": \"slideUp 0.3s ease\" }\n};\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin-bottom\": \"24px\" } };\nconst _hoisted_4 = { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\" } };\nconst _hoisted_5 = {\n    class: \"progress-bar-container\",\n    style: { \"width\": \"100%\", \"height\": \"10px\", \"background\": \"rgba(30, 30, 30, 0.8)\", \"border-radius\": \"5px\", \"overflow\": \"hidden\", \"margin-bottom\": \"20px\", \"box-shadow\": \"inset 0 1px 3px rgba(0, 0, 0, 0.3)\" }\n};\nconst _hoisted_6 = {\n    class: \"current-stage\",\n    style: { \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"margin-bottom\": \"12px\", \"min-height\": \"20px\" }\n};\nconst _hoisted_7 = {\n    key: 0,\n    class: \"details-area\",\n    style: { \"max-height\": \"150px\", \"overflow-y\": \"auto\", \"background\": \"rgba(10, 10, 10, 0.5)\", \"border-radius\": \"8px\", \"padding\": \"12px\", \"margin-bottom\": \"16px\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"11px\", \"color\": \"#a0a0a0\", \"line-height\": \"1.6\" }\n};\nconst _hoisted_8 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_9 = {\n    class: \"progress-percent\",\n    style: { \"color\": \"#4a9eff\", \"font-size\": \"16px\", \"font-weight\": \"600\" }\n};\nconst _hoisted_10 = {\n    class: \"elapsed-time\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nimport { ref, watch, onUnmounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProgressDialog',\n    props: {\n        show: { type: Boolean },\n        title: { default: 'AI ' },\n        initialMessage: { default: '...' },\n        cancellable: { type: Boolean, default: false }\n    },\n    emits: [\"cancel\"],\n    setup(__props, { expose: __expose }) {\n        const props = __props;\n        // \n        const progress = ref(0);\n        const currentMessage = ref(props.initialMessage);\n        const details = ref([]);\n        const startTime = ref(0);\n        const elapsedSeconds = ref(0);\n        let elapsedInterval = null;\n        // \n        watch(() => props.show, newVal => {\n            if (newVal) {\n                // \n                progress.value = 0;\n                currentMessage.value = props.initialMessage;\n                details.value = [];\n                startTime.value = Date.now();\n                elapsedSeconds.value = 0;\n                // \n                if (elapsedInterval) {\n                    clearInterval(elapsedInterval);\n                }\n                elapsedInterval = window.setInterval(() => {\n                    elapsedSeconds.value = Math.floor((Date.now() - startTime.value) / 1000);\n                }, 1000);\n            }\n            else {\n                // \n                if (elapsedInterval) {\n                    clearInterval(elapsedInterval);\n                    elapsedInterval = null;\n                }\n            }\n        });\n        onUnmounted(() => {\n            if (elapsedInterval) {\n                clearInterval(elapsedInterval);\n            }\n        });\n        // \n        function setProgress(percent) {\n            progress.value = Math.min(100, Math.max(0, percent));\n        }\n        function setMessage(message) {\n            currentMessage.value = message;\n        }\n        function addDetail(detail) {\n            details.value.push(detail);\n            // \n            setTimeout(() => {\n                const detailsArea = document.querySelector('.details-area');\n                if (detailsArea) {\n                    detailsArea.scrollTop = detailsArea.scrollHeight;\n                }\n            }, 50);\n        }\n        function clearDetails() {\n            details.value = [];\n        }\n        function complete() {\n            progress.value = 100;\n            currentMessage.value = '';\n        }\n        __expose({\n            setProgress,\n            setMessage,\n            addDetail,\n            clearDetails,\n            complete,\n        });\n        return (_ctx, _cache) => {\n            return (__props.show)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n                                class: \"spinner\",\n                                style: { \"width\": \"28px\", \"height\": \"28px\", \"border\": \"3px solid #3a3a3a\", \"border-top-color\": \"#4a9eff\", \"border-radius\": \"50%\", \"animation\": \"spin 0.8s linear infinite\" }\n                            }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"h3\", _hoisted_4, _toDisplayString(__props.title), 1 /* TEXT */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"div\", {\n                                class: \"progress-bar\",\n                                style: _normalizeStyle({\n                                    width: progress.value + '%',\n                                    height: '100%',\n                                    background: 'linear-gradient(90deg, #4a9eff 0%, #7c3aed 50%, #10b981 100%)',\n                                    transition: 'width 0.3s ease',\n                                    boxShadow: '0 0 10px rgba(74, 158, 255, 0.5)',\n                                })\n                            }, null, 4 /* STYLE */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, _toDisplayString(currentMessage.value), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (details.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(details.value, (detail, i) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: i,\n                                        style: { \"margin-bottom\": \"4px\" }\n                                    }, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"span\", { style: { \"color\": \"#4a9eff\" } }, \"\", -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(detail), 1 /* TEXT */)\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"div\", _hoisted_9, _toDisplayString(Math.round(progress.value)) + \"% \", 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_10, \": \" + _toDisplayString(elapsedSeconds.value) + \"\", 1 /* TEXT */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (__props.cancellable)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                style: { \"width\": \"100%\", \"margin-top\": \"20px\", \"padding\": \"10px\", \"background\": \"#3a3a3a\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onMouseenter: _cache[0] || (_cache[0] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                onMouseleave: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.background = '#3a3a3a')),\n                                onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('cancel')))\n                            }, \"  \", 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProgressDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProgressDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProgressDialog.vue?vue&type=style&index=0&id=e3e6a546&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e3e6a546\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, vModelSelect as _vModelSelect, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"project-tab\" };\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 28px\", \"background\": \"#2a2a2a\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid #333\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" }\n};\nconst _hoisted_3 = {\n    class: \"project-action-buttons\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"220px 1fr 650px\", \"gap\": \"20px\", \"min-height\": \"500px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_6 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"font-size\": \"12px\", \"padding\": \"20px 10px\" }\n};\nconst _hoisted_7 = [\"onClick\", \"onMouseenter\", \"onMouseleave\"];\nconst _hoisted_8 = { style: { \"font-size\": \"13px\", \"flex\": \"1\" } };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n    key: 1,\n    style: { \"margin-top\": \"20px\", \"border-top\": \"1px solid #3a3a3a\", \"padding-top\": \"15px\" }\n};\nconst _hoisted_11 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_12 = { style: { \"display\": \"flex\", \"gap\": \"5px\" } };\nconst _hoisted_13 = [\"onClick\", \"onMouseenter\", \"onMouseleave\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_16 = {\n    key: 0,\n    style: { \"flex\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    style: { \"flex\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"color\": \"#666\", \"font-size\": \"14px\" }\n};\nconst _hoisted_18 = {\n    key: 2,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\" }\n};\nconst _hoisted_19 = { style: { \"margin-bottom\": \"10px\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_20 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_21 = { style: { \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"500\" } };\nconst _hoisted_22 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_23 = [\"placeholder\"];\nconst _hoisted_24 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_25 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_26 = { style: { \"display\": \"flex\", \"gap\": \"8px\" } };\nconst _hoisted_27 = { style: { \"flex\": \"1\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"auto\", \"position\": \"relative\", \"min-height\": \"400px\" } };\nconst _hoisted_28 = [\"srcdoc\"];\nconst _hoisted_29 = {\n    key: 1,\n    style: { \"position\": \"absolute\", \"top\": \"50%\", \"left\": \"50%\", \"transform\": \"translate(-50%, -50%)\", \"color\": \"#666\", \"font-size\": \"12px\", \"text-align\": \"center\" }\n};\nconst _hoisted_30 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"width\": \"90%\", \"max-width\": \"600px\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_31 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_32 = { style: { \"margin-top\": \"12px\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"8px\" } };\nconst _hoisted_34 = [\"onClick\"];\nconst _hoisted_35 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"margin-bottom\": \"15px\", \"padding\": \"10px\", \"background\": \"#252525\", \"border-radius\": \"6px\" } };\nconst _hoisted_36 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"cursor\": \"pointer\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"user-select\": \"none\" } };\nconst _hoisted_37 = {\n    key: 0,\n    style: { \"margin-bottom\": \"15px\", \"padding\": \"15px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"max-height\": \"200px\", \"overflow-y\": \"auto\", \"font-family\": \"'Consolas', monospace\", \"font-size\": \"12px\", \"color\": \"#e0e0e0\", \"line-height\": \"1.5\", \"white-space\": \"pre-wrap\" }\n};\nconst _hoisted_38 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_39 = [\"disabled\"];\nconst _hoisted_40 = {\n    key: 0,\n    class: \"fa-solid fa-wand-magic-sparkles\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_41 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_42 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"width\": \"90%\", \"max-width\": \"650px\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_43 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_44 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_45 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_46 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_47 = [\"disabled\"];\nconst _hoisted_48 = {\n    key: 0,\n    class: \"fa-solid fa-wrench\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_49 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\",\n    style: { \"margin-right\": \"6px\" }\n};\nconst _hoisted_50 = {\n    key: 2,\n    style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.9)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10001\", \"padding\": \"20px\" }\n};\nconst _hoisted_51 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"width\": \"95%\", \"height\": \"90%\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_52 = { style: { \"padding\": \"20px 25px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_53 = { style: { \"display\": \"flex\", \"gap\": \"10px\" } };\nconst _hoisted_54 = { style: { \"flex\": \"1\", \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr 1.5fr\", \"gap\": \"15px\", \"padding\": \"20px\", \"overflow\": \"hidden\" } };\nconst _hoisted_55 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_56 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"15px\" } };\nconst _hoisted_57 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"margin-bottom\": \"8px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_58 = { style: { \"margin\": \"0\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.5\", \"overflow-x\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_59 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_60 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"15px\" } };\nconst _hoisted_61 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"margin-bottom\": \"8px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_62 = { style: { \"margin\": \"0\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"12px\", \"line-height\": \"1.5\", \"overflow-x\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_63 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"overflow\": \"hidden\" } };\nconst _hoisted_64 = { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_65 = { style: { \"display\": \"flex\", \"gap\": \"8px\" } };\nconst _hoisted_66 = { style: { \"flex\": \"1\", \"background\": \"white\", \"overflow\": \"hidden\" } };\nconst _hoisted_67 = [\"srcdoc\"];\nconst _hoisted_68 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"width\": \"90%\", \"max-width\": \"900px\", \"max-height\": \"80%\", \"border\": \"1px solid #3a3a3a\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_69 = { style: { \"padding\": \"20px 25px\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_70 = { style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"padding\": \"20px\" } };\nconst _hoisted_71 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"padding\": \"40px 20px\" }\n};\nconst _hoisted_72 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"start\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_73 = { style: { \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"margin-bottom\": \"5px\" } };\nconst _hoisted_74 = { style: { \"color\": \"#888\", \"font-size\": \"12px\" } };\nconst _hoisted_75 = [\"onClick\"];\nconst _hoisted_76 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"margin-top\": \"10px\" } };\nconst _hoisted_77 = { style: { \"margin-top\": \"5px\", \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"8px\" } };\nconst _hoisted_78 = { style: { \"background\": \"#1e1e1e\", \"border-radius\": \"16px\", \"max-width\": \"850px\", \"width\": \"100%\", \"max-height\": \"90vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 20px 60px rgba(0, 0, 0, 0.8)\", \"border\": \"1px solid #333\" } };\nconst _hoisted_79 = { style: { \"padding\": \"24px 28px\", \"border-bottom\": \"1px solid #2a2a2a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\" } };\nconst _hoisted_80 = { style: { \"padding\": \"28px\" } };\nconst _hoisted_81 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"repeat(auto-fit, minmax(240px, 1fr))\", \"gap\": \"20px\" } };\nimport { computed, onBeforeUnmount, ref, watch, watchEffect } from 'vue';\nimport { normalizeApiEndpoint } from '../settings';\nimport { getScriptIdSafe } from '../utils';\nimport ProgressDialog from './ProgressDialog.vue';\n\nimport { klona } from 'klona';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ProjectManager',\n    setup(__props) {\n        const projects = ref([]);\n        const currentId = ref('');\n        const currentFile = ref('');\n        const code = ref('');\n        const previewHtml = ref('');\n        const showAI = ref(false);\n        const aiPrompt = ref('');\n        const aiGenerating = ref(false);\n        const enableStream = ref(false); // \n        const streamingText = ref(''); // \n        const showComparison = ref(false);\n        const aiChanges = ref([]);\n        const previewMode = ref('after');\n        const showHistory = ref(false);\n        const aiHistory = ref({});\n        // AI \n        const quickSuggestions = [\n            '',\n            '/',\n            '',\n            '',\n            '',\n            '',\n            '',\n            'ARIA',\n        ];\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // \n        const showProjectTemplate = ref(false);\n        // Bug \n        const showBugFix = ref(false);\n        const bugDescription = ref('');\n        const consoleError = ref('');\n        const bugFile = ref('');\n        // \n        const folderInputRef = ref(null);\n        const currentProject = computed(() => {\n            return projects.value.find(p => p.id === currentId.value);\n        });\n        const currentProjectHistory = computed(() => {\n            return aiHistory.value[currentId.value] || [];\n        });\n        const comparisonPreviewHtml = computed(() => {\n            if (aiChanges.value.length === 0)\n                return '';\n            const proj = currentProject.value;\n            if (!proj)\n                return '';\n            // \n            const tempFiles = proj.files.map(f => {\n                const change = aiChanges.value.find(c => c.path === f.path);\n                return {\n                    ...f,\n                    content: change ? (previewMode.value === 'after' ? change.newContent : change.oldContent) : f.content,\n                };\n            });\n            return buildPreviewFromFiles(tempFiles);\n        });\n        // \n        const projectTemplates = {\n            : {\n                name: '',\n                description: '',\n                icon: '',\n                color: '#4a9eff',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"chat-container\">\n      <div class=\"message-list\" id=\"messageList\"></div>\n      <div class=\"input-area\">\n        <textarea id=\"userInput\" placeholder=\"...\"></textarea>\n        <button id=\"sendBtn\"></button>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.prod.js\"></${'script'}>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n}\n\n.chat-container {\n  max-width: 800px;\n  margin: 20px auto;\n  height: calc(100vh - 40px);\n  display: flex;\n  flex-direction: column;\n  background: #2a2a2a;\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.message-list {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n\n.message {\n  margin-bottom: 15px;\n  padding: 10px 15px;\n  border-radius: 8px;\n  max-width: 70%;\n}\n\n.message.user {\n  background: #4a9eff;\n  margin-left: auto;\n  text-align: right;\n}\n\n.message.assistant {\n  background: #3a3a3a;\n}\n\n.input-area {\n  padding: 15px;\n  background: #2a2a2a;\n  border-top: 1px solid #3a3a3a;\n  display: flex;\n  gap: 10px;\n}\n\n#userInput {\n  flex: 1;\n  padding: 10px;\n  background: #1a1a1a;\n  border: 1px solid #3a3a3a;\n  border-radius: 6px;\n  color: #e0e0e0;\n  resize: none;\n  height: 60px;\n}\n\n#sendBtn {\n  padding: 10px 20px;\n  background: #4a9eff;\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  font-weight: 600;\n}\n\n#sendBtn:hover {\n  background: #357abd;\n}`,\n                    'script.js': `// \nlet chatHistory = [];\n\n// \nfunction loadHistory() {\n  const saved = getVariables({ type: 'chat' });\n  chatHistory = saved.chatHistory || [];\n  renderMessages();\n}\n\n// \nfunction saveHistory() {\n  insertOrAssignVariables({ chatHistory }, { type: 'chat' });\n}\n\n// \nfunction renderMessages() {\n  const list = document.getElementById('messageList');\n  list.innerHTML = '';\n  chatHistory.forEach(msg => {\n    const div = document.createElement('div');\n    div.className = 'message ' + msg.sender;\n    div.textContent = msg.content;\n    list.appendChild(div);\n  });\n  list.scrollTop = list.scrollHeight;\n}\n\n// \nasync function sendMessage() {\n  const input = document.getElementById('userInput');\n  const text = input.value.trim();\n  if (!text) return;\n\n  // \n  chatHistory.push({\n    id: Date.now(),\n    sender: 'user',\n    content: text,\n    timestamp: new Date().toLocaleTimeString()\n  });\n  input.value = '';\n  renderMessages();\n  saveHistory();\n\n  //  AI\n  const prompt = '\\\\n' + chatHistory.map(m => m.sender + ': ' + m.content).join('\\\\n');\n\n  let aiText = '';\n  await generate({\n    should_stream: true,\n    prompt: prompt,\n    on_stream_chunk: (chunk) => {\n      aiText += chunk;\n      // \n      const tempMsg = { id: 'temp', sender: 'assistant', content: aiText };\n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = tempMsg;\n      } else {\n        chatHistory.push(tempMsg);\n      }\n      renderMessages();\n    },\n    on_stream_end: () => {\n      // \n      const tempIndex = chatHistory.findIndex(m => m.id === 'temp');\n      if (tempIndex >= 0) {\n        chatHistory[tempIndex] = {\n          id: Date.now(),\n          sender: 'assistant',\n          content: aiText,\n          timestamp: new Date().toLocaleTimeString()\n        };\n      }\n      renderMessages();\n      saveHistory();\n    }\n  });\n}\n\n// \n$(() => {\n  loadHistory();\n  document.getElementById('sendBtn').addEventListener('click', sendMessage);\n  document.getElementById('userInput').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  });\n});`,\n                },\n            },\n            : {\n                name: '',\n                description: 'HP/MP/',\n                icon: '',\n                color: '#10b981',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"status-panel\">\n      <h2></h2>\n      <div class=\"stat-item\">\n        <label> (HP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill hp\" id=\"hpBar\"></div>\n        </div>\n        <span id=\"hpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (MP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill mp\" id=\"mpBar\"></div>\n        </div>\n        <span id=\"mpText\">0/0</span>\n      </div>\n      <div class=\"stat-item\">\n        <label> (EXP)</label>\n        <div class=\"progress-bar\">\n          <div class=\"progress-fill exp\" id=\"expBar\"></div>\n        </div>\n        <span id=\"expText\">0/0</span>\n      </div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.status-panel {\n  max-width: 500px;\n  margin: 0 auto;\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 25px;\n  border: 1px solid #3a3a3a;\n}\n\nh2 {\n  margin-bottom: 20px;\n  color: #4a9eff;\n}\n\n.stat-item {\n  margin-bottom: 20px;\n}\n\n.stat-item label {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.progress-bar {\n  width: 100%;\n  height: 24px;\n  background: #1a1a1a;\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 5px;\n}\n\n.progress-fill {\n  height: 100%;\n  transition: width 0.5s ease;\n  border-radius: 12px;\n}\n\n.progress-fill.hp {\n  background: linear-gradient(90deg, #ef4444, #10b981);\n}\n\n.progress-fill.mp {\n  background: linear-gradient(90deg, #3b82f6, #06b6d4);\n}\n\n.progress-fill.exp {\n  background: linear-gradient(90deg, #fbbf24, #f59e0b);\n}\n\n.stat-item span {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n                    'script.js': `// \nfunction loadStats() {\n  const data = getVariables({ type: 'chat' });\n\n  const hp = data.hp || 850;\n  const maxHp = data.maxHp || 1000;\n  const mp = data.mp || 340;\n  const maxMp = data.maxMp || 500;\n  const exp = data.exp || 1250;\n  const maxExp = data.maxExp || 2000;\n\n  // \n  updateBar('hp', hp, maxHp);\n  updateBar('mp', mp, maxMp);\n  updateBar('exp', exp, maxExp);\n}\n\nfunction updateBar(type, current, max) {\n  const percent = (current / max) * 100;\n  document.getElementById(type + 'Bar').style.width = percent + '%';\n  document.getElementById(type + 'Text').textContent = current + '/' + max;\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadStats);`,\n                },\n            },\n            : {\n                name: '',\n                description: '',\n                icon: '',\n                color: '#ec4899',\n                files: {\n                    'index.html': `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title></title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div id=\"app\">\n    <div class=\"affection-container\">\n      <h2></h2>\n      <div class=\"character-grid\" id=\"characterGrid\"></div>\n    </div>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`,\n                    'style.css': `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', sans-serif;\n  background: #1a1a1a;\n  color: #e0e0e0;\n  padding: 20px;\n}\n\n.affection-container {\n  max-width: 900px;\n  margin: 0 auto;\n}\n\nh2 {\n  margin-bottom: 25px;\n  color: #ec4899;\n  text-align: center;\n}\n\n.character-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n}\n\n.character-card {\n  background: #2a2a2a;\n  border-radius: 12px;\n  padding: 20px;\n  border: 2px solid #3a3a3a;\n  transition: all 0.3s ease;\n}\n\n.character-card:hover {\n  transform: translateY(-5px);\n  border-color: #ec4899;\n  box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);\n}\n\n.character-name {\n  font-size: 18px;\n  font-weight: 600;\n  margin-bottom: 15px;\n  color: #e0e0e0;\n}\n\n.affection-bar {\n  width: 100%;\n  height: 20px;\n  background: #1a1a1a;\n  border-radius: 10px;\n  overflow: hidden;\n  margin-bottom: 8px;\n}\n\n.affection-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #ec4899, #f472b6);\n  transition: width 0.5s ease;\n  border-radius: 10px;\n}\n\n.affection-text {\n  font-size: 13px;\n  color: #94a3b8;\n}`,\n                    'script.js': `// \nfunction loadCharacters() {\n  const data = getVariables({ type: 'chat' });\n  const characters = data.characters || [\n    { name: ' A', affection: 75 },\n    { name: ' B', affection: 50 },\n    { name: ' C', affection: 90 }\n  ];\n\n  const grid = document.getElementById('characterGrid');\n  grid.innerHTML = '';\n\n  characters.forEach(char => {\n    const card = document.createElement('div');\n    card.className = 'character-card';\n    card.innerHTML = \\`\n      <div class=\"character-name\">\\${char.name}</div>\n      <div class=\"affection-bar\">\n        <div class=\"affection-fill\" style=\"width: \\${char.affection}%\"></div>\n      </div>\n      <div class=\"affection-text\">: \\${char.affection}/100</div>\n    \\`;\n    grid.appendChild(card);\n  });\n}\n\n// \ndocument.addEventListener('DOMContentLoaded', loadCharacters);`,\n                },\n            },\n        };\n        // \n        function showProjectTemplateDialog() {\n            showProjectTemplate.value = true;\n        }\n        // \n        function createProjectFromTemplate(templateKey) {\n            const template = projectTemplates[templateKey];\n            if (!template)\n                return;\n            const name = prompt(':', template.name);\n            if (!name || !name.trim())\n                return;\n            const newProj = {\n                id: Date.now().toString(),\n                name: name.trim(),\n                files: Object.entries(template.files).map(([filename, content]) => ({\n                    path: filename,\n                    name: filename,\n                    content: content,\n                })),\n            };\n            projects.value.push(newProj);\n            currentId.value = newProj.id;\n            currentFile.value = newProj.files[0]?.name || '';\n            code.value = newProj.files[0]?.content || '';\n            saveToChatVar();\n            showProjectTemplate.value = false;\n            window.toastr.success(' \"' + name.trim() + '\"');\n        }\n        // \n        function triggerFolderImport() {\n            if (folderInputRef.value) {\n                folderInputRef.value.value = ''; // \n                folderInputRef.value.click();\n            }\n        }\n        async function handleFolderImport(event) {\n            const input = event.target;\n            const files = input.files;\n            if (!files || files.length === 0) {\n                return;\n            }\n            try {\n                // \n                const firstFile = files[0];\n                const pathParts = firstFile.webkitRelativePath.split('/');\n                const folderName = pathParts[0] || '';\n                // \n                const projectName = prompt(':', folderName);\n                if (!projectName || !projectName.trim()) {\n                    return;\n                }\n                // \n                const supportedExtensions = ['.html', '.css', '.js', '.ts', '.scss', '.sass', '.json', '.txt', '.md'];\n                // \n                const projectFiles = [];\n                const fileReadPromises = [];\n                for (let i = 0; i < files.length; i++) {\n                    const file = files[i];\n                    const relativePath = file.webkitRelativePath.split('/').slice(1).join('/'); // \n                    // /\n                    if (!relativePath || relativePath.startsWith('.') || relativePath.includes('/.')) {\n                        continue;\n                    }\n                    //  node_modulesdist \n                    if (relativePath.includes('node_modules/') ||\n                        relativePath.includes('dist/') ||\n                        relativePath.includes('.git/') ||\n                        relativePath.includes('build/')) {\n                        continue;\n                    }\n                    // \n                    const extension = '.' + relativePath.split('.').pop()?.toLowerCase();\n                    if (!supportedExtensions.includes(extension)) {\n                        continue;\n                    }\n                    // \n                    const readPromise = new Promise((resolve, reject) => {\n                        const reader = new FileReader();\n                        reader.onload = e => {\n                            const content = e.target?.result;\n                            const fileName = relativePath.split('/').pop() || relativePath;\n                            projectFiles.push({\n                                path: relativePath,\n                                name: fileName,\n                                content: content || '',\n                            });\n                            resolve();\n                        };\n                        reader.onerror = () => reject(new Error(`: ${relativePath}`));\n                        reader.readAsText(file);\n                    });\n                    fileReadPromises.push(readPromise);\n                }\n                // \n                await Promise.all(fileReadPromises);\n                if (projectFiles.length === 0) {\n                    window.toastr.warning('HTMLCSSJSTSSCSS ');\n                    return;\n                }\n                // \n                const newProj = {\n                    id: Date.now().toString(),\n                    name: projectName.trim(),\n                    files: projectFiles,\n                };\n                projects.value.push(newProj);\n                currentId.value = newProj.id;\n                currentFile.value = newProj.files[0]?.path || '';\n                code.value = newProj.files[0]?.content || '';\n                saveToChatVar();\n                updatePreview();\n                window.toastr.success(`\"${projectName}\" ${projectFiles.length} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        }\n        function createProject() {\n            const name = prompt(':');\n            if (!name || !name.trim())\n                return;\n            const htmlContent = `<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>${name.trim()}</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n  <div class=\"container\">\n    <h1> ${name.trim()}!</h1>\n    <p></p>\n  </div>\n  <${'script'} src=\"script.js\"></${'script'}>\n</body>\n</html>`;\n            const cssContent = `* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: #333;\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container {\n  background: white;\n  padding: 60px 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  text-align: center;\n  max-width: 600px;\n}\n\nh1 {\n  font-size: 2.5em;\n  color: #667eea;\n  margin-bottom: 20px;\n}\n\np {\n  font-size: 1.2em;\n  color: #666;\n  line-height: 1.6;\n}`;\n            const jsContent = `console.log('');\n\n//  jQuery  DOM \n$(function() {\n  console.log('');\n\n  // ==========  ==========\n  const isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\n\n  if (!isInTavern) {\n    console.log(' API ');\n    //  localStorage \n  }\n\n  // ========== ==========\n  const storageKey = 'my_project_data'; // \n\n  // \n  function loadData() {\n    if (isInTavern) {\n      const data = getVariables({ type: 'chat' });\n      return data[storageKey] || { count: 0 };\n    } else {\n      //  localStorage\n      const stored = localStorage.getItem(storageKey);\n      return stored ? JSON.parse(stored) : { count: 0 };\n    }\n  }\n\n  // \n  function saveData(data) {\n    if (isInTavern) {\n      insertOrAssignVariables({ [storageKey]: data }, { type: 'chat' });\n      console.log(':', data);\n    } else {\n      //  localStorage\n      localStorage.setItem(storageKey, JSON.stringify(data));\n      console.log(' localStorage:', data);\n    }\n  }\n\n  // \n  let myData = loadData();\n  console.log(':', myData);\n\n  // ==========  ==========\n  const container = $('.container');\n  if (container.length) {\n    container.on('click', function() {\n      myData.count++;\n      saveData(myData);\n      if (typeof toastr !== 'undefined') {\n        toastr.success(\\`: \\${myData.count}\\`);\n      } else {\n        alert(\\`: \\${myData.count}\\`);\n      }\n    });\n  }\n\n  // \n  $(window).on('pagehide', function() {\n    saveData(myData);\n  });\n});`;\n            const newProj = {\n                id: Date.now().toString(),\n                name: name.trim(),\n                files: [\n                    { path: 'index.html', name: 'index.html', content: htmlContent },\n                    { path: 'style.css', name: 'style.css', content: cssContent },\n                    { path: 'script.js', name: 'script.js', content: jsContent },\n                ],\n            };\n            projects.value.push(newProj);\n            console.log(':', newProj.name, ':', projects.value.length);\n            // \n            saveToChatVar();\n            currentId.value = newProj.id;\n            currentFile.value = 'index.html';\n            code.value = htmlContent;\n            updatePreview();\n            toastr.success(` \"${newProj.name}\" `);\n        }\n        function selectProject(id) {\n            currentId.value = id;\n            const proj = currentProject.value;\n            if (proj && proj.files.length > 0) {\n                currentFile.value = proj.files[0].path;\n                code.value = proj.files[0].content;\n                updatePreview();\n            }\n            else {\n                currentFile.value = '';\n                code.value = '';\n                previewHtml.value = '';\n            }\n        }\n        function selectFile(path) {\n            currentFile.value = path;\n            const proj = currentProject.value;\n            if (proj) {\n                const file = proj.files.find(f => f.path === path);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n        }\n        function saveCode() {\n            const proj = currentProject.value;\n            if (!proj || !currentFile.value) {\n                toastr.error('');\n                return;\n            }\n            const file = proj.files.find(f => f.path === currentFile.value);\n            if (file) {\n                file.content = code.value;\n                // \n                if (autoSaveTimer) {\n                    clearTimeout(autoSaveTimer);\n                    autoSaveTimer = null;\n                }\n                saveToChatVar();\n                updatePreview();\n                toastr.success('');\n            }\n        }\n        function deleteProject(id) {\n            const proj = projects.value.find(p => p.id === id);\n            if (!proj)\n                return;\n            if (!confirm(` \"${proj.name}\" `))\n                return;\n            projects.value = projects.value.filter(p => p.id !== id);\n            console.log(':', projects.value.length);\n            if (currentId.value === id) {\n                currentId.value = '';\n                currentFile.value = '';\n                code.value = '';\n                previewHtml.value = '';\n            }\n            // \n            saveToChatVar();\n            toastr.success(` \"${proj.name}\" `);\n        }\n        // \n        function createNewFolder() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            const folderPath = prompt('\\ncss  js/utils', '');\n            if (!folderPath || !folderPath.trim())\n                return;\n            const trimmedPath = folderPath.trim().replace(/\\/$/, ''); // \n            //  .gitkeep \n            const gitkeepPath = `${trimmedPath}/.gitkeep`;\n            // \n            if (proj.files.some(f => f.path.startsWith(`${trimmedPath}/`))) {\n                window.toastr.warning(` \"${trimmedPath}\" `);\n                return;\n            }\n            // \n            const newFile = {\n                path: gitkeepPath,\n                name: '.gitkeep',\n                content: '# \\n',\n            };\n            proj.files.push(newFile);\n            saveToChatVar();\n            window.toastr.success(` \"${trimmedPath}\" `);\n        }\n        // \n        function showNewFileDialog() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            const folders = new Set();\n            folders.add(''); // \n            proj.files.forEach(file => {\n                const parts = file.path.split('/');\n                if (parts.length > 1) {\n                    // \n                    for (let i = 1; i < parts.length; i++) {\n                        const folderPath = parts.slice(0, i).join('/');\n                        if (folderPath)\n                            folders.add(folderPath);\n                    }\n                }\n            });\n            const folderList = Array.from(folders).sort();\n            // 1. \n            const fileTypes = [\n                { name: 'HTML ', ext: '.html', icon: '' },\n                { name: 'CSS ', ext: '.css', icon: '' },\n                { name: 'JavaScript ', ext: '.js', icon: '' },\n                { name: 'TypeScript ', ext: '.ts', icon: '' },\n                { name: 'JSON ', ext: '.json', icon: '' },\n                { name: 'Markdown ', ext: '.md', icon: '' },\n                { name: '', ext: '', icon: '' },\n            ];\n            const typeOptions = fileTypes.map((t, i) => `${i + 1}. ${t.icon} ${t.name} (${t.ext || ''})`).join('\\n');\n            const typeChoice = prompt(` 1-${fileTypes.length}\\n\\n${typeOptions}`, '1');\n            if (!typeChoice)\n                return;\n            const typeIndex = parseInt(typeChoice) - 1;\n            if (typeIndex < 0 || typeIndex >= fileTypes.length) {\n                window.toastr.error('');\n                return;\n            }\n            const selectedType = fileTypes[typeIndex];\n            // 2. \n            let targetFolder = '';\n            if (folderList.length > 1) {\n                const folderOptions = folderList.length > 5\n                    ? ''\n                    : `\\n\\n${folderList.map((f, i) => `${i + 1}. ${f || ''}`).join('\\n')}\\n\\n`;\n                const folderChoice = prompt(folderOptions, '1');\n                if (!folderChoice)\n                    return;\n                // \n                const folderIndex = parseInt(folderChoice) - 1;\n                if (folderIndex >= 0 && folderIndex < folderList.length) {\n                    targetFolder = folderList[folderIndex];\n                }\n                else {\n                    // \n                    targetFolder = folderChoice.trim().replace(/\\/$/, '');\n                }\n            }\n            // 3. \n            const fileName = prompt(`${selectedType.ext ? ` ${selectedType.ext}` : ''}`, selectedType.ext ? `new-file` : 'newfile.txt');\n            if (!fileName || !fileName.trim())\n                return;\n            let trimmedName = fileName.trim();\n            // \n            if (selectedType.ext && !trimmedName.endsWith(selectedType.ext)) {\n                trimmedName += selectedType.ext;\n            }\n            // \n            const fullPath = targetFolder ? `${targetFolder}/${trimmedName}` : trimmedName;\n            // \n            if (proj.files.some(f => f.path === fullPath)) {\n                window.toastr.error(` \"${fullPath}\" `);\n                return;\n            }\n            // \n            const extension = trimmedName.split('.').pop()?.toLowerCase();\n            let defaultContent = '';\n            switch (extension) {\n                case 'html':\n                    defaultContent =\n                        '<!DOCTYPE html>\\n' +\n                            '<html lang=\"zh-CN\">\\n' +\n                            '<head>\\n' +\n                            '  <meta charset=\"UTF-8\">\\n' +\n                            '  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n' +\n                            '  <title>' +\n                            trimmedName.replace('.html', '') +\n                            '</title>\\n' +\n                            '  <link rel=\"stylesheet\" href=\"style.css\">\\n' +\n                            '</head>\\n' +\n                            '<body>\\n' +\n                            '  <div class=\"container\">\\n' +\n                            '    <h1></h1>\\n' +\n                            '  </div>\\n' +\n                            '  <' +\n                            'script src=\"script.js\"></' +\n                            'script>\\n' +\n                            '</body>\\n' +\n                            '</html>';\n                    break;\n                case 'css':\n                case 'scss':\n                case 'sass':\n                    defaultContent = `/* ${trimmedName} */\\n\\n* {\\n  margin: 0;\\n  padding: 0;\\n  box-sizing: border-box;\\n}\\n`;\n                    break;\n                case 'js':\n                case 'ts':\n                    defaultContent =\n                        `// ${trimmedName}\\n\\nconsole.log('${trimmedName} ');\\n\\n$` + `(function() {\\n  // \\n});\\n`;\n                    break;\n                case 'json':\n                    defaultContent = `{\\n  \"name\": \"${trimmedName.replace('.json', '')}\",\\n  \"version\": \"1.0.0\"\\n}`;\n                    break;\n                case 'md':\n                    defaultContent = `# ${trimmedName.replace(/\\.md$/, '')}\\n\\n`;\n                    break;\n                default:\n                    defaultContent = '';\n            }\n            // \n            const newFile = {\n                path: fullPath,\n                name: trimmedName,\n                content: defaultContent,\n            };\n            proj.files.push(newFile);\n            currentFile.value = fullPath;\n            code.value = defaultContent;\n            saveToChatVar();\n            updatePreview();\n            window.toastr.success(` \"${fullPath}\" `);\n        }\n        // \n        function deleteFile(filePath) {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            const file = proj.files.find(f => f.path === filePath);\n            if (!file)\n                return;\n            if (!confirm(` \"${file.path}\" `))\n                return;\n            proj.files = proj.files.filter(f => f.path !== filePath);\n            // \n            if (currentFile.value === filePath) {\n                if (proj.files.length > 0) {\n                    currentFile.value = proj.files[0].path;\n                    code.value = proj.files[0].content;\n                }\n                else {\n                    currentFile.value = '';\n                    code.value = '';\n                }\n            }\n            saveToChatVar();\n            updatePreview();\n            window.toastr.success(` \"${file.path}\" `);\n        }\n        function getFileIcon(path) {\n            const ext = path.split('.').pop()?.toLowerCase();\n            if (ext === 'html')\n                return 'fa-brands fa-html5';\n            if (ext === 'css')\n                return 'fa-brands fa-css3-alt';\n            if (ext === 'js')\n                return 'fa-brands fa-js';\n            return 'fa-solid fa-file-code';\n        }\n        function buildPreviewFromFiles(files) {\n            const htmlFile = files.find(f => f.path.endsWith('.html'));\n            const cssFile = files.find(f => f.path.endsWith('.css'));\n            const jsFile = files.find(f => f.path.endsWith('.js'));\n            if (!htmlFile)\n                return '';\n            const html = htmlFile.content;\n            const headTag = 'head';\n            const bodyTag = 'body';\n            const headMatch = html.match(new RegExp(`<${headTag}[^>]*>([\\\\s\\\\S]*?)</${headTag}>`, 'i'));\n            const bodyMatch = html.match(new RegExp(`<${bodyTag}[^>]*>([\\\\s\\\\S]*?)</${bodyTag}>`, 'i'));\n            let headContent = headMatch ? headMatch[1] : '';\n            let bodyContent = bodyMatch ? bodyMatch[1] : html;\n            const linkTagRegex = /<link[^>]*rel=[\"']stylesheet[\"'][^>]*>/gi;\n            const scriptTagRegex = new RegExp('<' + 'script[^>]*></' + 'script>', 'gi');\n            headContent = headContent.replace(linkTagRegex, '');\n            bodyContent = bodyContent.replace(scriptTagRegex, '');\n            const scriptTag = 'script';\n            const styleTag = 'style';\n            return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  ${headContent}\n  <${styleTag}>\n    html, body {\n      margin: 0 !important;\n      padding: 0 !important;\n      width: 100% !important;\n      height: auto !important;\n      min-height: 800px !important;\n      overflow: visible !important;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${bodyContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n        }\n        function updatePreview() {\n            const proj = currentProject.value;\n            if (!proj) {\n                previewHtml.value = '';\n                return;\n            }\n            previewHtml.value = buildPreviewFromFiles(proj.files);\n        }\n        function saveToChatVar() {\n            try {\n                const chatId = SillyTavern.getCurrentChatId();\n                console.log(' ID:', chatId);\n                const dataToSave = {\n                    frontend_projects_files: projects.value,\n                    frontend_ai_history: aiHistory.value,\n                };\n                if (chatId) {\n                    console.log(':', dataToSave.frontend_projects_files.length, '');\n                    insertOrAssignVariables(dataToSave, { type: 'chat' });\n                    console.log('');\n                    // \n                    const verify = getVariables({ type: 'chat' });\n                    if (verify?.frontend_projects_files) {\n                        console.log('', verify.frontend_projects_files.length, '');\n                    }\n                    else {\n                        console.error('');\n                    }\n                }\n                else {\n                    // \n                    console.log(' ID:', dataToSave.frontend_projects_files.length, '');\n                    insertOrAssignVariables(dataToSave, { type: 'global' });\n                    console.log('');\n                    toastr.info('');\n                }\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n        }\n        function loadFromChatVar() {\n            try {\n                const chatId = SillyTavern.getCurrentChatId();\n                console.log(' ID:', chatId);\n                let data;\n                if (chatId) {\n                    data = getVariables({ type: 'chat' });\n                    console.log(':', data);\n                }\n                else {\n                    data = getVariables({ type: 'global' });\n                    console.log(' ID:', data);\n                }\n                if (data?.frontend_projects_files && Array.isArray(data.frontend_projects_files)) {\n                    projects.value = data.frontend_projects_files;\n                    console.log(':', projects.value.length, '');\n                }\n                else {\n                    console.log('');\n                    projects.value = [];\n                }\n                if (data?.frontend_ai_history) {\n                    aiHistory.value = data.frontend_ai_history;\n                    console.log('');\n                }\n                else {\n                    aiHistory.value = {};\n                }\n            }\n            catch (e) {\n                console.error(':', e);\n            }\n        }\n        // \n        loadFromChatVar();\n        watch(() => SillyTavern.getCurrentChatId(), () => {\n            loadFromChatVar();\n            currentId.value = '';\n            currentFile.value = '';\n            code.value = '';\n            previewHtml.value = '';\n        });\n        // \n        let autoSaveTimer = null;\n        watchEffect(() => {\n            // \n            if (currentFile.value && code.value !== undefined) {\n                const proj = currentProject.value;\n                if (proj) {\n                    const file = proj.files.find(f => f.path === currentFile.value);\n                    if (file && file.content !== code.value) {\n                        // \n                        file.content = code.value;\n                        // \n                        if (autoSaveTimer) {\n                            clearTimeout(autoSaveTimer);\n                        }\n                        //  1 \n                        autoSaveTimer = setTimeout(() => {\n                            saveToChatVar();\n                            console.log(':', currentFile.value);\n                        }, 1000);\n                    }\n                }\n            }\n        });\n        // \n        let previewTimer = null;\n        watch(() => [currentFile.value, code.value], () => {\n            if (previewTimer) {\n                clearTimeout(previewTimer);\n            }\n            previewTimer = setTimeout(updatePreview, 500);\n        }, { deep: true });\n        // \n        onBeforeUnmount(() => {\n            console.log('...');\n            // \n            if (autoSaveTimer) {\n                clearTimeout(autoSaveTimer);\n            }\n            if (previewTimer) {\n                clearTimeout(previewTimer);\n            }\n            // \n            if (currentFile.value && code.value !== undefined) {\n                const proj = currentProject.value;\n                if (proj) {\n                    const file = proj.files.find(f => f.path === currentFile.value);\n                    if (file) {\n                        file.content = code.value;\n                    }\n                }\n            }\n            // \n            saveToChatVar();\n            console.log('');\n        });\n        function showAIDialog() {\n            showAI.value = true;\n            aiPrompt.value = '';\n        }\n        function closeAIDialog() {\n            showAI.value = false;\n            aiPrompt.value = '';\n        }\n        // Bug \n        function showBugFixDialog() {\n            showBugFix.value = true;\n            bugDescription.value = '';\n            consoleError.value = '';\n            bugFile.value = '';\n        }\n        function closeBugFixDialog() {\n            showBugFix.value = false;\n            bugDescription.value = '';\n            consoleError.value = '';\n            bugFile.value = '';\n        }\n        async function fixBugWithAI() {\n            const proj = currentProject.value;\n            if (!proj) {\n                window.toastr.error('');\n                return;\n            }\n            if (!bugDescription.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            aiGenerating.value = true;\n            showProgress.value = true;\n            let normalizedEndpoint = '';\n            try {\n                //  1: \n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage(' Bug ...');\n                await new Promise(r => setTimeout(r, 100));\n                //  API \n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    throw new Error(' ID');\n                }\n                const vars = getVariables({ type: 'script', script_id: scriptId });\n                const apiEndpoint = vars?.api_endpoint;\n                const apiKey = vars?.api_key;\n                const model = vars?.model || 'gpt-4o-mini';\n                if (!apiEndpoint || !apiKey) {\n                    throw new Error('\"\" API');\n                }\n                normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage(' Bug ...');\n                await new Promise(r => setTimeout(r, 100));\n                //  Bug \n                const systemPrompt = ` Bug \n\n# \n\n1. ****\n2. ****\n3. **** Console \n4. ****\n\n#  Bug \n\n****\n- ID \n-  \\`$(function() {})\\` \n-  JavaScript \n\n****\n-  CSS displayvisibilityz-index\n-  DOM \n- \n\n****\n-  insertOrAssignVariables \n- \n- \n\n****\n- \n- \n- \n\n# \n\n\n\n\\`\\`\\`\nFILE_START: \n[]\nFILE_END\n\\`\\`\\`\n\n`;\n                const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const userPrompt = `# \n${currentFiles}\n\n# Bug \n${bugDescription.value}\n\n${consoleError.value.trim()\n                    ? `# Console \n\\`\\`\\`\n${consoleError.value}\n\\`\\`\\`\n`\n                    : ''}\n\n${bugFile.value\n                    ? `# \n${bugFile.value}\n`\n                    : ''}\n\n# \n1.  bug\n2. \n3. \n4. \n\n system `;\n                progressDialogRef.value?.setProgress(25);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100));\n                // \n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI  bug...');\n                await new Promise(r => setTimeout(r, 100));\n                const response = await fetch(normalizedEndpoint, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${apiKey}`,\n                    },\n                    body: JSON.stringify({\n                        model: model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: 0.3, // \n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API  (${response.status}): ${errorText}`);\n                }\n                progressDialogRef.value?.setProgress(60);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100));\n                const data = await response.json();\n                const resultText = data.choices?.[0]?.message?.content || '';\n                if (!resultText) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.setProgress(75);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100));\n                //  AI \n                const fileRegex = /FILE_START:\\s*(.+?)\\s*\\n([\\s\\S]*?)\\nFILE_END/g;\n                const changes = [];\n                let match;\n                while ((match = fileRegex.exec(resultText)) !== null) {\n                    const path = match[1].trim();\n                    const newContent = match[2].trim();\n                    const existingFile = proj.files.find(f => f.path === path);\n                    if (existingFile) {\n                        changes.push({\n                            path,\n                            oldContent: existingFile.content,\n                            newContent,\n                        });\n                    }\n                }\n                if (changes.length === 0) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100));\n                // \n                if (!aiHistory.value[proj.id]) {\n                    aiHistory.value[proj.id] = [];\n                }\n                aiHistory.value[proj.id].unshift({\n                    timestamp: new Date().toISOString(),\n                    prompt: `Bug : ${bugDescription.value}`,\n                    changes: klona(changes),\n                });\n                // \n                aiChanges.value = changes;\n                showComparison.value = true;\n                previewMode.value = 'after';\n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage(`Bug  (${changes.length} )`);\n                await new Promise(r => setTimeout(r, 100));\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage('Bug ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showBugFix.value = false;\n                    window.toastr.success(`AI `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('Bug :', error);\n                window.toastr.error(`Bug : ${error?.message || String(error)}`);\n                showProgress.value = false;\n            }\n            finally {\n                aiGenerating.value = false;\n            }\n        }\n        async function generateWithAI() {\n            if (!aiPrompt.value.trim() || aiGenerating.value)\n                return;\n            const proj = currentProject.value;\n            if (!proj) {\n                toastr.error('');\n                return;\n            }\n            // \n            const vaguePhrases = ['', '', '', '', '', '', ''];\n            const prompt = aiPrompt.value.trim();\n            const isVague = vaguePhrases.some(phrase => {\n                const regex = new RegExp(`^${phrase}[\\\\s]*$`, 'i');\n                return regex.test(prompt);\n            });\n            if (isVague) {\n                toastr.warning('\\n\\n\\n' +\n                    ' \"\"\\n' +\n                    ' \"\"\\n\\n' +\n                    ' \"\"\\n' +\n                    ' \"\"', '', { timeOut: 6000 });\n                return;\n            }\n            aiGenerating.value = true;\n            showProgress.value = true;\n            let normalizedEndpoint = ''; // \n            try {\n                // 1: \n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    toastr.error(' ID');\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                const vars = getVariables({ type: 'script', script_id: scriptId });\n                const apiEndpoint = vars?.api_endpoint;\n                const apiKey = vars?.api_key;\n                const model = vars?.model || 'gpt-4o-mini';\n                const temperature = vars?.temperature || 0.7;\n                const maxTokens = vars?.max_tokens || 4000;\n                if (!apiEndpoint || !apiKey) {\n                    toastr.error('\"\" API');\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                //  API \n                try {\n                    normalizedEndpoint = normalizeApiEndpoint(apiEndpoint);\n                    console.log(' :', apiEndpoint);\n                    console.log(' :', normalizedEndpoint);\n                }\n                catch (e) {\n                    toastr.error('API ' + e.message);\n                    aiGenerating.value = false;\n                    showProgress.value = false;\n                    return;\n                }\n                //  max_tokens \n                if (maxTokens < 2000) {\n                    toastr.warning(` max_tokens  ${maxTokens} AI  4000 `);\n                }\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage('...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                const systemPrompt = ` SillyTavern\n\n# \n${proj.files.map(f => `- ${f.path}`).join('\\n')}\n\n#  API \n## \n- jQuery ($): DOM \n- toastr: \n- gsap: \n- lodash (_): \n- zod (z): \n\n##  API\n****\n- \\`getVariables({ type: 'chat' })\\`: \n- \\`insertOrAssignVariables(data, { type: 'chat' })\\`: \n- \\`replaceVariables(data, { type: 'chat' })\\`: \n\n****\n\\`\\`\\`javascript\n//   API \nconst isInTavern = typeof SillyTavern !== 'undefined' && typeof getVariables !== 'undefined';\n\n// \nfunction loadData() {\n  if (isInTavern) {\n    const data = getVariables({ type: 'chat' });\n    return data.my_key || { count: 0 };\n  } else {\n    //  localStorage\n    const stored = localStorage.getItem('my_key');\n    return stored ? JSON.parse(stored) : { count: 0 };\n  }\n}\n\n// \nfunction saveData(data) {\n  if (isInTavern) {\n    insertOrAssignVariables({ my_key: data }, { type: 'chat' });\n  } else {\n    localStorage.setItem('my_key', JSON.stringify(data));\n  }\n}\n\n// \nlet myData = loadData();\nmyData.count++;\nsaveData(myData);\n\\`\\`\\`\n\n** API**\n- getChatMessages(): \n- getCurrentCharacter(): \n- getWorldbook(): \n- replaceWorldbook(data): \n- eventOn(event, callback): \n- getIframeName():  iframe \n- triggerSlash(command):  STScript \n- SillyTavern.getCurrentChatId():  ID\n\n## \n\n****  AI \n\n****\n\n\\`\\`\\`javascript\n// 1. \nasync function updateStatusFromMessages() {\n  if (typeof getChatMessages !== 'function') return; // \n\n  const messages = await getChatMessages();\n  if (!messages || messages.length === 0) return;\n\n  //  AI  is_user: false\n  const latestAIMessage = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAIMessage) return;\n\n  const content = latestAIMessage.mes; // \n\n  // 2. \n  const statusMatch = content.match(/\\`\\`\\`json([\\\\s\\\\S]*?)\\`\\`\\`/);\n  if (statusMatch) {\n    try {\n      const status = JSON.parse(statusMatch[1]);\n      // 3. \n      $('#health').text(status.health || 100);\n      $('#level').text(status.level || 1);\n    } catch (e) {\n      console.error(':', e);\n    }\n  }\n\n  // 80\n  const healthMatch = content.match(/[:](\\\\d+)/);\n  if (healthMatch) {\n    $('#health').text(healthMatch[1]);\n  }\n}\n\n// 4. \n$(function() {\n  updateStatusFromMessages();\n});\n\n// 5. \nif (typeof eventOn === 'function') {\n  eventOn('MESSAGE_RECEIVED', () => {\n    updateStatusFromMessages();\n  });\n}\n\\`\\`\\`\n\n---\n\n##   XML \n\n**** AI  XML  \\`<state_bar><i></i></state_bar>\\`\n\n****\n1.  \\`<state_bar>\\` \n2.  XML  HTML\n3. \n\n****\n\n\\`\\`\\`typescript\n// ===== 1.  =====\nfunction extractStateBar(text: string): string | null {\n  const match = text.match(/<state_bar>([\\\\s\\\\S]*?)<\\\\/state_bar>/i);\n  return match ? match[1].trim() : null;\n}\n\n// ===== 2. XML  HTML=====\nfunction convertXmlToHtml(xml: string): string {\n  let html = xml;\n\n  // <i><2i><3i> \n  html = html.replace(/<i>([\\\\s\\\\S]*?)<\\\\/i>/g, '<div class=\"state-item indent-1\">$1</div>');\n  html = html.replace(/<2i>([\\\\s\\\\S]*?)<\\\\/2i>/g, '<div class=\"state-item indent-2\">$1</div>');\n  html = html.replace(/<3i>([\\\\s\\\\S]*?)<\\\\/3i>/g, '<div class=\"state-item indent-3\">$1</div>');\n\n  // \n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-date\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-time\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-location\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-physical\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-mental\"> $1</div>');\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g, '<div class=\"state-current\"> $1</div>');\n\n  //  <></>\n  html = html.replace(/<>([\\\\s\\\\S]*?)<\\\\/>/g,\n    '<div class=\"state-colored\" style=\"border-left: 3px solid #ff6b6b; background: rgba(255,107,107,0.1);\">$1</div>');\n\n  // \n  html = html.replace(/<([^>\\\\/\\\\s]+)>([\\\\s\\\\S]*?)<\\\\/\\\\1>/g, '<div class=\"state-generic\">$2</div>');\n\n  return html;\n}\n\n// ===== 3.  =====\nasync function updateStateBar() {\n  if (typeof getChatMessages !== 'function') return;\n\n  const messages = await getChatMessages();\n  if (!messages || messages.length === 0) return;\n\n  //  AI \n  const latestAI = messages.slice().reverse().find(m => !m.is_user);\n  if (!latestAI) return;\n\n  // \n  const stateBarXml = extractStateBar(latestAI.mes);\n  if (stateBarXml) {\n    const stateBarHtml = convertXmlToHtml(stateBarXml);\n\n    // \n    const container = $('#state-bar-container');\n    container.fadeOut(200, () => {\n      container.html(stateBarHtml);\n      container.fadeIn(200);\n    });\n  }\n}\n\n// ===== 4.  =====\n$(function() {\n  updateStateBar(); // \n\n  // \n  if (typeof eventOn === 'function') {\n    eventOn('MESSAGE_RECEIVED', updateStateBar);\n  }\n});\n\\`\\`\\`\n\n** CSS **\n\n\\`\\`\\`scss\n#state-bar-container {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 12px;\n  padding: 16px;\n  color: white;\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\n  margin-bottom: 16px;\n}\n\n.state-item {\n  padding: 8px 12px;\n  margin: 6px 0;\n  background: rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  backdrop-filter: blur(10px);\n  transition: all 0.3s ease;\n\n  &:hover {\n    background: rgba(255, 255, 255, 0.15);\n    transform: translateX(4px);\n  }\n}\n\n// \n.indent-1 { margin-left: 20px; }\n.indent-2 { margin-left: 40px; }\n.indent-3 { margin-left: 60px; }\n\n// \n.state-date, .state-time, .state-location {\n  font-weight: 600;\n  font-size: 14px;\n  padding: 8px 12px;\n  margin: 8px 0;\n  border-radius: 6px;\n}\n\n.state-date { background: rgba(100, 181, 246, 0.2); }\n.state-time { background: rgba(129, 199, 132, 0.2); }\n.state-location { background: rgba(255, 167, 38, 0.2); }\n\n.state-physical {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(255, 107, 107, 0.15);\n  border-left: 4px solid #ff6b6b;\n  border-radius: 4px;\n}\n\n.state-mental {\n  padding: 10px 14px;\n  margin: 8px 0;\n  background: rgba(149, 117, 205, 0.15);\n  border-left: 4px solid #9575cd;\n  border-radius: 4px;\n}\n\n.state-colored {\n  padding: 10px 14px;\n  margin: 8px 0;\n  border-radius: 4px;\n  backdrop-filter: blur(5px);\n}\n\n.state-generic {\n  padding: 6px 10px;\n  margin: 4px 0;\n  opacity: 0.9;\n}\n\\`\\`\\`\n\n** GSAP **\n\n\\`\\`\\`typescript\n//  GSAP \nfunction updateStateBarWithAnimation(stateBarHtml: string) {\n  const container = $('#state-bar-container');\n\n  // \n  gsap.to(container, {\n    opacity: 0,\n    y: -10,\n    duration: 0.2,\n    onComplete: () => {\n      container.html(stateBarHtml);\n\n      // \n      gsap.to(container, {\n        opacity: 1,\n        y: 0,\n        duration: 0.3,\n        ease: 'power2.out'\n      });\n\n      // \n      gsap.from('.state-item', {\n        opacity: 0,\n        x: -20,\n        duration: 0.4,\n        stagger: 0.05,\n        ease: 'back.out(1.2)'\n      });\n    }\n  });\n}\n\\`\\`\\`\n\\`\\`\\`\n\n****\n-  \\`getChatMessages()\\` \n- \n-  jQuery  DOM \n-  MESSAGE_RECEIVED \n\n## \n\n****\n**** index.html\n\n** **\n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];           //  \n  function renderMessages() {}    //  \n  function handleSend() {}        //  \n\n  //  \n});\n\n//  \nlet chatHistory = [];              //  \nfunction renderMessages() {}       //  \nfunction handleSend() {}           //  \n\n$(function() {\n  // \n  loadChatHistory();\n  setupStreamListeners();\n});\n\\`\\`\\`\n\n****\n1. let/const\n2. function\n3. \\`$(function() {})\\` - \n4. \\`$(window).on('pagehide', ...)\\` - \n\n** generation_id **\n****** generation_id **\n-  AI \n- \n- \n\n****\n1. ****index.html + index.ts\n2. \n3.  \\`generate(text)\\`** generation_id**\n4. **** \\`id === currentGenerationId\\`\n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\`:  token \n   - \\`iframe_events.STREAM_TOKEN_RECEIVED_FULLY\\`: \n   - \\`iframe_events.GENERATION_ENDED\\`: \n5.  \\`setChatMessages\\`\\`createChatMessages\\`  \\`{ refresh: 'none' }\\` \n\n**  API generate()**\n- **\\`triggerSlashWithResult(command)\\`**:  STScript \n  - \\`Promise<string>\\`AI \n  - \\`const result = await triggerSlashWithResult('/gen lock=on \"\"');\\`\n  - **** \\`/gen\\` \n  - **** generation_id\n- **\\`getRegexScripts()\\`**: \n  - \n  - ** AI **\n- **** API \n- **\\`triggerSlash(command)\\`**:  STScript \n\n** AI **\nAI \\`<guide>\\`\\`<dream>\\`\\`<plot>\\`\\`<status>\\`\\`<think>\\` \n****\n\n****\n1. **** AI  \\`<gametxt>\\`\n2. ****\n3. ****\n\n****\n\\`\\`\\`typescript\n// \nfunction extractLastTagContent(tagName: string, text: string, ignoreCase = false): string | null {\n  if (!text || typeof text !== 'string') return null;\n\n  const endTag = \\`</\\${tagName}>\\`;\n  let searchPool = text;\n  let endTagPattern = endTag;\n\n  if (ignoreCase) {\n    searchPool = text.toLowerCase();\n    endTagPattern = endTag.toLowerCase();\n  }\n\n  const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n  if (lastEndIndex !== -1) {\n    const startTag = \\`<\\${tagName}>\\`;\n    let startTagPattern = startTag;\n    if (ignoreCase) startTagPattern = startTag.toLowerCase();\n\n    const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n    if (lastStartIndex !== -1) {\n      const startIndex = lastStartIndex + startTag.length;\n      return text.substring(startIndex, lastEndIndex).trim();\n    }\n  }\n  return null;\n}\n\n// \nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0: =====\n  // \"\"\"\"\n  // \n  //  dream  gametxt \n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\`<\\${tag}([^>]*)>\\`, 'gi');\n    const closeTagRegex = new RegExp(\\`</\\${tag}>\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      // \n      const missing = openCount - closeCount;\n      console.log(\\`  \\${missing}  <\\${tag}> \\`);\n      text = text + \\`</\\${tag}>\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  //  AI \n  //  dream \n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\`  <\\${tag}> :\\`, extracted.length);\n      return extracted; // \n    }\n  }\n\n  // =====  2:  -  =====\n  let cleanedText = text;\n\n  // dream/gametxt \n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    //  <tag>...</tag> \n    const regexWithContent = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    //  <tag/> \n    const regexSelfClosing = new RegExp(\\`<\\${tag}\\\\\\\\s*\\\\\\\\/>\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\`    <\\${tag}> \\`);\n    }\n  });\n\n  //   think/thinking \n  //  <xxx_think><thinking_xxx><think><thinking> \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  //  think \n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  2-3: =====\n  let allRegexScripts: any[] = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2:  SoliUmbra \n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    //  AI placement  2\n    //   disabled  placement promptOnly\n    //  promptOnly \n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\\`\\`\\`\n\n****\n\\`\\`\\`typescript\n// \nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// \nasync function handleSend() {\n  const input = $('#user-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  renderMessages();\n\n  // 2. \n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  try {\n    // 3. \n    let prompt = '';\n    chatHistory.slice(-10).forEach(msg => {\n      prompt += (msg.role === 'user' ? '' : 'AI') + ': ' + msg.content + '\\\\n';\n    });\n\n    // 4.  AI\n    const rawResult = await triggerSlashWithResult('/gen lock=on \"' + prompt.replace(/\"/g, '\\\\\\\\\"') + '\"');\n\n    // 5.  \n    const cleanedResult = applyRegexFilters(rawResult);\n\n    // 6. \n    chatHistory.push({ role: 'assistant', content: cleanedResult });\n    renderMessages();\n    saveChatHistory(); // \n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#send-btn').prop('disabled', false).text('');\n  }\n}\n\n// \nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach(msg => {\n    const div = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content); //  text()  XSS\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// \nfunction saveChatHistory() {\n  if (typeof insertOrAssignVariables === 'function') {\n    insertOrAssignVariables({ chat_history: chatHistory }, { type: 'chat' });\n  } else {\n    localStorage.setItem('chat_history', JSON.stringify(chatHistory));\n  }\n}\n\\`\\`\\`\n\n** **\n\n** **\n\n###  \n-  \\`generate({ should_stream: true, generation_id })\\` \n-  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n- \n-   AI \n-   AI \n\n###  \n-  \\`triggerSlashWithResult\\`\n-  \n-  \\`generateRaw\\`\n\n** **\n\n\\`\\`\\`typescript\n// =====  =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');  //  ID \n    const charName = SillyTavern?.name2 || 'AI';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && !lastMsg.hasClass('user-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> ' + cleanedText);\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' ');\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');  //  ID \n    }\n  });\n}\n\n// ===== =====\nasync function handleSend() {\n  const input = $('#inner-input');  //  ID \n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // 1. \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  // 2.  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // 3. \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');  //  ID \n\n  try {\n    // 4.   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID \n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + error.message);\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====  =====\nfunction renderMessages() {\n  const container = $('#messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const div = $('<div>')\n      .attr('id', \\\\\\`message-\\\\\\${index}\\\\\\`)  //   id\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .text(msg.content);\n    container.append(div);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// =====  =====\n$(() => {\n  loadChatHistory();\n  setupStreamListeners();  //  \n\n  $('#send-btn').on('click', handleSend);\n  $('#user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n});\n\\\\\\`\\\\\\`\\\\\\`\n\n** CSS **\n\\\\\\`\\\\\\`\\\\\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: transparent; }\n  51%, 100% { border-right-color: #165DFF; }\n}\n\\\\\\`\\\\\\`\\\\\\`\n\n** **\n- **** 3\n- **** triggerSlashWithResult\n- **** AI \n- **** \n\n** **\n1.   \\`generate({ should_stream: true, generation_id: uniqueId })\\`\n2.  \\`setupStreamListeners()\\`\n3.  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\`\n4.   ID \\`generation_id\\`\n5.   \\`overrides.chat_history.prompts\\` \n\n**  \\`applyRegexFilters\\`**\n1.  **STREAM_TOKEN_RECEIVED_INCREMENTALLY **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   lastMsg.html('<strong>' + charName + ':</strong> ' + cleanedText);\n   \\`\\`\\`\n\n2.  **GENERATION_ENDED **\n   \\`\\`\\`typescript\n   const cleanedText = applyRegexFilters(text);  // \n   chatHistory.push({ role: 'assistant', content: cleanedText });\n   \\`\\`\\`\n\n** \\`applyRegexFilters\\` **\n1.  ****\"\"\"\"\n2.  **** \\`<dream>\\`\\`<gametxt>\\` \n3.  **** \\`think\\` \n4.  ****\n\n** **\n- ****\\`<dream>\\`\\`<gametxt>\\`\\`<output>\\` \n- ****\\`['dream', 'gametxt', 'output', 'display', 'text', 'content']\\`\n- ****\n- ****\n  \\`\\`\\`\n  <guide></guide><dream></dream><plot></plot>\n      <dream> \n  \\`\\`\\`\n\n** **\n-  \\`think\\`  \\`thinking\\`\n- \\`/<[^>]*think[^>]*>[\\\\s\\\\S]*?<\\\\/[^>]*think[^>]*>/gi\\`\n- \\`<think>\\`\\`<thinking>\\`\\`<xxx_think>\\`\\`<thinking_xxx>\\` \n- \n\n****\n-    \\`<thinking>\\`    + \n-    \\`<UpdateVariable>\\`    + \n-     \\`<UpdateVariable>\\`   \\`<UpdateVariable>\\` \n\n** **\n-  / text \\`applyRegexFilters\\`\n-   text\n-   text\n-   \\`should_stream: true\\`\n-   \\`generation_id\\`\n-   ID\n-  \n\n** **\n**** \\`$(function() {})\\` \n\n\\`\\`\\`javascript\n//  \n$(function() {\n  let chatHistory = [];  //  \n  function renderMessages() {}  //  \n});\n\n//  \nlet chatHistory = [];  //  \nfunction renderMessages() {}  //  \n\n$(function() {\n  // \n  loadChatHistory();\n});\n\\`\\`\\`\n\n** **\n\n\\`\\`\\`javascript\n// index.ts \n//\n// 1  1-10 \n//    let chatHistory = [];\n//    let isGenerating = false;\n//    ...\n//\n// 2  10-250 \n//    function loadChatHistory() { ... }\n//    function saveChatHistory() { ... }\n//    function renderMessages() { ... }\n//    function applyRegexFilters(text) { ... }  //  \n//    function handleSend() { ... }\n//\n// 3 jQuery  250-270 \n//    $(function() {\n//      // \n//      loadChatHistory();\n//      $('#btn').on('click', handleSend);\n//    });\n//\n// 4  270-275 \n//    $(window).on('pagehide', () => { ... });\n\\`\\`\\`\n\n** 100% **\n\n\\`\\`\\`javascript\n// =====================================================\n//   $(function() {}) \n// =====================================================\n\n// ===== 1. =====\nlet chatHistory = []; // { role: 'user'|'assistant', content: string }\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    // \n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    // \n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3.  =====\nfunction renderMessages() {\n  console.log(' renderMessages :', chatHistory.length, '');\n\n  const container = $('#inner-messages');\n  console.log(' :', container.length > 0 ? ' ' : ' ');\n\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    // \n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    console.log(' ', index + 1, ':', msg.role, '-', name, '- :', msg.content.length);\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  console.log(' renderMessages :', container.find('.message').length);\n\n  // \n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 4.  =====\n/**\n *  AI \n * \n * 1.  getRegexScripts\n * 2.  SoliUmbra \n * 3. \n */\nfunction applyRegexFilters(text) {\n  console.log(' :', text.length);\n\n  // =====  0: =====\n  // <guide><dream><plot><status><think> \n  let cleanedText = text;\n  const commonTags = [\n    'guide', 'dream', 'plot', 'status', 'think', 'thinking',\n    'thought', 'reasoning', 'analysis', 'plan', 'reflection',\n    'meta', 'ooc', 'system', 'debug'\n  ];\n\n  commonTags.forEach(tag => {\n    //  <tag>...</tag> \n    const regex = new RegExp(\\`<\\${tag}[^>]*>[\\\\\\\\s\\\\\\\\S]*?</\\${tag}>\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regex, '');\n    if (before !== cleanedText) {\n      console.log(\\`   :  <\\${tag}> \\`);\n    }\n  });\n\n  //  HTML \n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  // \n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  1-2:  =====\n  let allRegexScripts = [];\n\n  //  1: \n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegex = getRegexScripts();\n      console.log(' ', globalRegex.length, '');\n      allRegexScripts = allRegexScripts.concat(globalRegex);\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  //  2: SoliUmbra \n  //   iframe  window.parent.SillyTavern.getContext() \n  try {\n    const parentST = window.parent?.SillyTavern || window.SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        //  identifier\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find(p => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes = null;\n\n              // \n              if (Array.isArray(data)) {\n                //  regexes-bindings\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                //  SPresetSettings.RegexBinding.regexes\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break; // \n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length === 0) {\n    console.log(' ');\n    return text;\n  }\n\n  console.log(' ', allRegexScripts.length, '');\n\n  //  AI \n  // placement :\n  //   0 = \n  //   1 =  AI \n  //   2 = AI  \n  // promptOnly: true = \n  // promptOnly: false =   \n  const activeScripts = allRegexScripts.filter(script => {\n    return !script.disabled &&\n           !script.promptOnly &&  //  promptOnly  false \n           script.placement &&\n           script.placement.includes(2);  //  placement  2 AI \n  });\n\n  console.log(' ', activeScripts.length, '');\n\n  let result = text;\n\n  // \n  activeScripts.forEach((script, index) => {\n    try {\n      const regex = new RegExp(script.findRegex, 'gim');\n      const beforeLength = result.length;\n      result = result.replace(regex, script.replaceString || '');\n\n      if (beforeLength !== result.length) {\n        console.log(' ', index + 1, '(', script.scriptName, ') ', beforeLength - result.length, '');\n      }\n    } catch (e) {\n      console.error(' ', index + 1, '(', script.scriptName, ') :', e);\n    }\n  });\n\n  console.log(' :', text.length, ':', result.length);\n\n  return result;\n}\n\n// ===== 5.  =====\n//   sendChatMessage\n//  \nasync function handleSend() {\n  const input = $('#inner-user-input');\n  const text = input.val().trim();\n\n  if (!text || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: text });\n  input.val('');\n  renderMessages();\n  saveChatHistory();\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    //   STScript API \n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    // \n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    // \n    let fullPrompt = '';\n    if (chatHistory.length > 0) {\n      fullPrompt += '\\\\n';\n      chatHistory.forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + text;\n\n    console.log(' :', fullPrompt.length);\n\n    //   /gen \n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      //  \n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      //  AI \n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    // \n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// =====================================================\n//   $(function() {})\n// =====================================================\n\n// ===== 6.  =====\n//  \n$(function() {\n  // \n  console.log(' ');\n  console.log(' chatHistory :', typeof chatHistory !== 'undefined');\n  console.log(' renderMessages :', typeof renderMessages === 'function');\n  console.log(' handleSend :', typeof handleSend === 'function');\n\n  //   false $(function() {}) \n  if (typeof chatHistory === 'undefined' || typeof renderMessages !== 'function') {\n    console.error(' /');\n    console.error(' $(function() {}) ');\n    toastr.error('');\n    return;\n  }\n\n  loadChatHistory();\n\n  // \n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-user-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  // \n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' ');\n  console.log(' :', $('#inner-messages').length > 0 ? ' ' : ' ');\n});\n\n// ===== 7.  =====\n$(window).on('pagehide', () => {\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**HTML **\n\\`\\`\\`html\n<div class=\"inner-chat-container\">\n  <div class=\"inner-chat-header\">\n    <h3></h3>\n    <button id=\"inner-clear-btn\"></button>\n  </div>\n\n  <!--  ID  inner-messages -->\n  <div id=\"inner-messages\" class=\"inner-messages\"></div>\n\n  <div class=\"inner-input-area\">\n    <!--  ID  inner-user-input -->\n    <textarea id=\"inner-user-input\" placeholder=\"...\"></textarea>\n    <!--  ID  inner-send-btn -->\n    <button id=\"inner-send-btn\"></button>\n  </div>\n</div>\n\\`\\`\\`\n\n** HTML **\n- [ ]  \\`id=\"inner-messages\"\\` \n- [ ]  \\`id=\"inner-user-input\"\\` \n- [ ]  \\`id=\"inner-send-btn\"\\` \n- [ ]  \\`id=\"inner-clear-btn\"\\` \n- [ ] ID  JS \n\n**CSS **\n\\`\\`\\`css\n/*  */\n.inner-messages {\n  height: 400px;\n  overflow-y: auto;\n  padding: 15px;\n  display: flex;  /*   flex */\n  flex-direction: column;\n  gap: 10px;\n}\n\n/*  */\n.message {\n  max-width: 70%;\n  padding: 10px 15px;\n  border-radius: 12px;\n  word-wrap: break-word;\n}\n\n/*   */\n.user-message {\n  align-self: flex-end;  /*  */\n  background: #4a9eff;\n  color: white;\n}\n\n/*  AI  */\n.ai-message {\n  align-self: flex-start;  /*  */\n  background: #2a2a2a;\n  color: #e0e0e0;\n}\n\\`\\`\\`\n\n** **\n- ID \\`inner-\\`\n-  \\`display: flex; flex-direction: column\\`\n-  \\`align-self: flex-end\\` \n- AI  \\`align-self: flex-start\\` \n\n** API**\n- **\\`generate(prompt)\\`**: ** AI **\n- \\`generateRaw(prompt)\\`:  AI \n- \\`getVariables({ type: 'message', message_id })\\`: \n- \\`insertOrAssignVariables(data, { type: 'message', message_id })\\`: \n- \\`getChatMessages()\\`: \n\n****\n- **\\`generate\\`**: \n- **\\`generateRaw\\`**: \n\n** **\n1. **80% **\n   -  **** \\`$(function() {})\\`  \\`let\\`/\\`const\\`/\\`function\\` \n   -  ********\\`$(function() {})\\` \n   - **** \\`console.log(typeof chatHistory)\\` \\`'object'\\`  \\`'undefined'\\`\n\n1.5. **/**\n   -  ****\\`chatHistory.push({ role: 'assistant', content: '' });\\`\n   -  ****\\`chatHistory.push({ role: 'assistant', content: ' AI ' });\\`\n   -  **** AI \n   -  **** \\`generate()\\`AI  \\`STREAM_TOKEN_RECEIVED_FULLY\\` \n   - ****\\`generate()\\`  AI API\n\n2. **generation_id **\n   -  \\`const result = await generate(...); const id = result.generation_id;\\`\n   -  \n     \\`\\`\\`javascript\n     const myId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n     await generate({ user_input: text, generation_id: myId });\n     //  id  myId\n     \\`\\`\\`\n   - \\`generate()\\`  \\`Promise<string>\\`\n   -  ID \n\n3. ****\n   -  \\`index.html\\` + \\`index.ts\\`\n   - \n   -  \\`setChatMessages(..., { refresh: 'none' })\\` \n\n4. ****\n   -   \\`sendChatMessage\\`\n   -   \\`generate\\`\\`getChatMessages\\`  API \n   -  \\`handleSend\\`\\`innerSendMessage\\`\\`sendInnerMessage\\`\n   - **** \\`sk()\\` \n\n5. ** ID **\n   -  \\`inner-\\` \n   -  \\`send-button\\`\\`user-input\\` \n   - **** \\`$('#inner-messages').length\\`  1 0\n\n6. ****\n   -  ** \\`iframe_events.XXX\\` \\`'iframe_events.XXX'\\`**\n   -  ** \\`(text, id)\\` \\`(data)\\` \\`text\\`  \\`data.text\\`**\n   -  **\\`generate({ user_input: text, should_stream: true, generation_id: myId })\\`**\n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => ...)\\` \n   -  \\`eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => ...)\\` \n\n7. **API **\n   -  \\`generate(prompt)\\`\n   -  \\`generateRaw(prompt)\\`\n   - \n\n8. ****\n   -  \\`getVariables({ type: 'chat' })\\`  \\`insertOrAssignVariables(data, { type: 'chat' })\\`\n   - \\`{ type: 'message', message_id }\\`\n   - \n\n****\n\\`\\`\\`javascript\n// ==========  ==========\n\n//  \n// eventOn('iframe_events.STREAM_TOKEN_RECEIVED_FULLY', (data) => { ... })\n//   'iframe_events.XXX'\n//   (data)\n\n//  \neventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text, id) => {\n  // text \n  $('#ai-reply').text(text); //   text text.text  data.text\n  console.log(':', text);\n});\n\neventOn(iframe_events.STREAM_TOKEN_RECEIVED_FULLY, (text, id) => {\n  // text \n  console.log(' :', text); //   text\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n//  GENERATION_ENDED\neventOn(iframe_events.GENERATION_ENDED, (text, id) => {\n  console.log(' :', text);\n  chatHistory.push({ role: 'assistant', content: text });\n  saveChatHistory();\n  isGenerating = false;\n  $('#send-btn').prop('disabled', false).text('');\n});\n\n// ==========  ==========\nasync function handleSend() {\n  const userInput = $('#user-input').val();\n  chatHistory.push({ role: 'user', content: userInput });\n\n  isGenerating = true;\n  $('#send-btn').prop('disabled', true).text('...');\n\n  //   STScript \n  const command = '/gen lock=on \"' + userInput.replace(/\"/g, '\\\\\\\\\"') + '\"';\n  const result = await triggerSlashWithResult(command);\n\n  if (result) {\n    chatHistory.push({ role: 'assistant', content: result });\n    renderMessages();\n  }\n\n  //   generate API\n  // await generate({ user_input: userInput });  //  \n}\n\\`\\`\\`\n\n** triggerSlashWithResult**\n-  \\`/gen\\` \n- \n-  generation_id \n\n**\\`/gen\\` **\n- \\`/gen lock=on \"\"\\`\n- \n-  AI \n\n---\n\n#  AI \n\n**\"\"\"\"\"\"\"\"******B\n****A\n\n##  \n\n### 1. \n-  **** \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\`\n-  **** \\`$(function() {})\\`  \\`loadChatHistory()\\`\n-  **** \\`SillyTavern.getCurrentChatId()\\` \n-  **** \\`$(window).on('pagehide', ...)\\` \n-  ****/ \\`saveChatHistory()\\`\n\n### 2. \n-  ****\\`display: none\\`iframe \n-  ****\n-  **** \\`chatHistory\\`\n\n### 3. \n-  **** \\`{ type: 'chat' }\\`\n-  **** \\`getCurrentChatId()\\` \n\n##  triggerSlashWithResult\n\n**** \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\n\n// ===== 2.  =====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. =====\nfunction applyRegexFilters(text: string): string {\n  console.log(' :', text.length);\n\n  if (!text || typeof text !== 'string') return '';\n\n  // =====  0:  =====\n  const criticalTags = ['thinking', 'UpdateVariable', 'guide', 'plot', 'status', 'dream', 'gametxt'];\n  criticalTags.forEach(tag => {\n    const openTagRegex = new RegExp(\\\\\\`<\\\\\\${tag}([^>]*)>\\\\\\`, 'gi');\n    const closeTagRegex = new RegExp(\\\\\\`</\\\\\\${tag}>\\\\\\`, 'gi');\n\n    const openMatches = text.match(openTagRegex);\n    const closeMatches = text.match(closeTagRegex);\n\n    const openCount = openMatches ? openMatches.length : 0;\n    const closeCount = closeMatches ? closeMatches.length : 0;\n\n    if (openCount > closeCount) {\n      const missing = openCount - closeCount;\n      console.log(\\\\\\`  \\\\\\${missing}  <\\\\\\${tag}> \\\\\\`);\n      text = text + \\\\\\`</\\\\\\${tag}>\\\\\\`.repeat(missing);\n    }\n  });\n\n  // =====  1: =====\n  function extractLastTagContent(tagName: string, text: string): string | null {\n    if (!text || typeof text !== 'string') return null;\n\n    const endTag = \\\\\\`</\\\\\\${tagName}>\\\\\\`;\n    const searchPool = text.toLowerCase();\n    const endTagPattern = endTag.toLowerCase();\n\n    const lastEndIndex = searchPool.lastIndexOf(endTagPattern);\n    if (lastEndIndex !== -1) {\n      const startTag = \\\\\\`<\\\\\\${tagName}>\\\\\\`;\n      const startTagPattern = startTag.toLowerCase();\n\n      const lastStartIndex = searchPool.lastIndexOf(startTagPattern, lastEndIndex);\n      if (lastStartIndex !== -1) {\n        const startIndex = lastStartIndex + startTag.length;\n        return text.substring(startIndex, lastEndIndex).trim();\n      }\n    }\n    return null;\n  }\n\n  const gameTextTags = ['dream', 'gametxt', 'output', 'display', 'text', 'content'];\n  for (const tag of gameTextTags) {\n    const extracted = extractLastTagContent(tag, text);\n    if (extracted !== null) {\n      console.log(\\\\\\`  <\\\\\\${tag}> :\\\\\\`, extracted.length);\n      return extracted;\n    }\n  }\n\n  // =====  2:  =====\n  let cleanedText = text;\n\n  const tagsToRemove = [\n    'guide', 'plot', 'status',\n    'UpdateVariable', '', '', ''\n  ];\n\n  tagsToRemove.forEach(tag => {\n    const regexWithContent = new RegExp(\\\\\\`<\\\\\\${tag}[^>]*>[\\\\\\\\\\\\\\\\s\\\\\\\\\\\\\\\\S]*?</\\\\\\${tag}>\\\\\\`, 'gi');\n    const before = cleanedText;\n    cleanedText = cleanedText.replace(regexWithContent, '');\n\n    const regexSelfClosing = new RegExp(\\\\\\`<\\\\\\${tag}\\\\\\\\\\\\\\\\s*\\\\\\\\\\\\\\\\/>\\\\\\`, 'gi');\n    cleanedText = cleanedText.replace(regexSelfClosing, '');\n\n    if (before !== cleanedText) {\n      console.log(\\\\\\`    <\\\\\\${tag}> \\\\\\`);\n    }\n  });\n\n  //  think/thinking \n  const thinkingRegex = /<[^>]*think[^>]*>[\\\\\\\\s\\\\\\\\S]*?<\\\\\\\\/[^>]*think[^>]*>/gi;\n  const beforeThinking = cleanedText;\n  cleanedText = cleanedText.replace(thinkingRegex, '');\n  if (beforeThinking !== cleanedText) {\n    console.log('    think/thinking ');\n  }\n\n  const thinkingSelfClosing = /<[^>]*think[^>]*\\\\\\\\/>/gi;\n  cleanedText = cleanedText.replace(thinkingSelfClosing, '');\n\n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\n\n  if (cleanedText !== text) {\n    console.log(' :', cleanedText.length);\n    text = cleanedText;\n  }\n\n  // =====  3: =====\n  let allRegexScripts: any[] = [];\n\n  if (typeof getRegexScripts === 'function') {\n    try {\n      const globalRegexes = getRegexScripts();\n      if (globalRegexes && globalRegexes.length > 0) {\n        console.log(' ', globalRegexes.length, '');\n        allRegexScripts = allRegexScripts.concat(globalRegexes);\n      }\n    } catch (e) {\n      console.warn(' :', e);\n    }\n  }\n\n  try {\n    const parentST = (window as any).parent?.SillyTavern || (window as any).SillyTavern;\n    if (parentST && typeof parentST.getContext === 'function') {\n      const context = parentST.getContext();\n      const prompts = context?.chatCompletionSettings?.prompts;\n\n      if (prompts && Array.isArray(prompts)) {\n        const possibleIdentifiers = ['regexes-bindings', 'SPresetSettings', 'regex-bindings'];\n\n        for (const identifier of possibleIdentifiers) {\n          const regexPrompt = prompts.find((p: any) => p.identifier === identifier);\n          if (regexPrompt?.content) {\n            try {\n              const data = JSON.parse(regexPrompt.content);\n              let presetRegexes: any = null;\n\n              if (Array.isArray(data)) {\n                presetRegexes = data;\n              } else if (data && typeof data === 'object') {\n                if (data.RegexBinding?.regexes && Array.isArray(data.RegexBinding.regexes)) {\n                  presetRegexes = data.RegexBinding.regexes;\n                } else if (data.regexes && Array.isArray(data.regexes)) {\n                  presetRegexes = data.regexes;\n                }\n              }\n\n              if (presetRegexes && presetRegexes.length > 0) {\n                console.log(' ', presetRegexes.length, ' (identifier:', identifier + ')');\n                allRegexScripts = allRegexScripts.concat(presetRegexes);\n                break;\n              }\n            } catch (parseError) {\n              console.warn('  identifier', identifier, ':', parseError);\n            }\n          }\n        }\n      }\n    }\n  } catch (e) {\n    console.warn(' :', e);\n  }\n\n  if (allRegexScripts.length > 0) {\n    console.log(' ', allRegexScripts.length, '');\n\n    const activeScripts = allRegexScripts.filter((script: any) => {\n      if (script.disabled) return false;\n      if (!script.placement || !Array.isArray(script.placement)) return false;\n      if (!script.placement.includes(2)) return false;\n      return true;\n    });\n\n    console.log(' ', activeScripts.length, '');\n\n    let result = text;\n    activeScripts.forEach((script: any, index: number) => {\n      try {\n        const regex = new RegExp(script.findRegex, 'gim');\n        const beforeLength = result.length;\n        result = result.replace(regex, script.replaceString || '');\n\n        if (beforeLength !== result.length) {\n          console.log(' ', index + 1, '(', script.scriptName, ') ');\n        }\n      } catch (e) {\n        console.error(' ', index + 1, ':', e);\n      }\n    });\n\n    text = result;\n  }\n\n  console.log(' :', text.length);\n  return text;\n}\n\n// ===== 4.  =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof triggerSlashWithResult !== 'function') {\n      throw new Error('');\n    }\n\n    const userName = SillyTavern?.name1 || 'You';\n    const charName = SillyTavern?.name2 || 'AI';\n\n    let fullPrompt = '';\n    if (chatHistory.length > 1) {\n      fullPrompt += '\\\\n';\n      chatHistory.slice(0, -1).forEach((msg) => {\n        const name = msg.role === 'user' ? userName : charName;\n        fullPrompt += name + ': ' + msg.content + '\\\\n';\n      });\n      fullPrompt += '\\\\n';\n    }\n    fullPrompt += userName + ': ' + userInput;\n\n    console.log(' :', fullPrompt.length);\n\n    const command = '/gen lock=on \"' + fullPrompt.replace(/\"/g, '\\\\\\\\\"') + '\"';\n    const result = await triggerSlashWithResult(command);\n\n    console.log(' AI :', result ? result.length : 0);\n\n    if (result && result.length > 0) {\n      const cleanedResult = applyRegexFilters(result);\n      console.log(' :', cleanedResult.length);\n\n      chatHistory.push({ role: 'assistant', content: cleanedResult });\n      saveChatHistory();\n      renderMessages();\n      toastr.success('');\n    } else {\n      toastr.warning('AI ');\n    }\n\n  } catch (error) {\n    console.error(':', error);\n    toastr.error(': ' + (error?.message || String(error)));\n  } finally {\n    isGenerating = false;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 5.  =====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 6. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 7.  =====\n$(function() {\n  console.log(' A');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' A');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 8.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n---\n\n##  generate + \n\n****  AI \n\n****\n\n\\`\\`\\`typescript\n// ===== 1. =====\nlet chatHistory: Array<{ role: string; content: string }> = [];\nlet isGenerating = false;\nlet currentGenerationId: string | null = null;\n\n// ===== 2. A=====\nfunction loadChatHistory() {\n  const isInTavern = typeof getVariables === 'function';\n  if (!isInTavern) {\n    const saved = localStorage.getItem('inner_chat_history');\n    chatHistory = saved ? JSON.parse(saved) : [];\n  } else {\n    const data = getVariables({ type: 'chat' });\n    chatHistory = data?.inner_chat_history || [];\n  }\n  renderMessages();\n}\n\nfunction saveChatHistory() {\n  const isInTavern = typeof insertOrAssignVariables === 'function';\n  if (!isInTavern) {\n    localStorage.setItem('inner_chat_history', JSON.stringify(chatHistory));\n  } else {\n    insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' });\n  }\n}\n\n// ===== 3. A=====\nfunction applyRegexFilters(text: string): string {\n  // ... A ...\n  // A applyRegexFilters \n  return text;\n}\n\n// ===== 4. =====\nfunction setupStreamListeners() {\n  //  \n  eventOn(iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY, (text: string, id: string) => {\n    if (!isGenerating || id !== currentGenerationId) return;\n\n    console.log(' :', text.length);\n\n    //  \n    const cleanedText = applyRegexFilters(text);\n\n    //  DOM\n    const container = $('#inner-messages');\n    const charName = (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n    const lastMsg = container.find('.message:last-child');\n\n    if (lastMsg.length && lastMsg.hasClass('ai-message')) {\n      //  AI \n      lastMsg.html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n    } else {\n      //  AI \n      const msgDiv = $('<div>')\n        .addClass('message ai-message')\n        .html('<strong>' + charName + ':</strong> <span class=\"streaming\">' + cleanedText + '</span>');\n      container.append(msgDiv);\n    }\n\n    // \n    container.scrollTop(container[0].scrollHeight);\n  });\n\n  //  \n  eventOn(iframe_events.GENERATION_ENDED, (text: string, id: string) => {\n    if (id === currentGenerationId) {\n      console.log(' :', text.length);\n\n      //  \n      const cleanedText = applyRegexFilters(text);\n\n      // \n      chatHistory.push({ role: 'assistant', content: cleanedText });\n      saveChatHistory();\n\n      // \n      renderMessages();\n\n      // \n      isGenerating = false;\n      currentGenerationId = null;\n      $('#inner-send-btn').prop('disabled', false).text('');\n\n      toastr.success('');\n    }\n  });\n}\n\n// ===== 5. =====\nasync function handleSend() {\n  const input = $('#inner-input');\n  const userInput = input.val().trim();\n  if (!userInput || isGenerating) return;\n\n  // \n  chatHistory.push({ role: 'user', content: userInput });\n  input.val('');\n  saveChatHistory();\n  renderMessages();\n\n  //  ID\n  currentGenerationId = 'chat-' + Date.now() + '-' + Math.random().toString(36).slice(2);\n\n  // \n  isGenerating = true;\n  $('#inner-send-btn').prop('disabled', true).text('...');\n\n  try {\n    if (typeof generate !== 'function') {\n      throw new Error('');\n    }\n\n    console.log(' generation_id:', currentGenerationId);\n\n    //   generate \n    await generate({\n      user_input: userInput,\n      should_stream: true,           //  \n      generation_id: currentGenerationId,  //   ID\n      overrides: {\n        chat_history: {\n          prompts: chatHistory.map(msg => ({\n            role: msg.role === 'user' ? 'user' : 'assistant',\n            content: msg.content\n          }))\n        }\n      }\n    });\n\n    // \n    // GENERATION_ENDED  AI \n\n  } catch (error) {\n    console.error(' :', error);\n    toastr.error(': ' + (error?.message || String(error)));\n\n    // \n    isGenerating = false;\n    currentGenerationId = null;\n    $('#inner-send-btn').prop('disabled', false).text('');\n  }\n}\n\n// ===== 6. A=====\nfunction renderMessages() {\n  const container = $('#inner-messages');\n  container.empty();\n\n  chatHistory.forEach((msg, index) => {\n    const name = msg.role === 'user'\n      ? (typeof getCurrentUser === 'function' ? getCurrentUser()?.name : null) || '{{user}}'\n      : (typeof getCurrentCharacter === 'function' ? getCurrentCharacter()?.name : null) || '{{char}}';\n\n    const msgDiv = $('<div>')\n      .addClass('message')\n      .addClass(msg.role === 'user' ? 'user-message' : 'ai-message')\n      .html('<strong>' + name + ':</strong> ' + msg.content);\n    container.append(msgDiv);\n  });\n\n  container.scrollTop(container[0].scrollHeight);\n}\n\n// ===== 7. =====\nlet currentChatId = SillyTavern.getCurrentChatId();\nif (typeof eventOn === 'function') {\n  eventOn('CHAT_CHANGED', (newChatId: string) => {\n    if (currentChatId !== newChatId) {\n      console.log(' :', currentChatId, '->', newChatId);\n      currentChatId = newChatId;\n\n      // \n      loadChatHistory();\n\n      // \n      if (isGenerating) {\n        isGenerating = false;\n        currentGenerationId = null;\n        $('#inner-send-btn').prop('disabled', false).text('');\n        console.log(' ');\n      }\n    }\n  });\n}\n\n// ===== 8.  =====\n$(function() {\n  console.log(' B - ');\n  console.log('  ID:', currentChatId);\n\n  // \n  loadChatHistory();\n\n  //  \n  setupStreamListeners();\n\n  $('#inner-send-btn').on('click', handleSend);\n  $('#inner-input').on('keypress', (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  });\n\n  $('#inner-clear-btn').on('click', () => {\n    if (confirm('')) {\n      chatHistory = [];\n      renderMessages();\n      saveChatHistory();\n    }\n  });\n\n  console.log(' B');\n  console.log(' ', chatHistory.length, '');\n});\n\n// ===== 9.  =====\n$(window).on('pagehide', () => {\n  console.log(' ');\n  saveChatHistory();\n});\n\\`\\`\\`\n\n**CSS B**\n\n\\`\\`\\`css\n.streaming {\n  border-right: 2px solid #165DFF;\n  padding-right: 4px;\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { border-right-color: #165DFF; }\n  51%, 100% { border-right-color: transparent; }\n}\n\\`\\`\\`\n\n---\n\n##  AI \n\n****\n\n1. ****\n   - \"\"\"\"\n   - \"\"\"\"\n   - \"\"\"\"\n   - \n\n2. ****\n   - \n   - \"\"\n\n** ** \"\"****\n\n## \n\n****\n\n### AI \n\n**1**\n\n\n- \n- /\n- \n- \n\n**2**\n\n### A\"\"\"\"\n\n****\n\n\n\\`\\`\\`\nFILE_START: NEED_MORE_INFO\n\n\n-  AI \n- \n- \n\n\n\n**1. **\n- \n- \n- \n- \n\n**2. **\n- \n- \n-  AI \n\n**3. **\n- \n- \n- \n\n**4. **\n- \n- \n- /\n- \n- \n\n---\n\n****\n\n### \n\n\n\n1. ****\n2. ****\n3. ****\n\n### \n\n****\n1.    \\`generate({ should_stream: true, generation_id })\\`\n2.  \\`iframe_events.STREAM_TOKEN_RECEIVED_INCREMENTALLY\\` \n3.     \n4.    \\`chatHistory\\`  \n\n****\n-  \\`generation_id\\` \n- \\`applyRegexFilters\\`\n- \n\n### \n\n****\n\\`\\`\\`javascript\nlet chatHistory = [\n  { role: 'user', content: '', timestamp: '...' },\n  { role: 'assistant', content: 'AI', timestamp: '...' }\n];\n\\`\\`\\`\n\n****\n- \n- AI \n\n****\n \\`insertOrAssignVariables({ inner_chat_history: chatHistory }, { type: 'chat' })\\` \n\n### \n\n**\\`applyRegexFilters\\` **\n1. \"\"\n2. \\`<dream>\\`\\`<gametxt>\\` \n3. \\`<think>\\`\\`<guide>\\`\\`<plot>\\` \n4. \n\n****\n- \n- \n\n---\n\n****\n\n\"\"\n-  #1a1a1a\n- #4a9eff\n- AI #3a3a3a\n-  + \n- \n\nFILE_END\n\\`\\`\\`\n\n### B\n\n****\n\n\n\\`\\`\\`\nFILE_START: index.html\n[ HTML ]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript ]\nFILE_END\n\\`\\`\\`\n\n### C\"\"\"\"\n\n****\n\n****\n-  #1a1a1a #2a2a2a\n- #4a9eff\n- AI #3a3a3a\n- border-radius: 12px\n- fadeIn/fadeOut\n- \n- \n- \n\n---\n\n### \n\n\n\n\\`\\`\\`typescript\n// \nconst regexPresets = {\n  \"\": [\n    { pattern: /<tag1>/g, replacement: \"\" },\n    { pattern: /\\\\[tag2\\\\]/g, replacement: \"\" },\n  ],\n  \"\": [\n    { pattern: /\\\\{\\\\{some_meta_data\\\\}\\\\}/g, replacement: \"\" },\n  ]\n};\n\nlet currentPreset = \"\";\n\nfunction applyRegexFilters(text: string, presetName?: string): string {\n  const preset = presetName || currentPreset;\n  const rules = regexPresets[preset] || regexPresets[\"\"];\n\n  let cleanedText = text;\n  rules.forEach(rule => {\n    cleanedText = cleanedText.replace(rule.pattern, rule.replacement);\n  });\n\n  // \n  // ...  ...\n\n  return cleanedText;\n}\n\nfunction switchPreset(presetName: string) {\n  currentPreset = presetName;\n  renderMessages(); // \n}\n\\`\\`\\`\n\n****\n\n---\n\n# \n FILE_START  FILE_END \n\n****\n\nFILE_START: index.html\n[ HTML  headbody CSS  JS]\nFILE_END\n\nFILE_START: style.css\n[ CSS ]\nFILE_END\n\nFILE_START: script.js\n[ JavaScript  jQuery]\nFILE_END\n\n** **\n1. **** \\`inner\\`\\`my\\`\n   -  \\`sendChatMessage\\`\\`generate\\`\\`getChatMessages\\`\n   -  \\`innerSendMessage\\`\\`handleSendMessage\\`\\`sendInnerMessage\\`\n2. ** ID** \\`inner-\\`\\`my-\\`\n   -  \\`#send-button\\`\\`#user-input\\`\n   -  \\`#inner-send-btn\\`\\`#inner-user-input\\`\n3. ****\n\n#  \n**\"\"\"\"\"\"**\n\n-  \"\"  ** style.css**\n-  \"\"  ** script.js**\n-  \"\"  ** script.js**\n-  \n\n# \n## \n- ///  ** style.css**\n- / bug  ** script.js**\n- /  ** index.html**\n- /  ** index.html**\n\n## \n- /  ** index.htmlstyle.cssscript.js**\n- /  ****\n-   ****\n\n# \n1. **  getVariables/insertOrAssignVariables**\n2. **  \\`typeof SillyTavern !== 'undefined'\\` localStorage  API**\n3. \n4. \n5. CSS \n6. JavaScript  \\`$(function() { ... })\\`  DOM \n7. \\`{ type: 'chat' }\\` \\`{ type: 'global' }\\` \n8. `;\n                const currentFiles = proj.files.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const userPrompt = `# \n${currentFiles}\n\n# \n${aiPrompt.value}\n\n#  \n1. ****\n2. **** 1 \n3. ****\n4. **** getVariables/insertOrAssignVariables\n\n system `;\n                // \n                streamingText.value = ''; // \n                let resultText = '';\n                progressDialogRef.value?.setProgress(25);\n                progressDialogRef.value?.setMessage(' AI ...');\n                await new Promise(r => setTimeout(r, 100)); //  DOM \n                if (enableStream.value) {\n                    // \n                    progressDialogRef.value?.setProgress(30);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    await new Promise(r => setTimeout(r, 100)); //  DOM \n                    const response = await fetch(normalizedEndpoint, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${apiKey}`,\n                        },\n                        body: JSON.stringify({\n                            model: model,\n                            messages: [\n                                { role: 'system', content: systemPrompt },\n                                { role: 'user', content: userPrompt },\n                            ],\n                            temperature: temperature,\n                            max_tokens: maxTokens,\n                            stream: true, // \n                        }),\n                    });\n                    if (!response.ok) {\n                        let errorMsg = `API : ${response.status} ${response.statusText}`;\n                        try {\n                            const errorData = await response.json();\n                            console.error('API :', errorData);\n                            errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n                        }\n                        catch (e) {\n                            console.error('');\n                        }\n                        throw new Error(errorMsg);\n                    }\n                    // \n                    const reader = response.body?.getReader();\n                    const decoder = new TextDecoder();\n                    if (!reader) {\n                        throw new Error('');\n                    }\n                    let chunkCount = 0;\n                    while (true) {\n                        const { done, value } = await reader.read();\n                        if (done)\n                            break;\n                        const chunk = decoder.decode(value, { stream: true });\n                        const lines = chunk.split('\\n');\n                        for (const line of lines) {\n                            if (line.startsWith('data: ')) {\n                                const data = line.slice(6);\n                                if (data === '[DONE]')\n                                    continue;\n                                try {\n                                    const json = JSON.parse(data);\n                                    const content = json.choices?.[0]?.delta?.content || '';\n                                    if (content) {\n                                        resultText += content;\n                                        streamingText.value += content;\n                                        chunkCount++;\n                                        // 30%  60%\n                                        const progress = Math.min(60, 30 + chunkCount / 10);\n                                        progressDialogRef.value?.setProgress(progress);\n                                        // 10chunk\n                                        if (chunkCount % 10 === 0) {\n                                            progressDialogRef.value?.setMessage(` AI ... (${resultText.length} )`);\n                                        }\n                                    }\n                                }\n                                catch (e) {\n                                    // \n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    // \n                    progressDialogRef.value?.setProgress(30);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    await new Promise(r => setTimeout(r, 100)); //  DOM \n                    const response = await fetch(normalizedEndpoint, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${apiKey}`,\n                        },\n                        body: JSON.stringify({\n                            model: model,\n                            messages: [\n                                { role: 'system', content: systemPrompt },\n                                { role: 'user', content: userPrompt },\n                            ],\n                            temperature: temperature,\n                            max_tokens: maxTokens,\n                        }),\n                    });\n                    if (!response.ok) {\n                        let errorMsg = `API : ${response.status} ${response.statusText}`;\n                        try {\n                            const errorData = await response.json();\n                            console.error('API :', errorData);\n                            errorMsg += `\\n${JSON.stringify(errorData, null, 2)}`;\n                        }\n                        catch (e) {\n                            console.error('');\n                        }\n                        throw new Error(errorMsg);\n                    }\n                    progressDialogRef.value?.setProgress(60);\n                    progressDialogRef.value?.setMessage(' AI ...');\n                    const data = await response.json();\n                    resultText = data.choices?.[0]?.message?.content || '';\n                }\n                progressDialogRef.value?.setProgress(75);\n                progressDialogRef.value?.setMessage(' AI ...');\n                console.log('AI :', resultText);\n                console.log('AI :', resultText.length);\n                if (!resultText || resultText.trim().length === 0) {\n                    throw new Error('AI  API ');\n                }\n                // \n                const changes = [];\n                // FILE_START: filename\\n...FILE_END  FILE_START:filename\\n...FILE_END\n                const fileRegex = /FILE_START:\\s*(.+?)[\\r\\n]+([\\s\\S]*?)FILE_END/gi;\n                let match;\n                console.log(' AI ...');\n                // \n                const needMoreInfoMatch = resultText.match(/FILE_START:\\s*NEED_MORE_INFO\\s*[\\r\\n]+([\\s\\S]*?)FILE_END/i);\n                if (needMoreInfoMatch) {\n                    const guideContent = needMoreInfoMatch[1].trim();\n                    console.log(' AI ');\n                    //  AI \n                    closeAIDialog();\n                    // \n                    toastr.info('AI ', '', { timeOut: 3000 });\n                    // alert\n                    alert(guideContent);\n                    // \n                    aiGenerating.value = false;\n                    return;\n                }\n                while ((match = fileRegex.exec(resultText)) !== null) {\n                    const path = match[1].trim();\n                    const content = match[2].trim();\n                    console.log(`: ${path}, : ${content.length}`);\n                    const file = proj.files.find(f => f.path === path);\n                    if (file) {\n                        changes.push({\n                            path: path,\n                            oldContent: file.content,\n                            newContent: content,\n                        });\n                    }\n                    else {\n                        console.warn(` ${path} `);\n                    }\n                }\n                if (changes.length === 0) {\n                    console.error(' AI ');\n                    console.error('AI :', resultText.substring(0, 500));\n                    // \n                    if (resultText.length < 500 || !resultText.includes('FILE_END')) {\n                        throw new Error(`AI  ${resultText.length} \"\" max_tokens 4000 `);\n                    }\n                    throw new Error('AI  AI  FILE_START  FILE_END ');\n                }\n                console.log(':', changes.length, '');\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                // \n                if (changes.length === 1 && changes[0].path === 'index.html') {\n                    toastr.warning('AI  HTML CSS/JS');\n                }\n                //  FILE_END\n                const lastFile = resultText.trim().split('FILE_START').pop() || '';\n                if (!lastFile.includes('FILE_END')) {\n                    toastr.error('AI ');\n                }\n                const result = { changes };\n                if (!result.changes || !Array.isArray(result.changes)) {\n                    throw new Error('AI ');\n                }\n                // \n                aiChanges.value = result.changes;\n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage(`... (${changes.length} )`);\n                closeAIDialog();\n                showComparison.value = true;\n                previewMode.value = 'after';\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    toastr.success(` AI  ${changes.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                //  CORS \n                const errorMessage = error.message || String(error);\n                if (errorMessage.includes('CORS') ||\n                    errorMessage.includes('Failed to fetch') ||\n                    errorMessage.includes('Access-Control-Allow-Origin')) {\n                    toastr.error(` CORS  API\\n\\n` +\n                        `API ${new URL(normalizedEndpoint).origin} CORS \\n\\n` +\n                        `\\n` +\n                        `1.  API  CORS\\n` +\n                        `2.  CORS  API \\n` +\n                        `3.  API `);\n                }\n                else if (errorMessage.includes('307') || errorMessage.includes('Temporary Redirect')) {\n                    toastr.error(` URL \\n\\n` +\n                        `${normalizedEndpoint}\\n\\n` +\n                        `URL \\n` +\n                        `https:///v1`);\n                }\n                else {\n                    toastr.error(`AI : ${errorMessage}`);\n                }\n            }\n            finally {\n                aiGenerating.value = false;\n            }\n        }\n        function acceptChanges() {\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            const historyRecord = {\n                timestamp: new Date().toISOString(),\n                prompt: aiPrompt.value,\n                changes: aiChanges.value,\n            };\n            if (!aiHistory.value[currentId.value]) {\n                aiHistory.value[currentId.value] = [];\n            }\n            aiHistory.value[currentId.value].unshift(historyRecord);\n            console.log(' AI :', aiHistory.value[currentId.value].length);\n            // \n            aiChanges.value.forEach(change => {\n                const file = proj.files.find(f => f.path === change.path);\n                if (file) {\n                    file.content = change.newContent;\n                }\n            });\n            // \n            saveToChatVar();\n            updatePreview();\n            // \n            if (currentFile.value) {\n                const file = proj.files.find(f => f.path === currentFile.value);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n            showComparison.value = false;\n            aiChanges.value = [];\n            toastr.success('');\n        }\n        function rejectChanges() {\n            showComparison.value = false;\n            aiChanges.value = [];\n            toastr.info('');\n        }\n        function showHistoryDialog() {\n            showHistory.value = true;\n        }\n        function closeHistoryDialog() {\n            showHistory.value = false;\n        }\n        function restoreHistory(record) {\n            if (!confirm(`\\n\\n\"${record.prompt}\"\\n\\n`)) {\n                return;\n            }\n            const proj = currentProject.value;\n            if (!proj)\n                return;\n            // \n            record.changes.forEach(change => {\n                const file = proj.files.find(f => f.path === change.path);\n                if (file) {\n                    file.content = change.newContent;\n                }\n            });\n            console.log(':', record.prompt);\n            // \n            saveToChatVar();\n            updatePreview();\n            // \n            if (currentFile.value) {\n                const file = proj.files.find(f => f.path === currentFile.value);\n                if (file) {\n                    code.value = file.content;\n                }\n            }\n            closeHistoryDialog();\n            toastr.success('');\n        }\n        function exportToRegex() {\n            const proj = currentProject.value;\n            if (!proj) {\n                toastr.error('');\n                return;\n            }\n            // \n            const fileObj = proj.files.find(f => f.name === currentFile.value);\n            if (fileObj && code.value !== fileObj.content) {\n                const shouldContinue = confirm('\\n\\n');\n                if (!shouldContinue) {\n                    return;\n                }\n            }\n            // \n            const triggerWord = prompt(`${proj.name}\\n\\n\\n  //g`, `${proj.name}`);\n            if (!triggerWord) {\n                toastr.info('');\n                return;\n            }\n            try {\n                //  HTML proj.files \n                const fullHtml = buildPreviewFromFiles(proj.files);\n                //  UUID\n                const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                    const r = (Math.random() * 16) | 0;\n                    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n                    return v.toString(16);\n                });\n                //  JSON\n                // 1.  Windows  \\r\n                // 2.  <!DOCTYPE html>\\n <html> \n                // 3. ```html\\n\\n<html>...</html>\\n```\n                let cleanHtml = fullHtml.replace(/\\r/g, '');\n                cleanHtml = cleanHtml.replace(/^<!DOCTYPE html>\\n/, '');\n                const regexJson = {\n                    id: uuid,\n                    scriptName: proj.name,\n                    findRegex: triggerWord.startsWith('/') ? triggerWord : `/${triggerWord}/g`,\n                    replaceString: '```html\\n\\n' + cleanHtml + '\\n```',\n                    trimStrings: [],\n                    placement: [1, 2],\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                // \n                const dataStr = JSON.stringify(regexJson, null, 4);\n                const dataBlob = new Blob([dataStr], { type: 'application/json' });\n                const url = URL.createObjectURL(dataBlob);\n                const link = document.createElement('a');\n                link.href = url;\n                link.download = `${proj.name}_regex.json`;\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                console.log(' JSON:', regexJson);\n                toastr.success(` \"${proj.name}\"  JSON`);\n            }\n            catch (error) {\n                console.error(':', error);\n                toastr.error(`: ${error.message}`);\n            }\n        }\n        function openInNewWindow() {\n            if (!previewHtml.value) {\n                toastr.error('');\n                return;\n            }\n            const proj = currentProject.value;\n            const windowTitle = proj ? proj.name : '';\n            // \n            const newWindow = window.open('', '_blank', 'width=1200,height=800,menubar=no,toolbar=no,location=no,status=no');\n            if (newWindow) {\n                newWindow.document.write(previewHtml.value);\n                newWindow.document.close();\n                newWindow.document.title = windowTitle;\n                toastr.success('');\n            }\n            else {\n                toastr.error('');\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[68] || (_cache[68] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px !important\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-laptop-code\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: exportToRegex,\n                                onMouseenter: _cache[0] || (_cache[0] = (e) => (e.currentTarget.style.background = '#555')),\n                                onMouseleave: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.background = '#444'))\n                            }, [...(_cache[61] || (_cache[61] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-download\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showHistoryDialog,\n                                onMouseenter: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.background = '#555')),\n                                onMouseleave: _cache[3] || (_cache[3] = (e) => (e.currentTarget.style.background = '#444'))\n                            }, [...(_cache[62] || (_cache[62] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-history\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 2,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#8b5cf6\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showAIDialog,\n                                onMouseenter: _cache[4] || (_cache[4] = (e) => (e.currentTarget.style.background = '#7c3aed')),\n                                onMouseleave: _cache[5] || (_cache[5] = (e) => (e.currentTarget.style.background = '#8b5cf6'))\n                            }, [...(_cache[63] || (_cache[63] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-wand-magic-sparkles\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" AI  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                onClick: showBugFixDialog,\n                                onMouseenter: _cache[6] || (_cache[6] = (e) => (e.currentTarget.style.background = '#dc2626')),\n                                onMouseleave: _cache[7] || (_cache[7] = (e) => (e.currentTarget.style.background = '#ef4444'))\n                            }, [...(_cache[64] || (_cache[64] = [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-bug\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" Bug  \", -1 /* CACHED */)\n                                ]))], 32 /* NEED_HYDRATION */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: showProjectTemplateDialog,\n                            onMouseenter: _cache[8] || (_cache[8] = (e) => (e.currentTarget.style.background = '#555')),\n                            onMouseleave: _cache[9] || (_cache[9] = (e) => (e.currentTarget.style.background = '#444'))\n                        }, [...(_cache[65] || (_cache[65] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-file-lines\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: triggerFolderImport,\n                            onMouseenter: _cache[10] || (_cache[10] = (e) => (e.currentTarget.style.background = '#555')),\n                            onMouseleave: _cache[11] || (_cache[11] = (e) => (e.currentTarget.style.background = '#444'))\n                        }, [...(_cache[66] || (_cache[66] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-folder-open\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                            onClick: createProject,\n                            onMouseenter: _cache[12] || (_cache[12] = (e) => (e.currentTarget.style.background = '#059669')),\n                            onMouseleave: _cache[13] || (_cache[13] = (e) => (e.currentTarget.style.background = '#10b981'))\n                        }, [...(_cache[67] || (_cache[67] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-plus\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"input\", {\n                    ref_key: \"folderInputRef\",\n                    ref: folderInputRef,\n                    type: \"file\",\n                    webkitdirectory: \"\",\n                    directory: \"\",\n                    multiple: \"\",\n                    style: { \"display\": \"none\" },\n                    onChange: handleFolderImport\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[73] || (_cache[73] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 15px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                        (projects.value.length === 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[69] || (_cache[69] = [\n                                    _createTextVNode(\" \", -1 /* CACHED */),\n                                    _createElementVNode(\"br\", null, null, -1 /* CACHED */),\n                                    _createTextVNode(\" \\\"\\\" \", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(projects.value, (proj) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: proj.id,\n                                style: _normalizeStyle({\n                                    padding: '10px 12px',\n                                    marginBottom: '8px',\n                                    background: currentId.value === proj.id ? '#4a9eff' : '#1e1e1e',\n                                    borderRadius: '8px',\n                                    cursor: 'pointer',\n                                    transition: 'all 0.2s ease',\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    color: currentId.value === proj.id ? '#fff' : '#e0e0e0',\n                                }),\n                                onClick: ($event) => (selectProject(proj.id)),\n                                onMouseenter: (e) => currentId.value !== proj.id && (e.currentTarget.style.background = '#3a3a3a'),\n                                onMouseleave: (e) => currentId.value !== proj.id && (e.currentTarget.style.background = '#1e1e1e')\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_8, _toDisplayString(proj.name), 1 /* TEXT */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"20px\", \"height\": \"20px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"#ff4444\", \"font-size\": \"14px\", \"line-height\": \"1\", \"cursor\": \"pointer\", \"opacity\": \"0.6\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: _withModifiers(($event) => (deleteProject(proj.id)), [\"stop\"]),\n                                    onMouseenter: _cache[14] || (_cache[14] =\n                                        (e) => ((e.currentTarget.style.opacity = '1'),\n                                            (e.currentTarget.style.background = '#ef4444'),\n                                            (e.currentTarget.style.color = '#fff'))),\n                                    onMouseleave: _cache[15] || (_cache[15] =\n                                        (e) => ((e.currentTarget.style.opacity = '0.6'),\n                                            (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                                            (e.currentTarget.style.color = '#ff4444')))\n                                }, \"  \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_9)\n                            ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_7));\n                        }), 128 /* KEYED_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (currentId.value && currentProject.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _cache[72] || (_cache[72] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_12, [\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"5px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"4px\" },\n                                            title: \"\",\n                                            onClick: createNewFolder,\n                                            onMouseenter: _cache[16] || (_cache[16] = (e) => (e.currentTarget.style.background = '#555')),\n                                            onMouseleave: _cache[17] || (_cache[17] = (e) => (e.currentTarget.style.background = '#444'))\n                                        }, [...(_cache[70] || (_cache[70] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-folder-plus\",\n                                                    style: { \"font-size\": \"10px\" }\n                                                }, null, -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"5px\", \"color\": \"white\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"4px\" },\n                                            title: \"\",\n                                            onClick: showNewFileDialog,\n                                            onMouseenter: _cache[18] || (_cache[18] = (e) => (e.currentTarget.style.background = '#059669')),\n                                            onMouseleave: _cache[19] || (_cache[19] = (e) => (e.currentTarget.style.background = '#10b981'))\n                                        }, [...(_cache[71] || (_cache[71] = [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-plus\",\n                                                    style: { \"font-size\": \"10px\" }\n                                                }, null, -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */)\n                                    ])\n                                ]),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentProject.value.files, (file) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: file.path,\n                                        style: _normalizeStyle({\n                                            padding: '8px 10px',\n                                            marginBottom: '5px',\n                                            background: currentFile.value === file.path ? '#10b981' : '#1e1e1e',\n                                            borderRadius: '6px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s ease',\n                                            color: currentFile.value === file.path ? '#fff' : '#e0e0e0',\n                                            fontSize: '12px',\n                                            display: 'flex',\n                                            justifyContent: 'space-between',\n                                            alignItems: 'center',\n                                        }),\n                                        onClick: ($event) => (selectFile(file.path)),\n                                        onMouseenter: (e) => currentFile.value !== file.path && (e.currentTarget.style.background = '#3a3a3a'),\n                                        onMouseleave: (e) => currentFile.value !== file.path && (e.currentTarget.style.background = '#1e1e1e')\n                                    }, [\n                                        _createElementVNode(\"span\", null, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(getFileIcon(file.path)),\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, 2 /* CLASS */),\n                                            _createTextVNode(\" \" + _toDisplayString(file.name), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"width\": \"18px\", \"height\": \"18px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"none\", \"border-radius\": \"3px\", \"color\": \"#ff4444\", \"font-size\": \"12px\", \"line-height\": \"1\", \"cursor\": \"pointer\", \"opacity\": \"0\", \"transition\": \"all 0.2s ease\" },\n                                            title: \"\",\n                                            onClick: _withModifiers(($event) => (deleteFile(file.path)), [\"stop\"]),\n                                            onMouseenter: _cache[20] || (_cache[20] =\n                                                (e) => ((e.currentTarget.style.opacity = '1'),\n                                                    (e.currentTarget.style.background = '#ef4444'),\n                                                    (e.currentTarget.style.color = '#fff'))),\n                                            onMouseleave: _cache[21] || (_cache[21] =\n                                                (e) => ((e.currentTarget.style.opacity = '0.6'),\n                                                    (e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)'),\n                                                    (e.currentTarget.style.color = '#ff4444')))\n                                        }, \"  \", 40 /* PROPS, NEED_HYDRATION */, _hoisted_14)\n                                    ], 44 /* STYLE, PROPS, NEED_HYDRATION */, _hoisted_13));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_15, [\n                        (!currentId.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, \"   \"))\n                            : (!currentFile.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, \"   \"))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                                    _createElementVNode(\"div\", _hoisted_19, [\n                                        _createElementVNode(\"div\", _hoisted_20, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(getFileIcon(currentFile.value)),\n                                                style: { \"color\": \"#4a9eff\" }\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", _hoisted_21, _toDisplayString(currentFile.value), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_22, [\n                                            _cache[75] || (_cache[75] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-circle-check\",\n                                                    style: { \"color\": \"#10b981\", \"margin-right\": \"4px\" }\n                                                }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                                onClick: saveCode,\n                                                onMouseenter: _cache[22] || (_cache[22] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                                                onMouseleave: _cache[23] || (_cache[23] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                                            }, [...(_cache[74] || (_cache[74] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-floppy-disk\",\n                                                        style: { \"margin-right\": \"4px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 32 /* NEED_HYDRATION */)\n                                        ])\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((code).value = $event)),\n                                        placeholder: ` ${currentFile.value.split('.').pop()?.toUpperCase()} ...`,\n                                        style: { \"flex\": \"1\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"15px\", \"resize\": \"none\", \"outline\": \"none\", \"min-height\": \"400px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_23), [\n                                        [_vModelText, code.value]\n                                    ])\n                                ]))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_24, [\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _cache[77] || (_cache[77] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-eye\",\n                                    style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_26, [\n                                (previewHtml.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        title: \"\",\n                                        style: { \"width\": \"28px\", \"height\": \"28px\", \"padding\": \"0\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"transition\": \"all 0.2s ease\" },\n                                        onClick: openInNewWindow,\n                                        onMouseenter: _cache[25] || (_cache[25] = (e) => (e.currentTarget.style.background = '#4a9eff')),\n                                        onMouseleave: _cache[26] || (_cache[26] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                    }, [...(_cache[76] || (_cache[76] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-external-link-alt\",\n                                                style: { \"font-size\": \"12px\" }\n                                            }, null, -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_27, [\n                            (previewHtml.value)\n                                ? (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 0,\n                                    srcdoc: previewHtml.value,\n                                    sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_28))\n                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_29, \"  \"))\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\" AI  \"),\n                (showAI.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _withModifiers(closeAIDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_30, [\n                            _cache[85] || (_cache[85] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"color\": \"#8b5cf6\" }\n                                }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _cache[79] || (_cache[79] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-pencil\",\n                                        style: { \"color\": \"#8b5cf6\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _cache[80] || (_cache[80] = _createElementVNode(\"div\", { style: { \"margin-bottom\": \"10px\", \"padding\": \"10px 12px\", \"background\": \"rgba(139, 92, 246, 0.1)\", \"border-left\": \"3px solid #8b5cf6\", \"border-radius\": \"4px\", \"font-size\": \"12px\", \"color\": \"#ccc\", \"line-height\": \"1.6\" } }, [\n                                    _createElementVNode(\"strong\", { style: { \"color\": \"#8b5cf6\" } }, \" \"),\n                                    _createTextVNode(\" \\\"\\\"\\\"\\\" \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => ((aiPrompt).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, aiPrompt.value]\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _cache[78] || (_cache[78] = _createElementVNode(\"div\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"margin-bottom\": \"8px\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-lightbulb\",\n                                            style: { \"color\": \"#fbbf24\", \"margin-right\": \"4px\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_33, [\n                                        (_openBlock(), _createElementBlock(_Fragment, null, _renderList(quickSuggestions, (suggestion) => {\n                                            return _createElementVNode(\"button\", {\n                                                key: suggestion,\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                onClick: ($event) => (aiPrompt.value = suggestion),\n                                                onMouseenter: _cache[28] || (_cache[28] = (e) => (e.currentTarget.style.background = '#3a3a3a')),\n                                                onMouseleave: _cache[29] || (_cache[29] = (e) => (e.currentTarget.style.background = '#2a2a2a'))\n                                            }, _toDisplayString(suggestion), 41 /* TEXT, PROPS, NEED_HYDRATION */, _hoisted_34);\n                                        }), 64 /* STABLE_FRAGMENT */))\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_35, [\n                                _createElementVNode(\"label\", _hoisted_36, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event) => ((enableStream).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"width\": \"16px\", \"height\": \"16px\", \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableStream.value]\n                                    ]),\n                                    _cache[81] || (_cache[81] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-water\",\n                                        style: { \"color\": \"#4a9eff\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[82] || (_cache[82] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ]),\n                                _cache[83] || (_cache[83] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\" } }, \"  \", -1 /* CACHED */))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (aiGenerating.value && enableStream.value && streamingText.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                                    _createTextVNode(_toDisplayString(streamingText.value) + \" \", 1 /* TEXT */),\n                                    _cache[84] || (_cache[84] = _createElementVNode(\"span\", { style: { \"animation\": \"blink 1s infinite\" } }, \"\", -1 /* CACHED */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_38, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeAIDialog,\n                                    onMouseenter: _cache[31] || (_cache[31] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[32] || (_cache[32] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    disabled: aiGenerating.value || !aiPrompt.value.trim(),\n                                    style: _normalizeStyle([{ \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" }, {\n                                            opacity: aiGenerating.value || !aiPrompt.value.trim() ? 0.5 : 1,\n                                            cursor: aiGenerating.value || !aiPrompt.value.trim() ? 'not-allowed' : 'pointer',\n                                        }]),\n                                    onClick: generateWithAI\n                                }, [\n                                    (!aiGenerating.value)\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_40))\n                                        : (_openBlock(), _createElementBlock(\"i\", _hoisted_41)),\n                                    _createTextVNode(\" \" + _toDisplayString(aiGenerating.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_39)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Bug  \"),\n                (showBugFix.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _withModifiers(closeBugFixDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_42, [\n                            _cache[90] || (_cache[90] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 20px 0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-bug\",\n                                    style: { \"color\": \"#ef4444\" }\n                                }),\n                                _createTextVNode(\" Bug  \")\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_43, [\n                                _cache[86] || (_cache[86] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-circle-exclamation\",\n                                        style: { \"color\": \"#f59e0b\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[33] || (_cache[33] = ($event) => ((bugDescription).value = $event)),\n                                    placeholder: \"\\n\\n\",\n                                    style: { \"width\": \"100%\", \"height\": \"90px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, bugDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\" Console  \"),\n                            _createElementVNode(\"div\", _hoisted_44, [\n                                _cache[87] || (_cache[87] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-terminal\",\n                                        style: { \"color\": \"#ef4444\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  Console  F12  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((consoleError).value = $event)),\n                                    placeholder: \" Console \\nUncaught TypeError: xxx is not a function\\n\\n\",\n                                    style: { \"width\": \"100%\", \"height\": \"80px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#ff6b6b\", \"font-size\": \"12px\", \"font-family\": \"'Consolas', monospace\", \"line-height\": \"1.5\", \"padding\": \"12px\", \"resize\": \"none\", \"outline\": \"none\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, consoleError.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_45, [\n                                _cache[89] || (_cache[89] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-file-code\",\n                                        style: { \"color\": \"#4a9eff\", \"margin-right\": \"6px\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[35] || (_cache[35] = ($event) => ((bugFile).value = $event)),\n                                    style: { \"width\": \"100%\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"padding\": \"10px 12px\", \"outline\": \"none\", \"cursor\": \"pointer\" }\n                                }, [...(_cache[88] || (_cache[88] = [\n                                        _createElementVNode(\"option\", { value: \"\" }, \" AI \", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"index.html\" }, \"HTML index.html\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"style.css\" }, \"CSS style.css\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"script.js\" }, \"JavaScript script.js\", -1 /* CACHED */)\n                                    ]))], 512 /* NEED_PATCH */), [\n                                    [_vModelSelect, bugFile.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _cache[91] || (_cache[91] = _createElementVNode(\"div\", { style: { \"padding\": \"12px\", \"background\": \"rgba(74, 158, 255, 0.1)\", \"border\": \"1px solid rgba(74, 158, 255, 0.3)\", \"border-radius\": \"6px\", \"margin-bottom\": \"15px\" } }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#4a9eff\", \"font-size\": \"12px\", \"line-height\": \"1.6\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-lightbulb\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }),\n                                    _createElementVNode(\"strong\", null, \"\"),\n                                    _createTextVNode(\"AI  bug Console  \")\n                                ])\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeBugFixDialog,\n                                    onMouseenter: _cache[36] || (_cache[36] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[37] || (_cache[37] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    disabled: aiGenerating.value || !bugDescription.value.trim(),\n                                    style: _normalizeStyle([{ \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" }, {\n                                            opacity: aiGenerating.value || !bugDescription.value.trim() ? 0.5 : 1,\n                                            cursor: aiGenerating.value || !bugDescription.value.trim() ? 'not-allowed' : 'pointer',\n                                        }]),\n                                    onClick: fixBugWithAI\n                                }, [\n                                    (!aiGenerating.value)\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_48))\n                                        : (_openBlock(), _createElementBlock(\"i\", _hoisted_49)),\n                                    _createTextVNode(\" \" + _toDisplayString(aiGenerating.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_47)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showComparison.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                        _createElementVNode(\"div\", _hoisted_51, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_52, [\n                                _cache[94] || (_cache[94] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-code-compare\",\n                                        style: { \"color\": \"#8b5cf6\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_53, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                        onClick: rejectChanges,\n                                        onMouseenter: _cache[38] || (_cache[38] = (e) => (e.currentTarget.style.background = '#dc2626')),\n                                        onMouseleave: _cache[39] || (_cache[39] = (e) => (e.currentTarget.style.background = '#ef4444'))\n                                    }, [...(_cache[92] || (_cache[92] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-xmark\",\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"#10b981\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                        onClick: acceptChanges,\n                                        onMouseenter: _cache[40] || (_cache[40] = (e) => (e.currentTarget.style.background = '#059669')),\n                                        onMouseleave: _cache[41] || (_cache[41] = (e) => (e.currentTarget.style.background = '#10b981'))\n                                    }, [...(_cache[93] || (_cache[93] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-check\",\n                                                style: { \"margin-right\": \"6px\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_54, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_55, [\n                                    _cache[95] || (_cache[95] = _createElementVNode(\"div\", { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\" } }, [\n                                        _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-code\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#ef4444\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ])\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_56, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(aiChanges.value, (change) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: change.path,\n                                                style: { \"margin-bottom\": \"20px\" }\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_57, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(getFileIcon(change.path))\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"pre\", _hoisted_58, _toDisplayString(change.oldContent), 1 /* TEXT */)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_59, [\n                                    _cache[96] || (_cache[96] = _createElementVNode(\"div\", { style: { \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\" } }, [\n                                        _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-code\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#10b981\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ])\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_60, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(aiChanges.value, (change) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: change.path,\n                                                style: { \"margin-bottom\": \"20px\" }\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_61, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(getFileIcon(change.path))\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"pre\", _hoisted_62, _toDisplayString(change.newContent), 1 /* TEXT */)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_63, [\n                                    _createElementVNode(\"div\", _hoisted_64, [\n                                        _cache[97] || (_cache[97] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-eye\",\n                                                style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_65, [\n                                            _createElementVNode(\"button\", {\n                                                style: _normalizeStyle({\n                                                    padding: '4px 10px',\n                                                    background: previewMode.value === 'before' ? '#ef4444' : '#3a3a3a',\n                                                    border: 'none',\n                                                    borderRadius: '4px',\n                                                    color: 'white',\n                                                    fontSize: '11px',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease',\n                                                }),\n                                                onClick: _cache[42] || (_cache[42] = ($event) => (previewMode.value = 'before'))\n                                            }, \"  \", 4 /* STYLE */),\n                                            _createElementVNode(\"button\", {\n                                                style: _normalizeStyle({\n                                                    padding: '4px 10px',\n                                                    background: previewMode.value === 'after' ? '#10b981' : '#3a3a3a',\n                                                    border: 'none',\n                                                    borderRadius: '4px',\n                                                    color: 'white',\n                                                    fontSize: '11px',\n                                                    cursor: 'pointer',\n                                                    transition: 'all 0.2s ease',\n                                                }),\n                                                onClick: _cache[43] || (_cache[43] = ($event) => (previewMode.value = 'after'))\n                                            }, \"  \", 4 /* STYLE */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_66, [\n                                        _createElementVNode(\"iframe\", {\n                                            srcdoc: comparisonPreviewHtml.value,\n                                            sandbox: \"allow-scripts allow-same-origin allow-modals allow-forms\",\n                                            style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\" }\n                                        }, null, 8 /* PROPS */, _hoisted_67)\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showHistory.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 3,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _withModifiers(closeHistoryDialog, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_68, [\n                            _createElementVNode(\"div\", _hoisted_69, [\n                                _cache[98] || (_cache[98] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-history\",\n                                        style: { \"color\": \"#f59e0b\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"28px\", \"height\": \"28px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s ease\" },\n                                    onClick: closeHistoryDialog,\n                                    onMouseenter: _cache[44] || (_cache[44] = (e) => (e.currentTarget.style.background = '#4a4a4a')),\n                                    onMouseleave: _cache[45] || (_cache[45] = (e) => (e.currentTarget.style.background = '#3a3a3a'))\n                                }, \"  \", 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_70, [\n                                (currentProjectHistory.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_71, [...(_cache[99] || (_cache[99] = [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-inbox\",\n                                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"15px\", \"opacity\": \"0.3\" }\n                                            }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(currentProjectHistory.value, (record, index) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: index,\n                                        style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid #3a3a3a\" }\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_72, [\n                                            _createElementVNode(\"div\", null, [\n                                                _createElementVNode(\"div\", _hoisted_73, _toDisplayString(record.prompt), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_74, _toDisplayString(new Date(record.timestamp).toLocaleString('zh-CN')), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                style: { \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"500\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                onClick: ($event) => (restoreHistory(record)),\n                                                onMouseenter: _cache[46] || (_cache[46] = (e) => (e.currentTarget.style.background = '#3b82f6')),\n                                                onMouseleave: _cache[47] || (_cache[47] = (e) => (e.currentTarget.style.background = '#4a9eff'))\n                                            }, [...(_cache[100] || (_cache[100] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-undo\",\n                                                        style: { \"margin-right\": \"4px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_75)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_76, [\n                                            _cache[101] || (_cache[101] = _createElementVNode(\"strong\", null, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_77, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(record.changes, (change) => {\n                                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                                        key: change.path,\n                                                        style: { \"background\": \"#2a2a2a\", \"padding\": \"4px 10px\", \"border-radius\": \"4px\", \"font-size\": \"12px\", \"display\": \"inline-flex\", \"align-items\": \"center\", \"gap\": \"6px\" }\n                                                    }, [\n                                                        _createElementVNode(\"i\", {\n                                                            class: _normalizeClass(getFileIcon(change.path))\n                                                        }, null, 2 /* CLASS */),\n                                                        _createTextVNode(\" \" + _toDisplayString(change.path), 1 /* TEXT */)\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (showProjectTemplate.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 4,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"padding\": \"20px\" },\n                        onClick: _cache[60] || (_cache[60] = _withModifiers(($event) => (showProjectTemplate.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_78, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_79, [\n                                _cache[103] || (_cache[103] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"20px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\" } }, [\n                                    _createElementVNode(\"span\", { style: { \"width\": \"40px\", \"height\": \"40px\", \"background\": \"#2a2a2a\", \"border-radius\": \"10px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"20px\" } }, \"  \"),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"width\": \"36px\", \"height\": \"36px\", \"background\": \"#2a2a2a\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"#888\", \"font-size\": \"18px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\" },\n                                    onClick: _cache[48] || (_cache[48] = ($event) => (showProjectTemplate.value = false)),\n                                    onMouseenter: _cache[49] || (_cache[49] =\n                                        (e) => {\n                                            e.currentTarget.style.background = '#333';\n                                            e.currentTarget.style.color = '#fff';\n                                        }),\n                                    onMouseleave: _cache[50] || (_cache[50] =\n                                        (e) => {\n                                            e.currentTarget.style.background = '#2a2a2a';\n                                            e.currentTarget.style.color = '#888';\n                                        })\n                                }, [...(_cache[102] || (_cache[102] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_80, [\n                                _createElementVNode(\"div\", _hoisted_81, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[51] || (_cache[51] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[52] || (_cache[52] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[53] || (_cache[53] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[104] || (_cache[104] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[54] || (_cache[54] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[55] || (_cache[55] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[56] || (_cache[56] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[105] || (_cache[105] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"HP/MP/\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        style: { \"background\": \"#252525\", \"border\": \"1px solid transparent\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"cursor\": \"pointer\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\", \"box-shadow\": \"0 2px 8px rgba(0, 0, 0, 0.3)\" },\n                                        onClick: _cache[57] || (_cache[57] = ($event) => (createProjectFromTemplate(''))),\n                                        onMouseenter: _cache[58] || (_cache[58] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(-4px)';\n                                                e.currentTarget.style.borderColor = '#555';\n                                                e.currentTarget.style.boxShadow = '0 8px 24px rgba(0, 0, 0, 0.5)';\n                                            }),\n                                        onMouseleave: _cache[59] || (_cache[59] =\n                                            (e) => {\n                                                e.currentTarget.style.transform = 'translateY(0)';\n                                                e.currentTarget.style.borderColor = 'transparent';\n                                                e.currentTarget.style.boxShadow = '0 2px 8px rgba(0, 0, 0, 0.3)';\n                                            })\n                                    }, [...(_cache[106] || (_cache[106] = [\n                                            _createElementVNode(\"div\", { style: { \"width\": \"56px\", \"height\": \"56px\", \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"font-size\": \"28px\", \"margin-bottom\": \"16px\" } }, \"  \", -1 /* CACHED */),\n                                            _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#fff\", \"font-size\": \"17px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#999\", \"font-size\": \"13px\", \"line-height\": \"1.6\" } }, \"\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */)\n                                ]),\n                                _cache[107] || (_cache[107] = _createElementVNode(\"div\", { style: { \"margin-top\": \"24px\", \"padding\": \"16px 18px\", \"background\": \"#252525\", \"border\": \"1px solid #333\", \"border-radius\": \"10px\" } }, [\n                                    _createElementVNode(\"div\", { style: { \"color\": \"#ccc\", \"font-weight\": \"500\", \"margin-bottom\": \"6px\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                        _createElementVNode(\"span\", { style: { \"color\": \"#fbbf24\", \"font-size\": \"16px\" } }, \"\"),\n                                        _createTextVNode(\"  \")\n                                    ]),\n                                    _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#888\", \"font-size\": \"13px\", \"line-height\": \"1.7\" } }, \"  \")\n                                ], -1 /* CACHED */))\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ProjectManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ProjectManager.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ProjectManager.vue?vue&type=style&index=0&id=434cf372&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-434cf372\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"regex-ui-generator\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr\", \"gap\": \"20px\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"20px\" } };\nconst _hoisted_4 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\", \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-top\": \"15px\" } };\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = { style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_10 = { style: { \"color\": \"#51cf66\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_11 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\", \"background\": \"#51cf66\", \"color\": \"white\", \"padding\": \"4px 12px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_12 = { style: { \"flex\": \"1\", \"background\": \"#1a1a1a\", \"border\": \"2px solid #444\", \"border-radius\": \"6px\", \"overflow\": \"hidden\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"min-height\": \"400px\" } };\nconst _hoisted_13 = {\n    key: 0,\n    style: { \"text-align\": \"center\", \"color\": \"#666\", \"padding\": \"40px\" }\n};\nconst _hoisted_14 = [\"srcdoc\"];\nconst _hoisted_15 = {\n    key: 0,\n    style: { \"background\": \"#2a2a2a\", \"padding\": \"20px\", \"border-radius\": \"8px\" }\n};\nconst _hoisted_16 = {\n    key: 0,\n    style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"4px\", \"border\": \"1px solid #444\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_17 = { style: { \"margin\": \"0\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', monospace\", \"font-size\": \"13px\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\" } };\nconst _hoisted_18 = { style: { \"display\": \"flex\", \"gap\": \"12px\" } };\nconst _hoisted_19 = [\"disabled\"];\nimport { ref } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RegexUIGenerator',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const settings = settingsStore.settings;\n        const triggerKeyword = ref('');\n        const interfaceDescription = ref('');\n        const generatedCode = ref('');\n        const generatedRegex = ref('');\n        const isGenerating = ref(false);\n        const isModifying = ref(false);\n        const showCode = ref(false);\n        const showModify = ref(false);\n        const modifyInstruction = ref('');\n        const previewFrame = ref(null);\n        // AI \n        const generateWithAI = async () => {\n            if (!triggerKeyword.value || !interfaceDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isGenerating.value = true;\n            try {\n                const prompt = ` HTML \n\n${triggerKeyword.value}\n\n\n${interfaceDescription.value}\n\n HTML \n1. HTML \n2.  <style> CSS \n3.  <script>  JS \n\n\n- HTML \n- CSS \n- JS \n- \n- \n\n HTML  <!DOCTYPE html>  <div> `;\n                const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ' HTML/CSS/JS ',\n                            },\n                            { role: 'user', content: prompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                console.log(' [] AI :', result.length);\n                console.log(' [] AI 500:', result.substring(0, 500));\n                //  markdown \n                result = result\n                    .replace(/```html\\n?/g, '')\n                    .replace(/```\\n?/g, '')\n                    .trim();\n                // HTMLAI\n                // 1.  <!DOCTYPE html \n                const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n                if (doctypeMatch) {\n                    result = doctypeMatch[0].trim();\n                    console.log(' [] HTMLDOCTYPE');\n                }\n                else {\n                    // 2. DOCTYPE <html \n                    const htmlMatch = result.match(/<html[\\s\\S]*/i);\n                    if (htmlMatch) {\n                        result = htmlMatch[0].trim();\n                        console.log(' [] HTMLDOCTYPE');\n                    }\n                    else if (result.includes('<') && result.includes('>')) {\n                        // 3. htmlHTML\n                        console.log(' [] HTML');\n                        // \n                        if (!result.includes('<html')) {\n                            result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n                            console.log(' [] HTML');\n                        }\n                    }\n                    else {\n                        // 4. HTMLAI\n                        console.error(' [] AIHTML');\n                        console.error('AI:', result);\n                        throw new Error('AIHTML');\n                    }\n                }\n                console.log(' [] HTML:', result.length);\n                generatedCode.value = result;\n                // \n                const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const regexJson = {\n                    id: `regex_ui_${Date.now()}`,\n                    scriptName: `_${triggerKeyword.value}`,\n                    findRegex: findRegex,\n                    replaceString: result,\n                    trimStrings: [],\n                    placement: [2], // AI\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                generatedRegex.value = JSON.stringify(regexJson, null, 2);\n                window.toastr.success('AI ');\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isGenerating.value = false;\n            }\n        };\n        // \n        const showModifyDialog = () => {\n            modifyInstruction.value = '';\n            showModify.value = true;\n        };\n        // AI \n        const modifyWithAI = async () => {\n            if (!modifyInstruction.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifying.value = true;\n            try {\n                //  +  AI \n                const prompt = ` HTML \n\n${triggerKeyword.value}\n\n\n${interfaceDescription.value}\n\n\n${modifyInstruction.value}\n\n HTML \n1. HTML \n2.  <style> CSS \n3.  <script>  JS \n\n\n- \n- HTML \n- CSS \n- JS \n- \n\n HTML  <!DOCTYPE html>  <div> `;\n                const apiUrl = normalizeApiEndpoint(settings.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: ' HTML/CSS/JS ',\n                            },\n                            { role: 'user', content: prompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 4000,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.status}`);\n                }\n                const data = await response.json();\n                let result = data.choices?.[0]?.message?.content || '';\n                console.log(' [] AI :', result.length);\n                console.log(' [] AI 500:', result.substring(0, 500));\n                //  markdown \n                result = result\n                    .replace(/```html\\n?/g, '')\n                    .replace(/```\\n?/g, '')\n                    .trim();\n                // HTMLAI\n                // 1.  <!DOCTYPE html \n                const doctypeMatch = result.match(/<!DOCTYPE html>[\\s\\S]*/i);\n                if (doctypeMatch) {\n                    result = doctypeMatch[0].trim();\n                    console.log(' [] HTMLDOCTYPE');\n                }\n                else {\n                    // 2. DOCTYPE <html \n                    const htmlMatch = result.match(/<html[\\s\\S]*/i);\n                    if (htmlMatch) {\n                        result = htmlMatch[0].trim();\n                        console.log(' [] HTMLDOCTYPE');\n                    }\n                    else if (result.includes('<') && result.includes('>')) {\n                        // 3. htmlHTML\n                        console.log(' [] HTML');\n                        // \n                        if (!result.includes('<html')) {\n                            result = `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body>\n${result}\n</body>\n</html>`;\n                            console.log(' [] HTML');\n                        }\n                    }\n                    else {\n                        // 4. HTMLAI\n                        console.error(' [] AIHTML');\n                        console.error('AI:', result);\n                        throw new Error('AIHTML');\n                    }\n                }\n                console.log(' [] HTML:', result.length);\n                generatedCode.value = result;\n                // \n                const findRegex = triggerKeyword.value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const regexJson = {\n                    id: `regex_ui_${Date.now()}`,\n                    scriptName: `_${triggerKeyword.value}`,\n                    findRegex: findRegex,\n                    replaceString: result,\n                    trimStrings: [],\n                    placement: [2], // AI\n                    disabled: false,\n                    markdownOnly: true,\n                    promptOnly: false,\n                    runOnEdit: true,\n                    substituteRegex: 0,\n                    minDepth: null,\n                    maxDepth: null,\n                };\n                generatedRegex.value = JSON.stringify(regexJson, null, 2);\n                // \n                interfaceDescription.value = `${interfaceDescription.value}\\n\\n\\n${modifyInstruction.value}`;\n                window.toastr.success('AI ');\n                showModify.value = false;\n            }\n            catch (error) {\n                console.error('AI :', error);\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifying.value = false;\n            }\n        };\n        // \n        const copyRegex = () => {\n            copyToClipboard(generatedRegex.value, '');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[21] || (_cache[21] = _createElementVNode(\"div\", { style: { \"background\": \"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)\", \"padding\": \"20px\", \"border-radius\": \"12px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(102, 126, 234, 0.2)\" } }, [\n                    _createElementVNode(\"h3\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 10px 0\", \"font-size\": \"20px\", \"font-weight\": \"600\" } }, \" \"),\n                    _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0\", \"font-size\": \"14px\", \"line-height\": \"1.6\" } }, \" AI  HTML/CSS/JS  \")\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _cache[22] || (_cache[22] = _createStaticVNode(\"<div style=\\\"background:#2a2a2a;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #ffc107;\\\" data-v-f1283e36><h4 style=\\\"color:#ffc107;margin:0 0 15px 0;font-size:16px;display:flex;align-items:center;gap:8px;\\\" data-v-f1283e36><i class=\\\"fa-solid fa-lightbulb\\\" data-v-f1283e36></i>  </h4><ol style=\\\"margin:0;padding-left:20px;color:#ccc;line-height:2;\\\" data-v-f1283e36><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>1</strong>  <code style=\\\"background:#1a1a1a;padding:2px 6px;border-radius:3px;color:#4a9eff;\\\" data-v-f1283e36></code>  </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>2</strong> </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>3</strong> &quot;AI &quot;AI </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>4</strong> <strong style=\\\"color:#51cf66;\\\" data-v-f1283e36></strong>&quot;AI &quot; </li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36>5</strong> &quot;&quot;</li><li data-v-f1283e36><strong style=\\\"color:#fff;\\\" data-v-f1283e36></strong>  <code style=\\\"background:#1a1a1a;padding:2px 6px;border-radius:3px;color:#51cf66;\\\" data-v-f1283e36></code>  </li></ol></div>\", 1)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-key\" }),\n                                _createTextVNode(\" : \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((triggerKeyword).value = $event)),\n                                type: \"text\",\n                                placeholder: \"\",\n                                style: { \"width\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, triggerKeyword.value]\n                            ])\n                        ]),\n                        _createCommentVNode(\" AI  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0 0 15px 0\", \"font-size\": \"16px\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-magic\" }),\n                                _createTextVNode(\" AI : \")\n                            ], -1 /* CACHED */)),\n                            _cache[11] || (_cache[11] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0 0 10px 0\", \"font-size\": \"13px\" } }, \" RPG... \", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((interfaceDescription).value = $event)),\n                                placeholder: \"\\n- \\n- RPG\\n- \\n\\n\\n\",\n                                style: { \"width\": \"100%\", \"flex\": \"1\", \"min-height\": \"200px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"font-family\": \"'Consolas', monospace\", \"resize\": \"none\", \"line-height\": \"1.6\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, interfaceDescription.value]\n                            ]),\n                            _createCommentVNode(\" AI / \"),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createElementVNode(\"button\", {\n                                    disabled: !triggerKeyword.value || !interfaceDescription.value || isGenerating.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s\" }, { opacity: !triggerKeyword.value || !interfaceDescription.value || isGenerating.value ? 0.5 : 1 }]),\n                                    onClick: generateWithAI\n                                }, [\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGenerating.value ? 'AI ...' : generatedCode.value ? 'AI ' : 'AI '), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_7),\n                                (generatedCode.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        disabled: isModifying.value,\n                                        style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s\" }, { opacity: isModifying.value ? 0.5 : 1 }]),\n                                        onClick: showModifyDialog\n                                    }, [\n                                        _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifying.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 12 /* STYLE, PROPS */, _hoisted_8))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _createElementVNode(\"h4\", _hoisted_10, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */)),\n                            _cache[13] || (_cache[13] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                            (generatedCode.value)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"\"))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            (!generatedCode.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [...(_cache[14] || (_cache[14] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-image\",\n                                            style: { \"font-size\": \"64px\", \"margin-bottom\": \"20px\", \"opacity\": \"0.3\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", { style: { \"font-size\": \"16px\", \"margin\": \"0\" } }, \"...\", -1 /* CACHED */),\n                                        _createElementVNode(\"p\", { style: { \"font-size\": \"14px\", \"margin\": \"10px 0 0 0\" } }, \"\\\"AI \\\"\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(\"iframe\", {\n                                    key: 1,\n                                    ref_key: \"previewFrame\",\n                                    ref: previewFrame,\n                                    srcdoc: generatedCode.value,\n                                    style: { \"width\": \"100%\", \"height\": \"100%\", \"border\": \"none\", \"background\": \"white\" }\n                                }, null, 8 /* PROPS */, _hoisted_14))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (generatedCode.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                style: { \"margin-top\": \"15px\", \"background\": \"#51cf66\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"transition\": \"all 0.2s\" },\n                                onClick: copyRegex\n                            }, [...(_cache[15] || (_cache[15] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (generatedRegex.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                        _createElementVNode(\"div\", {\n                            style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"margin-bottom\": \"15px\" },\n                            onClick: _cache[2] || (_cache[2] = ($event) => (showCode.value = !showCode.value))\n                        }, [\n                            _cache[16] || (_cache[16] = _createElementVNode(\"h4\", { style: { \"color\": \"#4a9eff\", \"margin\": \"0\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-code\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(showCode.value ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                style: { \"color\": \"#888\", \"transition\": \"transform 0.3s\" }\n                            }, null, 2 /* CLASS */)\n                        ]),\n                        (showCode.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                                _createElementVNode(\"pre\", _hoisted_17, _toDisplayString(generatedRegex.value), 1 /* TEXT */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showModify.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"z-index\": \"1000000\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"padding\": \"20px\" },\n                        onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (showModify.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", {\n                            style: { \"background\": \"#2a2a2a\", \"border\": \"2px solid #ffc107\", \"border-radius\": \"12px\", \"padding\": \"30px\", \"max-width\": \"600px\", \"width\": \"100%\" },\n                            onClick: _cache[5] || (_cache[5] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _cache[18] || (_cache[18] = _createElementVNode(\"h3\", { style: { \"color\": \"#ffc107\", \"margin\": \"0 0 20px 0\" } }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _cache[19] || (_cache[19] = _createElementVNode(\"p\", { style: { \"color\": \"#888\", \"margin\": \"0 0 15px 0\", \"line-height\": \"1.6\" } }, \" AI  \", -1 /* CACHED */)),\n                            _cache[20] || (_cache[20] = _createElementVNode(\"ul\", { style: { \"color\": \"#888\", \"margin\": \"0 0 20px 0\", \"padding-left\": \"20px\", \"line-height\": \"1.8\" } }, [\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\"),\n                                _createElementVNode(\"li\", null, \"\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((modifyInstruction).value = $event)),\n                                placeholder: \"...\",\n                                style: { \"width\": \"100%\", \"min-height\": \"150px\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\", \"border\": \"1px solid #444\", \"border-radius\": \"4px\", \"padding\": \"12px\", \"font-size\": \"14px\", \"margin-bottom\": \"20px\", \"resize\": \"vertical\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, modifyInstruction.value]\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _createElementVNode(\"button\", {\n                                    disabled: !modifyInstruction.value || isModifying.value,\n                                    style: _normalizeStyle([{ \"flex\": \"1\", \"background\": \"#ffc107\", \"color\": \"#000\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\" }, { opacity: !modifyInstruction.value || isModifying.value ? 0.5 : 1 }]),\n                                    onClick: modifyWithAI\n                                }, [\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isModifying.value ? '...' : ''), 1 /* TEXT */)\n                                ], 12 /* STYLE, PROPS */, _hoisted_19),\n                                _createElementVNode(\"button\", {\n                                    style: { \"flex\": \"1\", \"background\": \"#666\", \"color\": \"white\", \"border\": \"none\", \"padding\": \"12px 24px\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-size\": \"14px\", \"font-weight\": \"600\" },\n                                    onClick: _cache[4] || (_cache[4] = ($event) => (showModify.value = false))\n                                }, \"  \")\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RegexUIGenerator.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RegexUIGenerator.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RegexUIGenerator.vue?vue&type=style&index=0&id=f1283e36&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f1283e36\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, unref as _unref, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, vShow as _vShow, vModelCheckbox as _vModelCheckbox, normalizeStyle as _normalizeStyle, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"settings-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_6 = { class: \"form-group\" };\nconst _hoisted_7 = {\n    class: \"model-controls\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" }\n};\nconst _hoisted_8 = { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } };\nconst _hoisted_9 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin-left\": \"8px\" }\n};\nconst _hoisted_10 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_14 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_15 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_16 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_17 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_18 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_19 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_20 = {\n    class: \"checkbox-label\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\" }\n};\nconst _hoisted_21 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_22 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_23 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_24 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_25 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_26 = [\"disabled\"];\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = {\n    key: 0,\n    class: \"fa-solid fa-magic\"\n};\nconst _hoisted_29 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_30 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_31 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_32 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_33 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_34 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_35 = [\"value\"];\nconst _hoisted_36 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"gap\": \"8px\" }\n};\nconst _hoisted_37 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_38 = { style: { \"display\": \"flex\", \"gap\": \"12px\", \"align-items\": \"center\" } };\nconst _hoisted_39 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_40 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" } };\nconst _hoisted_41 = {\n    key: 0,\n    style: { \"margin-left\": \"auto\" }\n};\nconst _hoisted_42 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_43 = [\"disabled\"];\nconst _hoisted_44 = {\n    key: 0,\n    class: \"fa-solid fa-robot\"\n};\nconst _hoisted_45 = {\n    key: 1,\n    class: \"fa-solid fa-spinner fa-spin\"\n};\nconst _hoisted_46 = {\n    class: \"config-section\",\n    style: { \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_47 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"18px !important\" }\n};\nconst _hoisted_48 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"flex-wrap\": \"wrap\", \"margin-top\": \"5px\" }\n};\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = {\n    key: 0,\n    class: \"hidden-messages-section\"\n};\nconst _hoisted_51 = { class: \"form-group\" };\nconst _hoisted_52 = { class: \"flex-label\" };\nconst _hoisted_53 = {\n    key: 0,\n    class: \"hidden-messages-list\"\n};\nconst _hoisted_54 = { class: \"message-info\" };\nconst _hoisted_55 = { class: \"message-id\" };\nconst _hoisted_56 = { class: \"message-preview\" };\nconst _hoisted_57 = [\"onClick\"];\nconst _hoisted_58 = {\n    key: 1,\n    class: \"empty-state\"\n};\nimport { storeToRefs } from 'pinia';\nimport { onMounted, ref } from 'vue';\nimport { useSettingsStore, useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe, getScriptIdSafe } from '../utils';\nimport ProgressDialog from './ProgressDialog.vue';\n\nimport { klona } from 'klona';\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        const summaryHistoryStore = useSummaryHistoryStore();\n        // \n        const expandedSections = ref({\n            api: true,\n            autoSummary: true,\n            manualSummary: true,\n            tableGeneration: true,\n            messageManagement: true,\n        });\n        // /\n        const toggleSection = (section) => {\n            expandedSections.value[section] = !expandedSections.value[section];\n        };\n        // API\n        // setChatMessages \n        // \n        const parseMessageRange = (range) => {\n            if (!range.trim())\n                return [];\n            const messageIds = [];\n            const parts = range.split(',');\n            for (const part of parts) {\n                const trimmed = part.trim();\n                if (!trimmed)\n                    continue;\n                if (trimmed.includes('-')) {\n                    //  \"1-10\"\n                    const [start, end] = trimmed.split('-').map(s => parseInt(s.trim()));\n                    if (!isNaN(start) && !isNaN(end) && start >= 0 && end >= 0) {\n                        for (let i = start; i <= end; i++) {\n                            messageIds.push(i);\n                        }\n                    }\n                }\n                else {\n                    //  \"5\"  \"0\"\n                    const id = parseInt(trimmed);\n                    if (!isNaN(id) && id >= 0) {\n                        messageIds.push(id);\n                    }\n                }\n            }\n            return messageIds;\n        };\n        // \n        const available_models = ref([]);\n        const loading_models = ref(false);\n        const hide_range = ref('');\n        const hidden_messages = ref([]);\n        const hidden_display_expanded = ref(false);\n        // \n        const is_summarizing = ref(false);\n        const is_generating_table = ref(false);\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // \n        const headerTemplates = ref([]);\n        const selectedTemplate = ref('');\n        const currentTemplate = ref({ name: '', headers: '' });\n        // \n        const loadGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                is_summarizing.value = scriptVars.is_summarizing || false;\n                is_generating_table.value = scriptVars.is_generating_table || false;\n                console.log(':', { summarizing: is_summarizing.value, generating_table: is_generating_table.value });\n            }\n            catch (error) {\n                console.error(':', error);\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n            }\n        };\n        const saveGenerationStatus = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({\n                    is_summarizing: is_summarizing.value,\n                    is_generating_table: is_generating_table.value,\n                }, { type: 'script', script_id: scriptId });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const stopGeneration = () => {\n            if (is_summarizing.value || is_generating_table.value) {\n                is_summarizing.value = false;\n                is_generating_table.value = false;\n                saveGenerationStatus();\n                window.toastr.info('');\n            }\n        };\n        // \n        const loadHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                //  header_templates  nullundefined\n                let templates = scriptVars.header_templates;\n                //  nullundefined  []\n                if (!Array.isArray(templates)) {\n                    templates = [];\n                }\n                headerTemplates.value = templates;\n                console.log(':', headerTemplates.value.length, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                headerTemplates.value = [];\n            }\n        };\n        const saveHeaderTemplates = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables(klona({ header_templates: headerTemplates.value }), {\n                    type: 'script',\n                    script_id: scriptId,\n                });\n                console.log('');\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        const loadTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    currentTemplate.value = { ...headerTemplates.value[index] };\n                }\n            }\n        };\n        const showAddTemplateDialog = () => {\n            const name = window.prompt('');\n            if (name && name.trim()) {\n                const headers = window.prompt('');\n                if (headers && headers.trim()) {\n                    headerTemplates.value.push({ name: name.trim(), headers: headers.trim() });\n                    saveHeaderTemplates();\n                    selectedTemplate.value = (headerTemplates.value.length - 1).toString();\n                    loadTemplate();\n                    window.toastr.success('');\n                }\n            }\n        };\n        const saveTemplate = () => {\n            if (selectedTemplate.value !== '' && currentTemplate.value.name.trim() && currentTemplate.value.headers.trim()) {\n                const index = parseInt(selectedTemplate.value);\n                if (index >= 0 && index < headerTemplates.value.length) {\n                    headerTemplates.value[index] = { ...currentTemplate.value };\n                    saveHeaderTemplates();\n                    window.toastr.success('');\n                }\n            }\n            else {\n                window.toastr.warning('');\n            }\n        };\n        const deleteTemplate = () => {\n            if (selectedTemplate.value !== '') {\n                if (confirm('')) {\n                    const index = parseInt(selectedTemplate.value);\n                    if (index >= 0 && index < headerTemplates.value.length) {\n                        headerTemplates.value.splice(index, 1);\n                        saveHeaderTemplates();\n                        selectedTemplate.value = '';\n                        currentTemplate.value = { name: '', headers: '' };\n                        window.toastr.success('');\n                    }\n                }\n            }\n        };\n        // \n        const loadHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                const saved = getVariables({ type: 'script', script_id: scriptId });\n                console.log(':', saved);\n                console.log(' hidden_messages :', saved?.hidden_messages);\n                if (saved && saved.hidden_messages) {\n                    hidden_messages.value = saved.hidden_messages;\n                    console.log(':', hidden_messages.value.length, '');\n                }\n                else {\n                    console.log('...');\n                    // \n                    const possibleFields = ['hiddenMessages', 'hidden_floors', 'hiddenFloors', 'floor_data'];\n                    for (const field of possibleFields) {\n                        if (saved && saved[field]) {\n                            console.log(` ${field}:`, saved[field]);\n                            hidden_messages.value = saved[field];\n                            break;\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        // \n        const saveHiddenMessages = () => {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                console.log('ID:', scriptId);\n                console.log(':', klona(hidden_messages.value));\n                const dataToSave = {\n                    hidden_messages: hidden_messages.value,\n                };\n                console.log(':', klona(dataToSave));\n                insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id: scriptId });\n                console.log(':', hidden_messages.value.length, '');\n                // \n                setTimeout(() => {\n                    const saved = getVariables({ type: 'script', script_id: scriptId });\n                    console.log(':', saved);\n                    console.log(' hidden_messages :', saved?.hidden_messages);\n                }, 100);\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        };\n        //  API \n        const initApiProvider = () => {\n            if (!settings.value.api_provider || settings.value.api_provider === '') {\n                const endpoint = settings.value.api_endpoint || '';\n                if (endpoint.includes('generativelanguage.googleapis.com')) {\n                    settings.value.api_provider = 'gemini';\n                }\n                else if (endpoint.includes('open.bigmodel.cn')) {\n                    settings.value.api_provider = 'zhipu';\n                }\n                else {\n                    settings.value.api_provider = 'openai';\n                }\n            }\n        };\n        // \n        onMounted(() => {\n            console.log('SettingsTab ');\n            initApiProvider(); //  API \n            loadHiddenMessages();\n            loadHeaderTemplates();\n            loadGenerationStatus();\n        });\n        // \n        const handleTestButton = () => {\n            console.log(' - Vue');\n            window.toastr.success('Vue');\n        };\n        // \n        const handleSaveSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.saveSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleReloadSettings = () => {\n            console.log(' ...');\n            const success = settingsStore.reloadSettings();\n            if (success) {\n                console.log(' ');\n            }\n            else {\n                console.error(' ');\n            }\n        };\n        const handleResetAutoSummaryStart = () => {\n            console.log(' ...');\n            try {\n                // \n                if (typeof window.resetAutoSummaryStart === 'function') {\n                    window.resetAutoSummaryStart();\n                }\n                else {\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // API \n        const handleProviderChange = () => {\n            const provider = settings.value.api_provider;\n            const providerEndpoints = {\n                openai: 'https://api.openai.com/v1',\n                gemini: 'https://generativelanguage.googleapis.com/v1beta/openai',\n            };\n            if (providerEndpoints[provider]) {\n                settings.value.api_endpoint = providerEndpoints[provider];\n                window.toastr.success(` ${provider === 'openai' ? 'OpenAI' : 'Gemini AI Studio'}`);\n            }\n        };\n        // \n        // API\n        const handleSaveApiConfig = () => {\n            try {\n                // \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                const success = settingsStore.saveSettings();\n                if (success) {\n                    console.log('API :', {\n                        endpoint: settings.value.api_endpoint,\n                        model: settings.value.model,\n                        provider: settings.value.api_provider,\n                        //  API Key\n                        api_key: settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '',\n                    });\n                }\n            }\n            catch (error) {\n                console.error(' API :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const handleImportFromTavern = async () => {\n            try {\n                console.log(' ...');\n                // \n                if (typeof triggerSlash === 'undefined') {\n                    window.toastr.error('');\n                    return;\n                }\n                console.log(' ...');\n                //  1: \n                console.log('1  /profile ...');\n                const currentProfileResult = await triggerSlash('/profile', '');\n                console.log(':', currentProfileResult);\n                // \n                if (!currentProfileResult ||\n                    currentProfileResult === 'No connection profile selected.' ||\n                    currentProfileResult.includes('')) {\n                    console.log(' ...');\n                    // \n                    const parentWin = window.parent || window.top || window;\n                    const powerUser = parentWin.power_user;\n                    const secretState = parentWin.secret_state;\n                    let endpoint = '';\n                    let apiKey = '';\n                    let model = '';\n                    if (powerUser) {\n                        endpoint = powerUser.custom_chat_url || powerUser.reverse_proxy || '';\n                        model = powerUser.custom_model || powerUser.openai_model || '';\n                    }\n                    if (secretState) {\n                        apiKey = secretState.api_key_custom || secretState.custom || secretState.openai || '';\n                    }\n                    if (!endpoint && !apiKey && !model) {\n                        window.toastr.warning(' API \\n\\n' +\n                            ' \\n' +\n                            'API     ');\n                        return;\n                    }\n                    // \n                    if (endpoint)\n                        settings.value.api_endpoint = endpoint;\n                    if (apiKey)\n                        settings.value.api_key = apiKey;\n                    if (model)\n                        settings.value.model = model;\n                    await settingsStore.saveSettings();\n                    window.toastr.success(` \\n\\n` +\n                        (endpoint ? ` : ${endpoint}\\n` : '') +\n                        (apiKey ? ` Key: ***${apiKey.slice(-4)}\\n` : '') +\n                        (model ? ` : ${model}` : ''));\n                    return;\n                }\n                //  2: \n                const profileName = currentProfileResult.trim();\n                console.log(`2 : ${profileName}`);\n                const profileDetailsResult = await triggerSlash('/profile-get', profileName);\n                console.log(':', profileDetailsResult);\n                //  JSON\n                let profileData;\n                try {\n                    profileData = JSON.parse(profileDetailsResult);\n                    console.log(' :', profileData);\n                }\n                catch (parseError) {\n                    console.error('  JSON :', parseError);\n                    window.toastr.error('');\n                    return;\n                }\n                // \n                let endpoint = '';\n                let apiKey = '';\n                let model = '';\n                // API  api-url  server_url\n                if (profileData['api-url']) {\n                    endpoint = profileData['api-url'];\n                    console.log('  API  (api-url):', endpoint);\n                }\n                else if (profileData.server_url) {\n                    endpoint = profileData.server_url;\n                    console.log('  API  (server_url):', endpoint);\n                }\n                // API Key - \n                if (profileData['secret-id']) {\n                    const secretId = profileData['secret-id'];\n                    console.log('  secret-id:', secretId);\n                    console.log(' API Key ');\n                }\n                else if (profileData.key) {\n                    apiKey = profileData.key;\n                    console.log('  API Key (key)');\n                }\n                // model\n                if (profileData.model) {\n                    model = profileData.model;\n                    console.log(' :', model);\n                }\n                // \n                if (!endpoint && !model) {\n                    window.toastr.warning(' API \\n\\n' +\n                        '\\n' +\n                        ' \\n' +\n                        ' \\n\\n' +\n                        ' ');\n                    console.warn(' :', profileData);\n                    return;\n                }\n                //  API Key\n                if (!apiKey) {\n                    console.log(' API Key ');\n                }\n                // \n                let importedCount = 0;\n                const importDetails = [];\n                if (endpoint) {\n                    settings.value.api_endpoint = endpoint;\n                    importedCount++;\n                    importDetails.push(` API : ${endpoint}`);\n                }\n                if (apiKey) {\n                    settings.value.api_key = apiKey;\n                    importedCount++;\n                    importDetails.push(` API Key: ***${apiKey.slice(-4)}`);\n                }\n                if (model) {\n                    settings.value.model = model;\n                    importedCount++;\n                    importDetails.push(` : ${model}`);\n                }\n                // \n                await settingsStore.saveSettings();\n                // \n                let successMessage = `  ${importedCount} \\n\\n` +\n                    ` : ${profileName}\\n\\n` +\n                    `${importDetails.join('\\n')}`;\n                //  API Key\n                if (!apiKey) {\n                    successMessage += `\\n\\n API Key \\n API Key`;\n                }\n                window.toastr.success(successMessage);\n                console.log(' :', {\n                    profileName,\n                    endpoint,\n                    apiKey: apiKey ? '***' + apiKey.slice(-4) : '',\n                    model,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        const handle_fetch_models = async () => {\n            if (loading_models.value)\n                return;\n            try {\n                loading_models.value = true;\n                console.log(' ...');\n                console.log(' API :', settings.value.api_endpoint);\n                console.log(' API Key:', settings.value.api_key ? '***' + settings.value.api_key.slice(-4) : '');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                window.toastr.info('...');\n                // \n                const { fetchAvailableModels } = await import('../');\n                const models = await fetchAvailableModels();\n                console.log(' :', models);\n                if (models.length > 0) {\n                    // \n                    available_models.value = models;\n                    window.toastr.success(`  ${models.length} \\n` +\n                        `: ${models.slice(0, 3).join(', ')}${models.length > 3 ? '...' : ''}`);\n                    // \n                    if (!settings.value.model && models[0]) {\n                        settings.value.model = models[0];\n                        console.log(' :', models[0]);\n                    }\n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                // \n                const errorMessage = error.message;\n                // \n                if (errorMessage.length > 200) {\n                    window.toastr.error(' \\n\\n' +\n                        'F12\\n\\n' +\n                        '\\n' +\n                        ' API  /v1/models \\n' +\n                        ' API Key \\n' +\n                        '  CORS ');\n                }\n                else {\n                    window.toastr.error(` \\n\\n${errorMessage}`);\n                }\n                console.error(' :', errorMessage);\n            }\n            finally {\n                loading_models.value = false;\n            }\n        };\n        const handle_test_connection = async () => {\n            try {\n                console.log('...');\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                window.toastr.info('...');\n                // \n                const { normalizeApiEndpoint } = await import('../settings');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                //  OpenAI \n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model || 'gpt-3.5-turbo',\n                        messages: [{ role: 'user', content: 'Hello' }],\n                        max_tokens: 5,\n                        temperature: settings.value.temperature,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    console.log('API :', data);\n                    // \n                    const reply = data.choices?.[0]?.message?.content || '()';\n                    const modelUsed = data.model || settings.value.model;\n                    window.toastr.success(` \\n` + ` : ${modelUsed}\\n` + ` : ${reply.substring(0, 50)}...`);\n                }\n                else {\n                    const errorText = await response.text();\n                    console.error('API :', errorText);\n                    window.toastr.error(`  (${response.status})\\n` + `: ${errorText.substring(0, 100)}`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_summarize = async () => {\n            try {\n                if (is_summarizing.value)\n                    return;\n                console.log('...');\n                is_summarizing.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                if (settings.value.start_message_id === undefined || settings.value.end_message_id === undefined) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                if (settings.value.start_message_id < 0 || settings.value.end_message_id < settings.value.start_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                console.log(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\n                // \n                showProgress.value = true;\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${settings.value.start_message_id} - ${settings.value.end_message_id}`);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                // \n                const { summarizeMessages } = await import('../');\n                const summary = await summarizeMessages(settings.value.start_message_id, settings.value.end_message_id);\n                progressDialogRef.value?.setProgress(90);\n                progressDialogRef.value?.setMessage('...');\n                console.log(':', summary);\n                // \n                const scriptId = getScriptIdSafe();\n                if (scriptId) {\n                    insertOrAssignVariables(klona({ last_summary: summary }), { type: 'script', script_id: scriptId });\n                }\n                // \n                summaryHistoryStore.addSummary(settings.value.start_message_id ?? 0, settings.value.end_message_id ?? settings.value.start_message_id ?? 0, summary);\n                // \n                window.dispatchEvent(new CustomEvent('summary-history-updated'));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail('');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    window.toastr.success('');\n                }, 800);\n            }\n            catch (error) {\n                console.error(':', error);\n                showProgress.value = false;\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_summarizing.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_generate_table = async () => {\n            try {\n                if (is_generating_table.value)\n                    return;\n                console.log('...');\n                is_generating_table.value = true;\n                saveGenerationStatus();\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.warning(' API  API Key');\n                    return;\n                }\n                // \n                showProgress.value = true;\n                progressDialogRef.value?.setProgress(5);\n                progressDialogRef.value?.setMessage('...');\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let headersInput = null;\n                if (currentTemplate.value.headers.trim()) {\n                    // \n                    const useTemplate = confirm(`\"${currentTemplate.value.name}\"\\n${currentTemplate.value.headers}`);\n                    if (useTemplate) {\n                        headersInput = currentTemplate.value.headers;\n                    }\n                }\n                if (!headersInput) {\n                    // \n                    headersInput = window.prompt(',,,');\n                }\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                progressDialogRef.value?.setProgress(15);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${settings.value.table_start_message_id} - ${settings.value.table_end_message_id}`);\n                // \n                let chatMessages;\n                try {\n                    const messageRange = `${settings.value.table_start_message_id}-${settings.value.table_end_message_id}`;\n                    console.log(':', messageRange);\n                    chatMessages = getChatMessages(messageRange, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                    progressDialogRef.value?.addDetail(` ${chatMessages.length} `);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    showProgress.value = false;\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // AI\n                const messagesText = chatMessages\n                    .map(msg => {\n                    const role = msg.role === 'user' ? '' : 'AI';\n                    return `${role}: ${msg.message}`;\n                })\n                    .join('\\n\\n');\n                const aiPrompt = `${headers.join(', ')}\n\n\n${messagesText}\n\n****\n1. \n2. ${headers.join(', ')}\n3. \n4. \"\"\"-\"\n5. JSONmarkdown\n6. dataheaders\n\n**JSON**\n{\n  \"data\": [\n    [\"1\", \"2\", \"3\"],\n    [\"4\", \"5\", \"6\"]\n  ]\n}\n\ndata${headers.length}${headers.join(', ')}`;\n                console.log('AI...');\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${headers.join(', ')}`);\n                // \n                const { normalizeApiEndpoint } = await import('../settings');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                // AI\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'user',\n                                content: aiPrompt,\n                            },\n                        ],\n                        max_tokens: settings.value.max_tokens,\n                        temperature: settings.value.temperature,\n                        top_p: settings.value.top_p,\n                        presence_penalty: settings.value.presence_penalty,\n                        frequency_penalty: settings.value.frequency_penalty,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API: ${response.status} ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                console.log('AI:', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log('AI:', aiResponse);\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                // AIJSON\n                let aiTableData;\n                try {\n                    // JSONmarkdown\n                    let jsonText = aiResponse.trim();\n                    // markdown\n                    jsonText = jsonText\n                        .replace(/^```json\\s*/i, '')\n                        .replace(/^```\\s*/, '')\n                        .replace(/```\\s*$/, '');\n                    // JSON\n                    const jsonMatch = jsonText.match(/\\{[\\s\\S]*\\}/);\n                    if (jsonMatch) {\n                        aiTableData = JSON.parse(jsonMatch[0]);\n                    }\n                    else {\n                        throw new Error('JSON');\n                    }\n                }\n                catch (parseError) {\n                    console.error('AI:', parseError);\n                    console.log('AI:', aiResponse);\n                    window.toastr.error('AI');\n                    return;\n                }\n                // \n                if (!aiTableData.data || !Array.isArray(aiTableData.data)) {\n                    window.toastr.error('AIdata');\n                    return;\n                }\n                // \n                for (let i = 0; i < aiTableData.data.length; i++) {\n                    if (!Array.isArray(aiTableData.data[i])) {\n                        window.toastr.error(`${i + 1}`);\n                        return;\n                    }\n                    if (aiTableData.data[i].length !== headers.length) {\n                        window.toastr.error(`${i + 1}${headers.length}${aiTableData.data[i].length}`);\n                        console.log(`:`, headers);\n                        console.log(`:`, aiTableData.data[i]);\n                        return;\n                    }\n                }\n                // headers\n                const tableData = {\n                    headers: headers,\n                    data: aiTableData.data,\n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push({\n                        start_id: settings.value.table_start_message_id,\n                        end_id: settings.value.table_end_message_id,\n                        headers: tableData.headers,\n                        data: tableData.data,\n                    });\n                    insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\n                    progressDialogRef.value?.setProgress(100);\n                    progressDialogRef.value?.setMessage(' ');\n                    progressDialogRef.value?.addDetail(` ${tableData.data.length} `);\n                    setTimeout(() => {\n                        showProgress.value = false;\n                        window.toastr.success(`${tableData.data.length}`);\n                    }, 800);\n                    console.log(':', table_history);\n                }\n                else {\n                    showProgress.value = false;\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                showProgress.value = false;\n                window.toastr.error(': ' + error.message);\n            }\n            finally {\n                is_generating_table.value = false;\n                saveGenerationStatus();\n            }\n        };\n        const handle_create_table = () => {\n            try {\n                // \n                if (!settings.value.table_start_message_id || !settings.value.table_end_message_id) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headersInput = window.prompt(',,,');\n                if (!headersInput || !headersInput.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const headers = headersInput\n                    .split(',')\n                    .map((h) => h.trim())\n                    .filter((h) => h);\n                if (headers.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const emptyTableData = {\n                    start_id: settings.value.table_start_message_id,\n                    end_id: settings.value.table_end_message_id,\n                    headers: headers,\n                    data: [], // \n                };\n                // \n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    const chat_vars = getVariables({ type: 'chat' });\n                    const table_history = chat_vars.table_history || [];\n                    table_history.push(emptyTableData);\n                    insertOrAssignVariables(klona({ table_history }), { type: 'chat' });\n                    window.toastr.success(`${headers.join(', ')}`);\n                    console.log(':', emptyTableData);\n                }\n                else {\n                    window.toastr.warning('ID');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_hide_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const ranges = hide_range.value.split(',').map(range => range.trim());\n                const messageIds = [];\n                for (const range of ranges) {\n                    if (range.includes('-')) {\n                        // 1-10\n                        const [start, end] = range.split('-').map(Number);\n                        if (start && end && start <= end) {\n                            for (let i = start; i <= end; i++) {\n                                messageIds.push(i);\n                            }\n                        }\n                    }\n                    else {\n                        // 5\n                        const id = Number(range);\n                        if (id) {\n                            messageIds.push(id);\n                        }\n                    }\n                }\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let hiddenCount = 0;\n                const messagesToHide = [];\n                for (const messageId of messageIds) {\n                    // \n                    const alreadyHidden = hidden_messages.value.some(msg => msg.message_id === messageId);\n                    if (alreadyHidden) {\n                        console.log(` ${messageId} `);\n                        continue;\n                    }\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        // \n                        messagesToHide.push({\n                            message_id: messageId,\n                            is_hidden: true,\n                        });\n                        // \n                        hidden_messages.value.push({\n                            message_id: messageId,\n                            name: message.name || 'Unknown',\n                            role: message.role || 'user',\n                            message: message.message || '',\n                        });\n                        hiddenCount++;\n                    }\n                }\n                // API\n                if (messagesToHide.length > 0) {\n                    try {\n                        console.log(' slash :', messageIds);\n                        //  slash \n                        for (const messageId of messageIds) {\n                            try {\n                                await triggerSlash(`/hide ${messageId}`);\n                                console.log(` ${messageId}`);\n                            }\n                            catch (error) {\n                                console.error(` ${messageId} :`, error);\n                            }\n                        }\n                        window.toastr.success('');\n                    }\n                    catch (error) {\n                        console.error('API:', error);\n                        window.toastr.error('API: ' + error.message);\n                    }\n                }\n                if (hiddenCount > 0) {\n                    // \n                    saveHiddenMessages();\n                    window.toastr.success(` ${hiddenCount} `);\n                    hide_range.value = ''; // \n                }\n                else {\n                    window.toastr.warning('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_show_messages = async () => {\n            try {\n                console.log('...');\n                if (!hide_range.value.trim()) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messageIds = parseMessageRange(hide_range.value.trim());\n                if (messageIds.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error(': ' + error.message);\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // \n                const messagesToShow = [];\n                let shownCount = 0;\n                for (const messageId of messageIds) {\n                    const message = chatMessages.find(msg => msg.message_id === messageId);\n                    if (message) {\n                        messagesToShow.push({\n                            message_id: messageId,\n                            is_hidden: false,\n                        });\n                        shownCount++;\n                    }\n                }\n                if (messagesToShow.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    for (const messageId of messageIds) {\n                        try {\n                            await triggerSlash(`/unhide ${messageId}`);\n                            console.log(` ${messageId}`);\n                        }\n                        catch (error) {\n                            console.error(` ${messageId} :`, error);\n                        }\n                    }\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.error('API: ' + error.message);\n                    return;\n                }\n                // \n                hidden_messages.value = hidden_messages.value.filter(hiddenMsg => !messageIds.includes(hiddenMsg.message_id));\n                // \n                saveHiddenMessages();\n                window.toastr.success(` ${shownCount} `);\n                hide_range.value = ''; // \n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        const handle_refresh_hidden = async (showToast = false) => {\n            try {\n                console.log('', showToast);\n                // \n                if (hidden_messages.value.length === 0) {\n                    console.log('...');\n                    loadHiddenMessages();\n                }\n                // \n                let chatMessages;\n                try {\n                    const lastMessageId = getLastMessageId();\n                    console.log('ID:', lastMessageId);\n                    chatMessages = getChatMessages(`0-${lastMessageId}`, { hide_state: 'all' });\n                    console.log(':', chatMessages.length);\n                }\n                catch (error) {\n                    console.error(':', error);\n                    if (showToast) {\n                        window.toastr.error(': ' + error.message);\n                    }\n                    return;\n                }\n                if (!chatMessages || chatMessages.length === 0) {\n                    if (showToast) {\n                        window.toastr.warning('');\n                    }\n                    return;\n                }\n                // \n                const validHiddenMessages = [];\n                let removedCount = 0;\n                for (const hiddenMsg of hidden_messages.value) {\n                    const message = chatMessages.find(msg => msg.message_id === hiddenMsg.message_id);\n                    if (message) {\n                        // \n                        validHiddenMessages.push({\n                            message_id: hiddenMsg.message_id,\n                            name: message.name || hiddenMsg.name,\n                            role: message.role || hiddenMsg.role,\n                            message: message.message || hiddenMsg.message,\n                        });\n                    }\n                    else {\n                        // \n                        removedCount++;\n                    }\n                }\n                // \n                hidden_messages.value = validHiddenMessages;\n                // \n                saveHiddenMessages();\n                if (showToast) {\n                    if (removedCount > 0) {\n                        window.toastr.success(` ${removedCount} `);\n                    }\n                    else {\n                        window.toastr.success('');\n                    }\n                }\n                console.log(`${validHiddenMessages.length} ${removedCount} `);\n            }\n            catch (error) {\n                console.error(':', error);\n                if (showToast) {\n                    window.toastr.error(': ' + error.message);\n                }\n            }\n        };\n        const handle_unhide_single = async (messageId) => {\n            try {\n                console.log('', messageId);\n                // \n                const index = hidden_messages.value.findIndex(msg => msg.message_id === messageId);\n                if (index === -1) {\n                    window.toastr.warning(` #${messageId} `);\n                    return;\n                }\n                // API\n                try {\n                    //  slash \n                    await triggerSlash(`/unhide ${messageId}`);\n                    console.log(':', messageId);\n                }\n                catch (error) {\n                    console.error('API:', error);\n                    window.toastr.warning('API');\n                    return;\n                }\n                // \n                hidden_messages.value.splice(index, 1);\n                // \n                saveHiddenMessages();\n                window.toastr.success(` #${messageId}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" API  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleSection('api'))),\n                        onMouseenter: _cache[1] || (_cache[1] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[2] || (_cache[2] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[37] || (_cache[37] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-cog\",\n                                style: { \"color\": \"#17a2b8\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\" API  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['api'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[39] || (_cache[39] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API \", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).api_provider) = $event)),\n                                onChange: handleProviderChange,\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\", \"cursor\": \"pointer\" }\n                            }, [...(_cache[38] || (_cache[38] = [\n                                    _createElementVNode(\"option\", { value: \"openai\" }, \"OpenAI\", -1 /* CACHED */),\n                                    _createElementVNode(\"option\", { value: \"gemini\" }, \"Gemini AI Studio\", -1 /* CACHED */)\n                                ]))], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelSelect, _unref(settings).api_provider]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[40] || (_cache[40] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" API  \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\", \"margin-left\": \"8px\" } }, \" ( base URL ) \")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).api_endpoint) = $event)),\n                                type: \"text\",\n                                placeholder: \"https:///v1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).api_endpoint]\n                            ]),\n                            _cache[41] || (_cache[41] = _createStaticVNode(\"<div style=\\\"margin-top:8px;padding:8px 12px;background:rgba(74, 158, 255, 0.1);border-radius:4px;border-left:3px solid #4a9eff;\\\"><div style=\\\"color:#4a9eff;font-size:12px;font-weight:bold;margin-bottom:4px;\\\">   </div><div style=\\\"color:#999;font-size:11px;line-height:1.6;\\\">  <strong>OpenAI :</strong> https://api.openai.com/v1<br>  <strong>Gemini AI Studio:</strong> https://generativelanguage.googleapis.com/v1beta/openai/<br>  <strong>NewAPI / One API:</strong> https:///v1<br>  <strong> (Ollama):</strong> http://localhost:11434/v1<br>  <strong></strong> /chat/completions </div></div>\", 1))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _cache[42] || (_cache[42] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"API Key\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).api_key) = $event)),\n                                type: \"password\",\n                                placeholder: \"sk-...\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(settings).api_key]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createElementVNode(\"label\", _hoisted_8, [\n                                    _cache[43] || (_cache[43] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    (available_models.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \" ( gpt-4o-mini) \"))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"button\", {\n                                        disabled: loading_models.value,\n                                        class: \"fetch-button\",\n                                        style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25),\\n                    inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                        onmouseover: \"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(74, 158, 255, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(74, 158, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onClick: handle_fetch_models\n                                    }, _toDisplayString(loading_models.value ? '...' : ' '), 9 /* TEXT, PROPS */, _hoisted_11),\n                                    _createElementVNode(\"button\", {\n                                        class: \"save-button\",\n                                        style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #28a745\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25),\\n                    inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                        onmouseover: \"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(81, 207, 102, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(81, 207, 102, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.15)'\",\n                                        onClick: handleSaveApiConfig\n                                    }, \"   \")\n                                ])\n                            ]),\n                            (available_models.value.length === 0)\n                                ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                    key: 0,\n                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).model) = $event)),\n                                    type: \"text\",\n                                    placeholder: \"gpt-4o-mini  deepseek-chat \",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, null, 512 /* NEED_PATCH */)), [\n                                    [_vModelText, _unref(settings).model]\n                                ])\n                                : _withDirectives((_openBlock(), _createElementBlock(\"select\", {\n                                    key: 1,\n                                    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(settings).model) = $event)),\n                                    class: \"model-select\",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(available_models.value, (model) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: model,\n                                            value: model\n                                        }, _toDisplayString(model), 9 /* TEXT, PROPS */, _hoisted_12));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 512 /* NEED_PATCH */)), [\n                                    [_vModelSelect, _unref(settings).model]\n                                ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _cache[44] || (_cache[44] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \" Token 4000\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(settings).max_tokens) = $event)),\n                                type: \"number\",\n                                min: \"100\",\n                                max: \"16000\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).max_tokens,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _cache[45] || (_cache[45] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Temperature () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(0-2 0.7)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(settings).temperature) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).temperature,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[46] || (_cache[46] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  0.8 0.2 \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            _cache[47] || (_cache[47] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Top P () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(0-1 1.0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((_unref(settings).top_p) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                max: \"1\",\n                                step: \"0.01\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).top_p,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[48] || (_cache[48] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"   Temperature  Top P \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_16, [\n                            _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Presence Penalty () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(-2.0 to 2.0 0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((_unref(settings).presence_penalty) = $event)),\n                                type: \"number\",\n                                min: \"-2\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).presence_penalty,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[50] || (_cache[50] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            _cache[51] || (_cache[51] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, [\n                                _createTextVNode(\" Frequency Penalty () \"),\n                                _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"11px\" } }, \"(-2.0 to 2.0 0)\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((_unref(settings).frequency_penalty) = $event)),\n                                type: \"number\",\n                                min: \"-2\",\n                                max: \"2\",\n                                step: \"0.1\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).frequency_penalty,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ]),\n                            _cache[52] || (_cache[52] = _createElementVNode(\"div\", { style: { \"margin-top\": \"4px\", \"color\": \"#888\", \"font-size\": \"11px\" } }, \"  \", -1 /* CACHED */))\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['api']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_18, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[13] || (_cache[13] = ($event) => (toggleSection('autoSummary'))),\n                        onMouseenter: _cache[14] || (_cache[14] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[15] || (_cache[15] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[53] || (_cache[53] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-bolt\",\n                                style: { \"color\": \"#ffc107\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['autoSummary'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_19, [\n                            _createElementVNode(\"label\", _hoisted_20, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((_unref(settings).auto_summarize_enabled) = $event)),\n                                    type: \"checkbox\",\n                                    style: { \"width\": \"16px\", \"height\": \"16px\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelCheckbox, _unref(settings).auto_summarize_enabled]\n                                ]),\n                                _cache[54] || (_cache[54] = _createTextVNode(\"  \", -1 /* CACHED */))\n                            ])\n                        ]),\n                        (_unref(settings).auto_summarize_enabled)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                _cache[55] || (_cache[55] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((_unref(settings).summarize_interval) = $event)),\n                                    type: \"number\",\n                                    min: \"1\",\n                                    style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        _unref(settings).summarize_interval,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                _createElementVNode(\"div\", { style: { \"margin-top\": \"10px\", \"display\": \"flex\", \"gap\": \"10px\" } }, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleSaveSettings\n                                    }, \"   \"),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleReloadSettings\n                                    }, \"   \"),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onmouseover: \"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'\",\n                                        onmouseout: \"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'\",\n                                        onClick: handleResetAutoSummaryStart\n                                    }, \"   \")\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['autoSummary']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_22, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[18] || (_cache[18] = ($event) => (toggleSection('manualSummary'))),\n                        onMouseenter: _cache[19] || (_cache[19] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[20] || (_cache[20] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[56] || (_cache[56] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-pen-to-square\",\n                                style: { \"color\": \"#28a745\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['manualSummary'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_23, [\n                            _cache[57] || (_cache[57] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event) => ((_unref(settings).start_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).start_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                            _cache[58] || (_cache[58] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event) => ((_unref(settings).end_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).end_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button test-button\",\n                                disabled: is_summarizing.value,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#3a3a3a\", \"color\": \"#e0e0e0\" },\n                                onClick: handle_test_connection\n                            }, [...(_cache[59] || (_cache[59] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plug\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_26),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button summarize-button\",\n                                disabled: is_summarizing.value || !_unref(settings).api_key,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_summarize\n                            }, [\n                                (!is_summarizing.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_28))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_29)),\n                                _createTextVNode(\" \" + _toDisplayString(is_summarizing.value ? '...' : ''), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_27)\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['manualSummary']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_30, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[23] || (_cache[23] = ($event) => (toggleSection('tableGeneration'))),\n                        onMouseenter: _cache[24] || (_cache[24] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[25] || (_cache[25] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[60] || (_cache[60] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"color\": \"#6f42c1\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['tableGeneration'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_31, [\n                            _cache[61] || (_cache[61] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event) => ((_unref(settings).table_start_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).table_start_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_32, [\n                            _cache[62] || (_cache[62] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event) => ((_unref(settings).table_end_message_id) = $event)),\n                                type: \"number\",\n                                min: \"0\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [\n                                    _vModelText,\n                                    _unref(settings).table_end_message_id,\n                                    void 0,\n                                    { number: true }\n                                ]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_33, [\n                            _cache[67] || (_cache[67] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => ((selectedTemplate).value = $event)),\n                                    style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                    onChange: loadTemplate\n                                }, [\n                                    _cache[63] || (_cache[63] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(headerTemplates.value, (template, index) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: index,\n                                            value: index\n                                        }, _toDisplayString(template.name), 9 /* TEXT, PROPS */, _hoisted_35));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, selectedTemplate.value]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 12px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                    onClick: showAddTemplateDialog\n                                }, [...(_cache[64] || (_cache[64] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            (selectedTemplate.value !== '')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event) => ((currentTemplate.value.name) = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"flex\": \"1\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, currentTemplate.value.name]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event) => ((currentTemplate.value.headers) = $event)),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"flex\": \"2\", \"padding\": \"8px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, currentTemplate.value.headers]\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 12px\", \"background\": \"#28a745\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                        onClick: saveTemplate\n                                    }, [...(_cache[65] || (_cache[65] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-save\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"8px 12px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"white-space\": \"nowrap\" },\n                                        onClick: deleteTemplate\n                                    }, [...(_cache[66] || (_cache[66] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_37, [\n                            _cache[71] || (_cache[71] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_38, [\n                                _createElementVNode(\"div\", _hoisted_39, [\n                                    _createElementVNode(\"div\", {\n                                        style: _normalizeStyle({\n                                            width: '8px',\n                                            height: '8px',\n                                            borderRadius: '50%',\n                                            backgroundColor: is_summarizing.value ? '#ff6b6b' : '#4caf50',\n                                            transition: 'background-color 0.3s',\n                                        })\n                                    }, null, 4 /* STYLE */),\n                                    _cache[68] || (_cache[68] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_40, [\n                                    _createElementVNode(\"div\", {\n                                        style: _normalizeStyle({\n                                            width: '8px',\n                                            height: '8px',\n                                            borderRadius: '50%',\n                                            backgroundColor: is_generating_table.value ? '#ff6b6b' : '#4caf50',\n                                            transition: 'background-color 0.3s',\n                                        })\n                                    }, null, 4 /* STYLE */),\n                                    _cache[69] || (_cache[69] = _createElementVNode(\"span\", { style: { \"color\": \"#ccc\", \"font-size\": \"12px\" } }, \"\", -1 /* CACHED */))\n                                ]),\n                                (is_summarizing.value || is_generating_table.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"4px 8px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"11px\" },\n                                            onClick: stopGeneration\n                                        }, [...(_cache[70] || (_cache[70] = [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-stop\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_42, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button summarize-button\",\n                                disabled: is_generating_table.value || !_unref(settings).api_key,\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #4a9eff 0%, #3a8edf 100%)\", \"box-shadow\": \"0 2px 8px rgba(74, 158, 255, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_generate_table\n                            }, [\n                                (!is_generating_table.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_44))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_45)),\n                                _createTextVNode(\" \" + _toDisplayString(is_generating_table.value ? 'AI...' : 'AI'), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_43),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button create-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                onClick: handle_create_table\n                            }, [...(_cache[72] || (_cache[72] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['tableGeneration']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_46, [\n                    _createElementVNode(\"div\", {\n                        style: { \"cursor\": \"pointer\", \"user-select\": \"none\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"position\": \"relative\", \"overflow\": \"hidden\", \"transition\": \"all 0.25s cubic-bezier(0.4, 0, 0.2, 1)\" },\n                        onClick: _cache[31] || (_cache[31] = ($event) => (toggleSection('messageManagement'))),\n                        onMouseenter: _cache[32] || (_cache[32] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';\n                            $event.currentTarget.style.transform = 'translateX(4px) scale(1.005)';\n                            $event.currentTarget.style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';\n                        }),\n                        onMouseleave: _cache[33] || (_cache[33] = ($event) => {\n                            $event.currentTarget.style.background =\n                                'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';\n                            $event.currentTarget.style.transform = 'none';\n                            $event.currentTarget.style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';\n                        })\n                    }, [\n                        _cache[73] || (_cache[73] = _createElementVNode(\"h3\", { style: { \"position\": \"relative\", \"z-index\": \"1\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-layer-group\",\n                                style: { \"color\": \"#dc3545\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([expandedSections.value['messageManagement'] ? 'fa-chevron-up' : 'fa-chevron-down', \"fa-solid\"]),\n                            style: { \"color\": \"rgba(255, 255, 255, 0.6)\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    _withDirectives(_createElementVNode(\"div\", null, [\n                        _createElementVNode(\"div\", _hoisted_47, [\n                            _cache[74] || (_cache[74] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"13px\" } }, \"1-10 5\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[34] || (_cache[34] = ($event) => ((hide_range).value = $event)),\n                                type: \"text\",\n                                placeholder: \"1-10\",\n                                style: { \"width\": \"100%\", \"padding\": \"10px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"transition\": \"border-color 0.2s\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, hide_range.value]\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_48, [\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ff6b6b\", \"color\": \"white\" },\n                                onClick: handle_hide_messages\n                            }, [...(_cache[75] || (_cache[75] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eye-slash\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #40c057\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"linear-gradient(135deg, #51cf66 0%, #40c057 100%)\", \"box-shadow\": \"0 2px 8px rgba(81, 207, 102, 0.25),\\n                inset 0 1px 0 rgba(255, 255, 255, 0.15)\", \"color\": \"white\" },\n                                disabled: !hide_range.value.trim(),\n                                onClick: handle_show_messages\n                            }, [...(_cache[76] || (_cache[76] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_49),\n                            _createElementVNode(\"button\", {\n                                class: \"action-button\",\n                                style: { \"flex\": \"1\", \"min-width\": \"120px\", \"padding\": \"12px 16px\", \"border\": \"1px solid #ffcc02\", \"border-radius\": \"6px\", \"cursor\": \"pointer\", \"font-weight\": \"500\", \"font-size\": \"13px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\", \"background\": \"#ffd43b\", \"color\": \"#333\" },\n                                onClick: _cache[35] || (_cache[35] = () => handle_refresh_hidden(true))\n                            }, [...(_cache[77] || (_cache[77] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (hidden_messages.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                                _createElementVNode(\"div\", _hoisted_51, [\n                                    _createElementVNode(\"label\", _hoisted_52, [\n                                        _createElementVNode(\"span\", null, \" (\" + _toDisplayString(hidden_messages.value.length) + \" )\", 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"mini-button\",\n                                            onClick: _cache[36] || (_cache[36] = ($event) => (hidden_display_expanded.value = !hidden_display_expanded.value))\n                                        }, _toDisplayString(hidden_display_expanded.value ? '' : ''), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                (hidden_display_expanded.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hidden_messages.value, (msg) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: msg.message_id,\n                                                class: \"hidden-message-item\"\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_54, [\n                                                    _createElementVNode(\"span\", _hoisted_55, \"#\" + _toDisplayString(msg.message_id), 1 /* TEXT */),\n                                                    _createElementVNode(\"span\", {\n                                                        class: _normalizeClass([\"message-role\", 'role-' + msg.role])\n                                                    }, _toDisplayString(msg.role === 'user' ? '' : msg.role === 'assistant' ? '' : '') + \" \" + _toDisplayString(msg.name), 3 /* TEXT, CLASS */),\n                                                    _createElementVNode(\"span\", _hoisted_56, _toDisplayString(msg.message.substring(0, 50)) + _toDisplayString(msg.message.length > 50 ? '...' : ''), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"show-button\",\n                                                    onClick: () => handle_unhide_single(msg.message_id)\n                                                }, \"\", 8 /* PROPS */, _hoisted_57)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_58, \"\"))\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, expandedSections.value['messageManagement']]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsTab.vue?vue&type=style&index=0&id=1bdea629&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createVNode as _createVNode, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"statusbar-generator\" };\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 28px\", \"background\": \"linear-gradient(\\n          135deg,\\n          rgba(30, 30, 30, 0.95) 0%,\\n          rgba(38, 38, 38, 0.9) 50%,\\n          rgba(30, 30, 30, 0.95) 100%\\n        )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"14px\", \"margin-bottom\": \"20px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n          inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n          inset 0 -1px 0 rgba(0, 0, 0, 0.2)\" }\n};\nconst _hoisted_3 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"flex-wrap\": \"wrap\" } };\nconst _hoisted_4 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"280px 1fr 500px\", \"gap\": \"20px\", \"min-height\": \"600px\" } };\nconst _hoisted_5 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\", \"overflow-y\": \"auto\" } };\nconst _hoisted_6 = { style: { \"margin-bottom\": \"15px\" } };\nconst _hoisted_7 = { style: { \"flex\": \"1\", \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\", \"margin-bottom\": \"15px\" } };\nconst _hoisted_8 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_9 = { style: { \"color\": \"#4a9eff\", \"font-size\": \"11px\", \"font-weight\": \"600\" } };\nconst _hoisted_10 = [\"disabled\", \"onClick\"];\nconst _hoisted_11 = [\"onUpdate:modelValue\"];\nconst _hoisted_12 = [\"onUpdate:modelValue\"];\nconst _hoisted_13 = { style: { \"display\": \"flex\", \"gap\": \"6px\", \"align-items\": \"center\" } };\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    key: 1,\n    class: \"fa-solid fa-icons\"\n};\nconst _hoisted_17 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"flex-direction\": \"column\" } };\nconst _hoisted_18 = { style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"border-bottom\": \"1px solid #3a3a3a\", \"padding-bottom\": \"8px\" } };\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_21 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_22 = { style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"12px\", \"border\": \"1px solid #3a3a3a\", \"overflow\": \"auto\", \"max-height\": \"200px\" } };\nconst _hoisted_23 = { style: { \"margin\": \"0\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"font-family\": \"'Consolas', 'Monaco', monospace\" } };\nconst _hoisted_24 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"15px\", \"border\": \"1px solid #3a3a3a\", \"flex\": \"1\" } };\nconst _hoisted_25 = [\"innerHTML\"];\nconst _hoisted_26 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"20px\", \"width\": \"600px\", \"max-width\": \"90vw\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_27 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"repeat(8, 1fr)\", \"gap\": \"8px\", \"margin-bottom\": \"16px\", \"max-height\": \"400px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_28 = [\"title\", \"onClick\"];\nconst _hoisted_29 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_30 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"600px\", \"max-width\": \"90vw\", \"max-height\": \"90vh\", \"overflow-y\": \"auto\", \"border\": \"1px solid #3a3a3a\" } };\nconst _hoisted_31 = { style: { \"background\": \"linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.1) 100%)\", \"border\": \"1px solid rgba(59, 130, 246, 0.3)\", \"border-radius\": \"8px\", \"padding\": \"12px 16px\", \"margin-bottom\": \"16px\" } };\nconst _hoisted_32 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"space-between\", \"margin-bottom\": \"10px\" } };\nconst _hoisted_33 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_34 = { style: { \"color\": \"#93c5fd\", \"font-size\": \"13px\", \"font-weight\": \"600\" } };\nconst _hoisted_35 = {\n    key: 0,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"8px\" }\n};\nconst _hoisted_36 = { style: { \"color\": \"#60a5fa\", \"font-weight\": \"600\", \"font-size\": \"11px\", \"min-width\": \"50px\" } };\nconst _hoisted_37 = [\"onUpdate:modelValue\"];\nconst _hoisted_38 = [\"onUpdate:modelValue\"];\nconst _hoisted_39 = [\"onClick\"];\nconst _hoisted_40 = [\"disabled\", \"onClick\"];\nconst _hoisted_41 = {\n    key: 1,\n    style: { \"color\": \"#fbbf24\", \"font-size\": \"12px\", \"padding\": \"8px 0\" }\n};\nconst _hoisted_42 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_43 = {\n    key: 0,\n    style: { \"margin-top\": \"16px\", \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" }\n};\nconst _hoisted_44 = [\"disabled\"];\nconst _hoisted_45 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"90%\", \"max-width\": \"700px\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_46 = { style: { \"margin-bottom\": \"16px\" } };\nconst _hoisted_47 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_48 = [\"disabled\"];\nconst _hoisted_49 = [\"disabled\"];\nconst _hoisted_50 = { style: { \"background\": \"#2a2a2a\", \"border-radius\": \"12px\", \"padding\": \"24px\", \"width\": \"90%\", \"max-width\": \"700px\", \"max-height\": \"80vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 8px 32px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_51 = { style: { \"margin-bottom\": \"16px\" } };\nconst _hoisted_52 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_53 = [\"disabled\"];\nconst _hoisted_54 = [\"disabled\"];\nimport { storeToRefs } from 'pinia';\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\nimport AIModifyDialog from './AIModifyDialog.vue';\nimport ProgressDialog from './ProgressDialog.vue';\n//  settings store\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StatusBarGenerator',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const templates = {\n            simple: {\n                name: '',\n                findRegex: '<-CHARACTER_STATUS->',\n                fields: [\n                    { name: '', label: '', icon: 'fa-solid fa-user' },\n                    { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n                    { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n                    { name: '', label: '', icon: 'fa-solid fa-heart' },\n                ],\n            },\n            abo: {\n                name: 'ABO',\n                findRegex: '<-ENVIRONMENT_DATA->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|([^|]+)\\\\|[\\\\r\\\\n]*',\n                fields: [\n                    { name: '', label: '', icon: 'fa-solid fa-calendar' },\n                    { name: '', label: '', icon: 'fa-solid fa-clock' },\n                    { name: '', label: '', icon: 'fa-solid fa-location-dot' },\n                    { name: '', label: '', icon: 'fa-solid fa-cloud-sun' },\n                    { name: '', label: '', icon: 'fa-solid fa-shirt' },\n                    { name: '', label: '', icon: 'fa-solid fa-heart' },\n                    { name: '', label: '', icon: 'fa-solid fa-fire' },\n                    { name: '', label: '', icon: 'fa-solid fa-bookmark' },\n                ],\n            },\n        };\n        const config = ref({\n            name: '',\n            findRegex: '<-CHARACTER_STATUS->',\n            fields: [\n                { name: '', label: '', icon: 'fa-solid fa-user' },\n                { name: '', label: '', icon: 'fa-solid fa-venus-mars' },\n                { name: '', label: '', icon: 'fa-solid fa-cake-candles' },\n                { name: '', label: '', icon: 'fa-solid fa-heart' },\n            ],\n        });\n        const files = ref([\n            { path: 'index.html', content: '' },\n            { path: 'style.css', content: '' },\n            { path: 'script.js', content: '' },\n        ]);\n        const currentFile = ref(files.value[0]);\n        const showAI = ref(false);\n        const aiPrompt = ref('');\n        const originalAiPrompt = ref(''); // AI\n        const showAiModifyDialog = ref(false); // AI\n        const isModifyingAi = ref(false); // AI\n        const showIconPickerFor = ref(null);\n        // \n        const showProgress = ref(false);\n        const progressDialogRef = ref(null);\n        // XML\n        const originalXmlInput = ref(''); // XML\n        const showXmlModifyDialog = ref(false);\n        const isModifyingXml = ref(false);\n        // AI\n        const originalFieldDescription = ref(''); // \n        const showFieldModifyDialog = ref(false);\n        const isModifyingField = ref(false);\n        // XML \n        const showXmlDialog = ref(false);\n        const xmlInput = ref('');\n        const isParsingXml = ref(false);\n        // AI \n        const showAiFieldDialog = ref(false);\n        const aiFieldDescription = ref('');\n        const isGeneratingFields = ref(false);\n        // Font Awesome \n        const iconList = [\n            // \n            'fa-solid fa-cat',\n            'fa-solid fa-dog',\n            'fa-solid fa-dove',\n            'fa-solid fa-fish',\n            'fa-solid fa-paw',\n            'fa-solid fa-spider',\n            'fa-solid fa-horse',\n            // \n            'fa-solid fa-heart',\n            'fa-solid fa-heart-pulse',\n            // \n            'fa-solid fa-face-smile',\n            'fa-solid fa-face-grin-stars',\n            'fa-solid fa-face-grin-beam',\n            'fa-solid fa-face-laugh',\n            // \n            'fa-solid fa-star',\n            // \n            'fa-solid fa-wand-magic-sparkles',\n            'fa-solid fa-hat-wizard',\n            'fa-solid fa-bolt',\n            'fa-solid fa-fire',\n            'fa-solid fa-meteor',\n            'fa-solid fa-rocket',\n            // \n            'fa-solid fa-sun',\n            'fa-solid fa-moon',\n            'fa-solid fa-cloud',\n            'fa-solid fa-seedling',\n            'fa-solid fa-leaf',\n            'fa-solid fa-tree',\n            'fa-solid fa-snowflake',\n            // \n            'fa-solid fa-cake-candles',\n            'fa-solid fa-candy-cane',\n            'fa-solid fa-apple',\n            'fa-solid fa-ice-cream',\n            // \n            'fa-solid fa-gem',\n            'fa-solid fa-crown',\n            'fa-solid fa-gift',\n            'fa-solid fa-ribbon',\n            'fa-solid fa-medal',\n            'fa-solid fa-trophy',\n            // \n            'fa-solid fa-shield',\n            'fa-solid fa-scroll',\n            // \n            'fa-solid fa-book',\n            'fa-solid fa-book-open',\n            'fa-solid fa-feather',\n            'fa-solid fa-pen',\n            'fa-solid fa-paintbrush',\n            'fa-solid fa-palette',\n            // \n            'fa-solid fa-music',\n            'fa-solid fa-headphones',\n            'fa-solid fa-gamepad',\n            'fa-solid fa-chess',\n            'fa-solid fa-puzzle-piece',\n            'fa-solid fa-dice',\n            // \n            'fa-solid fa-mobile-screen',\n            'fa-solid fa-tablet',\n            'fa-solid fa-laptop',\n            'fa-solid fa-camera',\n            'fa-solid fa-video',\n            'fa-solid fa-tv',\n            // \n            'fa-solid fa-bell',\n            'fa-solid fa-envelope',\n        ];\n        // \n        const worldbookContent = computed(() => {\n            // {{}}\n            const placeholders = config.value.fields.map(f => `{{${f.label || f.name}}}`).join('|');\n            // \n            const fieldDefinitions = config.value.fields\n                .map(f => {\n                const iconDesc = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n                const label = f.label || f.name;\n                return `  - ${iconDesc}${label}{{char}}${label}`;\n            })\n                .join('\\n');\n            // \n            const exampleValues = config.value.fields.map(f => f.label || f.name || '').join('|');\n            // \n            const parseRegexStructure = (regex, fields) => {\n                //  <-ENVIRONMENT_DATA->\n                const triggerMatches = regex.match(/<-[^>]+->/g) || [];\n                if (triggerMatches.length === 0) {\n                    // \n                    const placeholders = fields.map(f => `{{${f.label || f.name}}}`).join('|');\n                    const exampleValues = fields.map(f => f.label || f.name).join('|');\n                    return {\n                        formatExample: `|${placeholders}|`,\n                        exampleOutput: `|${exampleValues}|`,\n                    };\n                }\n                // \n                let normalizedRegex = regex\n                    .replace(/\\\\\\\\/g, '\\\\') // \\\\ -> \\\n                    .replace(/\\\\\\|/g, '|') // \\| -> |\n                    .replace(/\\\\\\(/g, '(') // \\( -> (\n                    .replace(/\\\\\\)/g, ')') // \\) -> )\n                    .replace(/\\\\\\[/g, '[') // \\[ -> [\n                    .replace(/\\\\\\]/g, ']') // \\] -> ]\n                    .replace(/\\\\\\+/g, '+'); // \\+ -> +\n                console.log(' :', regex);\n                console.log(' :', normalizedRegex);\n                // \n                const lines = [];\n                const exampleLines = [];\n                let fieldIndex = 0;\n                // \n                const parts = normalizedRegex.split(/(<-[^>]+->)/);\n                console.log(' :', parts);\n                for (let i = 0; i < parts.length; i++) {\n                    const part = parts[i];\n                    // \n                    if (part.match(/<-[^>]+->/)) {\n                        lines.push(part);\n                        exampleLines.push(part);\n                        console.log(` : ${part}`);\n                    }\n                    // \n                    else if (part.trim().length > 0 && !part.match(/<-[^>]+->/)) {\n                        // \n                        const allCaptures = part.match(/\\([^\\)]+\\)/g) || [];\n                        const totalCount = allCaptures.length;\n                        console.log(`  (100): \"${part.substring(0, 100)}\"`);\n                        console.log(` :`, allCaptures);\n                        console.log(` : ${totalCount}, : ${fieldIndex}, : ${fields.length}`);\n                        if (totalCount === 0) {\n                            console.warn(` `);\n                            continue;\n                        }\n                        // 4\n                        const perLine = 4;\n                        for (let offset = 0; offset < totalCount; offset += perLine) {\n                            const count = Math.min(perLine, totalCount - offset);\n                            //  fieldIndex < fields.length \n                            if (count > 0) {\n                                const segmentFields = fields.slice(fieldIndex, fieldIndex + count);\n                                // \n                                while (segmentFields.length < count) {\n                                    segmentFields.push({\n                                        name: `${fieldIndex + segmentFields.length + 1}`,\n                                        label: `${fieldIndex + segmentFields.length + 1}`,\n                                        icon: '',\n                                    });\n                                }\n                                const placeholders = segmentFields.map(f => `{{${f.label || f.name}}}`).join('|');\n                                const examples = segmentFields.map(f => f.label || f.name).join('|');\n                                lines.push(`|${placeholders}|`);\n                                exampleLines.push(`|${examples}|`);\n                                console.log(` : |${examples}|`);\n                                fieldIndex += count;\n                            }\n                        }\n                    }\n                }\n                console.log(' :', lines.join('\\n'));\n                console.log(' :', exampleLines.join('\\n'));\n                return {\n                    formatExample: lines.join('\\n'),\n                    exampleOutput: exampleLines.join('\\n'),\n                };\n            };\n            const { formatExample, exampleOutput } = parseRegexStructure(config.value.findRegex, config.value.fields);\n            return `<status_rule>\n#{{char}}\n\n##\n<status>\n${formatExample}\n</status>\n\n##\n${fieldDefinitions || '  - '}\n\n##\n\n<status>\n${exampleOutput}\n</status>\n\n##\n1. ** <status> **\n   -  <status>\n   -  </status>\n   -  \n\n2. ****\n   -  <-ENVIRONMENT_DATA->\n   -  | \n   - \n   - \n\n3. ****\n   -  |: |: |\n   -  |||\n   - \n\n4. ****\n   - \n   - \n   - \n   - \n\n5. ****\n   - \n   - {{}} \n   -  {{char}}  {{user}} \n</status_rule>`;\n        });\n        //  HTML\n        const previewHtml = computed(() => {\n            const htmlFile = files.value.find(f => f.path === 'index.html');\n            const cssFile = files.value.find(f => f.path === 'style.css');\n            const jsFile = files.value.find(f => f.path === 'script.js');\n            if (!htmlFile)\n                return '';\n            const scriptTag = 'script';\n            const styleTag = 'style';\n            //  $1, $2 \n            let previewContent = htmlFile.content || '';\n            config.value.fields.forEach((field, i) => {\n                const exampleValue = field.name || `${i + 1}`;\n                previewContent = previewContent.replace(new RegExp(`\\\\$${i + 1}(?!\\\\d)`, 'g'), exampleValue);\n            });\n            return `<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\">\n  <${styleTag}>\n    html, body {\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      height: auto;\n      min-height: 800px;\n      overflow: visible;\n    }\n    ${cssFile?.content || ''}\n  </${styleTag}>\n  <${scriptTag} src=\"https://code.jquery.com/jquery-3.7.1.min.js\"></${scriptTag}>\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css\">\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js\"></${scriptTag}>\n  <${scriptTag} src=\"https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js\"></${scriptTag}>\n</head>\n<body>\n  ${previewContent}\n  <${scriptTag}>${jsFile?.content || ''}</${scriptTag}>\n</body>\n</html>`;\n        });\n        // \n        function updatePreview() {\n            // \n        }\n        // \n        function addField() {\n            config.value.fields.push({ name: '', label: '', icon: '' });\n        }\n        // \n        function removeField(index) {\n            config.value.fields.splice(index, 1);\n        }\n        //  XML \n        function showXmlParseDialog() {\n            showXmlDialog.value = true;\n            xmlInput.value = '';\n        }\n        //  AI \n        function showAiFieldGeneratorDialog() {\n            showAiFieldDialog.value = true;\n            aiFieldDescription.value = '';\n        }\n        // AI  XML \n        async function parseXmlWithAI() {\n            if (!xmlInput.value.trim()) {\n                toastr.warning(' XML ');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API \" \" API ', '', {\n                    timeOut: 0,\n                    extendedTimeOut: 0,\n                    closeButton: true,\n                });\n                return;\n            }\n            // \n            originalXmlInput.value = xmlInput.value;\n            isParsingXml.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' XML...');\n                progressDialogRef.value?.addDetail(`XML : ${xmlInput.value.length} `);\n                const systemPrompt = ` XML  XML \n\n1. **** XML  <i><2i><><> \n2. ****\n   -  <i><2i><3i> \n   -  <><>\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]\n\n****\n- name  date, location, status\n- label  \n- icon  Font Awesome \n- **** JSON \n- **** JSON\n\n\n<state_bar>\n<i></i>\n<></>\n<></>\n</state_bar>\n\n\n[\n  { \"name\": \"content\", \"label\": \"\", \"icon\": \"\" },\n  { \"name\": \"date\", \"label\": \"\", \"icon\": \"fa-solid fa-calendar\" },\n  { \"name\": \"physical_status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n                const userPrompt = ` XML \n\n\\`\\`\\`xml\n${xmlInput.value.trim()}\n\\`\\`\\`\n\n JSON `;\n                console.log('  AI  XML...');\n                console.log('  API:', settings.value.api_endpoint);\n                console.log(' :', settings.value.model);\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' XML  AI ...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                //  AI API\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI  XML ...');\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: systemPrompt,\n                            },\n                            {\n                                role: 'user',\n                                content: userPrompt,\n                            },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' AI :', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log(' AI :', aiResponse);\n                // =====  =====\n                if (!aiResponse || typeof aiResponse !== 'string') {\n                    throw new Error('AI ');\n                }\n                //  JSON\n                let jsonText = aiResponse.trim();\n                //  markdown \n                jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                //  JSON  AI \n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                //  JSON\n                let parsedFields;\n                try {\n                    parsedFields = JSON.parse(jsonText);\n                }\n                catch (parseError) {\n                    throw new Error(`AI  JSON \\n\\n AI \\n\\n200:\\n${result.slice(0, 200)}`);\n                }\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                const validFields = parsedFields.filter((field) => {\n                    return field.name && field.label;\n                });\n                if (validFields.length === 0) {\n                    throw new Error(' AI ');\n                }\n                // \n                config.value.fields = validFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || '',\n                    icon: field.icon || '',\n                }));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${validFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showXmlDialog.value = false;\n                    xmlInput.value = '';\n                    toastr.success(` ${validFields.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error(' XML :', error);\n                showProgress.value = false;\n                // \n                const errorMsg = error.message || '';\n                //  API \n                if (errorMsg.includes('API') ||\n                    errorMsg.includes('403') ||\n                    errorMsg.includes('401') ||\n                    errorMsg.includes('Unauthorized')) {\n                    toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n                        timeOut: 0,\n                        extendedTimeOut: 0,\n                        closeButton: true,\n                    });\n                }\n                else {\n                    toastr.error(`: ${errorMsg}`, '', {\n                        timeOut: 8000,\n                        closeButton: true,\n                    });\n                }\n            }\n            finally {\n                isParsingXml.value = false;\n            }\n        }\n        // AI  XML \n        async function modifyXmlWithAI(modifyInstruction) {\n            if (!originalXmlInput.value) {\n                window.toastr.warning(' XML');\n                return;\n            }\n            isModifyingXml.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const systemPrompt = ` XML  XML `;\n                const userPrompt = `#  XML\n${originalXmlInput.value}\n\n# \n${modifyInstruction}\n\n XML \nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                const aiResponse = result.choices[0]?.message?.content || '';\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                //  JSON\n                let jsonText = aiResponse\n                    .trim()\n                    .replace(/^```(?:json)?\\s*\\n?/i, '')\n                    .replace(/\\n?```\\s*$/i, '');\n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                const parsedFields = JSON.parse(jsonText);\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                config.value.fields = parsedFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || field.name || '',\n                    icon: field.icon || '',\n                }));\n                // \n                originalXmlInput.value += `\\n\\n${modifyInstruction}`;\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showXmlModifyDialog.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingXml.value = false;\n            }\n        }\n        // AI \n        async function generateFieldsWithAI() {\n            if (!aiFieldDescription.value.trim()) {\n                toastr.warning('');\n                return;\n            }\n            //  API \n            if (!settings.value.api_endpoint || !settings.value.api_key) {\n                toastr.error(' API \" \" API ', '', {\n                    timeOut: 0,\n                    extendedTimeOut: 0,\n                    closeButton: true,\n                });\n                return;\n            }\n            // \n            originalFieldDescription.value = aiFieldDescription.value;\n            isGeneratingFields.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail('AI ');\n                const systemPrompt = `\n\n1. ****ABO\n2. ****\n3. **** namelabelicon\n\n** JSON **\n\n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"fa-solid fa-xxx\" }\n]\n\n****\n- name  realm, spiritual_power, location\n- label  \n- icon  Font Awesome  fa-solid fa-star, fa-solid fa-bolt\n- **** JSON \n- **** JSON\n\n\n- fa-solid fa-user, fa-solid fa-user-ninja, fa-solid fa-user-secret\n- fa-solid fa-heart, fa-solid fa-heart-pulse, fa-solid fa-star\n- fa-solid fa-location-dot, fa-solid fa-map-marker\n- fa-solid fa-clock, fa-solid fa-calendar\n- fa-solid fa-bolt, fa-solid fa-fire, fa-solid fa-droplet\n- fa-solid fa-book, fa-solid fa-wand-magic-sparkles, fa-solid fa-scroll\n- fa-solid fa-heart, fa-solid fa-face-smile, fa-solid fa-face-sad-tear\n\n\n\"\"\n\n[\n  { \"name\": \"name\", \"label\": \"\", \"icon\": \"fa-solid fa-user-ninja\" },\n  { \"name\": \"realm\", \"label\": \"\", \"icon\": \"fa-solid fa-star\" },\n  { \"name\": \"spiritual_power\", \"label\": \"\", \"icon\": \"fa-solid fa-bolt\" },\n  { \"name\": \"cultivation_method\", \"label\": \"\", \"icon\": \"fa-solid fa-scroll\" },\n  { \"name\": \"location\", \"label\": \"\", \"icon\": \"fa-solid fa-location-dot\" },\n  { \"name\": \"status\", \"label\": \"\", \"icon\": \"fa-solid fa-heart-pulse\" }\n]`;\n                const userPrompt = `\n\n${aiFieldDescription.value.trim()}\n\n JSON `;\n                console.log('  AI ...');\n                console.log('  API:', settings.value.api_endpoint);\n                console.log(' :', settings.value.model);\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI...');\n                //  API \n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                console.log(' :', apiUrl);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                //  AI API\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            {\n                                role: 'system',\n                                content: systemPrompt,\n                            },\n                            {\n                                role: 'user',\n                                content: userPrompt,\n                            },\n                        ],\n                        max_tokens: 3000,\n                        temperature: 0.8,\n                    }),\n                });\n                if (!response.ok) {\n                    const errorText = await response.text();\n                    throw new Error(`API: ${response.status} ${response.statusText}\\n${errorText}`);\n                }\n                const result = await response.json();\n                console.log(' AI :', result);\n                if (!result.choices || !result.choices[0] || !result.choices[0].message) {\n                    throw new Error('AI');\n                }\n                const aiResponse = result.choices[0].message.content;\n                console.log(' AI :', aiResponse);\n                // =====  =====\n                if (!aiResponse || typeof aiResponse !== 'string') {\n                    throw new Error('AI ');\n                }\n                //  JSON\n                let jsonText = aiResponse.trim();\n                //  markdown \n                jsonText = jsonText.replace(/^```(?:json)?\\s*\\n?/i, '').replace(/\\n?```\\s*$/i, '');\n                //  JSON  AI \n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                //  JSON\n                let parsedFields;\n                try {\n                    parsedFields = JSON.parse(jsonText);\n                }\n                catch (parseError) {\n                    throw new Error(`AI  JSON \\n\\n AI \\n\\n200:\\n${aiResponse.slice(0, 200)}`);\n                }\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                const validFields = parsedFields.filter((field) => {\n                    return field.name && field.label;\n                });\n                if (validFields.length === 0) {\n                    throw new Error(' AI ');\n                }\n                // \n                config.value.fields = validFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || '',\n                    icon: field.icon || '',\n                }));\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${validFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAiFieldDialog.value = false;\n                    aiFieldDescription.value = '';\n                    toastr.success(` ${validFields.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error(' AI :', error);\n                showProgress.value = false;\n                // \n                const errorMsg = error.message || '';\n                //  API \n                if (errorMsg.includes('API') ||\n                    errorMsg.includes('403') ||\n                    errorMsg.includes('401') ||\n                    errorMsg.includes('Unauthorized')) {\n                    toastr.error(' API \\n1. API \\n2. \\n3. ', '', {\n                        timeOut: 0,\n                        extendedTimeOut: 0,\n                        closeButton: true,\n                    });\n                }\n                else {\n                    toastr.error(`: ${errorMsg}`, '', {\n                        timeOut: 8000,\n                        closeButton: true,\n                    });\n                }\n            }\n            finally {\n                isGeneratingFields.value = false;\n            }\n        }\n        // \n        function showIconPicker(index) {\n            showIconPickerFor.value = index;\n        }\n        // \n        function selectIcon(iconClass) {\n            if (showIconPickerFor.value !== null) {\n                config.value.fields[showIconPickerFor.value].icon = iconClass;\n                showIconPickerFor.value = null;\n            }\n        }\n        // AI \n        async function modifyFieldWithAI(modifyInstruction) {\n            if (!originalFieldDescription.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingField.value = true;\n            showProgress.value = true;\n            try {\n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const systemPrompt = ``;\n                const userPrompt = `# \n${originalFieldDescription.value}\n\n# \n${modifyInstruction}\n\n\nJSON \n[\n  { \"name\": \"1\", \"label\": \"1\", \"icon\": \"fa-solid fa-xxx\" },\n  { \"name\": \"2\", \"label\": \"2\", \"icon\": \"\" }\n]`;\n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        max_tokens: 2000,\n                        temperature: 0.7,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const result = await response.json();\n                const aiResponse = result.choices[0]?.message?.content || '';\n                progressDialogRef.value?.setProgress(85);\n                progressDialogRef.value?.setMessage('...');\n                //  JSON\n                let jsonText = aiResponse\n                    .trim()\n                    .replace(/^```(?:json)?\\s*\\n?/i, '')\n                    .replace(/\\n?```\\s*$/i, '');\n                const jsonMatch = jsonText.match(/\\[\\s*{[\\s\\S]*}\\s*\\]/);\n                if (jsonMatch) {\n                    jsonText = jsonMatch[0];\n                }\n                const parsedFields = JSON.parse(jsonText);\n                if (!Array.isArray(parsedFields)) {\n                    throw new Error('AI ');\n                }\n                // \n                config.value.fields = parsedFields.map((field) => ({\n                    name: field.name || '',\n                    label: field.label || field.name || '',\n                    icon: field.icon || '',\n                }));\n                // \n                originalFieldDescription.value += `\\n\\n${modifyInstruction}`;\n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' ');\n                progressDialogRef.value?.addDetail(` ${parsedFields.length} `);\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showFieldModifyDialog.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingField.value = false;\n            }\n        }\n        // \n        function generateFromFields() {\n            const fields = config.value.fields;\n            //  findRegex\n            const totalFields = fields.length;\n            if (totalFields === 0) {\n                config.value.findRegex = '<-CHARACTER_STATUS->';\n                console.log(' ');\n                return;\n            }\n            if (totalFields <= 4) {\n                // 4\n                config.value.findRegex = `<-CHARACTER_STATUS->[\\\\r\\\\n]*\\\\|${fields.map(() => '([^|]+)').join('\\\\|')}\\\\|[\\\\r\\\\n]*`;\n                console.log('  findRegex ():', config.value.findRegex);\n                console.log(' :', totalFields);\n            }\n            else {\n                // 4\n                // 4\n                const perLine = totalFields <= 8 ? Math.ceil(totalFields / 2) : 4;\n                // \n                const firstHalf = Math.min(Math.ceil(totalFields / 2), totalFields <= 12 ? 4 : Math.ceil(totalFields / 3));\n                const lines = [];\n                //  + \n                lines.push('<-ENVIRONMENT_DATA->[\\\\r\\\\n]*');\n                for (let i = 0; i < firstHalf; i += perLine) {\n                    const count = Math.min(perLine, firstHalf - i);\n                    lines.push('\\\\|' +\n                        fields\n                            .slice(i, i + count)\n                            .map(() => '([^|]+)')\n                            .join('\\\\|') +\n                        '\\\\|[\\\\r\\\\n]*');\n                }\n                //  + perLine\n                lines.push('<-CHARACTER_STATUS->[\\\\r\\\\n]*');\n                for (let i = firstHalf; i < totalFields; i += perLine) {\n                    const count = Math.min(perLine, totalFields - i);\n                    lines.push('\\\\|' +\n                        fields\n                            .slice(i, i + count)\n                            .map(() => '([^|]+)')\n                            .join('\\\\|') +\n                        '\\\\|[\\\\r\\\\n]*');\n                }\n                config.value.findRegex = lines.join('');\n                console.log('  findRegex ():', config.value.findRegex);\n                console.log(' :', totalFields);\n                console.log(' :', `: ${firstHalf}, : ${totalFields - firstHalf}, : ${perLine}`);\n            }\n            //  HTML\n            const fieldsHtml = fields\n                .map((f, i) => {\n                const iconPart = f.icon ? `<i class=\"${f.icon}\"></i> ` : '';\n                return `        <div class=\"status-field\">\n          <div class=\"field-label\">${iconPart}${f.label || '' + (i + 1)}</div>\n          <div class=\"field-value\">$${i + 1}</div>\n        </div>`;\n            })\n                .join('\\n');\n            const htmlContent = `<details>\n<summary> ${config.value.name} </summary>\n<div class=\"status-card\">\n    <div class=\"status-header\">\n        <span></span>\n        <span>${config.value.name}</span>\n    </div>\n    <div class=\"status-content\">\n        <div class=\"status-grid\">\n${fieldsHtml}\n        </div>\n    </div>\n</div>\n</details>`;\n            //  CSS\n            const cssContent = `.status-card {\n    font-family: 'Microsoft YaHei', sans-serif;\n    background: linear-gradient(145deg, #1e293b, #334155);\n    border-radius: 14px;\n    margin: 16px 0;\n    box-shadow: 0 8px 25px rgba(15, 23, 42, 0.4);\n    overflow: hidden;\n    border: 1px solid rgba(148, 163, 184, 0.2);\n    max-width: 600px;\n}\n\n.status-header {\n    background: linear-gradient(135deg, #0f172a, #1e293b);\n    color: #e2e8f0;\n    padding: 12px 20px;\n    font-size: 15px;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border-bottom: 1px solid rgba(148, 163, 184, 0.15);\n}\n\n.status-content {\n    padding: 20px;\n    background: rgba(30, 41, 59, 0.5);\n}\n\n.status-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 16px;\n}\n\n.status-field {\n    background: rgba(30, 41, 59, 0.8);\n    padding: 16px;\n    border-radius: 10px;\n    border-left: 3px solid #6366f1;\n}\n\n.field-label {\n    font-size: 11px;\n    color: #94a3b8;\n    margin-bottom: 8px;\n    font-weight: 600;\n    text-transform: uppercase;\n}\n\n.field-value {\n    font-size: 14px;\n    color: #e2e8f0;\n    line-height: 1.5;\n    font-weight: 600;\n}`;\n            //  JS - \n            const jsContent = `// \n(function() {\n  // \n  setTimeout(function() {\n    console.log('${config.value.name} ');\n\n    // \n    if (typeof gsap !== 'undefined') {\n      gsap.from('.status-field', {\n        opacity: 0,\n        y: 20,\n        duration: 0.5,\n        stagger: 0.1,\n        ease: 'power2.out'\n      });\n\n      // \n      $('.status-field').hover(\n        function() {\n          gsap.to($(this), { scale: 1.05, duration: 0.2 });\n        },\n        function() {\n          gsap.to($(this), { scale: 1, duration: 0.2 });\n        }\n      );\n    }\n  }, 100);\n})();`;\n            files.value[0].content = htmlContent;\n            files.value[1].content = cssContent;\n            files.value[2].content = jsContent;\n            currentFile.value = files.value[0];\n            window.toastr.success(' ');\n        }\n        //  AI \n        function showAIDialog() {\n            showAI.value = true;\n            aiPrompt.value = '';\n        }\n        // \n        function addFieldInDialog() {\n            config.value.fields.push({\n                name: `${config.value.fields.length + 1}`,\n                label: `${config.value.fields.length + 1}`,\n                icon: '',\n            });\n        }\n        // \n        function removeFieldInDialog(index) {\n            if (config.value.fields.length <= 1) {\n                window.toastr.warning('');\n                return;\n            }\n            config.value.fields.splice(index, 1);\n        }\n        // \n        function loadTemplate(templateKey) {\n            const template = templates[templateKey];\n            if (template) {\n                config.value = JSON.parse(JSON.stringify(template)); // \n                window.toastr.success(` \"${template.name}\"`);\n            }\n        }\n        // AI \n        async function generateWithAI() {\n            if (!aiPrompt.value.trim()) {\n                window.toastr.error('');\n                return;\n            }\n            // \n            originalAiPrompt.value = aiPrompt.value;\n            // \n            showProgress.value = true;\n            try {\n                //  API \n                if (!settings.value.api_endpoint || !settings.value.api_key) {\n                    window.toastr.error(' API  API Key');\n                    showProgress.value = false;\n                    return;\n                }\n                // 1: \n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${config.value.fields.length} `);\n                progressDialogRef.value?.addDetail(`: ${settings.value.model}`);\n                // \n                const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                // \n                const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n Regex  replaceString  AI \n**{{char}}**{{user}}\n\n\n- Font Awesome \n- jQuery ($) - \n- toastr- \n- gsap- \n- lodash (_) - \n\n\n-  $1$2$3 \n- $1 $2 \n- \n- ****\n\n\nFILE_START: index.html\n<details>\n<summary>  </summary>\n<div class=\"status-card\">\n  <!--  $1, $2, $3  -->\n  <div class=\"field-value\">$1</div>\n</div>\n</details>\nFILE_END\n\nFILE_START: style.css\n.status-card {\n  /*  */\n}\nFILE_END\n\nFILE_START: script.js\n(function() {\n  // \n  //  $  document\n})();\nFILE_END\n\n\n1. index.html  <details>  </details>  <!DOCTYPE>  <html> \n2. FILE_START  FILE_END ****\\\\\\`\\\\\\`\\\\\\`html\"\"\"html \n3. HTML $1, $2, $3...\n4. CSS \n5. JS  (function() { ... })() $(function() { ... })\n6.  DOM \n7. ****`;\n                const userPrompt = `# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n \n1. HTML  ${config.value.fields.length} \n2. $1 = ${config.value.fields[0]?.label || '1'}, $2 = ${config.value.fields[1]?.label || '2'}${config.value.fields[2] ? `, $3 = ${config.value.fields[2].label}` : ''}${config.value.fields[3] ? `, $4 = ${config.value.fields[3].label}` : ''}${config.value.fields[4] ? `, $5 = ${config.value.fields[4].label}` : ''}\n3. \"\"\"\"\"\"\n4.  $${config.value.fields.length + 1} \n\n# \n**{{char}}****{{user}}**\nMVU Beta{{char}}stat_data\n\n# \n${config.value.findRegex}\n\n# \n${aiPrompt.value}\n\n# \n${currentFiles}\n\n\n1. \n2.  ${config.value.fields.length} $1, $2, $3... HTML \n3. \n4.  index.htmlstyle.cssscript.js \n5. `;\n                // 2: \n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`API : ${settings.value.api_endpoint}`);\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: settings.value.temperature || 0.7,\n                        max_tokens: settings.value.max_tokens || 65500,\n                    }),\n                });\n                // 3: \n                progressDialogRef.value?.setProgress(40);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                const data = await response.json();\n                const resultText = data.choices[0]?.message?.content || '';\n                // 4: \n                progressDialogRef.value?.setProgress(70);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n                //  AI \n                const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n                const matches = [...resultText.matchAll(FILE_START_REGEX)];\n                if (matches.length === 0) {\n                    throw new Error('AI ');\n                }\n                for (const match of matches) {\n                    const rawPath = match[1].trim();\n                    const normalizedPath = rawPath.replace(/^\\.\\//, '');\n                    let content = sanitizeFileContent(normalizedPath, match[2]);\n                    //  FILE_END\n                    if (content.endsWith('FILE_END')) {\n                        content = content.slice(0, -8).trim();\n                    }\n                    const file = files.value.find(f => f.path === normalizedPath);\n                    if (file) {\n                        file.content = content;\n                    }\n                    else if (normalizedPath === 'index.html' || normalizedPath === 'style.css' || normalizedPath === 'script.js') {\n                        // \n                        files.value.push({ path: normalizedPath, content: content });\n                    }\n                }\n                //  './'\n                files.value.forEach(file => {\n                    file.path = file.path.replace(/^\\.\\//, '');\n                });\n                //  './index.html' \n                const uniqueFiles = new Map();\n                files.value.forEach(file => {\n                    uniqueFiles.set(file.path, file);\n                });\n                files.value = Array.from(uniqueFiles.values());\n                // 5: \n                progressDialogRef.value?.setProgress(90);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(` ${matches.length} `);\n                const htmlFile = files.value.find(f => f.path === 'index.html') || files.value[0];\n                currentFile.value = htmlFile;\n                updatePreview();\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAI.value = false;\n                    window.toastr.success(' AI ');\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n        }\n        // AI \n        async function modifyWithAI(modifyInstruction) {\n            if (!originalAiPrompt.value) {\n                window.toastr.warning('');\n                return;\n            }\n            isModifyingAi.value = true;\n            showProgress.value = true;\n            try {\n                // 1: \n                progressDialogRef.value?.setProgress(10);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${modifyInstruction}`);\n                const currentFiles = files.value.map(f => `=== ${f.path} ===\\n${f.content}`).join('\\n\\n');\n                const systemPrompt = ` SillyTavern  HTML/CSS/JS \n\n\n1. ** index.htmlstyle.cssscript.js **\n2. \n3. \n4.  FILE_START  FILE_END \n\n****`;\n                const userPrompt = `# \n${originalAiPrompt.value}\n\n# \n${modifyInstruction}\n\n# \n${config.value.fields.map((f, i) => `${i + 1}${f.label} (: ${f.name}) - : $${i + 1}${f.icon ? ` - : ${f.icon}` : ''}`).join('\\n')}\n\n# \n${currentFiles}\n\n ****\n\nFILE_START: index.html\n<details>\n  <!--  HTML $1, $2, $3  -->\n</details>\nFILE_END\n\nFILE_START: style.css\n/*  CSS  */\nFILE_END\n\nFILE_START: script.js\n(function() {\n  //  JS \n})();\nFILE_END\n\n****`;\n                // 2: \n                progressDialogRef.value?.setProgress(20);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(`: ${files.value.length} `);\n                const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                progressDialogRef.value?.setProgress(30);\n                progressDialogRef.value?.setMessage(' AI ...');\n                progressDialogRef.value?.addDetail(' 10-30 ');\n                const response = await fetch(apiUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        Authorization: `Bearer ${settings.value.api_key}`,\n                    },\n                    body: JSON.stringify({\n                        model: settings.value.model,\n                        messages: [\n                            { role: 'system', content: systemPrompt },\n                            { role: 'user', content: userPrompt },\n                        ],\n                        temperature: 0.7,\n                        max_tokens: 65500,\n                    }),\n                });\n                if (!response.ok) {\n                    throw new Error(`API : ${response.statusText}`);\n                }\n                // 3: \n                progressDialogRef.value?.setProgress(60);\n                progressDialogRef.value?.setMessage(' AI ...');\n                const data = await response.json();\n                const resultText = data.choices[0]?.message?.content || '';\n                // 4: \n                progressDialogRef.value?.setProgress(80);\n                progressDialogRef.value?.setMessage('...');\n                progressDialogRef.value?.addDetail(`: ${resultText.length} `);\n                // \n                const FILE_START_REGEX = /FILE_START:\\s*([^\\n]+)\\n([\\s\\S]*?)(?=FILE_START:|FILE_END:|$)/g;\n                const matches = [...resultText.matchAll(FILE_START_REGEX)];\n                if (matches.length === 0) {\n                    throw new Error('AI ');\n                }\n                progressDialogRef.value?.addDetail(` ${matches.length} `);\n                // \n                const generatedFiles = matches.map(m => m[1].trim().replace(/^\\.\\//, ''));\n                const requiredFiles = ['index.html', 'style.css', 'script.js'];\n                const missingFiles = requiredFiles.filter(f => !generatedFiles.includes(f));\n                if (missingFiles.length > 0) {\n                    progressDialogRef.value?.addDetail(` : AI : ${missingFiles.join(', ')}`);\n                    window.toastr.warning(`AI : ${missingFiles.join(', ')}`, '', {\n                        timeOut: 5000,\n                    });\n                }\n                if (matches.length > 0) {\n                    for (const match of matches) {\n                        const normalizedPath = match[1].trim().replace(/^\\.\\//, '');\n                        let content = sanitizeFileContent(normalizedPath, match[2]);\n                        if (content.endsWith('FILE_END')) {\n                            content = content.slice(0, -8).trim();\n                        }\n                        const file = files.value.find(f => f.path === normalizedPath);\n                        if (file) {\n                            file.content = content;\n                            progressDialogRef.value?.addDetail(` : ${normalizedPath}`);\n                        }\n                    }\n                }\n                // 5: \n                progressDialogRef.value?.setProgress(95);\n                progressDialogRef.value?.setMessage('...');\n                // \n                originalAiPrompt.value += `\\n\\n${modifyInstruction}`;\n                updatePreview();\n                // \n                progressDialogRef.value?.setProgress(100);\n                progressDialogRef.value?.setMessage(' AI ');\n                setTimeout(() => {\n                    showProgress.value = false;\n                    showAiModifyDialog.value = false;\n                    window.toastr.success(` AI  ${matches.length} `);\n                }, 800);\n            }\n            catch (error) {\n                console.error('AI :', error);\n                showProgress.value = false;\n                window.toastr.error('AI : ' + error.message);\n            }\n            finally {\n                isModifyingAi.value = false;\n            }\n        }\n        // \n        async function copyWorldbook() {\n            await copyToClipboard(worldbookContent.value, ' ');\n        }\n        function sanitizeFileContent(filePath, raw) {\n            let content = raw.trim();\n            //  markdown ```html ... ```\n            const fenceMatch = content.match(/^```[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*```$/);\n            if (fenceMatch) {\n                content = fenceMatch[1].trim();\n            }\n            //  Python docstring \"\"\"html ... \"\"\"  '''html ... '''\n            const docstringMatch = content.match(/^(\"\"\"|''')[a-zA-Z0-9]*\\s*([\\s\\S]*?)\\s*\\1$/);\n            if (docstringMatch) {\n                content = docstringMatch[2].trim();\n            }\n            //  \"\"\"html  ```html \n            content = content.replace(/^(```|\"\"\"|''')[a-zA-Z0-9]*\\s*\\n?/, '');\n            content = content.replace(/\\n?\\s*(```|\"\"\"|''')$/, '');\n            if (filePath.endsWith('.html')) {\n                content = content.replace(/<!DOCTYPE html>/i, match => match.toUpperCase());\n            }\n            return content;\n        }\n        // \n        function exportRegex() {\n            const htmlFile = files.value.find(f => f.path === 'index.html');\n            const cssFile = files.value.find(f => f.path === 'style.css');\n            const jsFile = files.value.find(f => f.path === 'script.js');\n            if (!htmlFile || htmlFile.content.trim() === '') {\n                window.toastr.error('');\n                return;\n            }\n            const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n                const r = (Math.random() * 16) | 0;\n                const v = c === 'x' ? r : (r & 0x3) | 0x8;\n                return v.toString(16);\n            });\n            // <details> \n            const scriptTag = 'script';\n            const styleTag = 'style';\n            //  <details> \n            const detailsHtml = htmlFile.content.trim();\n            const replaceString = `${detailsHtml}\n<${styleTag}>\n${cssFile?.content || ''}\n</${styleTag}>\n\n<${scriptTag}>\n${jsFile?.content || ''}\n</${scriptTag}>`;\n            //  findRegex\n            //  findRegex \n            // \n            let regexPattern = config.value.findRegex;\n            //  findRegex \n            const existingCaptureGroups = (regexPattern.match(/\\([^)]+\\)/g) || []).length;\n            const fieldCount = config.value.fields.length;\n            if (existingCaptureGroups === 0) {\n                // \n                regexPattern = `${regexPattern.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}[\\\\r\\\\n]*${Array(fieldCount)\n                    .fill('\\\\|([^|]+)')\n                    .join('')}\\\\|[\\\\r\\\\n]*`;\n            }\n            // \n            // \n            const cleanReplaceString = replaceString.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n            const regexJson = {\n                id: uuid,\n                scriptName: config.value.name,\n                findRegex: regexPattern,\n                replaceString: cleanReplaceString,\n                trimStrings: [],\n                placement: [2],\n                disabled: false,\n                markdownOnly: true,\n                promptOnly: false,\n                runOnEdit: true,\n                substituteRegex: 0,\n                minDepth: null,\n                maxDepth: null,\n            };\n            //  JSON\n            const blob = new Blob([JSON.stringify(regexJson, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `regex-${config.value.name}.json`;\n            a.click();\n            URL.revokeObjectURL(url);\n            window.toastr.success('  JSON ');\n        }\n        // ====================  ====================\n        // \n        function loadSavedConfig() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n                const savedConfig = scriptVars.statusbar_generator_config;\n                if (savedConfig) {\n                    config.value = { ...config.value, ...savedConfig };\n                    console.log(' ');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        function saveConfig() {\n            try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                    console.warn('script_id ');\n                    return;\n                }\n                insertOrAssignVariables({ statusbar_generator_config: config.value }, { type: 'script', script_id: scriptId });\n            }\n            catch (error) {\n                console.error(':', error);\n            }\n        }\n        // \n        onMounted(() => {\n            loadSavedConfig();\n        });\n        // \n        watch(() => config.value, () => {\n            saveConfig();\n        }, { deep: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[32] || (_cache[32] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px !important\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"12px\", \"letter-spacing\": \"0.5px\", \"text-shadow\": \"0 1px 2px rgba(0, 0, 0, 0.5)\" } }, [\n                        _createElementVNode(\"i\", {\n                            class: \"fa-solid fa-chart-bar\",\n                            style: { \"color\": \"#4a9eff\", \"font-size\": \"18px\" }\n                        }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: _cache[0] || (_cache[0] = ($event) => (loadTemplate('abo'))),\n                            onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[29] || (_cache[29] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-magic\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  ABO  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: showAIDialog,\n                            onMouseenter: _cache[3] || (_cache[3] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[4] || (_cache[4] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[30] || (_cache[30] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */),\n                        _createElementVNode(\"button\", {\n                            style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                            onClick: exportRegex,\n                            onMouseenter: _cache[5] || (_cache[5] = (e) => (e.currentTarget.style.transform = 'translateY(-2px)')),\n                            onMouseleave: _cache[6] || (_cache[6] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                        }, [...(_cache[31] || (_cache[31] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-download\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[38] || (_cache[38] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 15px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-cog\",\n                                style: { \"color\": \"#4a9eff\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[33] || (_cache[33] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#c0c0c0\", \"font-size\": \"12px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((config.value.findRegex) = $event)),\n                                type: \"text\",\n                                placeholder: \"<-CHARACTER_STATUS->\",\n                                style: { \"width\": \"100%\", \"padding\": \"8px 12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"12px\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, config.value.findRegex]\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(config.value.fields, (field, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: index,\n                                    style: { \"padding\": \"10px\", \"background\": \"#1e1e1e\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            disabled: config.value.fields.length <= 1,\n                                            style: _normalizeStyle({\n                                                padding: '4px 8px',\n                                                background: '#ef4444',\n                                                border: 'none',\n                                                borderRadius: '4px',\n                                                color: 'white',\n                                                fontSize: '10px',\n                                                cursor: 'pointer',\n                                                opacity: config.value.fields.length <= 1 ? 0.4 : 1,\n                                            }),\n                                            onClick: ($event) => (removeField(index))\n                                        }, \"  \", 12 /* STYLE, PROPS */, _hoisted_10)\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": ($event) => ((field.name) = $event),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"margin-bottom\": \"6px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_11), [\n                                        [_vModelText, field.name]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": ($event) => ((field.label) = $event),\n                                        type: \"text\",\n                                        placeholder: \"\",\n                                        style: { \"width\": \"100%\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"margin-bottom\": \"6px\" }\n                                    }, null, 8 /* PROPS */, _hoisted_12), [\n                                        [_vModelText, field.label]\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_13, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": ($event) => ((field.icon) = $event),\n                                            type: \"text\",\n                                            placeholder: \"fa-solid fa-user\",\n                                            style: { \"flex\": \"1\", \"padding\": \"6px 10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\", \"font-family\": \"monospace\" }\n                                        }, null, 8 /* PROPS */, _hoisted_14), [\n                                            [_vModelText, field.icon]\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            style: { \"padding\": \"6px 10px\", \"background\": \"#3a3a3a\", \"border\": \"1px solid #4a4a4a\", \"border-radius\": \"4px\", \"color\": \"#fff\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"min-width\": \"36px\" },\n                                            title: \"\",\n                                            onClick: ($event) => (showIconPicker(index))\n                                        }, [\n                                            (field.icon)\n                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                    key: 0,\n                                                    class: _normalizeClass(field.icon)\n                                                }, null, 2 /* CLASS */))\n                                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_16))\n                                        ], 8 /* PROPS */, _hoisted_15)\n                                    ])\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: addField\n                        }, [...(_cache[34] || (_cache[34] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-plus\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: showXmlParseDialog\n                        }, [...(_cache[35] || (_cache[35] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-code\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  XML  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: showAiFieldGeneratorDialog\n                        }, [...(_cache[36] || (_cache[36] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\" AI  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            style: { \"width\": \"100%\", \"padding\": \"8px\", \"margin-top\": \"10px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                            onClick: generateFromFields\n                        }, [...(_cache[37] || (_cache[37] = [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-sparkles\",\n                                    style: { \"margin-right\": \"6px\" }\n                                }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(files.value, (file) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: file.path,\n                                    style: _normalizeStyle({\n                                        padding: '6px 14px',\n                                        background: currentFile.value?.path === file.path ? '#4a9eff' : '#1e1e1e',\n                                        color: currentFile.value?.path === file.path ? '#fff' : '#c0c0c0',\n                                        borderRadius: '6px',\n                                        fontSize: '12px',\n                                        fontWeight: '600',\n                                        cursor: 'pointer',\n                                        transition: 'all 0.2s ease',\n                                    }),\n                                    onClick: ($event) => (currentFile.value = file)\n                                }, _toDisplayString(file.path), 13 /* TEXT, STYLE, PROPS */, _hoisted_19));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (currentFile.value)\n                            ? _withDirectives((_openBlock(), _createElementBlock(\"textarea\", {\n                                key: 0,\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((currentFile.value.content) = $event)),\n                                style: { \"flex\": \"1\", \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"line-height\": \"1.6\", \"resize\": \"none\", \"min-height\": \"400px\" },\n                                onInput: updatePreview\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)), [\n                                [_vModelText, currentFile.value.content]\n                            ])\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_20, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _createElementVNode(\"div\", { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"12px\" } }, [\n                                _cache[40] || (_cache[40] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-book\",\n                                        style: { \"color\": \"#4a9eff\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"6px 12px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: copyWorldbook\n                                }, [...(_cache[39] || (_cache[39] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-copy\",\n                                            style: { \"margin-right\": \"4px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"pre\", _hoisted_23, _toDisplayString(worldbookContent.value), 1 /* TEXT */)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                            _cache[41] || (_cache[41] = _createElementVNode(\"h4\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                _createElementVNode(\"i\", {\n                                    class: \"fa-solid fa-eye\",\n                                    style: { \"color\": \"#4a9eff\" }\n                                }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", {\n                                style: { \"background\": \"#1e1e1e\", \"border-radius\": \"8px\", \"padding\": \"20px\", \"min-height\": \"400px\", \"border\": \"1px solid #3a3a3a\", \"overflow\": \"auto\" },\n                                innerHTML: previewHtml.value\n                            }, null, 8 /* PROPS */, _hoisted_25)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (showIconPickerFor.value !== null)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[13] || (_cache[13] = _withModifiers(($event) => (showIconPickerFor.value = null), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_26, [\n                            _cache[42] || (_cache[42] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 16px 0\", \"color\": \"#fff\", \"font-size\": \"15px\", \"font-weight\": \"600\" } }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                (_openBlock(), _createElementBlock(_Fragment, null, _renderList(iconList, (iconClass, idx) => {\n                                    return _createElementVNode(\"div\", {\n                                        key: idx,\n                                        style: {\n                                            padding: '14px',\n                                            background: '#1e1e1e',\n                                            borderRadius: '8px',\n                                            cursor: 'pointer',\n                                            textAlign: 'center',\n                                            border: '1px solid #3a3a3a',\n                                            transition: 'all 0.2s ease',\n                                            display: 'flex',\n                                            alignItems: 'center',\n                                            justifyContent: 'center',\n                                        },\n                                        title: iconClass,\n                                        onClick: ($event) => (selectIcon(iconClass)),\n                                        onMouseenter: _cache[9] || (_cache[9] =\n                                            (e) => {\n                                                e.currentTarget.style.background = '#3a3a3a';\n                                                e.currentTarget.style.borderColor = '#4a9eff';\n                                                e.currentTarget.style.transform = 'scale(1.1)';\n                                                e.currentTarget.style.boxShadow = '0 4px 12px rgba(74, 158, 255, 0.3)';\n                                            }),\n                                        onMouseleave: _cache[10] || (_cache[10] =\n                                            (e) => {\n                                                e.currentTarget.style.background = '#1e1e1e';\n                                                e.currentTarget.style.borderColor = '#3a3a3a';\n                                                e.currentTarget.style.transform = 'scale(1)';\n                                                e.currentTarget.style.boxShadow = 'none';\n                                            })\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(iconClass),\n                                            style: { \"font-size\": \"20px\", \"color\": \"#4a9eff\" }\n                                        }, null, 2 /* CLASS */)\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_28);\n                                }), 64 /* STABLE_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[11] || (_cache[11] = ($event) => (showIconPickerFor.value = null))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#ef4444\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[12] || (_cache[12] = ($event) => {\n                                        config.value.fields[showIconPickerFor.value].icon = '';\n                                        showIconPickerFor.value = null;\n                                    })\n                                }, \"  \")\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                (showAI.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.8)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[17] || (_cache[17] = _withModifiers(($event) => (showAI.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_30, [\n                            _cache[48] || (_cache[48] = _createElementVNode(\"h3\", { style: { \"margin\": \"0 0 16px 0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\" } }, \"AI \", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_31, [\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _createElementVNode(\"div\", _hoisted_33, [\n                                        _cache[43] || (_cache[43] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-cog\",\n                                            style: { \"color\": \"#60a5fa\", \"font-size\": \"16px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_34, \"  \" + _toDisplayString(config.value.fields.length) + \"  \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"4px 10px\", \"background\": \"rgba(16, 185, 129, 0.2)\", \"border\": \"1px solid rgba(16, 185, 129, 0.4)\", \"border-radius\": \"4px\", \"color\": \"#10b981\", \"font-size\": \"11px\", \"cursor\": \"pointer\" },\n                                        onClick: addFieldInDialog\n                                    }, [...(_cache[44] || (_cache[44] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ]),\n                                (config.value.fields.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(config.value.fields, (field, i) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: i,\n                                                style: { \"background\": \"rgba(15, 23, 42, 0.6)\", \"border\": \"1px solid rgba(148, 163, 184, 0.15)\", \"border-radius\": \"6px\", \"padding\": \"8px 10px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" }\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_36, \"\" + _toDisplayString(i + 1) + \":\", 1 /* TEXT */),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((field.label) = $event),\n                                                    type: \"text\",\n                                                    placeholder: \"\",\n                                                    style: { \"flex\": \"1\", \"padding\": \"4px 8px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\" }\n                                                }, null, 8 /* PROPS */, _hoisted_37), [\n                                                    [_vModelText, field.label]\n                                                ]),\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((field.name) = $event),\n                                                    type: \"text\",\n                                                    placeholder: \"\",\n                                                    style: { \"flex\": \"1\", \"padding\": \"4px 8px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"font-size\": \"11px\" }\n                                                }, null, 8 /* PROPS */, _hoisted_38), [\n                                                    [_vModelText, field.name]\n                                                ]),\n                                                (field.icon)\n                                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: 0,\n                                                        style: { \"padding\": \"4px 8px\", \"background\": \"rgba(139, 92, 246, 0.2)\", \"border\": \"1px solid rgba(139, 92, 246, 0.3)\", \"border-radius\": \"4px\", \"color\": \"#a78bfa\", \"font-size\": \"11px\", \"cursor\": \"pointer\", \"min-width\": \"30px\" },\n                                                        title: \"\",\n                                                        onClick: ($event) => (field.icon = '')\n                                                    }, [\n                                                        _createElementVNode(\"i\", {\n                                                            class: _normalizeClass(field.icon)\n                                                        }, null, 2 /* CLASS */)\n                                                    ], 8 /* PROPS */, _hoisted_39))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createElementVNode(\"button\", {\n                                                    disabled: config.value.fields.length <= 1,\n                                                    style: _normalizeStyle([{ \"padding\": \"4px 8px\", \"background\": \"rgba(239, 68, 68, 0.2)\", \"border\": \"1px solid rgba(239, 68, 68, 0.3)\", \"border-radius\": \"4px\", \"color\": \"#ef4444\", \"font-size\": \"11px\", \"cursor\": \"pointer\" }, {\n                                                            opacity: config.value.fields.length <= 1 ? 0.4 : 1,\n                                                            cursor: config.value.fields.length <= 1 ? 'not-allowed' : 'pointer',\n                                                        }]),\n                                                    title: \"\",\n                                                    onClick: ($event) => (removeFieldInDialog(i))\n                                                }, [...(_cache[45] || (_cache[45] = [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */)\n                                                    ]))], 12 /* STYLE, PROPS */, _hoisted_40)\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_41, \" \\\"\\\"\"))\n                            ]),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((aiPrompt).value = $event)),\n                                placeholder: \"\\n \\n \\n \\n \\n\\n \\n AI \\n \",\n                                style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"min-height\": \"120px\", \"margin-bottom\": \"16px\", \"resize\": \"vertical\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, aiPrompt.value]\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_42, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"#3a3a3a\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#fff\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[15] || (_cache[15] = ($event) => (showAI.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                    onClick: generateWithAI\n                                }, [...(_cache[46] || (_cache[46] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-wand-magic-sparkles\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            (originalAiPrompt.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_43, [\n                                    _createElementVNode(\"button\", {\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingAi.value,\n                                        onClick: _cache[16] || (_cache[16] = ($event) => (showAiModifyDialog.value = true))\n                                    }, [\n                                        _cache[47] || (_cache[47] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingAi.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_44)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" AI  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showAiModifyDialog.value,\n                    \"is-modifying\": isModifyingAi.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        '',\n                    ],\n                    onClose: _cache[18] || (_cache[18] = ($event) => (showAiModifyDialog.value = false)),\n                    onConfirm: modifyWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" XML  \"),\n                (showXmlDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[22] || (_cache[22] = _withModifiers(($event) => (showXmlDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_45, [\n                            _cache[52] || (_cache[52] = _createStaticVNode(\"<h3 style=\\\"margin:0 0 16px 0;color:#f59e0b;font-size:18px;font-weight:600;\\\" data-v-22fa8ffd><i class=\\\"fa-solid fa-robot\\\" style=\\\"margin-right:8px;\\\" data-v-22fa8ffd></i> AI  XML  </h3><div style=\\\"background:rgba(251, 191, 36, 0.1);border:1px solid rgba(251, 191, 36, 0.3);border-radius:6px;padding:12px;margin-bottom:16px;\\\" data-v-22fa8ffd><p style=\\\"margin:0;color:#fbbf24;font-size:12px;line-height:1.6;\\\" data-v-22fa8ffd><i class=\\\"fa-solid fa-circle-info\\\" style=\\\"margin-right:6px;\\\" data-v-22fa8ffd></i><strong data-v-22fa8ffd></strong> AI <i class=\\\"fa-solid fa-cog\\\" data-v-22fa8ffd></i>  API  </p></div>\", 2)),\n                            _createElementVNode(\"div\", _hoisted_46, [\n                                _cache[49] || (_cache[49] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } }, \"  XML  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((xmlInput).value = $event)),\n                                    placeholder: \"\\n<state_bar>\\n<i></i>\\n<></>\\n<></>\\n</state_bar>\",\n                                    style: { \"width\": \"100%\", \"min-height\": \"200px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #404040\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-family\": \"'Consolas', 'Monaco', monospace\", \"font-size\": \"13px\", \"resize\": \"vertical\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, xmlInput.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_47, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#404040\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[20] || (_cache[20] = ($event) => (showXmlDialog.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"margin-right\": \"10px\" },\n                                    disabled: !xmlInput.value.trim() || isParsingXml.value,\n                                    onClick: parseXmlWithAI\n                                }, [\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-robot\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isParsingXml.value ? 'AI ...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_48),\n                                (originalXmlInput.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingXml.value,\n                                        onClick: _cache[21] || (_cache[21] = ($event) => (showXmlModifyDialog.value = true))\n                                    }, [\n                                        _cache[51] || (_cache[51] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingXml.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_49))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" XML  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showXmlModifyDialog.value,\n                    \"is-modifying\": isModifyingXml.value,\n                    title: \"AI  XML \",\n                    description: \"AI \",\n                    examples: [\n                        '',\n                        '',\n                        '',\n                        '3',\n                    ],\n                    onClose: _cache[23] || (_cache[23] = ($event) => (showXmlModifyDialog.value = false)),\n                    onConfirm: modifyXmlWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\" AI  \"),\n                (showAiFieldDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 3,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\" },\n                        onClick: _cache[27] || (_cache[27] = _withModifiers(($event) => (showAiFieldDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_50, [\n                            _cache[56] || (_cache[56] = _createStaticVNode(\"<h3 style=\\\"margin:0 0 16px 0;color:#10b981;font-size:18px;font-weight:600;\\\" data-v-22fa8ffd><i class=\\\"fa-solid fa-wand-magic-sparkles\\\" style=\\\"margin-right:8px;\\\" data-v-22fa8ffd></i> AI  </h3><div style=\\\"background:rgba(16, 185, 129, 0.1);border:1px solid rgba(16, 185, 129, 0.3);border-radius:6px;padding:12px;margin-bottom:16px;\\\" data-v-22fa8ffd><p style=\\\"margin:0;color:#10b981;font-size:12px;line-height:1.6;\\\" data-v-22fa8ffd><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;\\\" data-v-22fa8ffd></i><strong data-v-22fa8ffd></strong>AI  </p></div>\", 2)),\n                            _createElementVNode(\"div\", _hoisted_51, [\n                                _cache[53] || (_cache[53] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event) => ((aiFieldDescription).value = $event)),\n                                    placeholder: \"\\n\\n- \\n- \\n- \\n- \\n- \\n- \\n- \",\n                                    style: { \"width\": \"100%\", \"min-height\": \"180px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #404040\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"line-height\": \"1.6\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, aiFieldDescription.value]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_52, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#404040\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                    onClick: _cache[25] || (_cache[25] = ($event) => (showAiFieldDialog.value = false))\n                                }, \"  \"),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #10b981 0%, #059669 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"cursor\": \"pointer\", \"margin-right\": \"10px\" },\n                                    disabled: !aiFieldDescription.value.trim() || isGeneratingFields.value,\n                                    onClick: generateFieldsWithAI\n                                }, [\n                                    _cache[54] || (_cache[54] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-wand-magic-sparkles\",\n                                        style: { \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingFields.value ? 'AI ...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_53),\n                                (originalFieldDescription.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        style: { \"padding\": \"10px 20px\", \"background\": \"#ffc107\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#000\", \"font-size\": \"13px\", \"cursor\": \"pointer\" },\n                                        disabled: isModifyingField.value,\n                                        onClick: _cache[26] || (_cache[26] = ($event) => (showFieldModifyDialog.value = true))\n                                    }, [\n                                        _cache[55] || (_cache[55] = _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-edit\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(isModifyingField.value ? '...' : 'AI '), 1 /* TEXT */)\n                                    ], 8 /* PROPS */, _hoisted_54))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(AIModifyDialog, {\n                    show: showFieldModifyDialog.value,\n                    \"is-modifying\": isModifyingField.value,\n                    title: \"AI \",\n                    description: \"AI \",\n                    examples: ['', '3', '', '2'],\n                    onClose: _cache[28] || (_cache[28] = ($event) => (showFieldModifyDialog.value = false)),\n                    onConfirm: modifyFieldWithAI\n                }, null, 8 /* PROPS */, [\"show\", \"is-modifying\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(ProgressDialog, {\n                    ref_key: \"progressDialogRef\",\n                    ref: progressDialogRef,\n                    show: showProgress.value,\n                    title: \"AI \"\n                }, null, 8 /* PROPS */, [\"show\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StatusBarGenerator.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StatusBarGenerator.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StatusBarGenerator.vue?vue&type=style&index=0&id=22fa8ffd&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-22fa8ffd\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n    class: \"summary-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    class: \"header-actions\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_8 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_9 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_12 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n    class: \"history-text\",\n    style: { \"font-family\": \"'Courier New', monospace\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"color\": \"#e0e0e0\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"user-select\": \"text\", \"cursor\": \"text\" }\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { useSummaryHistoryStore } from '../settings';\nimport { getChatIdSafe } from '../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SummaryTab',\n    setup(__props) {\n        const historyStore = useSummaryHistoryStore();\n        // \n        const summary_history = ref([]);\n        const expandedState = ref(new Map());\n        // \n        const refreshSummaryHistory = () => {\n            try {\n                summary_history.value = historyStore.getSummaryHistory();\n                console.log(':', summary_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                summary_history.value = [];\n            }\n        };\n        // \n        const toggleExpanded = (index) => {\n            const current = expandedState.value.get(index) || false;\n            expandedState.value.set(index, !current);\n        };\n        const isExpanded = (index) => {\n            return expandedState.value.get(index) || false;\n        };\n        // \n        const handleRefreshData = async () => {\n            console.log('');\n            try {\n                await refreshSummaryHistory();\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copySummary = (content) => {\n            copyToClipboard(content, '');\n        };\n        // \n        const deleteSummary = (index) => {\n            if (confirm('')) {\n                try {\n                    const chat_id = getChatIdSafe();\n                    if (!chat_id) {\n                        window.toastr.error('');\n                        return;\n                    }\n                    summary_history.value.splice(index, 1);\n                    insertOrAssignVariables({ summary_history: summary_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n                catch (error) {\n                    console.error(':', error);\n                    window.toastr.error('');\n                }\n            }\n        };\n        // \n        const createSummaryWorldbook = async () => {\n            try {\n                // \n                let characterName = '';\n                try {\n                    const currentCharacter = getCharData('current');\n                    if (currentCharacter && currentCharacter.name) {\n                        characterName = currentCharacter.name;\n                        // \n                        characterName = characterName.replace(/[<>:\"/\\\\|?*]/g, '_').trim();\n                    }\n                }\n                catch (charError) {\n                    console.warn(':', charError);\n                }\n                // \n                const dateStr = new Date().toISOString().slice(0, 10);\n                const worldbookName = `_${characterName}_${dateStr}`;\n                console.log(':', worldbookName);\n                const existingWorldbooks = getWorldbookNames();\n                if (existingWorldbooks.includes(worldbookName)) {\n                    window.toastr.warning(` \"${worldbookName}\" `);\n                    return;\n                }\n                await createWorldbook(worldbookName, []);\n                try {\n                    await rebindChatWorldbook('current', worldbookName);\n                    window.toastr.success(` \"${worldbookName}\" `);\n                }\n                catch (bindError) {\n                    console.warn(':', bindError);\n                    window.toastr.success(` \"${worldbookName}\"`);\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const bindToWorldbook = async (content, summaryIndex) => {\n            try {\n                const worldbookNames = getWorldbookNames();\n                if (worldbookNames.length === 0) {\n                    window.toastr.warning('');\n                    return;\n                }\n                const selectedWorldbook = worldbookNames.length === 1 ? worldbookNames[0] : await promptForWorldbook(worldbookNames);\n                if (!selectedWorldbook) {\n                    return;\n                }\n                const entryName = `_${summaryIndex + 1}_${new Date().toLocaleDateString()}`;\n                const newEntry = {\n                    name: entryName,\n                    enabled: true,\n                    strategy: {\n                        type: 'constant',\n                        keys: [],\n                        keys_secondary: { logic: 'and_any', keys: [] },\n                        scan_depth: 'same_as_global',\n                    },\n                    position: {\n                        type: 'before_character_definition',\n                        role: 'system',\n                        depth: 1,\n                    },\n                    content: content,\n                    comment: ` - : ${summary_history.value[summaryIndex]?.start_id || '?'} - ${summary_history.value[summaryIndex]?.end_id || '?'}`,\n                    insertion_order: 0,\n                    case_sensitive: false,\n                    name_is_regex: false,\n                    keys_are_regex: false,\n                    selective_logic: 'and',\n                    secondary_keys_logic: 'and',\n                    activation_threshold: 0,\n                    disabled: false,\n                    order: 0,\n                    group: '',\n                    local_id: 0,\n                    depth_entries: [],\n                    depth_entries_all: false,\n                    search_range: 0,\n                    force_activation: false,\n                    disable: false,\n                    exclude_recursion: false,\n                    hidden: false,\n                    priority: 0,\n                    comment_is_regex: false,\n                    content_is_regex: false,\n                    secondary_keys_are_regex: false,\n                    keys_secondary_are_regex: false,\n                    uid: Date.now(),\n                };\n                await createWorldbookEntries(selectedWorldbook, [newEntry]);\n                window.toastr.success(`: ${selectedWorldbook}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error(': ' + error.message);\n            }\n        };\n        // \n        const promptForWorldbook = async (worldbookNames) => {\n            return new Promise(resolve => {\n                const dialog = $(`\n      <div style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        background: #2a2a2a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        padding: 20px;\n        z-index: 1000000;\n        min-width: 300px;\n      \">\n        <h3 style=\"margin: 0 0 15px 0; color: #e0e0e0;\"></h3>\n        <div style=\"margin-bottom: 15px;\">\n          ${worldbookNames\n                    .map(name => `\n            <label style=\"display: block; margin: 5px 0; color: #e0e0e0;\">\n              <input type=\"radio\" name=\"worldbook\" value=\"${name}\" style=\"margin-right: 8px;\">\n              ${name}\n            </label>\n          `)\n                    .join('')}\n        </div>\n        <div style=\"text-align: right;\">\n          <button id=\"cancelWorldbook\" style=\"\n            background: #666;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            margin-right: 10px;\n            cursor: pointer;\n          \"></button>\n          <button id=\"confirmWorldbook\" style=\"\n            background: #4a9eff;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n          \"></button>\n        </div>\n      </div>\n    `);\n                const overlay = $(`\n      <div style=\"\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n      \"></div>\n    `);\n                $('body').append(overlay).append(dialog);\n                $('#cancelWorldbook').on('click', () => {\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(null);\n                });\n                $('#confirmWorldbook').on('click', () => {\n                    const selected = $('input[name=\"worldbook\"]:checked').val();\n                    overlay.remove();\n                    dialog.remove();\n                    resolve(selected || null);\n                });\n                $('input[name=\"worldbook\"]:first').prop('checked', true);\n            });\n        };\n        // \n        const showDebugPanel = () => {\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('debug-panel-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'debug-panel-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #ffc107;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 800px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #ffc107; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ul style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li>localStorage</li>\n          <li></li>\n          <li></li>\n        </ul>\n      </div>\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 12px;\n      margin-bottom: 20px;\n    `;\n                // \n                const buttons = [\n                    { id: 'testComplete', text: ' ', color: '#4a9eff' },\n                    { id: 'syncData', text: ' ', color: '#28a745' },\n                    { id: 'checkFloor', text: ' ', color: '#17a2b8' },\n                    { id: 'testCalculation', text: ' ', color: '#6f42c1' },\n                    { id: 'showStatus', text: ' ', color: '#fd7e14' },\n                    { id: 'resetStartId', text: ' ', color: '#dc3545' },\n                ];\n                buttons.forEach(button => {\n                    const btn = parentDoc.createElement('button');\n                    btn.id = button.id;\n                    btn.textContent = button.text;\n                    btn.style.cssText = `\n        background: ${button.color};\n        color: white;\n        border: none;\n        padding: 12px 16px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        transition: background 0.2s;\n      `;\n                    btn.onmouseover = () => {\n                        btn.style.opacity = '0.8';\n                    };\n                    btn.onmouseout = () => {\n                        btn.style.opacity = '1';\n                    };\n                    buttonContainer.appendChild(btn);\n                });\n                // \n                const outputArea = parentDoc.createElement('div');\n                outputArea.id = 'debug-output';\n                outputArea.style.cssText = `\n      background: #1a1a1a;\n      border: 1px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      height: 200px;\n      overflow-y: auto;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 12px;\n      color: #e0e0e0;\n      white-space: pre-wrap;\n      margin-bottom: 20px;\n    `;\n                outputArea.textContent = '...\\n';\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #6c757d;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n      align-self: center;\n    `;\n                // \n                container.appendChild(header);\n                container.appendChild(buttonContainer);\n                container.appendChild(outputArea);\n                container.appendChild(closeButton);\n                overlay.appendChild(container);\n                parentBody.appendChild(overlay);\n                // \n                const log = (message) => {\n                    const output = parentDoc.getElementById('debug-output');\n                    if (output) {\n                        output.textContent += message + '\\n';\n                        output.scrollTop = output.scrollHeight;\n                    }\n                };\n                // \n                closeButton.onclick = () => {\n                    parentBody.removeChild(overlay);\n                };\n                // \n                parentDoc.getElementById('testComplete')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testCompleteAutoSummary) {\n                            window.testCompleteAutoSummary();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('syncData')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.syncAutoSummaryData) {\n                            window.syncAutoSummaryData();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('checkFloor')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkCurrentFloor) {\n                            window.checkCurrentFloor();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('testCalculation')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.testFloorCalculation) {\n                            window.testFloorCalculation();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('showStatus')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.checkAutoSummaryStatus) {\n                            window.checkAutoSummaryStatus();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                parentDoc.getElementById('resetStartId')?.addEventListener('click', () => {\n                    log(' ...');\n                    try {\n                        if (window.smartResetChat) {\n                            window.smartResetChat();\n                            log(' ');\n                        }\n                        else {\n                            log(' ');\n                        }\n                    }\n                    catch (error) {\n                        log(' : ' + error.message);\n                    }\n                });\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                window.toastr?.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr?.error('');\n            }\n        };\n        // \n        refreshSummaryHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[3] || (_cache[3] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (summary_history.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(summary_history.value.length) + \" \", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button refresh-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: handleRefreshData\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-refresh\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button create-worldbook-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#51cf66\", \"border\": \"1px solid #40c057\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: createSummaryWorldbook\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"mini-button debug-button\",\n                            style: { \"padding\": \"6px 12px\", \"background\": \"#ffc107\", \"border\": \"1px solid #ffb300\", \"border-radius\": \"4px\", \"color\": \"#000\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\" },\n                            onClick: showDebugPanel\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-bug\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                (summary_history.value && summary_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(summary_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"span\", _hoisted_8, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_9, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(isExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_6),\n                                (isExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"4px\", \"color\": \"#e0e0e0\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"background 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (copySummary(item.content))\n                                            }, [...(_cache[4] || (_cache[4] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-copy\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button worldbook-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#4a9eff\", \"border\": \"1px solid #5aaeff\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (bindToWorldbook(item.content, index))\n                                            }, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_14),\n                                            _createElementVNode(\"button\", {\n                                                class: \"mini-button delete-button\",\n                                                style: { \"flex\": \"1\", \"padding\": \"6px 12px\", \"background\": \"#ff6b6b\", \"border\": \"1px solid #ff5252\", \"border-radius\": \"4px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"transition\": \"all 0.2s\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"gap\": \"6px\" },\n                                                onClick: ($event) => (deleteSummary(index))\n                                            }, [...(_cache[6] || (_cache[6] = [\n                                                    _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_15)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, _toDisplayString(item.content), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-inbox\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SummaryTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SummaryTab.vue?vue&type=style&index=0&id=f8bd87fc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f8bd87fc\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"table-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = {\n    class: \"section-header\",\n    style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"20px 25px !important\", \"border-bottom\": \"1px solid #3a3a3a\", \"margin-bottom\": \"5px\" }\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"count-badge\",\n    style: { \"background\": \"#4a9eff\", \"color\": \"white\", \"padding\": \"4px 8px\", \"border-radius\": \"12px\", \"font-size\": \"12px\" }\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"history-list\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n    class: \"history-info\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"flex\": \"1\" }\n};\nconst _hoisted_7 = {\n    class: \"history-number\",\n    style: { \"color\": \"#4a9eff\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_8 = {\n    class: \"history-range\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_9 = {\n    class: \"expand-icon\",\n    style: { \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"history-content\",\n    style: { \"padding\": \"15px\", \"background\": \"#2a2a2a\", \"border-radius\": \"0 0 6px 6px\" }\n};\nconst _hoisted_11 = {\n    class: \"history-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"12px\", \"padding-bottom\": \"8px\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-wrap\": \"wrap\" }\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    class: \"table-display\",\n    style: { \"overflow-x\": \"auto\", \"border-radius\": \"6px\", \"border\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_15 = { style: { \"width\": \"100%\", \"border-collapse\": \"collapse\", \"background\": \"#1a1a1a\" } };\nconst _hoisted_16 = { style: { \"background\": \"#2a2a2a\" } };\nconst _hoisted_17 = {\n    key: 1,\n    class: \"empty-state\",\n    style: { \"text-align\": \"center\", \"padding\": \"40px 20px\", \"color\": \"#888\" }\n};\nimport { ref } from 'vue';\nimport { getChatIdSafe } from '../utils';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableTab',\n    setup(__props) {\n        const table_history = ref([]);\n        const tableExpandedState = ref(new Map());\n        // \n        const refreshTableHistory = () => {\n            try {\n                const chat_id = getChatIdSafe();\n                if (!chat_id) {\n                    console.warn('ID');\n                    table_history.value = [];\n                    return;\n                }\n                const chat_vars = getVariables({ type: 'chat' });\n                console.log(':', chat_vars);\n                console.log(':', chat_vars.table_history);\n                table_history.value = chat_vars.table_history || [];\n                console.log(':', table_history.value.length);\n            }\n            catch (e) {\n                console.error(':', e);\n                table_history.value = [];\n            }\n        };\n        // \n        const toggleTableExpanded = (index) => {\n            const current = tableExpandedState.value.get(index) || false;\n            tableExpandedState.value.set(index, !current);\n        };\n        const isTableExpanded = (index) => {\n            return tableExpandedState.value.get(index) || false;\n        };\n        //  - iframe\n        const copyToClipboard = async (text, successMessage = '') => {\n            console.log(':', text.length);\n            try {\n                // iframe\n                if (window.parent && window.parent !== window) {\n                    console.log('iframe');\n                    const parentSuccess = await tryParentWindowCopy(text);\n                    if (parentSuccess) {\n                        console.log('');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                }\n                // 1:  Clipboard API\n                if (navigator.clipboard && window.isSecureContext) {\n                    console.log(' Clipboard API');\n                    try {\n                        await navigator.clipboard.writeText(text);\n                        console.log('Clipboard API ');\n                        window.toastr.success(successMessage);\n                        return;\n                    }\n                    catch (clipboardErr) {\n                        console.warn('Clipboard API :', clipboardErr);\n                        // \n                    }\n                }\n                // 2:  execCommand \n                console.log(' execCommand ');\n                const success = await execCommandCopy(text);\n                if (success) {\n                    console.log('execCommand ');\n                    window.toastr.success(successMessage);\n                    return;\n                }\n                // 3: \n                console.log('');\n                showManualCopyDialog(text);\n            }\n            catch (err) {\n                console.error(':', err);\n                // \n                showManualCopyDialog(text);\n            }\n        };\n        // \n        const tryParentWindowCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    const parentDoc = window.parent.document;\n                    const parentBody = window.parent.document.body;\n                    //  textarea \n                    const textarea = parentDoc.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.cssText = `\n        position: fixed;\n        left: -9999px;\n        top: -9999px;\n        opacity: 0;\n        pointer-events: none;\n        z-index: -1000;\n      `;\n                    textarea.setAttribute('readonly', '');\n                    parentBody.appendChild(textarea);\n                    // \n                    textarea.focus();\n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = parentDoc.execCommand('copy');\n                    // \n                    parentBody.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error(':', err);\n                    resolve(false);\n                }\n            });\n        };\n        // execCommand \n        const execCommandCopy = async (text) => {\n            return new Promise(resolve => {\n                try {\n                    //  textarea \n                    const textarea = document.createElement('textarea');\n                    textarea.value = text;\n                    textarea.style.position = 'fixed';\n                    textarea.style.left = '-9999px';\n                    textarea.style.top = '-9999px';\n                    textarea.style.opacity = '0';\n                    textarea.style.pointerEvents = 'none';\n                    textarea.setAttribute('readonly', '');\n                    document.body.appendChild(textarea);\n                    // \n                    textarea.select();\n                    textarea.setSelectionRange(0, text.length);\n                    // \n                    const success = document.execCommand('copy');\n                    // \n                    document.body.removeChild(textarea);\n                    resolve(success);\n                }\n                catch (err) {\n                    console.error('execCommand :', err);\n                    resolve(false);\n                }\n            });\n        };\n        //  - \n        const showManualCopyDialog = (text) => {\n            console.log(':', text.length);\n            try {\n                // document\n                const parentDoc = window.parent.document;\n                const parentBody = window.parent.document.body;\n                // \n                const existingOverlay = parentDoc.getElementById('manual-copy-overlay');\n                if (existingOverlay) {\n                    parentBody.removeChild(existingOverlay);\n                }\n                // \n                const overlay = parentDoc.createElement('div');\n                overlay.id = 'manual-copy-overlay';\n                overlay.style.cssText = `\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: 999999;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    `;\n                // \n                const container = parentDoc.createElement('div');\n                container.style.cssText = `\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 12px;\n      padding: 25px;\n      max-width: 900px;\n      width: 95%;\n      max-height: 85vh;\n      display: flex;\n      flex-direction: column;\n      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n    `;\n                // \n                const header = parentDoc.createElement('div');\n                header.innerHTML = `\n      <h3 style=\"margin: 0 0 15px 0; color: #4a9eff; text-align: center; font-size: 18px; font-weight: 600;\">\n         \n      </h3>\n      <div style=\"background: #1a1a1a; border: 1px solid #444; border-radius: 6px; padding: 12px; margin-bottom: 15px;\">\n        <p style=\"margin: 0 0 8px 0; color: #e0e0e0; font-size: 14px;\">\n          <strong></strong>\n        </p>\n        <ol style=\"margin: 0; padding-left: 20px; color: #ccc; font-size: 13px; line-height: 1.6;\">\n          <li></li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+A</kbd> </li>\n          <li> <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Ctrl+C</kbd> </li>\n          <li>\"\" <kbd style=\"background: #444; padding: 2px 6px; border-radius: 3px; color: #fff;\">Esc</kbd> </li>\n        </ol>\n      </div>\n    `;\n                // \n                const textarea = parentDoc.createElement('textarea');\n                textarea.value = text;\n                textarea.style.cssText = `\n      width: 100%;\n      height: 400px;\n      background: #1a1a1a;\n      border: 2px solid #444;\n      border-radius: 6px;\n      padding: 15px;\n      color: #e0e0e0;\n      font-family: 'Courier New', 'Consolas', monospace;\n      font-size: 13px;\n      line-height: 1.5;\n      resize: vertical;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      outline: none;\n      margin-bottom: 20px;\n      box-sizing: border-box;\n    `;\n                // \n                const buttonContainer = parentDoc.createElement('div');\n                buttonContainer.style.cssText = `\n      display: flex;\n      gap: 12px;\n      justify-content: center;\n      align-items: center;\n    `;\n                // \n                const closeButton = parentDoc.createElement('button');\n                closeButton.textContent = '';\n                closeButton.style.cssText = `\n      background: #4a9eff;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                closeButton.onmouseover = () => {\n                    closeButton.style.background = '#5ba8ff';\n                };\n                closeButton.onmouseout = () => {\n                    closeButton.style.background = '#4a9eff';\n                };\n                // \n                const copyButton = parentDoc.createElement('button');\n                copyButton.textContent = '';\n                copyButton.style.cssText = `\n      background: #28a745;\n      color: white;\n      border: none;\n      padding: 12px 24px;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: background 0.2s;\n    `;\n                copyButton.onmouseover = () => {\n                    copyButton.style.background = '#218838';\n                };\n                copyButton.onmouseout = () => {\n                    copyButton.style.background = '#28a745';\n                };\n                // \n                buttonContainer.appendChild(copyButton);\n                buttonContainer.appendChild(closeButton);\n                container.appendChild(header);\n                container.appendChild(textarea);\n                container.appendChild(buttonContainer);\n                overlay.appendChild(container);\n                // \n                parentBody.appendChild(overlay);\n                // \n                closeButton.onclick = () => {\n                    console.log('');\n                    parentBody.removeChild(overlay);\n                };\n                copyButton.onclick = async () => {\n                    console.log('');\n                    try {\n                        // \n                        textarea.focus();\n                        textarea.select();\n                        // \n                        const success = document.execCommand('copy');\n                        if (success) {\n                            window.toastr.success('');\n                            parentBody.removeChild(overlay);\n                        }\n                        else {\n                            window.toastr.warning('');\n                        }\n                    }\n                    catch (err) {\n                        console.error(':', err);\n                        window.toastr.warning('');\n                    }\n                };\n                // \n                overlay.onclick = e => {\n                    if (e.target === overlay) {\n                        console.log('');\n                        parentBody.removeChild(overlay);\n                    }\n                };\n                // \n                const handleKeyDown = (e) => {\n                    if (e.key === 'Escape') {\n                        console.log('ESC');\n                        parentBody.removeChild(overlay);\n                        parentDoc.removeEventListener('keydown', handleKeyDown);\n                    }\n                };\n                parentDoc.addEventListener('keydown', handleKeyDown);\n                // \n                setTimeout(() => {\n                    console.log('');\n                    textarea.focus();\n                    textarea.select();\n                }, 200);\n                // \n                window.toastr.info('');\n            }\n            catch (err) {\n                console.error(':', err);\n                window.toastr.error('');\n            }\n        };\n        //  - \n        const copyTable = (tableItem) => {\n            try {\n                // TSV\n                const tsv = [tableItem.headers.join('\\t'), ...tableItem.data.map(row => row.join('\\t'))].join('\\n');\n                copyToClipboard(tsv, '');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('');\n            }\n        };\n        // \n        const deleteTable = (index) => {\n            if (confirm('')) {\n                table_history.value.splice(index, 1);\n                const chat_id = getChatIdSafe();\n                if (chat_id) {\n                    insertOrAssignVariables({ table_history: table_history.value }, { type: 'chat' });\n                    window.toastr.success('');\n                }\n            }\n        };\n        // \n        refreshTableHistory();\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[0] || (_cache[0] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"15px !important\", \"font-weight\": \"bold\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, \"   \", -1 /* CACHED */)),\n                    (table_history.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(table_history.value.length) + \" \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (table_history.value && table_history.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(table_history.value, (item, index) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: index,\n                                class: \"history-item\",\n                                style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #444\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"history-header\",\n                                    style: { \"padding\": \"12px 15px\", \"background\": \"#1a1a1a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"cursor\": \"pointer\", \"user-select\": \"none\", \"transition\": \"background 0.2s\", \"border-radius\": \"6px\" },\n                                    onClick: ($event) => (toggleTableExpanded(index))\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"span\", _hoisted_7, \"#\" + _toDisplayString(index + 1), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_8, \" \" + _toDisplayString(item.start_id) + \" - \" + _toDisplayString(item.end_id), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(isTableExpanded(index) ? '' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_5),\n                                (isTableExpanded(index))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (copyTable(item))\n                                            }, [...(_cache[1] || (_cache[1] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12),\n                                            _createElementVNode(\"button\", {\n                                                class: \"delete-button\",\n                                                style: { \"padding\": \"8px 16px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"cursor\": \"pointer\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: ($event) => (deleteTable(index))\n                                            }, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-trash\",\n                                                        style: { \"font-size\": \"12px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_13)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            _createElementVNode(\"table\", _hoisted_15, [\n                                                _createElementVNode(\"thead\", _hoisted_16, [\n                                                    _createElementVNode(\"tr\", null, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.headers, (header, idx) => {\n                                                            return (_openBlock(), _createElementBlock(\"th\", {\n                                                                key: idx,\n                                                                style: { \"padding\": \"12px 16px\", \"text-align\": \"left\", \"font-weight\": \"bold\", \"color\": \"#fff\", \"border-bottom\": \"2px solid #3a3a3a\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                            }, _toDisplayString(header), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ])\n                                                ]),\n                                                _createElementVNode(\"tbody\", null, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.data, (row, rowIdx) => {\n                                                        return (_openBlock(), _createElementBlock(\"tr\", {\n                                                            key: rowIdx,\n                                                            style: { \"border-bottom\": \"1px solid #3a3a3a\" }\n                                                        }, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(row, (cell, cellIdx) => {\n                                                                return (_openBlock(), _createElementBlock(\"td\", {\n                                                                    key: cellIdx,\n                                                                    style: { \"padding\": \"10px 16px\", \"color\": \"#e0e0e0\", \"border-right\": \"1px solid #3a3a3a\" }\n                                                                }, _toDisplayString(cell), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ])\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-table\",\n                                style: { \"font-size\": \"48px\", \"margin-bottom\": \"10px\", \"opacity\": \"0.3\" }\n                            }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", { style: { \"margin\": \"10px 0\", \"font-size\": \"16px\" } }, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"small\", { style: { \"font-size\": \"12px\", \"color\": \"#666\" } }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TableTab.vue?vue&type=style&index=0&id=170043aa&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-170043aa\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = _;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, unref as _unref, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    class: \"tools-tab\",\n    style: { \"padding\": \"25px !important\", \"background\": \"#1a1a1a !important\" }\n};\nconst _hoisted_2 = { class: \"tool-section\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_4 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_5 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_8 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_9 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#667eea\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_10 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_13 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_14 = { style: { \"margin-top\": \"20px\", \"padding-top\": \"20px\", \"border-top\": \"1px solid #3a3a3a\" } };\nconst _hoisted_15 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"12px\" }\n};\nconst _hoisted_16 = { style: { \"display\": \"flex\", \"gap\": \"10px\" } };\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = { class: \"tool-section\" };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_21 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_22 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_23 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_25 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_26 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_27 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_28 = [\"disabled\"];\nconst _hoisted_29 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_30 = {\n    class: \"entry-preview\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_31 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_32 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_33 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_34 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_35 = {\n    class: \"entry-field\",\n    style: { \"margin-bottom\": \"10px\" }\n};\nconst _hoisted_36 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"max-height\": \"200px\", \"overflow-y\": \"auto\" } };\nconst _hoisted_37 = { class: \"entry-field\" };\nconst _hoisted_38 = { style: { \"color\": \"#e0e0e0\", \"font-size\": \"13px\" } };\nconst _hoisted_39 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_40 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_41 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"12px 0\" }\n};\nconst _hoisted_42 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_43 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#ffa500\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_44 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_45 = [\"disabled\"];\nconst _hoisted_46 = {\n    class: \"insert-section\",\n    style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"6px\", \"margin-top\": \"20px\" }\n};\nconst _hoisted_47 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"12px\" }\n};\nconst _hoisted_48 = [\"value\"];\nconst _hoisted_49 = {\n    class: \"output-actions\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\" }\n};\nconst _hoisted_50 = [\"disabled\"];\nconst _hoisted_51 = { class: \"tool-section\" };\nconst _hoisted_52 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_53 = {\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_54 = [\"value\"];\nconst _hoisted_55 = {\n    key: 0,\n    class: \"form-group\",\n    style: { \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_56 = {\n    key: 1,\n    style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_57 = {\n    key: 2,\n    style: { \"margin-bottom\": \"15px\", \"color\": \"#888\", \"font-size\": \"12px\" }\n};\nconst _hoisted_58 = { key: 0 };\nconst _hoisted_59 = {\n    key: 1,\n    style: { \"color\": \"#ff6b6b\" }\n};\nconst _hoisted_60 = {\n    key: 3,\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"12px\" }\n};\nconst _hoisted_61 = [\"onClick\"];\nconst _hoisted_62 = { style: { \"flex\": \"1\", \"line-height\": \"1.6\" } };\nconst _hoisted_63 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"6px\", \"margin-bottom\": \"8px\" } };\nconst _hoisted_64 = {\n    key: 0,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_65 = {\n    key: 1,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_66 = {\n    key: 2,\n    style: { \"font-size\": \"14px\" }\n};\nconst _hoisted_67 = { style: { \"color\": \"#fff\", \"font-weight\": \"600\", \"font-size\": \"14px\" } };\nconst _hoisted_68 = { style: { \"padding-left\": \"20px\", \"margin-bottom\": \"6px\", \"font-size\": \"12px\", \"color\": \"#ccc\" } };\nconst _hoisted_69 = { key: 0 };\nconst _hoisted_70 = { key: 1 };\nconst _hoisted_71 = { key: 2 };\nconst _hoisted_72 = { key: 3 };\nconst _hoisted_73 = { style: { \"padding-left\": \"20px\", \"font-size\": \"12px\", \"color\": \"#999\", \"font-style\": \"italic\" } };\nconst _hoisted_74 = {\n    key: 0,\n    style: { \"margin-top\": \"15px\", \"padding-top\": \"15px\", \"border-top\": \"1px solid #3a3a3a\" }\n};\nconst _hoisted_75 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_76 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_77 = {\n    key: 0,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#4a9eff\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_78 = {\n    key: 1,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#28a745\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_79 = {\n    key: 2,\n    style: { \"padding\": \"4px 10px\", \"background\": \"#888\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\", \"font-weight\": \"bold\" }\n};\nconst _hoisted_80 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_81 = { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } };\nconst _hoisted_82 = {\n    key: 0,\n    style: { \"color\": \"#ffa500\", \"font-size\": \"10px\", \"margin-left\": \"6px\" }\n};\nconst _hoisted_83 = { style: { \"display\": \"flex\", \"flex-wrap\": \"wrap\", \"gap\": \"6px\" } };\nconst _hoisted_84 = {\n    key: 0,\n    style: { \"color\": \"#888\", \"font-size\": \"11px\" }\n};\nconst _hoisted_85 = { style: { \"margin-bottom\": \"12px\" } };\nconst _hoisted_86 = { style: { \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#ccc\", \"font-size\": \"12px\", \"line-height\": \"1.6\", \"max-height\": \"200px\", \"overflow-y\": \"auto\", \"white-space\": \"pre-wrap\" } };\nconst _hoisted_87 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-top\": \"12px\" } };\nconst _hoisted_88 = [\"onClick\"];\nconst _hoisted_89 = [\"onClick\"];\nconst _hoisted_90 = { style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"12px\", \"padding\": \"25px\", \"max-width\": \"700px\", \"width\": \"90%\", \"max-height\": \"85vh\", \"overflow-y\": \"auto\", \"box-shadow\": \"0 10px 40px rgba(0, 0, 0, 0.5)\" } };\nconst _hoisted_91 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"margin-bottom\": \"20px\" } };\nconst _hoisted_92 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"15px\" } };\nconst _hoisted_93 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } };\nconst _hoisted_94 = [\"value\"];\nconst _hoisted_95 = [\"value\"];\nconst _hoisted_96 = [\"value\"];\nconst _hoisted_97 = { style: { \"display\": \"grid\", \"grid-template-columns\": \"1fr 1fr\", \"gap\": \"10px\" } };\nconst _hoisted_98 = [\"value\"];\nconst _hoisted_99 = [\"value\"];\nconst _hoisted_100 = { style: { \"background\": \"#1a1a1a\", \"padding\": \"15px\", \"border-radius\": \"8px\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\" } };\nconst _hoisted_101 = { style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"gap\": \"10px\" } };\nconst _hoisted_102 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"cursor\": \"pointer\" } };\nconst _hoisted_103 = [\"checked\"];\nconst _hoisted_104 = { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\", \"cursor\": \"pointer\" } };\nconst _hoisted_105 = [\"checked\"];\nconst _hoisted_106 = [\"value\"];\nconst _hoisted_107 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"margin-top\": \"20px\", \"justify-content\": \"flex-end\" } };\nconst _hoisted_108 = { class: \"tool-section\" };\nconst _hoisted_109 = {\n    key: 0,\n    class: \"tool-content\"\n};\nconst _hoisted_110 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_111 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_112 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"cursor\": \"pointer\" } };\nconst _hoisted_113 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_114 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_115 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#17a2b8\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_116 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"20px\" }\n};\nconst _hoisted_117 = [\"disabled\"];\nconst _hoisted_118 = {\n    key: 1,\n    class: \"output-section\"\n};\nconst _hoisted_119 = {\n    class: \"output-content\",\n    style: { \"background\": \"#1e1e1e\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"padding\": \"15px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"line-height\": \"1.6\", \"white-space\": \"pre-wrap\", \"word-wrap\": \"break-word\", \"max-height\": \"300px\", \"overflow-y\": \"auto\" }\n};\nconst _hoisted_120 = {\n    class: \"modify-section\",\n    style: { \"margin-top\": \"25px\", \"border-top\": \"2px dashed #3a3a3a\", \"padding-top\": \"20px\" }\n};\nconst _hoisted_121 = {\n    class: \"form-group\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_122 = {\n    key: 0,\n    class: \"progress-bar-container\",\n    style: { \"margin\": \"15px 0\" }\n};\nconst _hoisted_123 = {\n    class: \"progress-bar\",\n    style: { \"width\": \"100%\", \"height\": \"8px\", \"background\": \"#2a2a2a\", \"border-radius\": \"4px\", \"overflow\": \"hidden\", \"position\": \"relative\" }\n};\nconst _hoisted_124 = { style: { \"text-align\": \"center\", \"margin-top\": \"8px\", \"color\": \"#17a2b8\", \"font-size\": \"12px\", \"font-weight\": \"500\" } };\nconst _hoisted_125 = {\n    class: \"button-group\",\n    style: { \"display\": \"flex\", \"gap\": \"12px\", \"margin-bottom\": \"15px\" }\n};\nconst _hoisted_126 = [\"disabled\"];\nimport { debounce } from 'lodash';\nimport { storeToRefs } from 'pinia';\nimport { onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { normalizeApiEndpoint, useSettingsStore } from '../settings';\nimport { copyToClipboard, getScriptIdSafe } from '../utils';\n\nimport { klona } from 'klona';\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ToolsTab',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        const { settings } = storeToRefs(settingsStore);\n        // \n        const toolExpandedState = ref(new Map());\n        const antiClicheInput = ref('');\n        const antiClicheOutput = ref('');\n        const isProcessingAntiCliche = ref(false);\n        const enableAntiClicheStreaming = ref(false); // \n        const antiClicheProgressPercent = ref(0); // \n        const antiClicheModifyRequest = ref(''); // \n        const isModifyingAntiCliche = ref(false); // \n        const characterDescription = ref('');\n        const characterCardOutput = ref('');\n        const isGeneratingCharacter = ref(false);\n        const modifyRequest = ref('');\n        const isModifyingCharacter = ref(false);\n        const enableCharacterStreaming = ref(false); // \n        const characterProgressPercent = ref(0); // \n        // \n        const worldbookDescription = ref('');\n        const worldbookEntryOutput = ref(null);\n        const isGeneratingWorldbook = ref(false);\n        const availableWorldbooks = ref([]);\n        const selectedWorldbook = ref('');\n        const isInsertingEntry = ref(false);\n        const worldbookModifyRequest = ref('');\n        const isModifyingWorldbook = ref(false);\n        const enableWorldbookStreaming = ref(false); // \n        const worldbookProgressPercent = ref(0); // \n        // \n        const selectedViewerWorldbook = ref('');\n        const worldbookEntries = ref([]);\n        const viewerSearchQuery = ref('');\n        const viewerSortBy = ref('original');\n        const entryExpandedState = ref(new Map());\n        // \n        const showEditDialog = ref(false);\n        const editingEntry = ref({});\n        const editingEntryUid = ref(null);\n        // \n        const isDataLoaded = ref(false);\n        // \n        const loadAvailableWorldbooks = () => {\n            try {\n                availableWorldbooks.value = getWorldbookNames();\n                console.log(' :', availableWorldbooks.value);\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const loadToolsData = () => {\n            try {\n                isDataLoaded.value = false; // \n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    isDataLoaded.value = true;\n                    return;\n                }\n                const savedData = getVariables({ type: 'script', script_id });\n                console.log(' :', savedData);\n                // \n                if (savedData.tools_antiCliche) {\n                    antiClicheInput.value = savedData.tools_antiCliche.input || '';\n                    antiClicheOutput.value = savedData.tools_antiCliche.output || '';\n                    enableAntiClicheStreaming.value = savedData.tools_antiCliche.enableStreaming || false;\n                    antiClicheModifyRequest.value = savedData.tools_antiCliche.modifyRequest || '';\n                    console.log(' :', {\n                        input: antiClicheInput.value.substring(0, 50),\n                        output: antiClicheOutput.value.substring(0, 50),\n                        enableStreaming: enableAntiClicheStreaming.value,\n                        modifyRequest: antiClicheModifyRequest.value.substring(0, 30),\n                    });\n                }\n                // \n                if (savedData.tools_characterCard) {\n                    characterDescription.value = savedData.tools_characterCard.description || '';\n                    characterCardOutput.value = savedData.tools_characterCard.output || '';\n                    modifyRequest.value = savedData.tools_characterCard.modifyRequest || '';\n                    enableCharacterStreaming.value = savedData.tools_characterCard.enableStreaming || false;\n                    console.log(' :', {\n                        description: characterDescription.value.substring(0, 50),\n                        output: characterCardOutput.value.substring(0, 50),\n                        modifyRequest: modifyRequest.value.substring(0, 50),\n                        enableStreaming: enableCharacterStreaming.value,\n                    });\n                }\n                // \n                if (savedData.tools_worldbookEntry) {\n                    worldbookDescription.value = savedData.tools_worldbookEntry.description || '';\n                    worldbookEntryOutput.value = savedData.tools_worldbookEntry.output || null;\n                    selectedWorldbook.value = savedData.tools_worldbookEntry.selectedWorldbook || '';\n                    worldbookModifyRequest.value = savedData.tools_worldbookEntry.modifyRequest || '';\n                    enableWorldbookStreaming.value = savedData.tools_worldbookEntry.enableStreaming || false;\n                    console.log(' :', {\n                        description: worldbookDescription.value.substring(0, 50),\n                        output: worldbookEntryOutput.value ? '' : '',\n                        selectedWorldbook: selectedWorldbook.value,\n                        modifyRequest: worldbookModifyRequest.value.substring(0, 50),\n                        enableStreaming: enableWorldbookStreaming.value,\n                    });\n                }\n                // \n                if (savedData.tools_expandedState) {\n                    toolExpandedState.value = new Map(Object.entries(savedData.tools_expandedState));\n                    console.log(' :', Object.fromEntries(toolExpandedState.value));\n                }\n                // \n                if (savedData.tools_worldbookViewer) {\n                    selectedViewerWorldbook.value = savedData.tools_worldbookViewer.selectedWorldbook || '';\n                    viewerSearchQuery.value = savedData.tools_worldbookViewer.searchQuery || '';\n                    viewerSortBy.value = savedData.tools_worldbookViewer.sortBy || 'original';\n                    console.log(' :', {\n                        selectedWorldbook: selectedViewerWorldbook.value,\n                        searchQuery: viewerSearchQuery.value,\n                        sortBy: viewerSortBy.value,\n                    });\n                    // \n                    if (selectedViewerWorldbook.value) {\n                        console.log(' ...');\n                        setTimeout(() => {\n                            loadWorldbookEntries();\n                        }, 200);\n                    }\n                }\n                // \n                setTimeout(() => {\n                    isDataLoaded.value = true;\n                    console.log(' ');\n                }, 100);\n            }\n            catch (error) {\n                console.error(' :', error);\n                isDataLoaded.value = true;\n            }\n        };\n        // \n        const saveToolsDataImmediate = () => {\n            // \n            if (!isDataLoaded.value) {\n                console.log(' ');\n                return;\n            }\n            try {\n                const script_id = getScriptIdSafe();\n                if (!script_id) {\n                    console.warn(' script_id ');\n                    return;\n                }\n                const dataToSave = {\n                    tools_antiCliche: {\n                        input: antiClicheInput.value,\n                        output: antiClicheOutput.value,\n                        enableStreaming: enableAntiClicheStreaming.value,\n                        modifyRequest: antiClicheModifyRequest.value,\n                    },\n                    tools_characterCard: {\n                        description: characterDescription.value,\n                        output: characterCardOutput.value,\n                        modifyRequest: modifyRequest.value,\n                        enableStreaming: enableCharacterStreaming.value,\n                    },\n                    tools_worldbookEntry: {\n                        description: worldbookDescription.value,\n                        output: worldbookEntryOutput.value,\n                        selectedWorldbook: selectedWorldbook.value,\n                        modifyRequest: worldbookModifyRequest.value,\n                        enableStreaming: enableWorldbookStreaming.value,\n                    },\n                    tools_worldbookViewer: {\n                        selectedWorldbook: selectedViewerWorldbook.value,\n                        searchQuery: viewerSearchQuery.value,\n                        sortBy: viewerSortBy.value,\n                    },\n                    tools_expandedState: Object.fromEntries(toolExpandedState.value),\n                };\n                insertOrAssignVariables(klona(dataToSave), { type: 'script', script_id });\n                console.log(' :', {\n                    antiCliche_input_length: antiClicheInput.value.length,\n                    antiCliche_output_length: antiClicheOutput.value.length,\n                    character_desc_length: characterDescription.value.length,\n                    character_output_length: characterCardOutput.value.length,\n                });\n            }\n            catch (error) {\n                console.error(' :', error);\n            }\n        };\n        // 300ms\n        const saveToolsData = debounce(saveToolsDataImmediate, 300);\n        // \n        watch([\n            antiClicheInput,\n            antiClicheOutput,\n            enableAntiClicheStreaming,\n            antiClicheModifyRequest,\n            characterDescription,\n            characterCardOutput,\n            modifyRequest,\n            enableCharacterStreaming,\n            worldbookDescription,\n            worldbookEntryOutput,\n            selectedWorldbook,\n            worldbookModifyRequest,\n            enableWorldbookStreaming,\n            selectedViewerWorldbook,\n            viewerSearchQuery,\n            viewerSortBy,\n            toolExpandedState,\n        ], () => {\n            if (isDataLoaded.value) {\n                console.log(' ...');\n                saveToolsData();\n            }\n        }, { deep: true });\n        // \n        onMounted(() => {\n            console.log(' ToolsTab ...');\n            loadToolsData();\n            loadAvailableWorldbooks();\n        });\n        // \n        onBeforeUnmount(() => {\n            console.log(' ToolsTab ...');\n            // \n            saveToolsData.cancel();\n            saveToolsDataImmediate();\n        });\n        // \n        const toggleToolExpanded = (toolName) => {\n            console.log('toggleToolExpanded :', toolName);\n            const current = toolExpandedState.value.get(toolName) || false;\n            console.log(':', current);\n            toolExpandedState.value.set(toolName, !current);\n            console.log(':', !current);\n        };\n        // \n        const isToolExpanded = (toolName) => {\n            return toolExpandedState.value.get(toolName) || false;\n        };\n        // copyToClipboard  utils.ts \n        // \n        const handleAntiClicheProcess = async () => {\n            if (!antiClicheInput.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isProcessingAntiCliche.value = true;\n                antiClicheProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model,\n                    max_tokens: settings.value.max_tokens || 8000,\n                    temperature: 0.7,\n                    stream: enableAntiClicheStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: `****\n\n##  \n\n ****\n ****\n ****\n **\"\"\"\"\"\"**\n\n## \n\n###  \n\n#### 1. \n- ****\n- ****\n- ****\"......\"\"...\"\"\"\n- ****\"\"\"\"\"\"\"\"\"\"\"\"\"\"\n- ****\"\"\"\"\"xx\"\"\"\"\"\"\"\n- ****\"\"\"\"\"\"\"\"\n- **\"\"+**\n- ****168cm/50kgC\"\"\"\"\"\"\n\n#### 2. \n-  **//**\"xxx\"\"\"\"\"\n-  ****\"\"\"\"\n-  ****\"\"\"\"\n-  ****\"\"\"\"\"\"\n-  ****\"\"\"...\"\"...\"///\n-  ****\n\n#### 3. \n-  \"\"\"\"\"\"\n-  \n\n#### 4. \n-  ****\n-  \"\"\n-  \"\"\n\n#### 5. /\n-  ****\n-  \"\"\n-  \"\"\"\"\n\n#### 6. \n-  \"\"\n-  \n-  \n\n#### 7. \n-  168cm50kgC\n-  \n-  \n-  \n\n###  3\n1. ****\n2. ****\n3. ****\n4. ****\n\n##  \n\n****\n \n \n \n \n \n\n****\n /\n ****\n ****\n ****\"......\"\n \n \n \n\n##  \n\n****\n\n###  \n1. ****\n   -  \"\"\n   -  \"\"\"\"\n\n2. ****\n   -  \"\"\n   -  \"\"\"\"\n\n3. ****\n   -  \"\"\n   -  \"\"\"\"\n\n4. ****\n   -  \"\"\"\"\n   -  \"\"\"\"\"\"\n\n5. ****\n   -  \"\"\"\"\n   -  \"\"\"\"\"\"\n\n###  \n- ****\n- ****\n- ****\n\n###  \n1. ****\"\"\"\"\"\"\"\"\n2. ****\"......\"\"\"\"\"\n3. ****\"\"\"\"\n4. ****\"\"\"\"\n5. ****\"\"\"\"\n\n##  \n\n### 1\n\n****\nA\"\"\n\nA168cmC\n\n\n\n\n\n\"\"\n\n** **\nA\"\"\nA\n\"\"\n\n** **\nA\"\"\n\nA\n\nA\n\nA\n\n\"\"\n\n****\n1. \"\"  \"\"\n2. \"\"  \n3. \"\"  \n4. \"\"\"\"  \n5. \"......\"  \"A\"\n6. \"\"\"\"  \n7. \"168cm\"\"C\"  \"\"\n8. \"\"  \n\n### 2\n\n****\n\n\n** **\n\n\n****\n1. \"......\"  \n2. \"\"  \n3. \"\"  \"\"\n4. \"\"\"\"  \n5. \"\"  \n6. \"\"  \"\"\"\"+\n\n\n##  \n\n1. ****\n2. ****\n3. ****\n   - \n   - \n   - \"\"\"\"\n   - \n   - \n4. ****\n5. ****\n6. ****\n\n****`,\n                        },\n                        {\n                            role: 'user',\n                            content: antiClicheInput.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableAntiClicheStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    antiClicheProgressPercent.value = 100;\n                }\n                antiClicheOutput.value = generatedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isProcessingAntiCliche.value = false;\n                antiClicheProgressPercent.value = 0;\n            }\n        };\n        const copyAntiClicheResult = () => {\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(antiClicheOutput.value, '');\n        };\n        // \n        const handleModifyAntiCliche = async () => {\n            if (!antiClicheModifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!antiClicheOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingAntiCliche.value = true;\n                antiClicheProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model,\n                    max_tokens: settings.value.max_tokens || 8000,\n                    temperature: 0.7,\n                    stream: enableAntiClicheStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: '',\n                        },\n                        {\n                            role: 'user',\n                            content: `\\n${antiClicheOutput.value}\\n\\n${antiClicheModifyRequest.value}`,\n                        },\n                    ],\n                };\n                let modifiedText;\n                if (enableAntiClicheStreaming.value) {\n                    // \n                    modifiedText = await generateWithStreaming(requestPayload, antiClicheProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    modifiedText = data.choices[0].message.content.trim();\n                    antiClicheProgressPercent.value = 100;\n                }\n                antiClicheOutput.value = modifiedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingAntiCliche.value = false;\n                antiClicheProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearAntiClicheModifyRequest = () => {\n            antiClicheModifyRequest.value = '';\n            saveToolsDataImmediate();\n            window.toastr.success('');\n        };\n        // \n        const handleGenerateCharacterCard = async () => {\n            if (!characterDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingCharacter.value = true;\n                characterProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 16000,\n                    temperature: 0.8,\n                    stream: enableCharacterStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: `\n\n****\n-  YAML \n- \n- AI\n- AI\n\n****\n\\`\\`\\`yaml\n:\n  : \"\"\n  : \n  : \"YYYYMM\"\n  : \"//\"\n  : \"Alpha/Beta/Omega/\"\n  : \"////\"\n  : \"\"\n  : \"//\"\n  : \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n  : \"\"\n  : \"\"\n\n:\n  :\n    - 1: \"\"\n    - 2: \"\"\n    - 3: \"\"\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"\"\n\n:\n  : \"\"\n  :\n    : \"\"\n    : \"\"\n    : \"\"\n  : \"/\"\n  : [\"1\", \"2\"]\n\n:\n  : \"\"\n  : \"\"\n  : [\"1\", \"2\", \"3\"]\n  : \"TA\"\n  : \"\"\n  : \"TA\"\n\n:\n  : \"{{user}}\"\n  : \"\"\n  : \"//\"\n  : \"\"\n\n:\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"\"\n  : \"TA\"\n  :\n    : \"TA\"\n    : \"TA\"\n    : \"TA\"\n  :\n    : \"\"\n    : \"\"\n\\`\\`\\`\n\n\n1. \n2. \n3. TA\n4. `,\n                        },\n                        {\n                            role: 'user',\n                            content: characterDescription.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableCharacterStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, characterProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    characterProgressPercent.value = 100;\n                }\n                characterCardOutput.value = generatedText;\n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingCharacter.value = false;\n                characterProgressPercent.value = 0;\n            }\n        };\n        const clearCharacterForm = () => {\n            characterDescription.value = '';\n            characterCardOutput.value = '';\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        const copyCharacterCard = () => {\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            // \n            copyToClipboard(characterCardOutput.value, '');\n        };\n        // \n        const clearAntiClicheForm = () => {\n            antiClicheInput.value = '';\n            antiClicheOutput.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleModifyCharacterCard = async () => {\n            if (!modifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!characterCardOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingCharacter.value = true;\n                characterProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 16000,\n                    temperature: 0.8,\n                    stream: enableCharacterStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` YAML \n\n****\n1.  YAML \n2. \n3. \n4. \n5. \n6. \n\n****\n- ////\n- \n- \n- AI\n\n YAML `,\n                        },\n                        {\n                            role: 'user',\n                            content: `\n\n${characterCardOutput.value}\n\n---\n\n\n${modifyRequest.value}`,\n                        },\n                    ],\n                };\n                let modifiedCard;\n                if (enableCharacterStreaming.value) {\n                    // \n                    modifiedCard = await generateWithStreaming(requestPayload, characterProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    modifiedCard = data.choices[0].message.content.trim();\n                    characterProgressPercent.value = 100;\n                }\n                characterCardOutput.value = modifiedCard;\n                modifyRequest.value = ''; // \n                saveToolsDataImmediate(); // \n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingCharacter.value = false;\n                characterProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearModifyRequest = () => {\n            modifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // ====================  ====================\n        // \n        const extractStreamContent = (chunk) => {\n            // OpenAI \n            if (chunk.choices?.[0]?.delta?.content) {\n                return chunk.choices[0].delta.content;\n            }\n            // Claude \n            if (chunk.delta?.text) {\n                return chunk.delta.text;\n            }\n            // \n            if (typeof chunk.content === 'string') {\n                return chunk.content;\n            }\n            if (typeof chunk.text === 'string') {\n                return chunk.text;\n            }\n            if (typeof chunk.response === 'string') {\n                return chunk.response;\n            }\n            return null;\n        };\n        // \n        const generateWithStreaming = async (requestPayload, progressRef) => {\n            const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n            const response = await fetch(apiUrl, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    Authorization: `Bearer ${settings.value.api_key}`,\n                },\n                body: JSON.stringify(requestPayload),\n            });\n            if (!response.ok) {\n                const errorText = await response.text();\n                throw new Error(`${response.status} ${response.statusText}\\n${errorText.slice(0, 400)}`);\n            }\n            if (!response.body) {\n                throw new Error(' API ');\n            }\n            const reader = response.body.getReader();\n            const decoder = new TextDecoder('utf-8');\n            let buffer = '';\n            let done = false;\n            let result = '';\n            progressRef.value = 0;\n            const processLine = (line) => {\n                const trimmed = line.trim();\n                if (!trimmed) {\n                    return false;\n                }\n                if (trimmed === 'data: [DONE]' || trimmed === '[DONE]') {\n                    return true;\n                }\n                const payloadText = trimmed.startsWith('data:') ? trimmed.slice(5).trim() : trimmed;\n                if (!payloadText || payloadText === '[DONE]') {\n                    return false;\n                }\n                try {\n                    const payloadJson = JSON.parse(payloadText);\n                    const deltaText = extractStreamContent(payloadJson);\n                    if (deltaText) {\n                        result += deltaText;\n                        progressRef.value = Math.min(progressRef.value + 2, 98);\n                    }\n                }\n                catch (parseError) {\n                    console.warn(':', payloadText.slice(0, 100), parseError);\n                }\n                return false;\n            };\n            while (!done) {\n                const { value, done: readerDone } = await reader.read();\n                if (value) {\n                    buffer += decoder.decode(value, { stream: true });\n                    const lines = buffer.split('\\n');\n                    buffer = lines.pop() ?? '';\n                    for (const line of lines) {\n                        if (processLine(line)) {\n                            done = true;\n                            break;\n                        }\n                    }\n                }\n                if (readerDone) {\n                    done = true;\n                }\n            }\n            if (buffer && !done) {\n                processLine(buffer);\n            }\n            progressRef.value = 100;\n            return result;\n        };\n        // ====================  ====================\n        // \n        const handleGenerateWorldbookEntry = async () => {\n            if (!worldbookDescription.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isGeneratingWorldbook.value = true;\n                worldbookProgressPercent.value = 0;\n                window.toastr.info('AI...', '', { timeOut: 15000 });\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 4000,\n                    temperature: 0.7,\n                    stream: enableWorldbookStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` SillyTavern  JSON \n\n****\n\\`\\`\\`typescript\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",  // \"constant\"(-)  \"selective\"(-)\n    \"keys\": [\"1\", \"2\"],  // \n    \"keys_secondary\": {\n      \"logic\": \"and_any\",  // \"and_any\" | \"and_all\" | \"not_all\" | \"not_any\"\n      \"keys\": []  // \n    },\n    \"scan_depth\": \"same_as_global\"  //  10\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",  // : \"after_character_definition\" | \"at_depth\"\n    \"role\": \"system\",  // \"system\" | \"assistant\" | \"user\"\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\",\n  \"probability\": 100,  //  100\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n****\n1. ** (name)**\n2. ** (strategy.type)**\n   -  \"selective\" ()\n   -  \"constant\" ()\n3. ** (strategy.keys)**\n   - \n   - \n   -  3-6 \n4. ** (content)**\n   - ****\n   - \n   - \n   - ** content **\n   - ****\n5. ** (position.type)**\n   -  \"after_character_definition\"\n   -  \"at_depth\" \n6. ****\n\n** 1**\n\"16\"\n\n\\`\\`\\`json\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"16\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n** 2**\n\"\"\n\n\\`\\`\\`json\n{\n  \"name\": \"\",\n  \"enabled\": true,\n  \"strategy\": {\n    \"type\": \"selective\",\n    \"keys\": [\"\", \"\", \"\", \"\"],\n    \"keys_secondary\": { \"logic\": \"and_any\", \"keys\": [] },\n    \"scan_depth\": \"same_as_global\"\n  },\n  \"position\": {\n    \"type\": \"after_character_definition\",\n    \"role\": \"system\",\n    \"depth\": 4,\n    \"order\": 100\n  },\n  \"content\": \"\",\n  \"probability\": 100,\n  \"recursion\": {\n    \"prevent_incoming\": false,\n    \"prevent_outgoing\": false,\n    \"delay_until\": null\n  },\n  \"effect\": {\n    \"sticky\": null,\n    \"cooldown\": null,\n    \"delay\": null\n  }\n}\n\\`\\`\\`\n\n****\n-  JSON \n-  JSON \n- **content **\n-  content \n-  strategy.type`,\n                        },\n                        {\n                            role: 'user',\n                            content: worldbookDescription.value,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableWorldbookStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    worldbookProgressPercent.value = 100;\n                }\n                //  JSON\n                try {\n                    //  JSON \n                    const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n                    const jsonText = jsonMatch[1] || generatedText;\n                    const parsedEntry = JSON.parse(jsonText);\n                    worldbookEntryOutput.value = parsedEntry;\n                    saveToolsDataImmediate(); // \n                    window.toastr.success('');\n                }\n                catch (parseError) {\n                    console.error('JSON :', parseError);\n                    console.log(':', generatedText);\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isGeneratingWorldbook.value = false;\n                worldbookProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearWorldbookForm = () => {\n            worldbookDescription.value = '';\n            worldbookEntryOutput.value = null;\n            selectedWorldbook.value = '';\n            worldbookModifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // \n        const handleInsertEntry = async () => {\n            if (!selectedWorldbook.value) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isInsertingEntry.value = true;\n                window.toastr.info(`${selectedWorldbook.value}...`);\n                //  createWorldbookEntries \n                await createWorldbookEntries(selectedWorldbook.value, [worldbookEntryOutput.value], { render: 'immediate' });\n                window.toastr.success(` ${selectedWorldbook.value}`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isInsertingEntry.value = false;\n            }\n        };\n        //  JSON\n        const copyWorldbookEntry = () => {\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            const jsonText = JSON.stringify(worldbookEntryOutput.value, null, 2);\n            copyToClipboard(jsonText, ' JSON ');\n        };\n        // \n        const handleModifyWorldbookEntry = async () => {\n            if (!worldbookModifyRequest.value.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!worldbookEntryOutput.value) {\n                window.toastr.warning('');\n                return;\n            }\n            try {\n                isModifyingWorldbook.value = true;\n                worldbookProgressPercent.value = 0;\n                window.toastr.info('AI...');\n                const requestPayload = {\n                    model: settings.value.model || 'gpt-3.5-turbo',\n                    max_tokens: settings.value.max_tokens || 4000,\n                    temperature: 0.7,\n                    stream: enableWorldbookStreaming.value,\n                    messages: [\n                        {\n                            role: 'system',\n                            content: ` JSON \n\n****\n1.  JSON \n2. \n3. \n4. \n5.  JSON\n6. \n\n****\n-  (content)\n-  (keys)\n-  (strategy.type) \n-  JSON \n\n JSON `,\n                        },\n                        {\n                            role: 'user',\n                            content: `\n\n${JSON.stringify(worldbookEntryOutput.value, null, 2)}\n\n---\n\n\n${worldbookModifyRequest.value}`,\n                        },\n                    ],\n                };\n                let generatedText;\n                if (enableWorldbookStreaming.value) {\n                    // \n                    generatedText = await generateWithStreaming(requestPayload, worldbookProgressPercent);\n                }\n                else {\n                    // \n                    const apiUrl = normalizeApiEndpoint(settings.value.api_endpoint);\n                    const response = await fetch(apiUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: `Bearer ${settings.value.api_key}`,\n                        },\n                        body: JSON.stringify(requestPayload),\n                    });\n                    if (!response.ok) {\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    const data = await response.json();\n                    generatedText = data.choices[0].message.content.trim();\n                    worldbookProgressPercent.value = 100;\n                }\n                //  JSON\n                try {\n                    //  JSON \n                    const jsonMatch = generatedText.match(/```(?:json)?\\s*([\\s\\S]*?)```/) || [null, generatedText];\n                    const jsonText = jsonMatch[1] || generatedText;\n                    const parsedEntry = JSON.parse(jsonText);\n                    worldbookEntryOutput.value = parsedEntry;\n                    worldbookModifyRequest.value = ''; // \n                    saveToolsDataImmediate(); // \n                    window.toastr.success('');\n                }\n                catch (parseError) {\n                    console.error('JSON :', parseError);\n                    console.log(':', generatedText);\n                    window.toastr.error('');\n                }\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n            finally {\n                isModifyingWorldbook.value = false;\n                worldbookProgressPercent.value = 0;\n            }\n        };\n        // \n        const clearWorldbookModifyRequest = () => {\n            worldbookModifyRequest.value = '';\n            saveToolsDataImmediate(); // \n            window.toastr.success('');\n        };\n        // ====================  ====================\n        // \n        const loadWorldbookEntries = async () => {\n            if (!selectedViewerWorldbook.value) {\n                worldbookEntries.value = [];\n                return;\n            }\n            try {\n                const worldbook = await getWorldbook(selectedViewerWorldbook.value);\n                if (worldbook && Array.isArray(worldbook) && worldbook.length > 0) {\n                    worldbookEntries.value = worldbook;\n                    console.log(`  \"${selectedViewerWorldbook.value}\"  ${worldbookEntries.value.length} `);\n                    window.toastr.success(` ${worldbookEntries.value.length} `);\n                }\n                else {\n                    worldbookEntries.value = [];\n                    window.toastr.info('');\n                }\n            }\n            catch (error) {\n                console.error(' :', error);\n                window.toastr.error('' + error.message);\n                worldbookEntries.value = [];\n            }\n        };\n        // \n        const filteredWorldbookEntries = computed(() => {\n            let entries = [...worldbookEntries.value];\n            // \n            if (viewerSearchQuery.value.trim()) {\n                const query = viewerSearchQuery.value.toLowerCase();\n                entries = entries.filter(entry => {\n                    const nameMatch = entry.name?.toLowerCase().includes(query);\n                    const contentMatch = entry.content?.toLowerCase().includes(query);\n                    const keysMatch = entry.strategy?.keys?.some(key => {\n                        if (typeof key === 'string') {\n                            return key.toLowerCase().includes(query);\n                        }\n                        else if (key instanceof RegExp) {\n                            return key.toString().toLowerCase().includes(query);\n                        }\n                        return false;\n                    });\n                    return nameMatch || contentMatch || keysMatch;\n                });\n            }\n            // \n            if (viewerSortBy.value === 'enabled') {\n                entries = entries.filter(entry => entry.enabled);\n            }\n            else if (viewerSortBy.value === 'disabled') {\n                entries = entries.filter(entry => !entry.enabled);\n            }\n            return entries;\n        });\n        // \n        const toggleEntryExpanded = (index) => {\n            const current = entryExpandedState.value.get(index) || false;\n            entryExpandedState.value.set(index, !current);\n        };\n        // \n        const isEntryExpanded = (index) => {\n            return entryExpandedState.value.get(index) || false;\n        };\n        // \n        const editWorldbookEntry = (entry) => {\n            try {\n                // \n                editingEntry.value = {\n                    uid: entry.uid,\n                    name: entry.name || '',\n                    enabled: entry.enabled ?? true,\n                    content: entry.content || '',\n                    strategy: {\n                        type: entry.strategy?.type || 'selective',\n                        keys: [...(entry.strategy?.keys || [])],\n                        keys_secondary: {\n                            logic: entry.strategy?.keys_secondary?.logic || 'and_any',\n                            keys: [...(entry.strategy?.keys_secondary?.keys || [])],\n                        },\n                        scan_depth: entry.strategy?.scan_depth || 'same_as_global',\n                    },\n                    position: entry.position\n                        ? {\n                            type: entry.position.type || 'before_character_definition',\n                            role: entry.position.role || 'system',\n                            depth: entry.position.depth ?? 0,\n                            order: entry.position.order ?? 0,\n                        }\n                        : {\n                            type: 'before_character_definition',\n                            role: 'system',\n                            depth: 0,\n                            order: 0,\n                        },\n                    probability: entry.probability ?? 100,\n                    recursion: entry.recursion\n                        ? {\n                            prevent_incoming: entry.recursion.prevent_incoming ?? false,\n                            prevent_outgoing: entry.recursion.prevent_outgoing ?? false,\n                            delay_until: entry.recursion.delay_until ?? null,\n                        }\n                        : {\n                            prevent_incoming: false,\n                            prevent_outgoing: false,\n                            delay_until: null,\n                        },\n                    effect: entry.effect\n                        ? {\n                            sticky: entry.effect.sticky ?? null,\n                            cooldown: entry.effect.cooldown ?? null,\n                            delay: entry.effect.delay ?? null,\n                        }\n                        : {\n                            sticky: null,\n                            cooldown: null,\n                            delay: null,\n                        },\n                };\n                editingEntryUid.value = entry.uid;\n                showEditDialog.value = true;\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const saveEditedEntry = async () => {\n            if (!editingEntry.value.name?.trim()) {\n                window.toastr.warning('');\n                return;\n            }\n            if (!editingEntryUid.value) {\n                window.toastr.error('ID');\n                return;\n            }\n            try {\n                //  updateWorldbookWith API \n                const updatedWorldbook = await updateWorldbookWith(selectedViewerWorldbook.value, worldbook => {\n                    const entryIndex = worldbook.findIndex(e => e.uid === editingEntryUid.value);\n                    if (entryIndex !== -1) {\n                        // \n                        worldbook[entryIndex] = {\n                            ...worldbook[entryIndex],\n                            ...editingEntry.value,\n                            uid: editingEntryUid.value, //  UID \n                        };\n                    }\n                    return worldbook;\n                });\n                // \n                worldbookEntries.value = updatedWorldbook;\n                // \n                showEditDialog.value = false;\n                editingEntry.value = {};\n                editingEntryUid.value = null;\n                window.toastr.success('');\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        // \n        const deleteWorldbookEntry = async (entry) => {\n            if (!confirm(` \"${entry.name}\" `)) {\n                return;\n            }\n            try {\n                //  deleteWorldbookEntries API\n                const { worldbook } = await deleteWorldbookEntries(selectedViewerWorldbook.value, e => e.uid === entry.uid);\n                // \n                worldbookEntries.value = worldbook;\n                window.toastr.success(` \"${entry.name}\"`);\n            }\n            catch (error) {\n                console.error(':', error);\n                window.toastr.error('' + error.message);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[0] || (_cache[0] = ($event) => (toggleToolExpanded('antiCliche'))),\n                        onMouseenter: _cache[1] || (_cache[1] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[2] || (_cache[2] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[51] || (_cache[51] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-broom\",\n                                style: { \"color\": \"#ff6b6b\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('antiCliche') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('antiCliche'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _cache[62] || (_cache[62] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-14fcd832><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-14fcd832></i> //<strong style=\\\"color:#10b981;\\\" data-v-14fcd832></strong> </p><p style=\\\"margin:0 0 8px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-14fcd832>  <strong data-v-14fcd832></strong> </p><p style=\\\"margin:0;color:#10b981;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #10b981;\\\" data-v-14fcd832>  <strong data-v-14fcd832></strong> -  </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[52] || (_cache[52] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((antiClicheInput).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, antiClicheInput.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"label\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((enableAntiClicheStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableAntiClicheStreaming.value]\n                                    ]),\n                                    _cache[53] || (_cache[53] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isProcessingAntiCliche.value && antiClicheProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: antiClicheProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableAntiClicheStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_9, \" ... \" + _toDisplayString(antiClicheProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _createElementVNode(\"button\", {\n                                    class: \"process-button\",\n                                    disabled: isProcessingAntiCliche.value || !antiClicheInput.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(102, 126, 234, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleAntiClicheProcess\n                                }, [\n                                    _cache[54] || (_cache[54] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[55] || (_cache[55] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isProcessingAntiCliche.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_11),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearAntiClicheForm\n                                }, [...(_cache[56] || (_cache[56] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (antiClicheOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                                    _cache[61] || (_cache[61] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_13, _toDisplayString(antiClicheOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyAntiClicheResult\n                                        }, [...(_cache[57] || (_cache[57] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _cache[60] || (_cache[60] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-wand-magic-sparkles\",\n                                                style: { \"margin-right\": \"6px\", \"color\": \"#ffc107\" }\n                                            }),\n                                            _createTextVNode(\" AI  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_15, [\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((antiClicheModifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, antiClicheModifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_16, [\n                                            _createElementVNode(\"button\", {\n                                                disabled: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim(),\n                                                style: _normalizeStyle([{ \"flex\": \"1\", \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"#1a1a1a\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 193, 7, 0.3)\", \"opacity\": \"1\" }, {\n                                                        opacity: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim() ? 0.5 : 1,\n                                                        cursor: isModifyingAntiCliche.value || !antiClicheModifyRequest.value.trim() ? 'not-allowed' : 'pointer',\n                                                    }]),\n                                                onClick: handleModifyAntiCliche\n                                            }, [\n                                                _cache[58] || (_cache[58] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingAntiCliche.value ? '...' : 'AI '), 1 /* TEXT */)\n                                            ], 12 /* STYLE, PROPS */, _hoisted_17),\n                                            _createElementVNode(\"button\", {\n                                                disabled: !antiClicheModifyRequest.value.trim(),\n                                                style: _normalizeStyle([{ \"padding\": \"10px 20px\", \"background\": \"#dc3545\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" }, {\n                                                        opacity: !antiClicheModifyRequest.value.trim() ? 0.5 : 1,\n                                                        cursor: !antiClicheModifyRequest.value.trim() ? 'not-allowed' : 'pointer',\n                                                    }]),\n                                                onClick: clearAntiClicheModifyRequest\n                                            }, [...(_cache[59] || (_cache[59] = [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 12 /* STYLE, PROPS */, _hoisted_18)\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_19, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[6] || (_cache[6] = ($event) => (toggleToolExpanded('worldbookEntry'))),\n                        onMouseenter: _cache[7] || (_cache[7] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[8] || (_cache[8] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[63] || (_cache[63] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-book-atlas\",\n                                style: { \"color\": \"#ffc107\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('worldbookEntry') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('worldbookEntry'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [\n                            _cache[85] || (_cache[85] = _createElementVNode(\"div\", { class: \"tool-instructions\" }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0 0 8px 0\", \"color\": \"#ccc\", \"font-size\": \"12px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"margin-right\": \"6px\", \"color\": \"#ffc107\" }\n                                    }),\n                                    _createTextVNode(\" AI  \")\n                                ]),\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#4a9eff\", \"font-size\": \"11px\", \"background\": \"#1a1a1a\", \"padding\": \"6px\", \"border-radius\": \"4px\", \"border-left\": \"3px solid #ffc107\" } }, \"  \\\"\\\" \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _cache[64] || (_cache[64] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((worldbookDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, worldbookDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"label\", _hoisted_23, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((enableWorldbookStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableWorldbookStreaming.value]\n                                    ]),\n                                    _cache[65] || (_cache[65] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isGeneratingWorldbook.value && worldbookProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                    _createElementVNode(\"div\", _hoisted_25, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: worldbookProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #ffc107 0%, #ff9800 50%, #ffc107 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableWorldbookStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_26, \" ... \" + _toDisplayString(worldbookProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingWorldbook.value || !worldbookDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 193, 7, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateWorldbookEntry\n                                }, [\n                                    _cache[66] || (_cache[66] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[67] || (_cache[67] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingWorldbook.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_28),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearWorldbookForm\n                                }, [...(_cache[68] || (_cache[68] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (worldbookEntryOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_29, [\n                                    _cache[84] || (_cache[84] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_30, [\n                                        _createElementVNode(\"div\", _hoisted_31, [\n                                            _cache[69] || (_cache[69] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_32, _toDisplayString(worldbookEntryOutput.value.name || ''), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_33, [\n                                            _cache[70] || (_cache[70] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_34, _toDisplayString(worldbookEntryOutput.value.strategy?.keys?.join(', ') || ''), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_35, [\n                                            _cache[71] || (_cache[71] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_36, _toDisplayString(worldbookEntryOutput.value.content), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_37, [\n                                            _cache[72] || (_cache[72] = _createElementVNode(\"label\", { style: { \"color\": \"#ffc107\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"4px\" } }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_38, _toDisplayString(worldbookEntryOutput.value.strategy?.type === 'constant'\n                                                ? '  ()'\n                                                : worldbookEntryOutput.value.strategy?.type === 'selective'\n                                                    ? '  ()'\n                                                    : ' '), 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_39, [\n                                        _cache[77] || (_cache[77] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-14fcd832><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-14fcd832>  JSON </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_40, [\n                                            _cache[73] || (_cache[73] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((worldbookModifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, worldbookModifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (isModifyingWorldbook.value && worldbookProgressPercent.value > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                                _createElementVNode(\"div\", _hoisted_42, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"progress-fill\",\n                                                        style: _normalizeStyle({\n                                                            width: worldbookProgressPercent.value + '%',\n                                                            height: '100%',\n                                                            background: 'linear-gradient(90deg, #ffa500 0%, #ff8c00 50%, #ffa500 100%)',\n                                                            backgroundSize: '200% 100%',\n                                                            animation: enableWorldbookStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                            transition: 'width 0.3s ease',\n                                                        })\n                                                    }, null, 4 /* STYLE */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_43, \" ... \" + _toDisplayString(worldbookProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_44, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingWorldbook.value || !worldbookModifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyWorldbookEntry\n                                            }, [\n                                                _cache[74] || (_cache[74] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[75] || (_cache[75] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingWorldbook.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_45),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearWorldbookModifyRequest\n                                            }, [...(_cache[76] || (_cache[76] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_46, [\n                                        _cache[83] || (_cache[83] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                            _createElementVNode(\"i\", {\n                                                class: \"fa-solid fa-file-import\",\n                                                style: { \"margin-right\": \"6px\", \"color\": \"#17a2b8\" }\n                                            }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_47, [\n                                            _cache[79] || (_cache[79] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((selectedWorldbook).value = $event)),\n                                                style: { \"width\": \"100%\", \"padding\": \"10px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" }\n                                            }, [\n                                                _cache[78] || (_cache[78] = _createElementVNode(\"option\", {\n                                                    value: \"\",\n                                                    disabled: \"\"\n                                                }, \"\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableWorldbooks.value, (wb) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: wb,\n                                                        value: wb\n                                                    }, _toDisplayString(wb), 9 /* TEXT, PROPS */, _hoisted_48));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, selectedWorldbook.value]\n                                            ])\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_49, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"insert-button\",\n                                                disabled: !selectedWorldbook.value || isInsertingEntry.value,\n                                                style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleInsertEntry\n                                            }, [\n                                                _cache[80] || (_cache[80] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[81] || (_cache[81] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-plus-circle\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isInsertingEntry.value ? '...' : ''), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_50),\n                                            _createElementVNode(\"button\", {\n                                                class: \"copy-button\",\n                                                style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: copyWorldbookEntry\n                                            }, [...(_cache[82] || (_cache[82] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-copy\",\n                                                        style: { \"font-size\": \"14px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_51, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header viewer-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[13] || (_cache[13] = ($event) => (toggleToolExpanded('worldbookViewer'))),\n                        onMouseenter: _cache[14] || (_cache[14] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[15] || (_cache[15] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[86] || (_cache[86] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-list\",\n                                style: { \"color\": \"#20c997\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('worldbookViewer') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#888\", \"font-size\": \"14px\", \"transition\": \"transform 0.3s ease\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('worldbookViewer'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [\n                            _cache[97] || (_cache[97] = _createElementVNode(\"div\", {\n                                class: \"tool-instructions\",\n                                style: { \"background\": \"rgba(32, 201, 151, 0.1)\", \"border-left\": \"3px solid #20c997\", \"padding\": \"12px 15px\", \"border-radius\": \"6px\", \"margin-bottom\": \"20px\" }\n                            }, [\n                                _createElementVNode(\"p\", { style: { \"margin\": \"0\", \"color\": \"#a0f0e0\", \"font-size\": \"13px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-info-circle\",\n                                        style: { \"color\": \"#20c997\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ])\n                            ], -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_53, [\n                                _cache[88] || (_cache[88] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\", \"letter-spacing\": \"0.3px\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((selectedViewerWorldbook).value = $event)),\n                                    style: { \"width\": \"100%\", \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                    onChange: loadWorldbookEntries,\n                                    onFocus: _cache[17] || (_cache[17] = (e) => (e.target.style.borderColor = '#20c997')),\n                                    onBlur: _cache[18] || (_cache[18] = (e) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)'))\n                                }, [\n                                    _cache[87] || (_cache[87] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableWorldbooks.value, (wb) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: wb,\n                                            value: wb\n                                        }, _toDisplayString(wb), 9 /* TEXT, PROPS */, _hoisted_54));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, selectedViewerWorldbook.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_55, [\n                                    _cache[89] || (_cache[89] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"10px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\", \"letter-spacing\": \"0.3px\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((viewerSearchQuery).value = $event)),\n                                        type: \"text\",\n                                        placeholder: \"...\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px 15px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"inset 0 2px 4px rgba(0, 0, 0, 0.2)\" },\n                                        onFocus: _cache[20] || (_cache[20] = (e) => (e.target.style.borderColor = '#20c997')),\n                                        onBlur: _cache[21] || (_cache[21] = (e) => (e.target.style.borderColor = 'rgba(255, 255, 255, 0.1)'))\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, viewerSearchQuery.value]\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value && worldbookEntries.value.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_56, [\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'original' ? '#20c997' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[22] || (_cache[22] = ($event) => (viewerSortBy.value = 'original'))\n                                    }, \"  \", 4 /* STYLE */),\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'enabled' ? '#28a745' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[23] || (_cache[23] = ($event) => (viewerSortBy.value = 'enabled'))\n                                    }, \"   \", 4 /* STYLE */),\n                                    _createElementVNode(\"button\", {\n                                        style: _normalizeStyle({\n                                            padding: '8px 16px',\n                                            background: viewerSortBy.value === 'disabled' ? '#dc3545' : '#444',\n                                            border: 'none',\n                                            borderRadius: '6px',\n                                            color: 'white',\n                                            fontSize: '12px',\n                                            cursor: 'pointer',\n                                            transition: 'all 0.2s',\n                                        }),\n                                        onClick: _cache[24] || (_cache[24] = ($event) => (viewerSortBy.value = 'disabled'))\n                                    }, \"   \", 4 /* STYLE */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (selectedViewerWorldbook.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_57, [\n                                    (_unref(filteredWorldbookEntries).length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_58, \"  \" + _toDisplayString(_unref(filteredWorldbookEntries).length) + \"  \", 1 /* TEXT */))\n                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_59, \"\"))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_unref(filteredWorldbookEntries).length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_60, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredWorldbookEntries), (entry, index) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: index,\n                                            style: { \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"8px\", \"padding\": \"15px\", \"transition\": \"all 0.3s ease\" }\n                                        }, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", {\n                                                style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"flex-start\", \"cursor\": \"pointer\", \"user-select\": \"none\" },\n                                                onClick: ($event) => (toggleEntryExpanded(index))\n                                            }, [\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_62, [\n                                                    _createCommentVNode(\"  +  \"),\n                                                    _createElementVNode(\"div\", _hoisted_63, [\n                                                        (entry.strategy?.type === 'constant')\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_64, \"\"))\n                                                            : (entry.strategy?.type === 'selective')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_65, \"\"))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_66, \"\")),\n                                                        _createElementVNode(\"span\", _hoisted_67, _toDisplayString(entry.name || '()'), 1 /* TEXT */)\n                                                    ]),\n                                                    _createCommentVNode(\"  |  |  \"),\n                                                    _createElementVNode(\"div\", _hoisted_68, [\n                                                        (entry.strategy?.keys && entry.strategy.keys.length > 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_69, \" : \" + _toDisplayString(entry.strategy.keys.map((k) => (typeof k === 'string' ? k : String(k))).join(', ')), 1 /* TEXT */))\n                                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_70, \": ()\")),\n                                                        (entry.position?.order && entry.position.order !== 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_71, [\n                                                                _cache[90] || (_cache[90] = _createElementVNode(\"span\", { style: { \"color\": \"#666\" } }, \" | \", -1 /* CACHED */)),\n                                                                _createTextVNode(\" : \" + _toDisplayString(entry.position.order), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        (entry.position?.type === 'at_depth' && entry.position.depth && entry.position.depth !== 0)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_72, [\n                                                                _cache[91] || (_cache[91] = _createElementVNode(\"span\", { style: { \"color\": \"#666\" } }, \" | \", -1 /* CACHED */)),\n                                                                _createTextVNode(\" : \" + _toDisplayString(entry.position.depth), 1 /* TEXT */)\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_73, _toDisplayString(entry.content\n                                                        ? entry.content.length > 50\n                                                            ? entry.content.substring(0, 50) + '...'\n                                                            : entry.content\n                                                        : '()'), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(isEntryExpanded(index) ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                                                    style: { \"color\": \"#888\", \"font-size\": \"12px\", \"margin-top\": \"2px\" }\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_61),\n                                            _createCommentVNode(\"  \"),\n                                            (isEntryExpanded(index))\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_74, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_75, [\n                                                        _cache[92] || (_cache[92] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } }, \"   \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_76, [\n                                                            (entry.strategy?.type === 'constant')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_77, \"  -  \"))\n                                                                : (entry.strategy?.type === 'selective')\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_78, \"  -  \"))\n                                                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_79, \"   \"))\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_80, [\n                                                        _createElementVNode(\"span\", _hoisted_81, [\n                                                            _cache[93] || (_cache[93] = _createTextVNode(\"   \", -1 /* CACHED */)),\n                                                            (entry.strategy?.type === 'constant')\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_82, \" () \"))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_83, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(entry.strategy?.keys || [], (key, ki) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: ki,\n                                                                    style: { \"padding\": \"4px 10px\", \"background\": \"#667eea\", \"color\": \"white\", \"border-radius\": \"12px\", \"font-size\": \"11px\" }\n                                                                }, _toDisplayString(typeof key === 'string' ? key : String(key)), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            (!entry.strategy?.keys || entry.strategy.keys.length === 0)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_84, _toDisplayString(entry.strategy?.type === 'constant' ? '()' : '()'), 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_85, [\n                                                        _cache[94] || (_cache[94] = _createElementVNode(\"span\", { style: { \"color\": \"#888\", \"font-size\": \"12px\", \"font-weight\": \"600\", \"display\": \"block\", \"margin-bottom\": \"6px\" } }, \"   \", -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_86, _toDisplayString(entry.content || '()'), 1 /* TEXT */)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_87, [\n                                                        _createElementVNode(\"button\", {\n                                                            style: { \"padding\": \"8px 16px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                            onClick: ($event) => (editWorldbookEntry(entry))\n                                                        }, [...(_cache[95] || (_cache[95] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-edit\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_88),\n                                                        _createElementVNode(\"button\", {\n                                                            style: { \"padding\": \"8px 16px\", \"background\": \"#ff6b6b\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"12px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                                            onClick: ($event) => (deleteWorldbookEntry(entry))\n                                                        }, [...(_cache[96] || (_cache[96] = [\n                                                                _createElementVNode(\"i\", { class: \"fa-solid fa-trash\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_89)\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                (showEditDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        style: { \"position\": \"fixed\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"background\": \"rgba(0, 0, 0, 0.7)\", \"display\": \"flex\", \"align-items\": \"center\", \"justify-content\": \"center\", \"z-index\": \"10000\", \"backdrop-filter\": \"blur(4px)\" },\n                        onClick: _cache[44] || (_cache[44] = _withModifiers(($event) => (showEditDialog.value = false), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_90, [\n                            _createElementVNode(\"div\", _hoisted_91, [\n                                _cache[99] || (_cache[99] = _createElementVNode(\"h3\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"18px\", \"font-weight\": \"600\" } }, [\n                                    _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-edit\",\n                                        style: { \"margin-right\": \"8px\", \"color\": \"#4a9eff\" }\n                                    }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    style: { \"background\": \"transparent\", \"border\": \"none\", \"color\": \"#888\", \"font-size\": \"20px\", \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"transition\": \"color 0.2s\" },\n                                    onClick: _cache[25] || (_cache[25] = ($event) => (showEditDialog.value = false)),\n                                    onMouseenter: _cache[26] || (_cache[26] = (e) => (e.target.style.color = '#fff')),\n                                    onMouseleave: _cache[27] || (_cache[27] = (e) => (e.target.style.color = '#888'))\n                                }, [...(_cache[98] || (_cache[98] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_92, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[100] || (_cache[100] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event) => ((editingEntry.value.name) = $event)),\n                                        type: \"text\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, editingEntry.value.name]\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_93, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        id: \"entry-enabled\",\n                                        \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event) => ((editingEntry.value.enabled) = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"width\": \"18px\", \"height\": \"18px\", \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, editingEntry.value.enabled]\n                                    ]),\n                                    _cache[101] || (_cache[101] = _createElementVNode(\"label\", {\n                                        for: \"entry-enabled\",\n                                        style: { \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" }\n                                    }, \"  \", -1 /* CACHED */))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[102] || (_cache[102] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        value: (editingEntry.value.strategy?.keys || []).map((k) => (typeof k === 'string' ? k : String(k))).join(','),\n                                        type: \"text\",\n                                        placeholder: \",Aria,,{{char}}\",\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                        onInput: _cache[30] || (_cache[30] =\n                                            (e) => {\n                                                const keys = e.target.value\n                                                    .split(',')\n                                                    .filter((k) => k.trim())\n                                                    .map((k) => k.trim());\n                                                editingEntry.value.strategy = {\n                                                    ...editingEntry.value.strategy,\n                                                    keys: keys,\n                                                    keys_secondary: editingEntry.value.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                                                    scan_depth: editingEntry.value.strategy?.scan_depth || 'same_as_global',\n                                                    type: editingEntry.value.strategy?.type || 'selective',\n                                                };\n                                            })\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_94)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[104] || (_cache[104] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"select\", {\n                                        value: editingEntry.value.strategy?.type || 'selective',\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" },\n                                        onChange: _cache[31] || (_cache[31] =\n                                            (e) => (editingEntry.value.strategy = {\n                                                ...editingEntry.value.strategy,\n                                                type: e.target.value,\n                                                keys: editingEntry.value.strategy?.keys || [],\n                                                keys_secondary: editingEntry.value.strategy?.keys_secondary || { logic: 'and_any', keys: [] },\n                                                scan_depth: editingEntry.value.strategy?.scan_depth || 'same_as_global',\n                                            }))\n                                    }, [...(_cache[103] || (_cache[103] = [\n                                            _createElementVNode(\"option\", { value: \"selective\" }, \" ()\", -1 /* CACHED */),\n                                            _createElementVNode(\"option\", { value: \"constant\" }, \" ()\", -1 /* CACHED */)\n                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_95)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[106] || (_cache[106] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"select\", {\n                                        value: editingEntry.value.position?.type || 'before_character_definition',\n                                        style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"cursor\": \"pointer\" },\n                                        onChange: _cache[32] || (_cache[32] =\n                                            (e) => (editingEntry.value.position = {\n                                                ...editingEntry.value.position,\n                                                type: e.target.value,\n                                                role: editingEntry.value.position?.role || 'system',\n                                                depth: editingEntry.value.position?.depth || 0,\n                                                order: editingEntry.value.position?.order || 0,\n                                            }))\n                                    }, [...(_cache[105] || (_cache[105] = [\n                                            _createStaticVNode(\"<option value=\\\"before_character_definition\\\" data-v-14fcd832></option><option value=\\\"after_character_definition\\\" data-v-14fcd832></option><option value=\\\"before_example_messages\\\" data-v-14fcd832></option><option value=\\\"after_example_messages\\\" data-v-14fcd832></option><option value=\\\"before_author_note\\\" data-v-14fcd832></option><option value=\\\"after_author_note\\\" data-v-14fcd832></option><option value=\\\"at_depth\\\" data-v-14fcd832></option>\", 7)\n                                        ]))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_96)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_97, [\n                                    _createElementVNode(\"div\", null, [\n                                        _cache[107] || (_cache[107] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"input\", {\n                                            value: editingEntry.value.position?.depth || 0,\n                                            type: \"number\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                            onInput: _cache[33] || (_cache[33] =\n                                                (e) => (editingEntry.value.position = {\n                                                    ...editingEntry.value.position,\n                                                    depth: Number(e.target.value) || 0,\n                                                    role: editingEntry.value.position?.role || 'system',\n                                                    order: editingEntry.value.position?.order || 0,\n                                                    type: editingEntry.value.position?.type || 'before_character_definition',\n                                                }))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_98)\n                                    ]),\n                                    _createElementVNode(\"div\", null, [\n                                        _cache[108] || (_cache[108] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"input\", {\n                                            value: editingEntry.value.position?.order || 0,\n                                            type: \"number\",\n                                            style: { \"width\": \"100%\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\" },\n                                            onInput: _cache[34] || (_cache[34] =\n                                                (e) => (editingEntry.value.position = {\n                                                    ...editingEntry.value.position,\n                                                    order: Number(e.target.value) || 0,\n                                                    type: editingEntry.value.position?.type || 'before_character_definition',\n                                                    role: editingEntry.value.position?.role || 'system',\n                                                    depth: editingEntry.value.position?.depth || 0,\n                                                }))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_99)\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_100, [\n                                    _cache[112] || (_cache[112] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"12px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, \"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_101, [\n                                        _createElementVNode(\"label\", _hoisted_102, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: editingEntry.value.recursion?.prevent_incoming || false,\n                                                onChange: _cache[35] || (_cache[35] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        prevent_incoming: e.target.checked,\n                                                        prevent_outgoing: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                        delay_until: editingEntry.value.recursion?.delay_until || null,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_103),\n                                            _cache[109] || (_cache[109] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"label\", _hoisted_104, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                onChange: _cache[36] || (_cache[36] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        prevent_outgoing: e.target.checked,\n                                                        prevent_incoming: editingEntry.value.recursion?.prevent_incoming || false,\n                                                        delay_until: editingEntry.value.recursion?.delay_until || null,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_105),\n                                            _cache[110] || (_cache[110] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                        ]),\n                                        _createElementVNode(\"div\", null, [\n                                            _cache[111] || (_cache[111] = _createElementVNode(\"label\", { style: { \"color\": \"#ccc\", \"font-size\": \"13px\", \"display\": \"block\", \"margin-bottom\": \"5px\" } }, \"  n  \", -1 /* CACHED */)),\n                                            _createElementVNode(\"input\", {\n                                                value: editingEntry.value.recursion?.delay_until || '',\n                                                type: \"number\",\n                                                placeholder: \"\",\n                                                style: { \"width\": \"100%\", \"padding\": \"8px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\" },\n                                                onInput: _cache[37] || (_cache[37] =\n                                                    (e) => (editingEntry.value.recursion = {\n                                                        ...editingEntry.value.recursion,\n                                                        delay_until: e.target.value === '' ? null : Number(e.target.value),\n                                                        prevent_incoming: editingEntry.value.recursion?.prevent_incoming || false,\n                                                        prevent_outgoing: editingEntry.value.recursion?.prevent_outgoing || false,\n                                                    }))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_106)\n                                        ])\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", null, [\n                                    _cache[113] || (_cache[113] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[38] || (_cache[38] = ($event) => ((editingEntry.value.content) = $event)),\n                                        style: { \"width\": \"100%\", \"min-height\": \"200px\", \"padding\": \"12px\", \"background\": \"#1a1a1a\", \"border\": \"1px solid rgba(255, 255, 255, 0.1)\", \"border-radius\": \"8px\", \"color\": \"#e0e0e0\", \"font-size\": \"14px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, editingEntry.value.content]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_107, [\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#444\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"14px\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: _cache[39] || (_cache[39] = ($event) => (showEditDialog.value = false)),\n                                    onMouseenter: _cache[40] || (_cache[40] = (e) => (e.target.style.background = '#555')),\n                                    onMouseleave: _cache[41] || (_cache[41] = (e) => (e.target.style.background = '#444'))\n                                }, \"  \", 32 /* NEED_HYDRATION */),\n                                _createElementVNode(\"button\", {\n                                    style: { \"padding\": \"10px 20px\", \"background\": \"#4a9eff\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"14px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.2s\" },\n                                    onClick: saveEditedEntry,\n                                    onMouseenter: _cache[42] || (_cache[42] = (e) => (e.target.style.background = '#5ba8ff')),\n                                    onMouseleave: _cache[43] || (_cache[43] = (e) => (e.target.style.background = '#4a9eff'))\n                                }, [...(_cache[114] || (_cache[114] = [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-save\",\n                                            style: { \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 32 /* NEED_HYDRATION */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_108, [\n                    _createElementVNode(\"div\", {\n                        class: \"section-header\",\n                        style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"padding\": \"15px 20px\", \"background\": \"linear-gradient(\\n            135deg,\\n            rgba(30, 30, 30, 0.95) 0%,\\n            rgba(38, 38, 38, 0.9) 50%,\\n            rgba(30, 30, 30, 0.95) 100%\\n          )\", \"backdrop-filter\": \"blur(12px)\", \"border-radius\": \"12px\", \"margin-bottom\": \"15px\", \"border\": \"1px solid rgba(255, 255, 255, 0.06)\", \"box-shadow\": \"0 3px 12px rgba(0, 0, 0, 0.3),\\n            inset 0 1px 0 rgba(255, 255, 255, 0.04),\\n            inset 0 -1px 0 rgba(0, 0, 0, 0.2)\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\" },\n                        onClick: _cache[45] || (_cache[45] = ($event) => (toggleToolExpanded('characterCard'))),\n                        onMouseenter: _cache[46] || (_cache[46] = (e) => (e.currentTarget.style.transform = 'translateY(-1px)')),\n                        onMouseleave: _cache[47] || (_cache[47] = (e) => (e.currentTarget.style.transform = 'translateY(0)'))\n                    }, [\n                        _cache[115] || (_cache[115] = _createElementVNode(\"h4\", { style: { \"margin\": \"0\", \"color\": \"#fff\", \"font-size\": \"16px\", \"font-weight\": \"600\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" } }, [\n                            _createElementVNode(\"i\", {\n                                class: \"fa-solid fa-user-plus\",\n                                style: { \"color\": \"#17a2b8\", \"font-size\": \"18px\" }\n                            }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isToolExpanded('characterCard') ? 'fa-solid fa-chevron-up' : 'fa-solid fa-chevron-down'),\n                            style: { \"color\": \"#ccc\", \"transition\": \"transform 0.3s ease\", \"font-size\": \"14px\" }\n                        }, null, 2 /* CLASS */)\n                    ], 32 /* NEED_HYDRATION */),\n                    (isToolExpanded('characterCard'))\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_109, [\n                            _cache[128] || (_cache[128] = _createStaticVNode(\"<div class=\\\"tool-instructions\\\" data-v-14fcd832><p style=\\\"margin:0 0 8px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-info-circle\\\" style=\\\"margin-right:6px;color:#17a2b8;\\\" data-v-14fcd832></i> AIYAML  </p><p style=\\\"margin:0 0 6px 0;color:#4a9eff;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #17a2b8;\\\" data-v-14fcd832>   </p><p style=\\\"margin:0 0 6px 0;color:#ffa500;font-size:11px;background:#1a1a1a;padding:6px;border-radius:4px;border-left:3px solid #ffa500;\\\" data-v-14fcd832>  &quot;&quot;AI </p></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_110, [\n                                _cache[116] || (_cache[116] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    \"onUpdate:modelValue\": _cache[48] || (_cache[48] = ($event) => ((characterDescription).value = $event)),\n                                    placeholder: \"...\",\n                                    style: { \"width\": \"100%\", \"height\": \"120px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, characterDescription.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_111, [\n                                _createElementVNode(\"label\", _hoisted_112, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[49] || (_cache[49] = ($event) => ((enableCharacterStreaming).value = $event)),\n                                        type: \"checkbox\",\n                                        style: { \"cursor\": \"pointer\" }\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, enableCharacterStreaming.value]\n                                    ]),\n                                    _cache[117] || (_cache[117] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isGeneratingCharacter.value && characterProgressPercent.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_113, [\n                                    _createElementVNode(\"div\", _hoisted_114, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"progress-fill\",\n                                            style: _normalizeStyle({\n                                                width: characterProgressPercent.value + '%',\n                                                height: '100%',\n                                                background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                                                backgroundSize: '200% 100%',\n                                                animation: enableCharacterStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                transition: 'width 0.3s ease',\n                                            })\n                                        }, null, 4 /* STYLE */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_115, \" ... \" + _toDisplayString(characterProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"div\", _hoisted_116, [\n                                _createElementVNode(\"button\", {\n                                    class: \"generate-button\",\n                                    disabled: isGeneratingCharacter.value || !characterDescription.value.trim(),\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #17a2b8 0%, #138496 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(23, 162, 184, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: handleGenerateCharacterCard\n                                }, [\n                                    _cache[118] || (_cache[118] = _createElementVNode(\"div\", {\n                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                        class: \"shimmer-effect\"\n                                    }, null, -1 /* CACHED */)),\n                                    _cache[119] || (_cache[119] = _createElementVNode(\"i\", {\n                                        class: \"fa-solid fa-magic\",\n                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                    }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(isGeneratingCharacter.value ? '...' : ''), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_117),\n                                _createElementVNode(\"button\", {\n                                    class: \"clear-button\",\n                                    style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 107, 107, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                    onClick: clearCharacterForm\n                                }, [...(_cache[120] || (_cache[120] = [\n                                        _createElementVNode(\"div\", {\n                                            style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                            class: \"shimmer-effect\"\n                                        }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-trash\",\n                                            style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                        }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (characterCardOutput.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_118, [\n                                    _cache[127] || (_cache[127] = _createElementVNode(\"h5\", { style: { \"margin\": \"0 0 12px 0\", \"color\": \"#fff\", \"font-size\": \"14px\", \"font-weight\": \"600\" } }, [\n                                        _createElementVNode(\"i\", {\n                                            class: \"fa-solid fa-check-circle\",\n                                            style: { \"margin-right\": \"6px\", \"color\": \"#28a745\" }\n                                        }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", _hoisted_119, _toDisplayString(characterCardOutput.value), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", {\n                                        class: \"output-actions\",\n                                        style: { \"margin-top\": \"12px\", \"display\": \"flex\", \"gap\": \"12px\" }\n                                    }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"copy-button\",\n                                            style: { \"padding\": \"10px 20px\", \"background\": \"linear-gradient(135deg, #28a745 0%, #20c997 100%)\", \"border\": \"none\", \"border-radius\": \"6px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\", \"box-shadow\": \"0 3px 12px rgba(40, 167, 69, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                            onClick: copyCharacterCard\n                                        }, [...(_cache[121] || (_cache[121] = [\n                                                _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-copy\",\n                                                    style: { \"font-size\": \"14px\" }\n                                                }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_120, [\n                                        _cache[126] || (_cache[126] = _createStaticVNode(\"<h5 style=\\\"margin:0 0 12px 0;color:#fff;font-size:14px;font-weight:600;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-edit\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i>  </h5><div class=\\\"modify-instructions\\\" style=\\\"background:#1a1a1a;border:1px solid #3a3a3a;border-radius:6px;padding:10px;margin-bottom:15px;\\\" data-v-14fcd832><p style=\\\"margin:0 0 6px 0;color:#ccc;font-size:12px;\\\" data-v-14fcd832><i class=\\\"fa-solid fa-lightbulb\\\" style=\\\"margin-right:6px;color:#ffa500;\\\" data-v-14fcd832></i> AI&quot;&quot;&quot;&quot;&quot;&quot; </p><p style=\\\"margin:0;color:#ffa500;font-size:11px;\\\" data-v-14fcd832>  YAML </p></div>\", 2)),\n                                        _createElementVNode(\"div\", _hoisted_121, [\n                                            _cache[122] || (_cache[122] = _createElementVNode(\"label\", { style: { \"display\": \"block\", \"margin-bottom\": \"8px\", \"color\": \"#ccc\", \"font-size\": \"13px\", \"font-weight\": \"500\" } }, \"  \", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": _cache[50] || (_cache[50] = ($event) => ((modifyRequest).value = $event)),\n                                                placeholder: \"...\",\n                                                style: { \"width\": \"100%\", \"height\": \"80px\", \"padding\": \"12px\", \"background\": \"#2a2a2a\", \"border\": \"1px solid #3a3a3a\", \"border-radius\": \"6px\", \"color\": \"#e0e0e0\", \"font-size\": \"13px\", \"resize\": \"vertical\", \"font-family\": \"inherit\" }\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, modifyRequest.value]\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (isModifyingCharacter.value && characterProgressPercent.value > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_122, [\n                                                _createElementVNode(\"div\", _hoisted_123, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"progress-fill\",\n                                                        style: _normalizeStyle({\n                                                            width: characterProgressPercent.value + '%',\n                                                            height: '100%',\n                                                            background: 'linear-gradient(90deg, #17a2b8 0%, #138496 50%, #17a2b8 100%)',\n                                                            backgroundSize: '200% 100%',\n                                                            animation: enableCharacterStreaming.value ? 'progress-slide 2s linear infinite' : 'none',\n                                                            transition: 'width 0.3s ease',\n                                                        })\n                                                    }, null, 4 /* STYLE */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_124, \" ... \" + _toDisplayString(characterProgressPercent.value.toFixed(0)) + \"% \", 1 /* TEXT */)\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"div\", _hoisted_125, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"modify-button\",\n                                                disabled: isModifyingCharacter.value || !modifyRequest.value.trim(),\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #ffa500 0%, #ff8c00 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(255, 165, 0, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: handleModifyCharacterCard\n                                            }, [\n                                                _cache[123] || (_cache[123] = _createElementVNode(\"div\", {\n                                                    style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                    class: \"shimmer-effect\"\n                                                }, null, -1 /* CACHED */)),\n                                                _cache[124] || (_cache[124] = _createElementVNode(\"i\", {\n                                                    class: \"fa-solid fa-wand-magic-sparkles\",\n                                                    style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                }, null, -1 /* CACHED */)),\n                                                _createTextVNode(\" \" + _toDisplayString(isModifyingCharacter.value ? '...' : 'AI'), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_126),\n                                            _createElementVNode(\"button\", {\n                                                class: \"clear-modify-button\",\n                                                style: { \"padding\": \"12px 24px\", \"background\": \"linear-gradient(135deg, #6c757d 0%, #5a6268 100%)\", \"border\": \"none\", \"border-radius\": \"8px\", \"color\": \"white\", \"font-size\": \"13px\", \"font-weight\": \"600\", \"cursor\": \"pointer\", \"transition\": \"all 0.3s ease\", \"box-shadow\": \"0 3px 12px rgba(108, 117, 125, 0.3)\", \"position\": \"relative\", \"overflow\": \"hidden\" },\n                                                onClick: clearModifyRequest\n                                            }, [...(_cache[125] || (_cache[125] = [\n                                                    _createElementVNode(\"div\", {\n                                                        style: { \"position\": \"absolute\", \"top\": \"0\", \"left\": \"-100%\", \"width\": \"100%\", \"height\": \"100%\", \"background\": \"linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent)\", \"transition\": \"left 0.5s\" },\n                                                        class: \"shimmer-effect\"\n                                                    }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fa-solid fa-eraser\",\n                                                        style: { \"font-size\": \"14px\", \"margin-right\": \"6px\" }\n                                                    }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ToolsTab.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ToolsTab.vue?vue&type=style&index=0&id=14fcd832&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-14fcd832\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, resolveDynamicComponent as _resolveDynamicComponent, mergeProps as _mergeProps, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"memory-panel-container\",\n    style: { \"display\": \"flex\", \"flex-direction\": \"column\", \"height\": \"100%\", \"background\": \"#1a1a1a\", \"color\": \"#e0e0e0\" }\n};\nconst _hoisted_2 = {\n    class: \"panel-header\",\n    style: { \"padding\": \"15px 20px\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"display\": \"flex\", \"justify-content\": \"space-between\", \"align-items\": \"center\", \"border-radius\": \"8px 8px 0 0\", \"flex-shrink\": \"0\" }\n};\nconst _hoisted_3 = {\n    class: \"header-left\",\n    style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"10px\" }\n};\nconst _hoisted_4 = { class: \"panel-title\" };\nconst _hoisted_5 = { class: \"panel-title-mobile\" };\nconst _hoisted_6 = { style: { \"display\": \"flex\", \"gap\": \"10px\", \"align-items\": \"center\" } };\nconst _hoisted_7 = [\"title\"];\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = [\"title\"];\nconst _hoisted_10 = {\n    class: \"panel-tabs\",\n    style: { \"display\": \"flex\", \"background\": \"#2a2a2a\", \"border-bottom\": \"1px solid #3a3a3a\", \"flex-shrink\": \"0\" }\n};\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = { class: \"tab-label\" };\nconst _hoisted_13 = {\n    class: \"panel-content\",\n    style: { \"flex\": \"1\", \"overflow-y\": \"auto\", \"overflow-x\": \"hidden\", \"padding\": \"0\", \"min-height\": \"0\", \"scrollbar-width\": \"thin\", \"scrollbar-color\": \"#4a9eff #2a2a2a\" }\n};\nimport { computed, ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport { minimizeMemoryPanel } from '../';\nimport GreetingsTab from './GreetingsTab.vue';\nimport HelpTab from './HelpTab.vue';\nimport MvuBetaTab from './MvuBetaTab.vue';\nimport ProjectManager from './ProjectManager.vue';\nimport RegexUIGenerator from './RegexUIGenerator.vue';\nimport SettingsTab from './SettingsTab.vue';\nimport StatusBarGenerator from './StatusBarGenerator.vue';\nimport SummaryTab from './SummaryTab.vue';\nimport TableTab from './TableTab.vue';\nimport ToolsTab from './ToolsTab.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    setup(__props) {\n        const { t, locale } = useI18n();\n        const currentLocale = computed(() => locale.value);\n        // \n        const tabs = computed(() => [\n            { key: 'settings', label: t('tabs.settings'), icon: 'fa-solid fa-cog' },\n            { key: 'summary', label: t('tabs.history'), icon: 'fa-solid fa-list' },\n            { key: 'table', label: t('tabs.table'), icon: 'fa-solid fa-table' },\n            { key: 'greetings', label: t('tabs.greetings'), icon: 'fa-solid fa-comments' },\n            { key: 'regex', label: t('tabs.regex'), icon: 'fa-solid fa-code' },\n            { key: 'status', label: t('tabs.state'), icon: 'fa-solid fa-chart-bar' },\n            { key: 'project', label: t('tabs.projects'), icon: 'fa-solid fa-laptop-code' },\n            { key: 'tools', label: t('tabs.tools'), icon: 'fa-solid fa-tools' },\n            { key: 'mvu', label: t('tabs.mvu'), icon: 'fa-solid fa-flask' },\n            { key: 'help', label: t('tabs.help'), icon: 'fa-solid fa-question-circle' },\n        ]);\n        const activeTab = ref('settings');\n        // \n        const componentMap = {\n            settings: SettingsTab,\n            summary: SummaryTab,\n            table: TableTab,\n            greetings: GreetingsTab,\n            status: StatusBarGenerator,\n            regex: RegexUIGenerator,\n            project: ProjectManager,\n            tools: ToolsTab,\n            mvu: MvuBetaTab,\n            help: HelpTab,\n        };\n        // \n        const currentComponent = computed(() => componentMap[activeTab.value]);\n        // \n        const componentProps = computed(() => ({\n            activeTab: activeTab.value,\n        }));\n        // \n        const switchTab = (tabKey) => {\n            console.log(':', tabKey);\n            activeTab.value = tabKey;\n        };\n        // \n        const toggleLanguage = () => {\n            const newLocale = locale.value === 'zh-CN' ? 'en-US' : 'zh-CN';\n            locale.value = newLocale;\n            localStorage.setItem('maomao_tool_locale', newLocale);\n            toastr.success(newLocale === 'zh-CN' ? '' : 'Switched to English');\n        };\n        // \n        const minimizePanel = () => {\n            minimizeMemoryPanel();\n        };\n        // \n        const closePanel = () => {\n            $('#memoryManagementPanel').fadeOut(200);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[0] || (_cache[0] = _createElementVNode(\"span\", { style: { \"font-size\": \"24px\" } }, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"b\", _hoisted_4, _toDisplayString(_unref(t)('panel.title')), 1 /* TEXT */),\n                        _createElementVNode(\"b\", _hoisted_5, _toDisplayString(currentLocale.value === 'zh-CN' ? '' : \"mzrodyu's Tool\"), 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", {\n                            class: \"language-button\",\n                            style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\", \"font-size\": \"14px\", \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"5px\" },\n                            title: currentLocale.value === 'zh-CN' ? 'Switch to English' : '',\n                            onClick: toggleLanguage\n                        }, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fa-solid fa-language\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", null, _toDisplayString(currentLocale.value === 'zh-CN' ? 'EN' : ''), 1 /* TEXT */)\n                        ], 8 /* PROPS */, _hoisted_7),\n                        _createElementVNode(\"div\", {\n                            class: \"minimize-button\",\n                            style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                            title: _unref(t)('panel.minimize'),\n                            onClick: minimizePanel\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-minus\" }, null, -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_8),\n                        _createElementVNode(\"div\", {\n                            class: \"close-button\",\n                            style: { \"cursor\": \"pointer\", \"padding\": \"5px 10px\", \"border-radius\": \"4px\", \"transition\": \"background 0.2s\" },\n                            title: currentLocale.value === 'zh-CN' ? '' : 'Close',\n                            onClick: closePanel\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                            ]))], 8 /* PROPS */, _hoisted_9)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tabs.value, (tab) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: tab.key,\n                            class: _normalizeClass([{ 'tab-active': activeTab.value === tab.key }, \"tab-item\"]),\n                            style: _normalizeStyle({\n                                flex: '1',\n                                padding: '12px 20px',\n                                cursor: 'pointer',\n                                textAlign: 'center',\n                                transition: 'background 0.2s, color 0.2s',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                gap: '8px',\n                                borderBottom: '2px solid transparent',\n                                backgroundColor: activeTab.value === tab.key ? '#1a1a1a' : 'transparent',\n                                color: activeTab.value === tab.key ? '#4a9eff' : '#e0e0e0',\n                                borderBottomColor: activeTab.value === tab.key ? '#4a9eff' : 'transparent',\n                            }),\n                            onClick: ($event) => (switchTab(tab.key))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon)\n                            }, null, 2 /* CLASS */),\n                            _createElementVNode(\"span\", _hoisted_12, _toDisplayString(tab.label), 1 /* TEXT */)\n                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_11));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_13, [\n                    (_openBlock(), _createBlock(_resolveDynamicComponent(currentComponent.value), _mergeProps({ key: activeTab.value }, componentProps.value), null, 16 /* FULL_PROPS */))\n                ])\n            ]));\n        };\n    }\n});\n","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport i18n from './i18n';\nimport  from './.vue';\n\n$(() => {\n  console.log('.ts ');\n\n  // CSS\n  if ($('#memory-panel-responsive-css').length === 0) {\n    const responsiveCSS = `\n      <style id=\"memory-panel-responsive-css\">\n        /*  */\n        .panel-title-mobile {\n          display: none;\n        }\n        \n        /*  */\n        .panel-title {\n          display: inline;\n        }\n        \n        /*  portrait */\n        @media (orientation: portrait) {\n          /*  -  */\n          body #memoryManagementPanel {\n            position: fixed !important;\n            top: 0 !important;\n            left: 0 !important;\n            right: 0 !important;\n            bottom: 0 !important;\n            transform: none !important;\n            width: 100vw !important;\n            max-width: 100vw !important;\n            height: 100vh !important;\n            max-height: 100vh !important;\n            min-width: 100vw !important;\n            min-height: 100vh !important;\n            border-radius: 0 !important;\n            border: none !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          /*  */\n          .panel-title {\n            display: none !important;\n          }\n          \n          .panel-title-mobile {\n            display: inline !important;\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .minimize-button {\n            display: none !important;\n          }\n          \n          /*  */\n          .panel-header {\n            padding: 10px 12px !important;\n            border-radius: 0 !important;\n          }\n          \n          .panel-header .header-left {\n            gap: 6px !important;\n          }\n          \n          .panel-header .header-left span {\n            font-size: 20px !important;\n          }\n          \n          .panel-header > div:last-child {\n            gap: 6px !important;\n          }\n          \n          .close-button {\n            padding: 4px 8px !important;\n          }\n          \n          /*  */\n          .panel-tabs {\n            overflow-x: auto !important;\n            overflow-y: hidden !important;\n            white-space: nowrap !important;\n            -webkit-overflow-scrolling: touch !important;\n          }\n          \n          .panel-tabs::-webkit-scrollbar {\n            height: 2px !important;\n          }\n          \n          .panel-tabs .tab-item {\n            flex: 0 0 auto !important;\n            padding: 10px 12px !important;\n            font-size: 12px !important;\n            gap: 4px !important;\n            min-width: auto !important;\n          }\n          \n          .panel-tabs .tab-item .tab-label {\n            white-space: nowrap !important;\n          }\n          \n          /*  */\n          .memory-panel-container {\n            font-size: 14px !important;\n          }\n          \n          /*  */\n          .panel-content {\n            overflow-y: auto !important;\n            overflow-x: hidden !important;\n            -webkit-overflow-scrolling: touch !important;\n            height: 100% !important;\n            padding: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tab-content {\n            max-width: 100vw !important;\n            overflow-x: hidden !important;\n          }\n          \n          /*  */\n          .memory-panel-container button,\n          .memory-panel-container .el-button {\n            padding: 10px 16px !important;\n            font-size: 13px !important;\n            min-height: 44px !important; /* iOS */\n          }\n          \n          /*  */\n          .memory-panel-container .button-group,\n          .memory-panel-container .project-action-buttons {\n            flex-direction: column !important;\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container .button-group > *,\n          .memory-panel-container .button-group button,\n          .memory-panel-container .project-action-buttons > button {\n            width: 100% !important;\n            margin: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .dialog-actions,\n          .memory-panel-container [style*=\"justify-content: flex-end\"] {\n            flex-direction: column !important;\n            gap: 10px !important;\n          }\n          \n          .memory-panel-container .dialog-actions > button {\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select {\n            font-size: 16px !important; /* iOS */\n            padding: 12px !important;\n            min-height: 44px !important;\n          }\n          \n          .memory-panel-container textarea {\n            min-height: 120px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .form-group,\n          .memory-panel-container [style*=\"margin\"] {\n            margin-bottom: 16px !important;\n          }\n          \n          /* / */\n          .memory-panel-container .card,\n          .memory-panel-container .panel,\n          .memory-panel-container .section {\n            padding: 12px !important;\n            margin: 8px 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-group,\n          .memory-panel-container [class*=\"field\"] {\n            padding: 8px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section,\n          .memory-panel-container .section-content {\n            padding: 12px 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .preview-container,\n          .memory-panel-container [class*=\"preview\"] {\n            padding: 8px !important;\n            max-width: 100% !important;\n            overflow-x: auto !important;\n          }\n          \n          /*  */\n          .memory-panel-container h1,\n          .memory-panel-container h2,\n          .memory-panel-container h3,\n          .memory-panel-container h4,\n          .memory-panel-container h5 {\n            font-size: 16px !important;\n            margin-bottom: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .modal,\n          .memory-panel-container .dialog {\n            width: 100vw !important;\n            height: 100vh !important;\n            max-width: 100vw !important;\n            max-height: 100vh !important;\n            border-radius: 0 !important;\n            top: 0 !important;\n            left: 0 !important;\n            transform: none !important;\n          }\n          \n          /*  */\n          .memory-panel-container ::-webkit-scrollbar {\n            width: 3px !important;\n            height: 3px !important;\n          }\n          \n          /* gap */\n          .memory-panel-container [style*=\"gap: 1\"] {\n            gap: 8px !important;\n          }\n          \n          .memory-panel-container [style*=\"gap: 2\"] {\n            gap: 12px !important;\n          }\n          \n          /*  */\n          .memory-panel-container .tool-section .button-group {\n            display: flex !important;\n            flex-direction: column !important;\n            width: 100% !important;\n          }\n          \n          /*  */\n          .memory-panel-container .field-item {\n            flex-direction: column !important;\n            align-items: stretch !important;\n          }\n          \n          .memory-panel-container .field-item > * {\n            width: 100% !important;\n            margin-bottom: 8px !important;\n          }\n          \n          /*  */\n          .memory-panel-container [style*=\"display: grid\"][style*=\"grid-template-columns: 1fr 1fr\"] {\n            grid-template-columns: 1fr !important;\n          }\n          \n          /* / */\n          .memory-panel-container .delete-button,\n          .memory-panel-container [class*=\"delete\"],\n          .memory-panel-container .action-button {\n            min-width: 44px !important;\n            min-height: 44px !important;\n            padding: 8px !important;\n          }\n          \n          /* label */\n          .memory-panel-container label {\n            font-size: 13px !important;\n            margin-bottom: 6px !important;\n            display: block !important;\n          }\n          \n          /*  */\n          .memory-panel-container input,\n          .memory-panel-container textarea,\n          .memory-panel-container select,\n          .memory-panel-container button,\n          .memory-panel-container pre,\n          .memory-panel-container code {\n            max-width: 100% !important;\n            word-wrap: break-word !important;\n          }\n          \n          /*  */\n          .memory-panel-container .section-header {\n            padding: 16px !important;\n            font-size: 14px !important;\n            flex-direction: column !important;\n            align-items: stretch !important;\n            gap: 12px !important;\n          }\n          \n          .memory-panel-container .section-header h3 {\n            font-size: 15px !important;\n            margin-bottom: 0 !important;\n          }\n          \n          /*  */\n          .memory-panel-container .empty-space,\n          .memory-panel-container [style*=\"padding: 20px\"],\n          .memory-panel-container [style*=\"padding: 25px\"] {\n            padding: 12px !important;\n          }\n        }\n      </style>\n    `;\n    $('head').append(responsiveCSS);\n    console.log(' CSS');\n  }\n\n  setTimeout(() => {\n    console.log('.ts setTimeout ');\n\n    // \n    const existingPanel = $('#memoryManagementPanel');\n\n    if (existingPanel.length > 0) {\n      console.log('mzrodyu...');\n      // \n      existingPanel.remove();\n      // DOM\n      setTimeout(() => {\n        console.log('...');\n      }, 100);\n    }\n\n    console.log('  - :', new Date().toISOString());\n\n    //  - \n    const panelContainer = $(`\n      <div id=\"memoryManagementPanel\" style=\"\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width: 95vw;\n        max-width: 1600px;\n        height: 92vh;\n        max-height: 92vh;\n        background: #1a1a1a;\n        border: 1px solid #3a3a3a;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n        z-index: 999999;\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n      \">\n      </div>\n    `);\n\n    //  body\n    $('body').append(panelContainer);\n    console.log(' body, :', panelContainer[0]);\n\n    //  Vue \n    console.log(' Vue :', panelContainer[0]);\n\n    const app = createApp().use(createPinia()).use(i18n);\n\n    try {\n      app.mount(panelContainer[0]);\n      console.log('Vue ');\n      console.log('Vue :', (panelContainer[0] as any).__vue_app__);\n    } catch (error) {\n      console.error('Vue :', error);\n      console.error(':', JSON.stringify(error, null, 2));\n      console.error(':', (error as Error).stack);\n    }\n\n    console.log('mzrodyu:', panelContainer[0]);\n  }, 200);\n});\n\n// \nfunction createMinimizeIcon() {\n  // \n  $('#memoryPanelMinimizeIcon').remove();\n\n  const isMobile = window.innerWidth <= 768;\n\n  const icon = $(`\n    <div id=\"memoryPanelMinimizeIcon\" style=\"\n      position: fixed;\n      top: ${isMobile ? '15px' : '20px'};\n      right: ${isMobile ? '15px' : '20px'};\n      width: ${isMobile ? '50px' : '60px'};\n      height: ${isMobile ? '50px' : '60px'};\n      background: #2a2a2a;\n      border: 2px solid #4a9eff;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      z-index: 999998;\n      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\n      transition: transform 0.2s, box-shadow 0.2s;\n      font-size: ${isMobile ? '26px' : '32px'};\n    \">\n      \n    </div>\n  `);\n\n  // \n  icon.hover(\n    function () {\n      $(this).css({\n        transform: 'scale(1.1)',\n        boxShadow: '0 4px 20px rgba(74, 158, 255, 0.5)',\n      });\n    },\n    function () {\n      $(this).css({\n        transform: 'scale(1)',\n        boxShadow: '0 2px 10px rgba(0, 0, 0, 0.5)',\n      });\n    },\n  );\n\n  // \n  icon.on('click', () => {\n    const panel = $('#memoryManagementPanel');\n    panel.fadeIn(200);\n    icon.fadeOut(200, () => icon.remove());\n  });\n\n  // \n  icon.draggable({\n    containment: 'window',\n    scroll: false,\n    start: function () {\n      $(this).css('transition', 'none');\n    },\n    stop: function () {\n      $(this).css('transition', '');\n    },\n  });\n\n  $('body').append(icon);\n  return icon;\n}\n\n// \nexport function minimizeMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  panel.fadeOut(200, () => {\n    createMinimizeIcon().hide().fadeIn(200);\n  });\n}\n\n// /\nexport function toggleMemoryPanel() {\n  const panel = $('#memoryManagementPanel');\n  if (panel.length === 0) return;\n\n  if (panel.is(':visible')) {\n    panel.fadeOut(200);\n  } else {\n    panel.fadeIn(200);\n  }\n}\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MainPanel.vue?vue&type=style&index=0&id=67eefd1a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.23_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-67eefd1a\"]])\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nimport MainPanel from './components/MainPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: '',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(MainPanel));\n        };\n    }\n});\n","import { watch } from 'vue';\nimport { klona } from 'klona';\nimport { useSettingsStore, useSummaryHistoryStore } from './settings';\nimport { getScriptIdSafe, setGlobalScriptId } from './utils';\nimport { summarizeMessages } from './';\nimport './';\nimport './';\n\n$(() => {\n  // \n  setTimeout(() => {\n    let script_id: string | null = null;\n    try {\n      script_id = getScriptId?.();\n    } catch (e) {\n      console.error(' script_id:', e);\n    }\n\n    if (!script_id) {\n      console.error(' script_idmzrodyu');\n      window.toastr.error('mzrodyu');\n      return;\n    }\n\n    //  script_id\n    setGlobalScriptId(script_id);\n\n    console.log('mzrodyuscript_id:', script_id);\n\n    // \n    setTimeout(() => {\n      // \n      const checkAutoSummarize = () => {\n        try {\n          console.log(' ...');\n\n          const store = useSettingsStore();\n          if (!store || !store.settings) {\n            console.warn(' ');\n            return;\n          }\n\n          const settings = store.settings;\n\n          // \n          if (typeof settings.auto_summarize_enabled !== 'boolean') {\n            console.warn(' ');\n            return;\n          }\n\n          if (typeof settings.summary_interval !== 'number' || settings.summary_interval < 1) {\n            console.warn(' ');\n            return;\n          }\n          console.log(' :', {\n            auto_summarize_enabled: settings.auto_summarize_enabled,\n            summary_interval: settings.summary_interval,\n            has_api_key: !!settings.api_key,\n          });\n\n          if (!settings.auto_summarize_enabled) {\n            console.log(' ');\n            return;\n          }\n\n          if (!settings.api_key) {\n            console.log(' API Key ');\n            return;\n          }\n\n          const last_message_id = getLastMessageId();\n\n          // ID\n          const current_chat_id = SillyTavern.getCurrentChatId();\n          if (!current_chat_id) {\n            console.log(' ID');\n            return;\n          }\n\n          // ID\n          let auto_summary_start_id = 0;\n          try {\n            // \n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id_key = 'auto_summary_start_id';\n\n            console.log(` :`, {\n              current_chat_id,\n              chat_vars: chatVars,\n              has_start_id: chatVars[auto_summary_start_id_key] !== undefined,\n              existing_start_id: chatVars[auto_summary_start_id_key],\n            });\n\n            if (chatVars[auto_summary_start_id_key] !== undefined && chatVars[auto_summary_start_id_key] !== null) {\n              auto_summary_start_id = chatVars[auto_summary_start_id_key];\n              console.log(` : ${auto_summary_start_id} (: ${current_chat_id})`);\n            } else {\n              // \n              // \n              const scriptId = getScriptIdSafe();\n              if (!scriptId) {\n                console.warn('script_id ');\n                return;\n              }\n              const scriptVars = getVariables({ type: 'script', script_id: scriptId });\n              const existingSummaries = Array.isArray(scriptVars?.summary_history) ? scriptVars.summary_history : [];\n\n              if (existingSummaries.length > 0) {\n                // \n                const lastSummary = existingSummaries[0]; // \n                const lastSummaryEnd = lastSummary.end_id || 0;\n\n                // +1\n                if (last_message_id > lastSummaryEnd) {\n                  auto_summary_start_id = lastSummaryEnd + 1;\n                  console.log(\n                    ` : ${auto_summary_start_id} ( ${lastSummaryEnd} )`,\n                  );\n                  window.toastr?.info(` ${auto_summary_start_id} `);\n                } else {\n                  // \n                  auto_summary_start_id = last_message_id;\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(`: ${last_message_id}`);\n                }\n              } else {\n                // 0AI\n                auto_summary_start_id = 0;\n                console.log(` : 0 (: ${current_chat_id}) - AI`);\n                window.toastr?.info(` 0 AI`);\n              }\n\n              // 0AI\n              if (auto_summary_start_id < 0) {\n                auto_summary_start_id = 0;\n                console.log(` 0AI`);\n              }\n\n              // \n              insertOrAssignVariables({ [auto_summary_start_id_key]: auto_summary_start_id }, { type: 'chat' });\n            }\n          } catch (error) {\n            console.warn(':', error);\n            auto_summary_start_id = last_message_id;\n          }\n\n          console.log(\n            `: =${last_message_id}, =${auto_summary_start_id}, =${settings.summary_interval}`,\n          );\n\n          // \n          // \n          // 0=AI, 1=, 2=AI, 3=...\n          const relative_position = last_message_id - auto_summary_start_id;\n\n          // 550-4, 5-9...\n          // 045relative_position=4 >= interval - 1\n          const should_trigger = relative_position >= settings.summary_interval - 1;\n\n          console.log(' :', {\n            last_message_id,\n            auto_summary_start_id,\n            relative_position,\n            summarize_interval: settings.summary_interval,\n            should_trigger,\n            calculation: `${relative_position} >= ${settings.summary_interval - 1} (${relative_position + 1})`,\n            expected_trigger_at_floor: auto_summary_start_id + settings.summary_interval - 1,\n            will_summarize_range: `${auto_summary_start_id}-${auto_summary_start_id + settings.summary_interval - 1}`,\n            floor_explanation: '0=AI, 1=, 2=AI, 3=...',\n          });\n\n          if (last_message_id >= auto_summary_start_id && should_trigger) {\n            // interval55\n            const start_id = auto_summary_start_id;\n            const end_id = auto_summary_start_id + settings.summary_interval - 1;\n\n            // \n            console.log(` :  ${start_id}-${end_id}`);\n            window.toastr.info(`  ${start_id}-${end_id}...`);\n\n            summarizeMessages(start_id, end_id)\n              .then(summary => {\n                console.log(` :  ${start_id}-${end_id}`, summary);\n\n                // \n                try {\n                  const historyStore = useSummaryHistoryStore();\n                  historyStore.addSummary(start_id, end_id, summary);\n                } catch (e) {\n                  console.error(':', e);\n                }\n\n                // \n                const new_start_id = end_id + 1;\n                insertOrAssignVariables({ auto_summary_start_id: new_start_id }, { type: 'chat' });\n                console.log(` : ${new_start_id}`);\n\n                window.toastr.success(`  ${start_id}-${end_id}  ${new_start_id} `);\n              })\n              .catch(error => {\n                console.error(' ', error);\n                window.toastr.error(' ' + error.message);\n              });\n          }\n        } catch (error) {\n          console.error('checkAutoSummarize ', error);\n          // \n        }\n      };\n\n      // \n      try {\n        eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, () => {\n          console.log(' ...');\n          checkAutoSummarize();\n        });\n\n        // \n        eventOn(tavern_events.CHAT_CHANGED, (chat_file_name: string) => {\n          console.log(' :', chat_file_name);\n\n          // \n          try {\n            const chatVars = getVariables({ type: 'chat' });\n            const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n            if (auto_summary_start_id !== undefined && auto_summary_start_id !== null) {\n              console.log(` : ${chat_file_name}, : ${auto_summary_start_id}`);\n            } else {\n              console.log(` : ${chat_file_name}, `);\n            }\n          } catch (error) {\n            console.warn(':', error);\n          }\n        });\n\n        console.log(' ');\n      } catch (error) {\n        console.error(' :', error);\n      }\n\n      // \n      const settingsStore = useSettingsStore();\n      if (settingsStore && settingsStore.settings) {\n        // \n        const unwatch = watch(\n          () => settingsStore.settings.auto_summarize_enabled,\n          (newValue, oldValue) => {\n            console.log(` : ${oldValue} -> ${newValue}`);\n            if (newValue && !oldValue) {\n              // \n              try {\n                const scriptId = getScriptIdSafe();\n                if (!scriptId) {\n                  console.warn('script_id ');\n                  return;\n                }\n                const chatVars = getVariables({ type: 'chat' });\n                const auto_summary_start_id = chatVars.auto_summary_start_id;\n\n                // \n                if (auto_summary_start_id === undefined || auto_summary_start_id === null) {\n                  const last_message_id = getLastMessageId();\n                  insertOrAssignVariables({ auto_summary_start_id: last_message_id }, { type: 'chat' });\n                  console.log(` : ${last_message_id}`);\n                  window.toastr?.info(` ${last_message_id} `);\n                } else {\n                  console.log(` : ${auto_summary_start_id}`);\n                  window.toastr?.info(`: ${auto_summary_start_id}`);\n                }\n              } catch (error) {\n                console.error(' :', error);\n              }\n            }\n          },\n          { immediate: false },\n        );\n\n        // \n        $(window).on('pagehide', () => {\n          unwatch();\n        });\n      }\n\n      window.toastr.success('mzrodyu');\n    }, 200);\n  }, 100);\n});\n"],"names":["content","__esModule","default","module","id","locals","exports","add","y","x","__webpack_require__","d","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","push","Vue","___CSS_LOADER_EXPORT___","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","async","proxyFetch","url","tavernOrigin","window","location","origin","console","log","proxyResponse","fetch","method","headers","SillyTavern","getRequestHeaders","body","ok","proxyError","fetchAvailableModels","settings","api_endpoint","trim","baseUrl","modelsUrl","normalizeApiEndpoint","e","URL","possibleEndpoints","endsWith","errors","hasCorsError","response","Authorization","api_key","status","statusText","errorText","text","substring","contentType","get","includes","data","json","Array","isArray","models","model","name","errMsg","message","error","forEach","err","errorMessage","summarizeMessages","start_id","end_id","apiUrl","messages","msg","getChatMessages","summaryPrompt","max_tokens","role","temperature","top_p","presence_penalty","frequency_penalty","errorDetails","userFriendlyMessage","choices","z","warn","object","parse","def","string","number","boolean","array","schema","prefault","Settings","api_provider","auto_summarize_enabled","summarize_interval","start_message_id","end_message_id","table_start_message_id","table_end_message_id","summary_history","endpoint","path","trimmed","slice","useSettingsStore","defineStore","getScriptIdSafely","isLocalDebug","getVariables","script_id","saved","localStorage","getItem","ref","initSettings","setTimeout","realVariables","Object","keys","value","saveImmediately","new_settings","klona","setItem","insertOrAssignVariables","toastr","saveTimeout","watch","clearTimeout","immediate","deep","addEventListener","saveSettings","success","reloadSettings","useSummaryHistoryStore","addSummary","chat_id","chatHistory","chatData","unshift","getSummaryHistory","$","isAdding","addNavButton","possibleSelectors","topBar","foundSelector","selector","found","existingButton","targetContainer","settingsHolder","navButton","outerHTML","children","first","prepend","on","preventDefault","stopPropagation","panel","is","fadeOut","fadeIn","parentElement","className","setInterval","eventOn","tavern_events","CHAT_CHANGED","cssMapping","base64","sourceMapping","sfc","props","target","__vccOpts","key","val","copyToClipboard","successMessage","parent","textarea","style","position","opacity","select","execCommand","clipboard","writeText","getScriptIdSafe","globalScriptId","getScriptId","getChatIdSafe","getCurrentChatId","setGlobalScriptId","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","n","getter","a","definition","o","defineProperty","enumerable","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","common","save","cancel","confirm","delete","edit","refresh","search","loading","warning","clear","export","import","copy","paste","generate","preview","title","minimize","tabs","history","table","greetings","regex","state","projects","tools","mvu","help","provider","endpointPlaceholder","endpointHelp","apiKey","apiKeyPlaceholder","modelPlaceholder","fetchModels","saveConfig","maxTokens","maxTokensHelp","temperatureHelp","hiddenFloors","hiddenFloorsDesc","addFloor","floorIndex","floorIndexPlaceholder","removeFloor","columnTemplates","columnTemplatesDesc","templateName","templateNamePlaceholder","templateContent","templateContentPlaceholder","addTemplate","deleteTemplate","autoSummary","enableAutoSummary","summaryInterval","summaryIntervalPlaceholder","summaryIntervalHelp","currentStatus","chatId","lastSummaryFloor","nextSummaryFloor","resetStatus","manualSummary","configSaved","apiConfigSaved","fetchError","character","noCharacter","clearConfig","clearConfigConfirm","clearSuccess","helpContent","greetingBadge","icon","iconPlaceholder","titlePlaceholder","description","descriptionPlaceholder","generateWithAI","generating","stylePrompt","stylePromptPlaceholder","generateStyle","generatingStyle","copyCode","copySuccess","apiFailed","styleGenerated","descGenerated","htmlCode","regexConfig","triggerText","triggerTextPlaceholder","uiDescription","uiDescriptionPlaceholder","generateUI","generated","selectTemplate","noTemplate","floorNumber","floorNumberPlaceholder","generateTable","updateTable","deleteTable","clearHistory","tableHistory","noHistory","floorRange","startFloor","endFloor","summary","insertToChat","noSummary","createProject","importProject","projectName","projectList","noProjects","openEditor","deleteProject","exportProject","legacy","locale","fallbackLocale","pathname","startsWith","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","__name","show","placeholder","isGenerating","showInput","emits","setup","__props","emit","__emit","localInput","newVal","handleConfirm","handleClose","_ctx","_cache","onClick","class","$event","disabled","_hoisted_8","examples","isModifying","localInstruction","$emit","example","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","GreetingConfig","UIConfig","customHtml","settingsStore","storeToRefs","uiConfig","showCodeDialog","generatedCode","copyButtonText","showAiGenerateDialog","showAiEditDialog","isGeneratingAi","isEditingAi","currentEditingIndex","showHelp","previewHtml","currentCharacter","showOriginalDialog","originalGreetingContent","showAiStyleDialog","isGeneratingStyle","getCurrentCharacter","char","getCharData","loadConfig","allGreetings","first_mes","alternate_greetings","savedConfig","configs","greetings_config","savedUIConfig","ui_config","_","updatePreview","replaceVariables","clearAllConfig","closeAiGenerateDialog","confirmEditDescription","requirement","currentDesc","systemPrompt","userPrompt","result","aiDescription","replace","errorMsg","generateStyleWithAI","styleDescription","cards","g","desc","String","padStart","generatedHtml","timeOut","generateFrontendCode","fixedHtmlCode","closeCodeDialog","characterName","cardsHtml","possiblePatterns","pattern","match","bodyPattern","openPreviewInNewWindow","windowTitle","newWindow","open","write","close","downloadAsJson","stscriptJson","crypto","randomUUID","scriptName","runOnEdit","findRegex","replaceString","trimStrings","placement","substituteRegex","minDepth","maxDepth","markdownOnly","promptOnly","jsonString","blob","Blob","createObjectURL","link","href","download","click","revokeObjectURL","onMounted","color","borderColor","onMouseenter","currentTarget","transform","onMouseleave","greeting","maxlength","onInput","idx","greetingContent","boxShadow","background","srcdoc","sandbox","AIGenerateDialog","onClose","onConfirm","AIModifyDialog","expandedSections","usage","changelog","borderLeft","expanded","structure","prompt","toggleExpanded","aiStructurePrompt","isGeneratingAI","aiPromptDescription","isGeneratingPrompt","originalStructurePrompt","originalPromptDescription","showStructureModifyDialog","isModifyingStructure","showPromptModifyDialog","isModifyingPrompt","varName","subFields","generatedStructure","variableCategories","generatedPrompt","then","generateStructure","$meta","extensible","strictSet","lines","split","l","line","s","parseSubFields","copyGenerated","handleAIGenerateStructure","responseText","errorData","jsonText","jsonMatch","parsed","bracketCount","inString","escapeNext","lastValidPos","repeat","varNameParsed","find","varData","fields","autoGeneratePrompt","fieldCount","generatePrompt","promptSection","scrollIntoView","behavior","block","promptTemplate","copyPrompt","handleAIGeneratePrompt","responseText2","modifyStructureWithAI","modifyInstruction","info","modifyPromptWithAI","exportWorldbook","worldbookEntries","uid","generateUID","keysecondary","comment","constant","vectorized","selective","selectiveLogic","addMemo","order","disable","excludeRecursion","delayUntilRecursion","probability","useProbability","depth","group","groupOverride","groupWeight","scanDepth","caseSensitive","matchWholeWords","useGroupScoring","automationId","sticky","cooldown","delay","jsonStr","exportAsWorldbook","Date","now","Math","floor","random","scriptId","savedData","mvu_beta_config","loadSavedData","saveTimer","saveData","rows","onFocus","onBlur","cursor","initialMessage","cancellable","expose","__expose","progress","currentMessage","details","startTime","elapsedSeconds","elapsedInterval","clearInterval","onUnmounted","setProgress","percent","min","max","setMessage","addDetail","detail","detailsArea","scrollTop","scrollHeight","clearDetails","complete","width","height","transition","round","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","currentId","currentFile","code","showAI","aiPrompt","aiGenerating","enableStream","streamingText","showComparison","aiChanges","previewMode","showHistory","aiHistory","quickSuggestions","showProgress","progressDialogRef","showProjectTemplate","showBugFix","bugDescription","consoleError","bugFile","folderInputRef","currentProject","computed","p","currentProjectHistory","comparisonPreviewHtml","proj","buildPreviewFromFiles","files","f","change","c","newContent","oldContent","projectTemplates","showProjectTemplateDialog","createProjectFromTemplate","templateKey","template","newProj","entries","filename","saveToChatVar","triggerFolderImport","handleFolderImport","event","firstFile","folderName","webkitRelativePath","supportedExtensions","projectFiles","fileReadPromises","file","relativePath","extension","pop","readPromise","Promise","resolve","reject","reader","FileReader","onload","fileName","onerror","readAsText","all","htmlContent","saveCode","autoSaveTimer","createNewFolder","folderPath","trimmedPath","gitkeepPath","some","newFile","showNewFileDialog","folders","Set","folderList","from","sort","fileTypes","ext","typeOptions","t","typeChoice","typeIndex","parseInt","selectedType","targetFolder","folderOptions","folderChoice","folderIndex","trimmedName","fullPath","defaultContent","getFileIcon","htmlFile","cssFile","jsFile","html","headTag","bodyTag","headMatch","RegExp","bodyMatch","headContent","bodyContent","scriptTagRegex","scriptTag","styleTag","dataToSave","frontend_projects_files","frontend_ai_history","verify","loadFromChatVar","watchEffect","previewTimer","showAIDialog","closeAIDialog","showBugFixDialog","closeBugFixDialog","fixBugWithAI","normalizedEndpoint","vars","apiEndpoint","resultText","fileRegex","changes","exec","existingFile","timestamp","toISOString","phrase","stream","getReader","decoder","TextDecoder","chunkCount","done","read","decode","delta","needMoreInfoMatch","guideContent","alert","acceptChanges","historyRecord","rejectChanges","showHistoryDialog","closeHistoryDialog","exportToRegex","fileObj","triggerWord","fullHtml","uuid","cleanHtml","regexJson","dataStr","dataBlob","openInNewWindow","onBeforeUnmount","ref_key","webkitdirectory","directory","multiple","onChange","padding","marginBottom","borderRadius","display","justifyContent","alignItems","fontSize","filePath","toUpperCase","suggestion","border","record","toLocaleString","ProgressDialog","triggerKeyword","interfaceDescription","generatedRegex","showCode","showModify","previewFrame","doctypeMatch","htmlMatch","showModifyDialog","modifyWithAI","copyRegex","summaryHistoryStore","api","tableGeneration","messageManagement","toggleSection","section","available_models","loading_models","hide_range","hidden_messages","hidden_display_expanded","is_summarizing","is_generating_table","headerTemplates","selectedTemplate","currentTemplate","saveGenerationStatus","stopGeneration","saveHeaderTemplates","header_templates","loadTemplate","showAddTemplateDialog","saveTemplate","splice","loadHiddenMessages","possibleFields","field","saveHiddenMessages","initApiProvider","templates","loadHeaderTemplates","scriptVars","summarizing","generating_table","loadGenerationStatus","handleSaveSettings","handleReloadSettings","handleResetAutoSummaryStart","resetAutoSummaryStart","handleProviderChange","providerEndpoints","openai","gemini","handleSaveApiConfig","handle_fetch_models","handle_test_connection","reply","modelUsed","handle_summarize","last_summary","dispatchEvent","CustomEvent","handle_generate_table","headersInput","h","chatMessages","messageRange","hide_state","messagesText","aiResponse","aiTableData","parseError","tableData","table_history","handle_create_table","emptyTableData","handle_hide_messages","ranges","range","messageIds","start","end","Number","lastMessageId","getLastMessageId","hiddenCount","messagesToHide","messageId","message_id","is_hidden","triggerSlash","handle_show_messages","isNaN","parseMessageRange","messagesToShow","shownCount","hiddenMsg","onmouseover","onmouseout","step","backgroundColor","showToast","validHiddenMessages","removedCount","handle_refresh_hidden","findIndex","handle_unhide_single","simple","label","abo","config","originalAiPrompt","showAiModifyDialog","isModifyingAi","showIconPickerFor","originalXmlInput","showXmlModifyDialog","isModifyingXml","originalFieldDescription","showFieldModifyDialog","isModifyingField","showXmlDialog","xmlInput","isParsingXml","showAiFieldDialog","aiFieldDescription","isGeneratingFields","iconList","worldbookContent","fieldDefinitions","iconDesc","formatExample","exampleOutput","normalizedRegex","exampleLines","fieldIndex","allCaptures","totalCount","perLine","offset","count","segmentFields","placeholders","parseRegexStructure","previewContent","exampleValue","addField","showXmlParseDialog","showAiFieldGeneratorDialog","parseXmlWithAI","parsedFields","validFields","extendedTimeOut","closeButton","modifyXmlWithAI","generateFieldsWithAI","modifyFieldWithAI","generateFromFields","totalFields","ceil","firstHalf","fieldsHtml","jsContent","addFieldInDialog","currentFiles","FILE_START_REGEX","matches","matchAll","normalizedPath","sanitizeFileContent","uniqueFiles","Map","set","values","generatedFiles","m","missingFiles","copyWorldbook","raw","fenceMatch","docstringMatch","exportRegex","regexPattern","existingCaptureGroups","fill","cleanReplaceString","statusbar_generator_config","loadSavedConfig","fontWeight","innerHTML","iconClass","textAlign","historyStore","expandedState","refreshSummaryHistory","isExpanded","handleRefreshData","tryParentWindowCopy","parentDoc","parentBody","focus","setSelectionRange","execCommandCopy","left","top","pointerEvents","showManualCopyDialog","existingOverlay","getElementById","overlay","container","header","buttonContainer","textContent","copyButton","onclick","handleKeyDown","removeEventListener","copySummary","isSecureContext","clipboardErr","createSummaryWorldbook","charError","worldbookName","getWorldbookNames","createWorldbook","rebindChatWorldbook","bindError","promptForWorldbook","worldbookNames","dialog","append","selected","showDebugPanel","button","btn","outputArea","output","testCompleteAutoSummary","syncAutoSummaryData","checkCurrentFloor","testFloorCalculation","checkAutoSummaryStatus","smartResetChat","current","summaryIndex","selectedWorldbook","newEntry","toLocaleDateString","enabled","strategy","keys_secondary","logic","scan_depth","insertion_order","case_sensitive","name_is_regex","keys_are_regex","selective_logic","secondary_keys_logic","activation_threshold","local_id","depth_entries","depth_entries_all","search_range","force_activation","exclude_recursion","hidden","priority","comment_is_regex","content_is_regex","secondary_keys_are_regex","keys_secondary_are_regex","createWorldbookEntries","tableExpandedState","isTableExpanded","copyTable","tableItem","row","chat_vars","refreshTableHistory","rowIdx","cell","cellIdx","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_98","_hoisted_99","_hoisted_100","_hoisted_101","_hoisted_102","_hoisted_103","_hoisted_104","_hoisted_105","_hoisted_106","_hoisted_107","_hoisted_108","_hoisted_109","_hoisted_110","_hoisted_111","_hoisted_112","_hoisted_113","_hoisted_114","_hoisted_115","_hoisted_116","_hoisted_117","_hoisted_118","_hoisted_119","_hoisted_120","_hoisted_121","_hoisted_122","_hoisted_123","_hoisted_124","_hoisted_125","_hoisted_126","toolExpandedState","antiClicheInput","antiClicheOutput","isProcessingAntiCliche","enableAntiClicheStreaming","antiClicheProgressPercent","antiClicheModifyRequest","isModifyingAntiCliche","characterDescription","characterCardOutput","isGeneratingCharacter","modifyRequest","isModifyingCharacter","enableCharacterStreaming","characterProgressPercent","worldbookDescription","worldbookEntryOutput","isGeneratingWorldbook","availableWorldbooks","isInsertingEntry","worldbookModifyRequest","isModifyingWorldbook","enableWorldbookStreaming","worldbookProgressPercent","selectedViewerWorldbook","viewerSearchQuery","viewerSortBy","entryExpandedState","showEditDialog","editingEntry","editingEntryUid","isDataLoaded","saveToolsDataImmediate","tools_antiCliche","input","enableStreaming","tools_characterCard","tools_worldbookEntry","tools_worldbookViewer","searchQuery","sortBy","tools_expandedState","fromEntries","antiCliche_input_length","antiCliche_output_length","character_desc_length","character_output_length","saveToolsData","debounce","loadWorldbookEntries","loadToolsData","loadAvailableWorldbooks","toggleToolExpanded","toolName","isToolExpanded","handleAntiClicheProcess","requestPayload","generatedText","generateWithStreaming","copyAntiClicheResult","handleModifyAntiCliche","modifiedText","clearAntiClicheModifyRequest","handleGenerateCharacterCard","clearCharacterForm","copyCharacterCard","clearAntiClicheForm","handleModifyCharacterCard","modifiedCard","clearModifyRequest","progressRef","buffer","processLine","payloadText","payloadJson","deltaText","chunk","readerDone","handleGenerateWorldbookEntry","parsedEntry","clearWorldbookForm","handleInsertEntry","render","copyWorldbookEntry","handleModifyWorldbookEntry","clearWorldbookModifyRequest","worldbook","getWorldbook","filteredWorldbookEntries","query","entry","nameMatch","contentMatch","keysMatch","isEntryExpanded","saveEditedEntry","updatedWorldbook","updateWorldbookWith","entryIndex","backgroundSize","animation","toFixed","wb","ki","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","deleteWorldbookEntries","for","checked","currentLocale","activeTab","componentMap","SettingsTab","SummaryTab","TableTab","GreetingsTab","StatusBarGenerator","RegexUIGenerator","project","ProjectManager","ToolsTab","MvuBetaTab","HelpTab","currentComponent","componentProps","toggleLanguage","newLocale","minimizePanel","isMobile","innerWidth","hover","draggable","containment","scroll","stop","createMinimizeIcon","hide","minimizeMemoryPanel","closePanel","tab","flex","gap","borderBottom","borderBottomColor","tabKey","MainPanel","responsiveCSS","existingPanel","panelContainer","app","createApp","use","createPinia","mount","__vue_app__","stack","CHARACTER_MESSAGE_RENDERED","store","summary_interval","has_api_key","last_message_id","current_chat_id","auto_summary_start_id","chatVars","auto_summary_start_id_key","has_start_id","existing_start_id","existingSummaries","lastSummaryEnd","relative_position","should_trigger","calculation","expected_trigger_at_floor","will_summarize_range","floor_explanation","new_start_id","catch","checkAutoSummarize","chat_file_name","unwatch","newValue","oldValue"],"sourceRoot":""}