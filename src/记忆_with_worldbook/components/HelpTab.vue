<template>
  <div class="help-tab" style="padding: 25px !important; background: #1a1a1a !important">
    <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
    <div
      style="
        padding: 20px 28px;
        background: linear-gradient(
          135deg,
          rgba(30, 30, 30, 0.95) 0%,
          rgba(38, 38, 38, 0.9) 50%,
          rgba(30, 30, 30, 0.95) 100%
        );
        backdrop-filter: blur(12px);
        border-radius: 14px;
        margin-bottom: 20px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow:
          0 3px 12px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.04),
          inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        text-align: center;
      "
    >
      <div style="font-size: 48px; margin-bottom: 10px">ğŸ±</div>
      <h2 style="margin: 0 0 10px 0; color: #4a9eff; font-size: 24px; font-weight: 600">mzrodyuçŒ«çŒ«çš„å°ç ´çƒ‚</h2>
      <div style="color: #888; font-size: 14px; margin-bottom: 15px">ç‰ˆæœ¬ v1.34</div>

      <!-- æŒ‰é’®ç»„ -->
      <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap">
        <button
          @click="checkUpdate"
          style="
            padding: 8px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
          "
          @mouseenter="
            $event.target.style.transform = 'translateY(-2px)';
            $event.target.style.boxShadow = '0 4px 12px rgba(102, 126, 234, 0.4)';
          "
          @mouseleave="
            $event.target.style.transform = 'translateY(0)';
            $event.target.style.boxShadow = '0 2px 8px rgba(102, 126, 234, 0.3)';
          "
        >
          <i class="fa-solid fa-rotate" style="margin-right: 6px"></i>
          æ£€æŸ¥æ›´æ–°
        </button>

        <button
          @click="downloadLatest"
          style="
            padding: 8px 20px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
          "
          @mouseenter="
            $event.target.style.transform = 'translateY(-2px)';
            $event.target.style.boxShadow = '0 4px 12px rgba(40, 167, 69, 0.4)';
          "
          @mouseleave="
            $event.target.style.transform = 'translateY(0)';
            $event.target.style.boxShadow = '0 2px 8px rgba(40, 167, 69, 0.3)';
          "
        >
          <i class="fa-solid fa-download" style="margin-right: 6px"></i>
          ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
        </button>
      </div>

      <!-- ç‰ˆæƒå£°æ˜ -->
      <div
        style="
          margin-top: 20px;
          padding: 15px 20px;
          background: rgba(220, 53, 69, 0.1);
          border: 1px solid rgba(220, 53, 69, 0.3);
          border-radius: 8px;
          text-align: left;
        "
      >
        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 10px">
          <i class="fa-solid fa-shield-halved" style="color: #dc3545; font-size: 16px"></i>
          <span style="color: #dc3545; font-weight: 600; font-size: 14px">ç‰ˆæƒå£°æ˜</span>
        </div>
        <div style="color: #e0e0e0; font-size: 13px; line-height: 1.6">
          <div style="margin-bottom: 5px">ğŸ“Œ æœ¬è„šæœ¬ä»…å‘å¸ƒåœ¨<strong style="color: #ffc107">ç±»è„‘/æ—…ç¨‹</strong></div>
          <div style="margin-bottom: 5px">ğŸš« <strong style="color: #dc3545">ç¦æ­¢äºŒä¼ </strong></div>
          <div style="margin-bottom: 5px">âš ï¸ äºŒæ”¹éœ€è¦è·å¾—ä½œè€…å…è®¸</div>
          <div>âŒ <strong style="color: #dc3545">å•†ä¸šåŒ–ç»å¯¹ç¦æ­¢</strong></div>
        </div>
      </div>
    </div>

    <!-- ä½¿ç”¨è¯´æ˜ -->
    <div
      style="
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 20px 28px;
        background: linear-gradient(
          135deg,
          rgba(30, 30, 30, 0.95) 0%,
          rgba(38, 38, 38, 0.9) 50%,
          rgba(30, 30, 30, 0.95) 100%
        );
        backdrop-filter: blur(12px);
        border-radius: 14px;
        margin-bottom: 20px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow:
          0 3px 12px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.04),
          inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      "
      @click="expandedSections.usage = !expandedSections.usage"
      @mouseenter="
        ($event.currentTarget as HTMLElement).style.background =
          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';
        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';
        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';
      "
      @mouseleave="
        ($event.currentTarget as HTMLElement).style.background =
          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';
        ($event.currentTarget as HTMLElement).style.transform = 'none';
        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';
      "
    >
      <h3
        style="
          position: relative;
          z-index: 1;
          display: flex;
          align-items: center;
          gap: 12px;
          margin: 0;
          color: #fff;
          font-size: 16px;
          font-weight: 600;
          letter-spacing: 0.5px;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        "
      >
        <i class="fa-solid fa-book-open" style="color: #4a9eff; font-size: 18px"></i>
        ä½¿ç”¨è¯´æ˜
      </h3>
      <i
        :class="expandedSections.usage ? 'fa-chevron-up' : 'fa-chevron-down'"
        class="fa-solid"
        style="color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s"
      ></i>
    </div>

    <div v-show="expandedSections.usage" style="padding: 0 10px 20px 10px">
      <div
        style="
          background: #2a2a2a;
          border: 1px solid #3a3a3a;
          border-radius: 8px;
          padding: 20px;
          color: #e0e0e0;
          line-height: 1.8;
        "
      >
        <h4 style="color: #4a9eff; margin-top: 0; margin-bottom: 15px; font-size: 16px">ğŸ“‹ åŠŸèƒ½ç®€ä»‹</h4>
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><strong>æ€»ç»“ï¼š</strong>è‡ªåŠ¨/æ‰‹åŠ¨æ€»ç»“å¯¹è¯ï¼Œå­˜å…¥ä¸–ç•Œä¹¦</li>
          <li><strong>å†™å¡è¾…åŠ©ï¼š</strong>ç”Ÿæˆè§’è‰²å¡ã€ä¸–ç•Œä¹¦æ¡ç›®ï¼Œæ”¯æŒæµå¼ä¼ è¾“å’Œ AI ä¿®æ”¹</li>
          <li><strong>çŠ¶æ€æ ç”Ÿæˆï¼š</strong>å¯è§†åŒ–é…ç½®çŠ¶æ€æ ï¼Œç”Ÿæˆæ­£åˆ™ JSON å’Œä¸–ç•Œä¹¦æ¡ç›®</li>
          <li><strong>MVU Betaï¼š</strong>ç”Ÿæˆå˜é‡ç»“æ„ã€æç¤ºè¯æ¨¡æ¿ã€$meta é…ç½®</li>
          <li><strong>å…¶ä»–ï¼š</strong>å»å…«è‚¡ã€æ­£åˆ™ç•Œé¢ç”Ÿæˆã€å‰ç«¯é¡¹ç›®ç®¡ç†ã€è¡¨æ ¼ç”Ÿæˆ</li>
        </ul>

        <h4 style="color: #4a9eff; margin-top: 25px; margin-bottom: 15px; font-size: 16px">ğŸ’¡ ä½¿ç”¨æ–¹æ³•</h4>
        <div
          style="
            margin-bottom: 15px;
            padding: 12px 15px;
            background: rgba(220, 53, 69, 0.1);
            border-left: 3px solid #dc3545;
            border-radius: 4px;
          "
        >
          <div style="color: #dc3545; font-weight: 600; margin-bottom: 8px">âš ï¸ API é…ç½®</div>
          <div style="font-size: 13px; color: #e0e0e0; line-height: 1.6">
            <div style="margin-bottom: 8px">
              <strong>æ”¯æŒçš„æ ¼å¼ï¼š</strong>
              <ul style="margin: 5px 0; padding-left: 20px">
                <li><code>https://api.openai.com</code> â†’ è‡ªåŠ¨è¡¥å…¨ä¸º <code>/v1</code></li>
                <li><code>https://api.openai.com/v1</code> â†’ ç›´æ¥ä½¿ç”¨</li>
                <li><code>https://your-proxy.com/v1/chat/completions</code> â†’ ç›´æ¥ä½¿ç”¨</li>
              </ul>
            </div>
            <div style="margin-bottom: 5px">
              <strong>OpenAI å®˜æ–¹ç¤ºä¾‹ï¼š</strong
              ><code style="background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px"
                >https://api.openai.com</code
              >
            </div>
            <div>
              <strong>Gemini AI Studioï¼š</strong
              ><code style="background: rgba(220, 53, 69, 0.2); padding: 2px 6px; border-radius: 4px"
                >https://generativelanguage.googleapis.com/v1beta/openai/</code
              >
            </div>
          </div>
        </div>
        <ul style="margin: 5px 0; padding-left: 20px">
          <li><strong>å¯¼å…¥ï¼š</strong>é…’é¦†åŠ©æ‰‹ â†’ è„šæœ¬åº“ â†’ å¯¼å…¥ â†’ å…¨å±€è„šæœ¬</li>
          <li><strong>é¦–æ¬¡ä½¿ç”¨ï¼š</strong>å…ˆå»"è®¾ç½®"é¡µé…ç½® API</li>
          <li><strong>è‡ªåŠ¨æ€»ç»“ï¼š</strong>å»ºè®®å¼€å¯ï¼Œæ¯ 20-30 æ¥¼è‡ªåŠ¨ç”Ÿæˆä¸€æ¬¡</li>
        </ul>
      </div>
    </div>

    <!-- æ›´æ–°æ—¥å¿— -->
    <div
      style="
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 20px 28px;
        background: linear-gradient(
          135deg,
          rgba(30, 30, 30, 0.95) 0%,
          rgba(38, 38, 38, 0.9) 50%,
          rgba(30, 30, 30, 0.95) 100%
        );
        backdrop-filter: blur(12px);
        border-radius: 14px;
        margin-bottom: 20px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        box-shadow:
          0 3px 12px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.04),
          inset 0 -1px 0 rgba(0, 0, 0, 0.2);
        position: relative;
        overflow: hidden;
        transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      "
      @click="expandedSections.changelog = !expandedSections.changelog"
      @mouseenter="
        ($event.currentTarget as HTMLElement).style.background =
          'linear-gradient(135deg, rgba(42, 42, 42, 0.98) 0%, rgba(50, 50, 50, 0.95) 50%, rgba(42, 42, 42, 0.98) 100%)';
        ($event.currentTarget as HTMLElement).style.transform = 'translateX(4px) scale(1.005)';
        ($event.currentTarget as HTMLElement).style.borderLeft = '3px solid rgba(255, 193, 7, 0.6)';
      "
      @mouseleave="
        ($event.currentTarget as HTMLElement).style.background =
          'linear-gradient(135deg, rgba(30, 30, 30, 0.95) 0%, rgba(38, 38, 38, 0.9) 50%, rgba(30, 30, 30, 0.95) 100%)';
        ($event.currentTarget as HTMLElement).style.transform = 'none';
        ($event.currentTarget as HTMLElement).style.borderLeft = '1px solid rgba(255, 255, 255, 0.06)';
      "
    >
      <h3
        style="
          position: relative;
          z-index: 1;
          display: flex;
          align-items: center;
          gap: 12px;
          margin: 0;
          color: #fff;
          font-size: 16px;
          font-weight: 600;
          letter-spacing: 0.5px;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        "
      >
        <i class="fa-solid fa-clock-rotate-left" style="color: #28a745; font-size: 18px"></i>
        æ›´æ–°æ—¥å¿—
      </h3>
      <i
        :class="expandedSections.changelog ? 'fa-chevron-up' : 'fa-chevron-down'"
        class="fa-solid"
        style="color: rgba(255, 255, 255, 0.6); font-size: 14px; transition: transform 0.3s"
      ></i>
    </div>

    <div v-show="expandedSections.changelog" style="padding: 0 10px 20px 10px">
      <div
        style="
          background: #2a2a2a;
          border: 1px solid #3a3a3a;
          border-radius: 8px;
          padding: 20px;
          color: #e0e0e0;
          line-height: 1.8;
        "
      >
        <!-- v1.34 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.34</span
            >
            <span style="color: #888; font-size: 13px">2025-11-07</span>
          </div>
          <ul class="update-list">
            <li class="update-item">ğŸŒ æ–°å¢ï¼šå¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡/è‹±æ–‡åˆ‡æ¢ï¼‰</li>
            <li class="update-item">ğŸ› ä¿®å¤ï¼švue-i18n åˆå§‹åŒ–é”™è¯¯</li>
            <li class="update-item">ğŸ“± ä¼˜åŒ–ï¼šç§»åŠ¨ç«¯å®Œæ•´å“åº”å¼é€‚é…</li>
            <li class="update-item">ğŸ”§ ä¼˜åŒ–ï¼šä½¿ç”¨ testingcf.jsdelivr.net åŠ é€Ÿè®¿é—®</li>
          </ul>
        </div>

        <!-- v1.33 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #64748b 0%, #475569 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.33</span
            >
            <span style="color: #888; font-size: 13px">2025-11-06</span>
          </div>
          <ul class="update-list">
            <li class="update-item">æ–°å¢ï¼šå¼€åœºç™½ç¾åŒ–é€‰æ‹©å™¨å·¥å…·</li>
            <li class="update-item">è‡ªåŠ¨è¯»å–è§’è‰²å¡çš„æ‰€æœ‰å¼€åœºç™½</li>
            <li class="update-item">ä¸ºæ¯ä¸ªå¼€åœºç™½é…ç½®ç¾åŒ–æ ·å¼ï¼ˆå›¾æ ‡ã€æ ‡é¢˜ã€æè¿°ï¼‰</li>
            <li class="update-item">AI ç”Ÿæˆæè¿°ï¼šæ ¹æ®å¼€åœºç™½åŸæ–‡å†…å®¹è‡ªåŠ¨ç”Ÿæˆå¸å¼•äººçš„æè¿°</li>
            <li class="update-item">AI ç¼–è¾‘æè¿°ï¼šæ ¹æ®éœ€æ±‚å¿«é€Ÿä¿®æ”¹æè¿°</li>
            <li class="update-item">â­ AI ç”Ÿæˆç•Œé¢æ ·å¼ï¼šç›´æ¥å‘Šè¯‰AIä½ æƒ³è¦ä»€ä¹ˆé£æ ¼ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´HTMLç•Œé¢</li>
            <li class="update-item">å®æ—¶é¢„è§ˆç”Ÿæˆçš„ç¾åŒ–ç•Œé¢æ ·å¼æ•ˆæœ</li>
            <li class="update-item">ä¸€é”®å¯¼å‡ºä¸º STScript JSON æ ¼å¼</li>
            <li class="update-item">é…ç½®è‡ªåŠ¨ä¿å­˜åˆ°è§’è‰²å¡å˜é‡</li>
          </ul>
        </div>

        <!-- v1.32 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.32</span
            >
            <span style="color: #888; font-size: 13px">2025-11-06</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #6366f1; font-weight: 600; margin-bottom: 8px">ğŸ”§ ä¼˜åŒ–</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æœ€å°åŒ–å›¾æ ‡æ”¯æŒæ‹–åŠ¨ï¼Œå¯éšæ„è°ƒæ•´ä½ç½®</li>
            </ul>
          </div>
        </div>

        <!-- v1.31 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #64748b 0%, #475569 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.31</span
            >
            <span style="color: #888; font-size: 13px">2025-11-05</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #10b981; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>åŒå±‚å¯¹è¯ï¼šAI å›å¤ç›´æ¥æ˜¾ç¤ºåœ¨é¢æ¿å†…ï¼Œæ”¯æŒæµå¼ä¼ è¾“å’Œæ­£åˆ™è¿‡æ»¤</li>
              <li>çŠ¶æ€æ ç”Ÿæˆå™¨æ–°å¢ AI è§£æ XML å’Œè‡ªç„¶è¯­è¨€ç”Ÿæˆå­—æ®µåŠŸèƒ½</li>
            </ul>
          </div>
          <div style="margin-bottom: 15px">
            <div style="color: #6366f1; font-weight: 600; margin-bottom: 8px">ğŸ”§ ä¼˜åŒ–</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>å®Œæ•´çš„ç§»åŠ¨ç«¯é€‚é…ï¼šå“åº”å¼å¸ƒå±€ã€æ ‡ç­¾æ æ»šåŠ¨ã€æ»‘åŠ¨åˆ‡æ¢</li>
              <li>æ‰€æœ‰ AI åŠŸèƒ½ç»Ÿä¸€ä½¿ç”¨è®¾ç½®é¡µçš„ API é…ç½®</li>
            </ul>
          </div>
        </div>

        <!-- v1.27 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #64748b 0%, #475569 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.27</span
            >
            <span style="color: #888; font-size: 13px">2025-11-05</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #10b981; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æ–°å¢ MVU Beta æ ‡ç­¾é¡µï¼šå˜é‡ç»“æ„ã€æç¤ºè¯æ¨¡æ¿ã€$meta é…ç½®ç”Ÿæˆ</li>
              <li>æ–°å¢çŠ¶æ€æ ç”Ÿæˆå™¨ï¼šå¯è§†åŒ–é…ç½®çŠ¶æ€æ ï¼Œç”Ÿæˆæ­£åˆ™ JSON å’Œä¸–ç•Œä¹¦æ¡ç›®</li>
              <li>çŠ¶æ€æ ç”Ÿæˆå™¨æ”¯æŒ ABO æ¨¡æ¿å¿«é€ŸåŠ è½½</li>
            </ul>
          </div>
          <div style="margin-bottom: 15px">
            <div style="color: #6366f1; font-weight: 600; margin-bottom: 8px">ğŸ”§ ä¼˜åŒ–</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æ‰€æœ‰ AI å·¥å…·ç»Ÿä¸€ä»è®¾ç½®é¡µè¯»å– max_tokens å’Œ temperature</li>
              <li>MVU Beta å’ŒçŠ¶æ€æ ç”Ÿæˆå™¨æ”¯æŒæ•°æ®æŒä¹…åŒ–</li>
            </ul>
          </div>
        </div>

        <!-- v1.26 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #64748b 0%, #475569 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.26</span
            >
            <span style="color: #888; font-size: 13px">2025-11-02</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #10b981; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æ–°å¢çŠ¶æ€æ ç”Ÿæˆå™¨</li>
            </ul>
          </div>
        </div>

        <!-- v1.23 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.23</span
            >
            <span style="color: #888; font-size: 13px">2025-11-02</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #10b981; font-weight: 600; margin-bottom: 8px">ğŸ‰ é‡å¤§æ›´æ–°</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>å‰ç«¯é¡¹ç›®ç®¡ç†å™¨ AI é¢„è§ˆåŠŸèƒ½ï¼šç”Ÿæˆä»£ç åå…ˆé¢„è§ˆå¯¹æ¯”ï¼Œç¡®è®¤åå†åº”ç”¨</li>
              <li>ä¿®æ”¹å†å²è®°å½•å’Œç‰ˆæœ¬å›æ»šï¼šæœ€å¤šä¿ç•™ 50 æ¡å†å²ï¼Œå¯æ¢å¤åˆ°ä»»æ„ç‰ˆæœ¬</li>
              <li>åå…«è‚¡å·¥å…·ä¼˜åŒ–ï¼šé€‚åº¦æ¸…ç†ï¼Œä¿æŒåŸæ–‡ä¿¡æ¯é‡å’Œé•¿åº¦</li>
            </ul>
          </div>
        </div>

        <!-- v1.15 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.15</span
            >
            <span style="color: #888; font-size: 13px">2025-10-31</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #28a745; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æµå¼ä¼ è¾“æ”¯æŒï¼šæ‰€æœ‰ AI ç”Ÿæˆå·¥å…·æ”¯æŒå®æ—¶æŸ¥çœ‹ç”Ÿæˆè¿›åº¦</li>
              <li>æ­£åˆ™ç•Œé¢ç”Ÿæˆå™¨ï¼šç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆé…’é¦†å‰ç«¯ç•Œé¢ä»£ç </li>
              <li>ä¸–ç•Œä¹¦æ¡ç›®æŸ¥çœ‹å™¨å’Œ AI ä¿®æ”¹åŠŸèƒ½</li>
            </ul>
          </div>
        </div>

        <!-- v1.2 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.2</span
            >
            <span style="color: #888; font-size: 13px">2025-10-30</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #28a745; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>å‰ç«¯é¡¹ç›®ç®¡ç†å™¨ï¼šå®Œæ•´å‰ç«¯ç³»ç»Ÿç¼–å†™ï¼Œæ”¯æŒå¤šæ–‡ä»¶ã€å¤šæ¨¡å—ã€AI ç»­å†™</li>
              <li>å®æ—¶é¢„è§ˆã€é¡¹ç›®æ¨¡æ¿ã€é¡¹ç›®æŒä¹…åŒ–</li>
            </ul>
          </div>
        </div>

        <!-- v1.05 -->
        <div style="margin-bottom: 25px">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: #4a9eff;
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.05</span
            >
            <span style="color: #888; font-size: 13px">2025-10-30</span>
          </div>

          <div style="margin-bottom: 15px">
            <div style="color: #28a745; font-weight: 600; margin-bottom: 8px">âœ¨ æ–°åŠŸèƒ½</div>
            <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
              <li>æ‰¹é‡ä¿®æ”¹ä¸–ç•Œä¹¦æ¡ç›®ã€åå…«è‚¡å†å²è®°å½•ã€å¸®åŠ©é¡µé¢</li>
            </ul>
          </div>
        </div>

        <!-- v1.00 -->
        <div>
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 12px;
              padding-bottom: 8px;
              border-bottom: 1px solid #3a3a3a;
            "
          >
            <span
              style="
                background: #888;
                color: white;
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 13px;
                font-weight: 600;
              "
              >v1.00</span
            >
            <span style="color: #888; font-size: 13px">2025-10-29</span>
          </div>

          <ul style="margin: 5px 0; padding-left: 20px; font-size: 14px">
            <li>ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ</li>
            <li>æ”¯æŒè‡ªåŠ¨/æ‰‹åŠ¨æ€»ç»“ã€è¡¨æ ¼ç”Ÿæˆã€åå…«è‚¡ã€ä¸–ç•Œä¹¦æ¡ç›®ç®¡ç†ã€æ¥¼å±‚éšè—/æ˜¾ç¤º</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- å…³äº -->
    <div
      style="
        padding: 15px 20px;
        background: rgba(30, 30, 30, 0.5);
        border: 1px solid #3a3a3a;
        border-radius: 8px;
        text-align: center;
        color: #888;
        font-size: 13px;
      "
    >
      <div style="margin-bottom: 8px">Made with <span style="color: #dc3545">â¤ï¸</span> by mzrodyu</div>
      <div style="font-size: 12px">
        åŸºäº
        <a
          href="https://github.com/SillyTavern/SillyTavern"
          target="_blank"
          style="color: #4a9eff; text-decoration: none"
          >SillyTavern</a
        >
        å’Œ
        <a
          href="https://n0vi028.github.io/JS-Slash-Runner-Doc/"
          target="_blank"
          style="color: #4a9eff; text-decoration: none"
          >Tavern Helper</a
        >
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { checkForUpdates } from '../version-checker';

// æŠ˜å å±•å¼€çŠ¶æ€
const expandedSections = ref({
  usage: false,
  changelog: false,
});

// æ£€æŸ¥æ›´æ–°
const checkUpdate = () => {
  checkForUpdates(true);
};

// ä¸‹è½½æœ€æ–°ç‰ˆæœ¬
const downloadLatest = async () => {
  try {
    window.toastr.info('æ­£åœ¨è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯...', 'ä¸‹è½½ä¸­', { timeOut: 2000 });

    // 1. è·å–æœ€æ–°ç‰ˆæœ¬å·
    const timestamp = Date.now();
    const versionResponse = await fetch(
      `https://testingcf.jsdelivr.net/gh/mzrodyu/maomao/dist/è®°å¿†_with_worldbook/version.json?_=${timestamp}`,
    );

    if (!versionResponse.ok) {
      throw new Error('æ— æ³•è·å–ç‰ˆæœ¬ä¿¡æ¯');
    }

    const versionInfo = await versionResponse.json();
    const version = versionInfo.version;

    window.toastr.info(`æ­£åœ¨ä¸‹è½½ v${version}...`, 'ä¸‹è½½ä¸­', { timeOut: 2000 });

    // 2. ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ JSON æ–‡ä»¶
    const jsonUrl = `https://testingcf.jsdelivr.net/gh/mzrodyu/maomao/dist/è®°å¿†_with_worldbook/çŒ«çŒ«çš„å†™å¡å°å·¥å…· v${version}.json?_=${timestamp}`;
    const jsonResponse = await fetch(jsonUrl);

    if (!jsonResponse.ok) {
      throw new Error(`ä¸‹è½½å¤±è´¥: HTTP ${jsonResponse.status}`);
    }

    const jsonContent = await jsonResponse.text();

    // 3. åˆ›å»ºä¸‹è½½é“¾æ¥
    const blob = new Blob([jsonContent], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `çŒ«çŒ«çš„å†™å¡å°å·¥å…· v${version}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    window.toastr.success(
      `v${version} å·²ä¸‹è½½å®Œæˆï¼Œè¯·åœ¨é…’é¦†è„šæœ¬åº“é‡æ–°å¯¼å…¥è¯¥æ–‡ä»¶`,
      'ä¸‹è½½æˆåŠŸ',
      { timeOut: 8000 },
    );
  } catch (error: any) {
    console.error('ä¸‹è½½å¤±è´¥:', error);
    window.toastr.error('ä¸‹è½½å¤±è´¥: ' + error.message, 'é”™è¯¯', { timeOut: 5000 });
  }
};
</script>

<style scoped>
.help-tab ::-webkit-scrollbar {
  width: 8px;
}

.help-tab ::-webkit-scrollbar-track {
  background: #2a2a2a;
  border-radius: 4px;
}

.help-tab ::-webkit-scrollbar-thumb {
  background: #4a9eff;
  border-radius: 4px;
}

.help-tab ::-webkit-scrollbar-thumb:hover {
  background: #3a8edf;
}

.help-tab ul {
  list-style-type: none;
  position: relative;
}

.help-tab ul li {
  position: relative;
  padding-left: 20px;
  margin-bottom: 8px;
}

.help-tab ul li::before {
  content: 'â–¸';
  position: absolute;
  left: 0;
  color: #4a9eff;
  font-weight: bold;
}

.help-tab a {
  transition: color 0.2s;
}

.help-tab a:hover {
  color: #3a8edf !important;
}
</style>
